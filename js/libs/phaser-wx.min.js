var PIXI=PIXI||{};PIXI.game=null;PIXI.WEBGL_RENDERER=0;PIXI.CANVAS_RENDERER=1;PIXI.VERSION="v2.2.9";PIXI._UID=0;if(typeof(Float32Array)!="undefined"){PIXI.Float32Array=Float32Array;PIXI.Uint16Array=Uint16Array;PIXI.Uint32Array=Uint32Array;PIXI.ArrayBuffer=ArrayBuffer}else{PIXI.Float32Array=Array;PIXI.Uint16Array=Array}PIXI.PI_2=Math.PI*2;PIXI.RAD_TO_DEG=180/Math.PI;PIXI.DEG_TO_RAD=Math.PI/180;PIXI.RETINA_PREFIX="@2x";PIXI.DisplayObject=function(){this.position=new PIXI.Point(0,0);this.scale=new PIXI.Point(1,1);this.pivot=new PIXI.Point(0,0);this.rotation=0;this.alpha=1;this.visible=true;this.hitArea=null;this.renderable=false;this.parent=null;this.worldAlpha=1;this.worldTransform=new PIXI.Matrix();this.worldPosition=new PIXI.Point(0,0);this.worldScale=new PIXI.Point(1,1);this.worldRotation=0;this.filterArea=null;this._sr=0;this._cr=1;this._bounds=new PIXI.Rectangle(0,0,0,0);this._currentBounds=null;this._mask=null;this._cacheAsBitmap=false;this._cacheIsDirty=false};PIXI.DisplayObject.prototype.constructor=PIXI.DisplayObject;PIXI.DisplayObject.prototype={destroy:function(){if(this.children){var a=this.children.length;while(a--){this.children[a].destroy()}this.children=[]}this.hitArea=null;this.parent=null;this.worldTransform=null;this.filterArea=null;this.renderable=false;this._bounds=null;this._currentBounds=null;this._mask=null;this._destroyCachedSprite()},updateTransform:function(m){if(!m&&!this.parent&&!this.game){return this}var e=this.parent;if(m){e=m}else{if(!this.parent){e=this.game.world}}var n=e.worldTransform;var h=this.worldTransform;var l,k,j,i,g,f;if(this.rotation%PIXI.PI_2){if(this.rotation!==this.rotationCache){this.rotationCache=this.rotation;this._sr=Math.sin(this.rotation);this._cr=Math.cos(this.rotation)}l=this._cr*this.scale.x;k=this._sr*this.scale.x;j=-this._sr*this.scale.y;i=this._cr*this.scale.y;g=this.position.x;f=this.position.y;if(this.pivot.x||this.pivot.y){g-=this.pivot.x*l+this.pivot.y*j;f-=this.pivot.x*k+this.pivot.y*i}h.a=l*n.a+k*n.c;h.b=l*n.b+k*n.d;h.c=j*n.a+i*n.c;h.d=j*n.b+i*n.d;h.tx=g*n.a+f*n.c+n.tx;h.ty=g*n.b+f*n.d+n.ty}else{l=this.scale.x;i=this.scale.y;g=this.position.x-this.pivot.x*l;f=this.position.y-this.pivot.y*i;h.a=l*n.a;h.b=l*n.b;h.c=i*n.c;h.d=i*n.d;h.tx=g*n.a+f*n.c+n.tx;h.ty=g*n.b+f*n.d+n.ty}this.worldAlpha=this.alpha*e.worldAlpha;this.worldPosition.set(h.tx,h.ty);this.worldScale.set(this.scale.x*Math.sqrt(h.a*h.a+h.c*h.c),this.scale.y*Math.sqrt(h.b*h.b+h.d*h.d));this.worldRotation=Math.atan2(-h.c,h.d);this._currentBounds=null;if(this.transformCallback){this.transformCallback.call(this.transformCallbackContext,h,n)}return this},preUpdate:function(){},generateTexture:function(b,c,e){var d=this.getLocalBounds();var a=new PIXI.RenderTexture(d.width|0,d.height|0,e,c,b);PIXI.DisplayObject._tempMatrix.tx=-d.x;PIXI.DisplayObject._tempMatrix.ty=-d.y;a.render(this,PIXI.DisplayObject._tempMatrix);return a},updateCache:function(){this._generateCachedSprite();return this},toGlobal:function(a){this.updateTransform();return this.worldTransform.apply(a)},toLocal:function(a,b){if(b){a=b.toGlobal(a)}this.updateTransform();return this.worldTransform.applyInverse(a)},_renderCachedSprite:function(a){this._cachedSprite.worldAlpha=this.worldAlpha;if(a.gl){PIXI.Sprite.prototype._renderWebGL.call(this._cachedSprite,a)}else{PIXI.Sprite.prototype._renderCanvas.call(this._cachedSprite,a)}},_generateCachedSprite:function(){this._cacheAsBitmap=false;var c=this.getLocalBounds();c.width=Math.max(1,Math.ceil(c.width));c.height=Math.max(1,Math.ceil(c.height));this.updateTransform();if(!this._cachedSprite){var a=new PIXI.RenderTexture(c.width,c.height);this._cachedSprite=new PIXI.Sprite(a);this._cachedSprite.worldTransform=this.worldTransform}else{this._cachedSprite.texture.resize(c.width,c.height)}var b=this._filters;this._filters=null;this._cachedSprite.filters=b;PIXI.DisplayObject._tempMatrix.tx=-c.x;PIXI.DisplayObject._tempMatrix.ty=-c.y;this._cachedSprite.texture.render(this,PIXI.DisplayObject._tempMatrix,true);this._cachedSprite.anchor.x=-(c.x/c.width);this._cachedSprite.anchor.y=-(c.y/c.height);this._filters=b;this._cacheAsBitmap=true},_destroyCachedSprite:function(){if(!this._cachedSprite){return}this._cachedSprite.texture.destroy(true);this._cachedSprite=null}};PIXI.DisplayObject.prototype.displayObjectUpdateTransform=PIXI.DisplayObject.prototype.updateTransform;Object.defineProperties(PIXI.DisplayObject.prototype,{"x":{get:function(){return this.position.x},set:function(a){this.position.x=a}},"y":{get:function(){return this.position.y},set:function(a){this.position.y=a}},"worldVisible":{get:function(){if(!this.visible){return false}else{var a=this.parent;if(!a){return this.visible}else{do{if(!a.visible){return false}a=a.parent}while(a)}return true}}},"mask":{get:function(){return this._mask},set:function(a){if(this._mask){this._mask.isMask=false}this._mask=a;if(a){this._mask.isMask=true}}},"filters":{get:function(){return this._filters},set:function(d){if(Array.isArray(d)){var c=[];for(var b=0;
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         b<d.length;b++){var e=d[b].passes;for(var a=0;a<e.length;a++){c.push(e[a])}}this._filterBlock={target:this,filterPasses:c}}this._filters=d;if(this.blendMode&&this.blendMode===PIXI.blendModes.MULTIPLY){this.blendMode=PIXI.blendModes.NORMAL}}},"cacheAsBitmap":{get:function(){return this._cacheAsBitmap},set:function(a){if(this._cacheAsBitmap===a){return}if(a){this._generateCachedSprite()}else{this._destroyCachedSprite()}this._cacheAsBitmap=a}}});PIXI.DisplayObjectContainer=function(){PIXI.DisplayObject.call(this);this.children=[];this.ignoreChildInput=false};PIXI.DisplayObjectContainer.prototype=Object.create(PIXI.DisplayObject.prototype);PIXI.DisplayObjectContainer.prototype.constructor=PIXI.DisplayObjectContainer;PIXI.DisplayObjectContainer.prototype.addChild=function(a){return this.addChildAt(a,this.children.length)};PIXI.DisplayObjectContainer.prototype.addChildAt=function(b,a){if(a>=0&&a<=this.children.length){if(b.parent){b.parent.removeChild(b)}b.parent=this;this.children.splice(a,0,b);return b}else{throw new Error(b+"addChildAt: The index "+a+" supplied is out of bounds "+this.children.length)}};PIXI.DisplayObjectContainer.prototype.swapChildren=function(d,a){if(d===a){return}var c=this.getChildIndex(d);var b=this.getChildIndex(a);if(c<0||b<0){throw new Error("swapChildren: Both the supplied DisplayObjects must be a child of the caller.")}this.children[c]=a;this.children[b]=d};PIXI.DisplayObjectContainer.prototype.getChildIndex=function(b){var a=this.children.indexOf(b);if(a===-1){throw new Error("The supplied DisplayObject must be a child of the caller")}return a};PIXI.DisplayObjectContainer.prototype.setChildIndex=function(c,b){if(b<0||b>=this.children.length){throw new Error("The supplied index is out of bounds")}var a=this.getChildIndex(c);this.children.splice(a,1);this.children.splice(b,0,c)};PIXI.DisplayObjectContainer.prototype.getChildAt=function(a){if(a<0||a>=this.children.length){throw new Error("getChildAt: Supplied index "+a+" does not exist in the child list, or the supplied DisplayObject must be a child of the caller")}return this.children[a]};PIXI.DisplayObjectContainer.prototype.removeChild=function(b){var a=this.children.indexOf(b);if(a===-1){return}return this.removeChildAt(a)};PIXI.DisplayObjectContainer.prototype.removeChildAt=function(a){var b=this.getChildAt(a);if(b){b.parent=undefined;this.children.splice(a,1)}return b};PIXI.DisplayObjectContainer.prototype.removeChildren=function(c,d){if(c===undefined){c=0}if(d===undefined){d=this.children.length}var a=d-c;if(a>0&&a<=d){var e=this.children.splice(begin,a);for(var b=0;b<e.length;b++){var f=e[b];f.parent=undefined}return e}else{if(a===0&&this.children.length===0){return[]}else{throw new Error("removeChildren: Range Error, numeric values are outside the acceptable range")}}};PIXI.DisplayObjectContainer.prototype.updateTransform=function(){if(!this.visible){return}this.displayObjectUpdateTransform();if(this._cacheAsBitmap){return}for(var a=0;a<this.children.length;a++){this.children[a].updateTransform()}};PIXI.DisplayObjectContainer.prototype.displayObjectContainerUpdateTransform=PIXI.DisplayObjectContainer.prototype.updateTransform;PIXI.DisplayObjectContainer.prototype.getBounds=function(N){var B=(N&&N instanceof PIXI.DisplayObject);var w=true;if(!B){N=this}else{if(N instanceof PIXI.DisplayObjectContainer){w=N.contains(this)}else{w=false}}var y;if(B){var t=N.worldTransform;N.worldTransform=PIXI.identityMatrix;for(y=0;y<N.children.length;y++){N.children[y].updateTransform()}}var I=Infinity;var F=Infinity;var G=-Infinity;var C=-Infinity;var E;var n;var l;var s=false;for(y=0;y<this.children.length;y++){var k=this.children[y];if(!k.visible){continue}s=true;E=this.children[y].getBounds();I=(I<E.x)?I:E.x;F=(F<E.y)?F:E.y;n=E.width+E.x;l=E.height+E.y;G=(G>n)?G:n;C=(C>l)?C:l}var m=this._bounds;if(!s){m=new PIXI.Rectangle();var r=m.x;var q=m.width+m.x;var p=m.y;var o=m.height+m.y;var u=this.worldTransform;var M=u.a;var K=u.b;var H=u.c;var D=u.d;var L=u.tx;var J=u.ty;var A=M*q+H*o+L;var h=D*o+K*q+J;var z=M*r+H*o+L;var g=D*o+K*r+J;var x=M*r+H*p+L;var f=D*p+K*r+J;var v=M*q+H*p+L;var e=D*p+K*q+J;G=A;C=h;I=A;F=h;I=z<I?z:I;I=x<I?x:I;I=v<I?v:I;F=g<F?g:F;F=f<F?f:F;F=e<F?e:F;G=z>G?z:G;G=x>G?x:G;G=v>G?v:G;C=g>C?g:C;C=f>C?f:C;C=e>C?e:C}m.x=I;m.y=F;m.width=G-I;m.height=C-F;if(B){N.worldTransform=t;for(y=0;y<N.children.length;y++){N.children[y].updateTransform()}}if(!w){var j=N.getBounds();m.x-=j.x;m.y-=j.y}return m};PIXI.DisplayObjectContainer.prototype.getLocalBounds=function(){return this.getBounds(this)};PIXI.DisplayObjectContainer.prototype.contains=function(a){if(!a){return false}else{if(a===this){return true}else{return this.contains(a.parent)}}};PIXI.DisplayObjectContainer.prototype._renderWebGL=function(b){if(!this.visible||this.alpha<=0){return}if(this._cacheAsBitmap){this._renderCachedSprite(b);return}var a;if(this._mask||this._filters){if(this._filters){b.spriteBatch.flush();b.filterManager.pushFilter(this._filterBlock)}if(this._mask){b.spriteBatch.stop();
	b.maskManager.pushMask(this.mask,b);b.spriteBatch.start()}for(a=0;a<this.children.length;a++){this.children[a]._renderWebGL(b)}b.spriteBatch.stop();if(this._mask){b.maskManager.popMask(this._mask,b)}if(this._filters){b.filterManager.popFilter()}b.spriteBatch.start()}else{for(a=0;a<this.children.length;a++){this.children[a]._renderWebGL(b)}}};PIXI.DisplayObjectContainer.prototype._renderCanvas=function(b){if(this.visible===false||this.alpha===0){return}if(this._cacheAsBitmap){this._renderCachedSprite(b);return}if(this._mask){b.maskManager.pushMask(this._mask,b)}for(var a=0;a<this.children.length;a++){this.children[a]._renderCanvas(b)}if(this._mask){b.maskManager.popMask(b)}};Object.defineProperty(PIXI.DisplayObjectContainer.prototype,"width",{get:function(){return this.getLocalBounds().width*this.scale.x},set:function(b){var a=this.getLocalBounds().width;if(a!==0){this.scale.x=b/a}else{this.scale.x=1}this._width=b}});Object.defineProperty(PIXI.DisplayObjectContainer.prototype,"height",{get:function(){return this.getLocalBounds().height*this.scale.y},set:function(b){var a=this.getLocalBounds().height;if(a!==0){this.scale.y=b/a}else{this.scale.y=1}this._height=b}});PIXI.Sprite=function(a){PIXI.DisplayObjectContainer.call(this);this.anchor=new PIXI.Point();this.texture=a||PIXI.Texture.emptyTexture;this._width=0;this._height=0;this.tint=16777215;this.cachedTint=-1;this.tintedTexture=null;this.blendMode=PIXI.blendModes.NORMAL;this.shader=null;this.exists=true;if(this.texture.baseTexture.hasLoaded){this.onTextureUpdate()}this.renderable=true};PIXI.Sprite.prototype=Object.create(PIXI.DisplayObjectContainer.prototype);PIXI.Sprite.prototype.constructor=PIXI.Sprite;Object.defineProperty(PIXI.Sprite.prototype,"width",{get:function(){return this.scale.x*this.texture.frame.width},set:function(a){this.scale.x=a/this.texture.frame.width;this._width=a}});Object.defineProperty(PIXI.Sprite.prototype,"height",{get:function(){return this.scale.y*this.texture.frame.height},set:function(a){this.scale.y=a/this.texture.frame.height;this._height=a}});PIXI.Sprite.prototype.setTexture=function(b,a){if(a!==undefined){this.texture.baseTexture.destroy()}this.texture.baseTexture.skipRender=false;this.texture=b;this.texture.valid=true;this.cachedTint=-1};PIXI.Sprite.prototype.onTextureUpdate=function(){if(this._width){this.scale.x=this._width/this.texture.frame.width}if(this._height){this.scale.y=this._height/this.texture.frame.height}};PIXI.Sprite.prototype.getBounds=function(r){var o=this.texture.frame.width;var n=this.texture.frame.height;var m=o*(1-this.anchor.x);var l=o*-this.anchor.x;var k=n*(1-this.anchor.y);var j=n*-this.anchor.y;var p=r||this.worldTransform;var E=p.a;var C=p.b;var A=p.c;var y=p.d;var F=p.tx;var D=p.ty;var z=-Infinity;var v=-Infinity;var B=Infinity;var x=Infinity;if(C===0&&A===0){if(E<0){E*=-1;var w=m;m=-l;l=-w}if(y<0){y*=-1;var w=k;k=-j;j=-w}B=E*l+F;z=E*m+F;x=y*j+D;v=y*k+D}else{var u=E*l+A*j+F;var h=y*j+C*l+D;var t=E*m+A*j+F;var g=y*j+C*m+D;var s=E*m+A*k+F;var f=y*k+C*m+D;var q=E*l+A*k+F;var e=y*k+C*l+D;B=u<B?u:B;B=t<B?t:B;B=s<B?s:B;B=q<B?q:B;x=h<x?h:x;x=g<x?g:x;x=f<x?f:x;x=e<x?e:x;z=u>z?u:z;z=t>z?t:z;z=s>z?s:z;z=q>z?q:z;v=h>v?h:v;v=g>v?g:v;v=f>v?f:v;v=e>v?e:v}var i=this._bounds;i.x=B;i.width=z-B;i.y=x;i.height=v-x;this._currentBounds=i;return i};PIXI.Sprite.prototype.getLocalBounds=function(){var a=this.worldTransform;this.worldTransform=PIXI.identityMatrix;for(var b=0;b<this.children.length;b++){this.children[b].updateTransform()}var c=this.getBounds();this.worldTransform=a;for(b=0;b<this.children.length;b++){this.children[b].updateTransform()}return c};PIXI.Sprite.prototype._renderWebGL=function(e,c){if(!this.visible||this.alpha<=0||!this.renderable){return}var a=this.worldTransform;if(c){a=c}if(this._mask||this._filters){var b=e.spriteBatch;if(this._filters){b.flush();e.filterManager.pushFilter(this._filterBlock)}if(this._mask){b.stop();e.maskManager.pushMask(this.mask,e);b.start()}b.render(this);for(var d=0;d<this.children.length;d++){this.children[d]._renderWebGL(e)}b.stop();if(this._mask){e.maskManager.popMask(this._mask,e)}if(this._filters){e.filterManager.popFilter()}b.start()}else{e.spriteBatch.render(this);for(var d=0;d<this.children.length;d++){this.children[d]._renderWebGL(e,a)}}};PIXI.Sprite.prototype._renderCanvas=function(l,k){if(!this.visible||this.alpha===0||!this.renderable||this.texture.crop.width<=0||this.texture.crop.height<=0){return}var j=this.worldTransform;if(k){j=k}if(this.blendMode!==l.currentBlendMode){l.currentBlendMode=this.blendMode;l.context.globalCompositeOperation=PIXI.blendModesCanvas[l.currentBlendMode]}if(this._mask){l.maskManager.pushMask(this._mask,l)}if(this.texture.valid){var c=this.texture.baseTexture.resolution/l.resolution;l.context.globalAlpha=this.worldAlpha;if(l.smoothProperty&&l.scaleMode!==this.texture.baseTexture.scaleMode){l.scaleMode=this.texture.baseTexture.scaleMode;l.context[l.smoothProperty]=(l.scaleMode===PIXI.scaleModes.LINEAR)}var n=(this.texture.trim)?this.texture.trim.x-this.anchor.x*this.texture.trim.width:this.anchor.x*-this.texture.frame.width;
	var m=(this.texture.trim)?this.texture.trim.y-this.anchor.y*this.texture.trim.height:this.anchor.y*-this.texture.frame.height;var h=(j.tx*l.resolution)+l.shakeX;var f=(j.ty*l.resolution)+l.shakeY;if(l.roundPixels){l.context.setTransform(j.a,j.b,j.c,j.d,h|0,f|0);n|=0;m|=0}else{l.context.setTransform(j.a,j.b,j.c,j.d,h,f)}var e=this.texture.crop.width;var a=this.texture.crop.height;n/=c;m/=c;if(this.tint!==16777215){if(this.texture.requiresReTint||this.cachedTint!==this.tint){this.tintedTexture=PIXI.CanvasTinter.getTintedTexture(this,this.tint);this.cachedTint=this.tint;this.texture.requiresReTint=false}l.context.drawImage(this.tintedTexture,0,0,e,a,n,m,e/c,a/c)}else{var d=this.texture.crop.x;var b=this.texture.crop.y;l.context.drawImage(this.texture.baseTexture.source,d,b,e,a,n,m,e/c,a/c)}}for(var g=0;g<this.children.length;g++){this.children[g]._renderCanvas(l)}if(this._mask){l.maskManager.popMask(l)}};PIXI.SpriteBatch=function(a){PIXI.DisplayObjectContainer.call(this);this.textureThing=a;this.ready=false};PIXI.SpriteBatch.prototype=Object.create(PIXI.DisplayObjectContainer.prototype);PIXI.SpriteBatch.prototype.constructor=PIXI.SpriteBatch;PIXI.SpriteBatch.prototype.initWebGL=function(a){this.fastSpriteBatch=new PIXI.WebGLFastSpriteBatch(a);this.ready=true};PIXI.SpriteBatch.prototype.updateTransform=function(){this.displayObjectUpdateTransform()};PIXI.SpriteBatch.prototype._renderWebGL=function(a){if(!this.visible||this.alpha<=0||!this.children.length){return}if(!this.ready){this.initWebGL(a.gl)}if(this.fastSpriteBatch.gl!==a.gl){this.fastSpriteBatch.setContext(a.gl)}a.spriteBatch.stop();a.shaderManager.setShader(a.shaderManager.fastShader);this.fastSpriteBatch.begin(this,a);this.fastSpriteBatch.render(this);a.spriteBatch.start()};PIXI.SpriteBatch.prototype._renderCanvas=function(l){if(!this.visible||this.alpha<=0||!this.children.length){return}var a=l.context;a.globalAlpha=this.worldAlpha;this.displayObjectUpdateTransform();var d=this.worldTransform;var k=true;for(var g=0;g<this.children.length;g++){var b=this.children[g];if(!b.visible){continue}var j=b.texture;var c=j.frame;a.globalAlpha=this.worldAlpha*b.alpha;if(b.rotation%(Math.PI*2)===0){if(k){a.setTransform(d.a,d.b,d.c,d.d,d.tx,d.ty);k=false}a.drawImage(j.baseTexture.source,c.x,c.y,c.width,c.height,((b.anchor.x)*(-c.width*b.scale.x)+b.position.x+0.5+l.shakeX)|0,((b.anchor.y)*(-c.height*b.scale.y)+b.position.y+0.5+l.shakeY)|0,c.width*b.scale.x,c.height*b.scale.y)}else{if(!k){k=true}b.displayObjectUpdateTransform();var h=b.worldTransform;var f=(h.tx*l.resolution)+l.shakeX;var e=(h.ty*l.resolution)+l.shakeY;if(l.roundPixels){a.setTransform(h.a,h.b,h.c,h.d,f|0,e|0)}else{a.setTransform(h.a,h.b,h.c,h.d,f,e)}a.drawImage(j.baseTexture.source,c.x,c.y,c.width,c.height,((b.anchor.x)*(-c.width)+0.5)|0,((b.anchor.y)*(-c.height)+0.5)|0,c.width,c.height)}}};PIXI.hex2rgb=function(a){return[(a>>16&255)/255,(a>>8&255)/255,(a&255)/255]};PIXI.rgb2hex=function(a){return((a[0]*255<<16)+(a[1]*255<<8)+a[2]*255)};PIXI.canUseNewCanvasBlendModes=function(){if(document===undefined){return false}var b="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAQAAAABAQMAAADD8p2OAAAAA1BMVEX/";var f="AAAACklEQVQI12NgAAAAAgAB4iG8MwAAAABJRU5ErkJggg==";var a=new Image();a.src=b+"AP804Oa6"+f;var g=new Image();g.src=b+"/wCKxvRF"+f;var c=PIXI.CanvasPool.create(this,6,1);var d=c.getContext("2d");d.globalCompositeOperation="multiply";d.drawImage(a,0,0);d.drawImage(g,2,0);if(!d.getImageData(2,0,1,1)){return false}var e=d.getImageData(2,0,1,1).data;PIXI.CanvasPool.remove(this);return(e[0]===255&&e[1]===0&&e[2]===0)};PIXI.getNextPowerOfTwo=function(b){if(b>0&&(b&(b-1))===0){return b}else{var a=1;while(a<b){a<<=1}return a}};PIXI.isPowerOfTwo=function(b,a){return(b>0&&(b&(b-1))===0&&a>0&&(a&(a-1))===0)};PIXI.CanvasPool={create:function(f,e,b){var a=PIXI.CanvasPool.getFirst();var d;if(a===-1){var c={parent:f,canvas:document.createElement("canvas")};PIXI.CanvasPool.pool.push(c);d=c.canvas}else{PIXI.CanvasPool.pool[a].parent=f;d=PIXI.CanvasPool.pool[a].canvas}if(e!==undefined){d.width=e;d.height=b}return d},getFirst:function(){var b=PIXI.CanvasPool.pool;for(var a=0;a<b.length;a++){if(!b[a].parent){return a}}return -1},remove:function(c){var b=PIXI.CanvasPool.pool;for(var a=0;a<b.length;a++){if(b[a].parent===c){b[a].parent=null;b[a].canvas.width=1;b[a].canvas.height=1}}},removeByCanvas:function(a){var c=PIXI.CanvasPool.pool;for(var b=0;b<c.length;b++){if(c[b].canvas===a){c[b].parent=null;c[b].canvas.width=1;c[b].canvas.height=1}}},getTotal:function(){var b=PIXI.CanvasPool.pool;var d=0;for(var a=0;a<b.length;a++){if(b[a].parent){d++}}return d},getFree:function(){var b=PIXI.CanvasPool.pool;var d=0;for(var a=0;a<b.length;a++){if(!b[a].parent){d++}}return d}};PIXI.CanvasPool.pool=[];PIXI.initDefaultShaders=function(){};PIXI.CompileVertexShader=function(b,a){return PIXI._CompileShader(b,a,b.VERTEX_SHADER)};PIXI.CompileFragmentShader=function(b,a){return PIXI._CompileShader(b,a,b.FRAGMENT_SHADER)};PIXI._CompileShader=function(e,d,c){var b=d;
	if(Array.isArray(d)){b=d.join("\n")}var a=e.createShader(c);e.shaderSource(a,b);e.compileShader(a);if(!e.getShaderParameter(a,e.COMPILE_STATUS)){window.console.log(e.getShaderInfoLog(a));return null}return a};PIXI.compileProgram=function(e,a,c){var b=PIXI.CompileFragmentShader(e,c);var d=PIXI.CompileVertexShader(e,a);var f=e.createProgram();e.attachShader(f,d);e.attachShader(f,b);e.linkProgram(f);if(!e.getProgramParameter(f,e.LINK_STATUS)){window.console.log(e.getProgramInfoLog(f));window.console.log("Could not initialise shaders")}return f};PIXI.PixiShader=function(a){this._UID=PIXI._UID++;this.gl=a;this.program=null;this.fragmentSrc=["precision lowp float;","varying vec2 vTextureCoord;","varying vec4 vColor;","uniform sampler2D uSampler;","void main(void) {","   gl_FragColor = texture2D(uSampler, vTextureCoord) * vColor ;","}"];this.textureCount=0;this.firstRun=true;this.dirty=true;this.attributes=[];this.init()};PIXI.PixiShader.prototype.constructor=PIXI.PixiShader;PIXI.PixiShader.prototype.init=function(){var c=this.gl;var a=PIXI.compileProgram(c,this.vertexSrc||PIXI.PixiShader.defaultVertexSrc,this.fragmentSrc);c.useProgram(a);this.uSampler=c.getUniformLocation(a,"uSampler");this.projectionVector=c.getUniformLocation(a,"projectionVector");this.offsetVector=c.getUniformLocation(a,"offsetVector");this.dimensions=c.getUniformLocation(a,"dimensions");this.aVertexPosition=c.getAttribLocation(a,"aVertexPosition");this.aTextureCoord=c.getAttribLocation(a,"aTextureCoord");this.colorAttribute=c.getAttribLocation(a,"aColor");if(this.colorAttribute===-1){this.colorAttribute=2}this.attributes=[this.aVertexPosition,this.aTextureCoord,this.colorAttribute];for(var b in this.uniforms){this.uniforms[b].uniformLocation=c.getUniformLocation(a,b)}this.initUniforms();this.program=a};PIXI.PixiShader.prototype.initUniforms=function(){this.textureCount=1;var d=this.gl;var a;for(var b in this.uniforms){a=this.uniforms[b];var c=a.type;if(c==="sampler2D"){a._init=false;if(a.value!==null){this.initSampler2D(a)}}else{if(c==="mat2"||c==="mat3"||c==="mat4"){a.glMatrix=true;a.glValueLength=1;if(c==="mat2"){a.glFunc=d.uniformMatrix2fv}else{if(c==="mat3"){a.glFunc=d.uniformMatrix3fv}else{if(c==="mat4"){a.glFunc=d.uniformMatrix4fv}}}}else{a.glFunc=d["uniform"+c];if(c==="2f"||c==="2i"){a.glValueLength=2}else{if(c==="3f"||c==="3i"){a.glValueLength=3}else{if(c==="4f"||c==="4i"){a.glValueLength=4}else{a.glValueLength=1}}}}}}};PIXI.PixiShader.prototype.initSampler2D=function(c){if(!c.value||!c.value.baseTexture||!c.value.baseTexture.hasLoaded){return}var h=this.gl;h.activeTexture(h["TEXTURE"+this.textureCount]);h.bindTexture(h.TEXTURE_2D,c.value.baseTexture._glTextures[h.id]);if(c.textureData){var f=c.textureData;var j=(f.magFilter)?f.magFilter:h.LINEAR;var b=(f.minFilter)?f.minFilter:h.LINEAR;var g=(f.wrapS)?f.wrapS:h.CLAMP_TO_EDGE;var e=(f.wrapT)?f.wrapT:h.CLAMP_TO_EDGE;var i=(f.luminance)?h.LUMINANCE:h.RGBA;if(f.repeat){g=h.REPEAT;e=h.REPEAT}h.pixelStorei(h.UNPACK_FLIP_Y_WEBGL,!!f.flipY);if(f.width){var a=(f.width)?f.width:512;var k=(f.height)?f.height:2;var d=(f.border)?f.border:0;h.texImage2D(h.TEXTURE_2D,0,i,a,k,d,i,h.UNSIGNED_BYTE,null)}else{h.texImage2D(h.TEXTURE_2D,0,i,h.RGBA,h.UNSIGNED_BYTE,c.value.baseTexture.source)}h.texParameteri(h.TEXTURE_2D,h.TEXTURE_MAG_FILTER,j);h.texParameteri(h.TEXTURE_2D,h.TEXTURE_MIN_FILTER,b);h.texParameteri(h.TEXTURE_2D,h.TEXTURE_WRAP_S,g);h.texParameteri(h.TEXTURE_2D,h.TEXTURE_WRAP_T,e)}h.uniform1i(c.uniformLocation,this.textureCount);c._init=true;this.textureCount++};PIXI.PixiShader.prototype.syncUniforms=function(){this.textureCount=1;var a;var c=this.gl;for(var b in this.uniforms){a=this.uniforms[b];if(a.glValueLength===1){if(a.glMatrix===true){a.glFunc.call(c,a.uniformLocation,a.transpose,a.value)}else{a.glFunc.call(c,a.uniformLocation,a.value)}}else{if(a.glValueLength===2){a.glFunc.call(c,a.uniformLocation,a.value.x,a.value.y)}else{if(a.glValueLength===3){a.glFunc.call(c,a.uniformLocation,a.value.x,a.value.y,a.value.z)}else{if(a.glValueLength===4){a.glFunc.call(c,a.uniformLocation,a.value.x,a.value.y,a.value.z,a.value.w)}else{if(a.type==="sampler2D"){if(a._init){c.activeTexture(c["TEXTURE"+this.textureCount]);if(a.value.baseTexture._dirty[c.id]){PIXI.instances[c.id].updateTexture(a.value.baseTexture)}else{c.bindTexture(c.TEXTURE_2D,a.value.baseTexture._glTextures[c.id])}c.uniform1i(a.uniformLocation,this.textureCount);this.textureCount++}else{this.initSampler2D(a)}}}}}}}};PIXI.PixiShader.prototype.destroy=function(){this.gl.deleteProgram(this.program);this.uniforms=null;this.gl=null;this.attributes=null};PIXI.PixiShader.defaultVertexSrc=["attribute vec2 aVertexPosition;","attribute vec2 aTextureCoord;","attribute vec4 aColor;","uniform vec2 projectionVector;","uniform vec2 offsetVector;","varying vec2 vTextureCoord;","varying vec4 vColor;","const vec2 center = vec2(-1.0, 1.0);","void main(void) {","   gl_Position = vec4( ((aVertexPosition + offsetVector) / projectionVector) + center , 0.0, 1.0);","   vTextureCoord = aTextureCoord;","   vColor = vec4(aColor.rgb * aColor.a, aColor.a);","}"];
PIXI.PixiFastShader=function(a){this._UID=PIXI._UID++;this.gl=a;this.program=null;this.fragmentSrc=["precision lowp float;","varying vec2 vTextureCoord;","varying float vColor;","uniform sampler2D uSampler;","void main(void) {","   gl_FragColor = texture2D(uSampler, vTextureCoord) * vColor ;","}"];this.vertexSrc=["attribute vec2 aVertexPosition;","attribute vec2 aPositionCoord;","attribute vec2 aScale;","attribute float aRotation;","attribute vec2 aTextureCoord;","attribute float aColor;","uniform vec2 projectionVector;","uniform vec2 offsetVector;","uniform mat3 uMatrix;","varying vec2 vTextureCoord;","varying float vColor;","const vec2 center = vec2(-1.0, 1.0);","void main(void) {","   vec2 v;","   vec2 sv = aVertexPosition * aScale;","   v.x = (sv.x) * cos(aRotation) - (sv.y) * sin(aRotation);","   v.y = (sv.x) * sin(aRotation) + (sv.y) * cos(aRotation);","   v = ( uMatrix * vec3(v + aPositionCoord , 1.0) ).xy ;","   gl_Position = vec4( ( v / projectionVector) + center , 0.0, 1.0);","   vTextureCoord = aTextureCoord;","   vColor = aColor;","}"];this.textureCount=0;this.init()};PIXI.PixiFastShader.prototype.constructor=PIXI.PixiFastShader;PIXI.PixiFastShader.prototype.init=function(){var b=this.gl;var a=PIXI.compileProgram(b,this.vertexSrc,this.fragmentSrc);b.useProgram(a);this.uSampler=b.getUniformLocation(a,"uSampler");this.projectionVector=b.getUniformLocation(a,"projectionVector");this.offsetVector=b.getUniformLocation(a,"offsetVector");this.dimensions=b.getUniformLocation(a,"dimensions");this.uMatrix=b.getUniformLocation(a,"uMatrix");this.aVertexPosition=b.getAttribLocation(a,"aVertexPosition");this.aPositionCoord=b.getAttribLocation(a,"aPositionCoord");this.aScale=b.getAttribLocation(a,"aScale");this.aRotation=b.getAttribLocation(a,"aRotation");this.aTextureCoord=b.getAttribLocation(a,"aTextureCoord");this.colorAttribute=b.getAttribLocation(a,"aColor");if(this.colorAttribute===-1){this.colorAttribute=2}this.attributes=[this.aVertexPosition,this.aPositionCoord,this.aScale,this.aRotation,this.aTextureCoord,this.colorAttribute];this.program=a};PIXI.PixiFastShader.prototype.destroy=function(){this.gl.deleteProgram(this.program);this.uniforms=null;this.gl=null;this.attributes=null};PIXI.StripShader=function(a){this._UID=PIXI._UID++;this.gl=a;this.program=null;this.fragmentSrc=["precision mediump float;","varying vec2 vTextureCoord;","uniform float alpha;","uniform sampler2D uSampler;","void main(void) {","   gl_FragColor = texture2D(uSampler, vec2(vTextureCoord.x, vTextureCoord.y)) * alpha;","}"];this.vertexSrc=["attribute vec2 aVertexPosition;","attribute vec2 aTextureCoord;","uniform mat3 translationMatrix;","uniform vec2 projectionVector;","uniform vec2 offsetVector;","varying vec2 vTextureCoord;","void main(void) {","   vec3 v = translationMatrix * vec3(aVertexPosition , 1.0);","   v -= offsetVector.xyx;","   gl_Position = vec4( v.x / projectionVector.x -1.0, v.y / -projectionVector.y + 1.0 , 0.0, 1.0);","   vTextureCoord = aTextureCoord;","}"];this.init()};PIXI.StripShader.prototype.constructor=PIXI.StripShader;PIXI.StripShader.prototype.init=function(){var b=this.gl;var a=PIXI.compileProgram(b,this.vertexSrc,this.fragmentSrc);b.useProgram(a);this.uSampler=b.getUniformLocation(a,"uSampler");this.projectionVector=b.getUniformLocation(a,"projectionVector");this.offsetVector=b.getUniformLocation(a,"offsetVector");this.colorAttribute=b.getAttribLocation(a,"aColor");this.aVertexPosition=b.getAttribLocation(a,"aVertexPosition");this.aTextureCoord=b.getAttribLocation(a,"aTextureCoord");this.attributes=[this.aVertexPosition,this.aTextureCoord];this.translationMatrix=b.getUniformLocation(a,"translationMatrix");this.alpha=b.getUniformLocation(a,"alpha");this.program=a};PIXI.StripShader.prototype.destroy=function(){this.gl.deleteProgram(this.program);this.uniforms=null;this.gl=null;this.attribute=null};PIXI.PrimitiveShader=function(a){this._UID=PIXI._UID++;this.gl=a;this.program=null;this.fragmentSrc=["precision mediump float;","varying vec4 vColor;","void main(void) {","   gl_FragColor = vColor;","}"];this.vertexSrc=["attribute vec2 aVertexPosition;","attribute vec4 aColor;","uniform mat3 translationMatrix;","uniform vec2 projectionVector;","uniform vec2 offsetVector;","uniform float alpha;","uniform float flipY;","uniform vec3 tint;","varying vec4 vColor;","void main(void) {","   vec3 v = translationMatrix * vec3(aVertexPosition , 1.0);","   v -= offsetVector.xyx;","   gl_Position = vec4( v.x / projectionVector.x -1.0, (v.y / projectionVector.y * -flipY) + flipY , 0.0, 1.0);","   vColor = aColor * vec4(tint * alpha, alpha);","}"];this.init()};PIXI.PrimitiveShader.prototype.constructor=PIXI.PrimitiveShader;PIXI.PrimitiveShader.prototype.init=function(){var b=this.gl;var a=PIXI.compileProgram(b,this.vertexSrc,this.fragmentSrc);b.useProgram(a);this.projectionVector=b.getUniformLocation(a,"projectionVector");this.offsetVector=b.getUniformLocation(a,"offsetVector");this.tintColor=b.getUniformLocation(a,"tint");this.flipY=b.getUniformLocation(a,"flipY");
	this.aVertexPosition=b.getAttribLocation(a,"aVertexPosition");this.colorAttribute=b.getAttribLocation(a,"aColor");this.attributes=[this.aVertexPosition,this.colorAttribute];this.translationMatrix=b.getUniformLocation(a,"translationMatrix");this.alpha=b.getUniformLocation(a,"alpha");this.program=a};PIXI.PrimitiveShader.prototype.destroy=function(){this.gl.deleteProgram(this.program);this.uniforms=null;this.gl=null;this.attributes=null};PIXI.ComplexPrimitiveShader=function(a){this._UID=PIXI._UID++;this.gl=a;this.program=null;this.fragmentSrc=["precision mediump float;","varying vec4 vColor;","void main(void) {","   gl_FragColor = vColor;","}"];this.vertexSrc=["attribute vec2 aVertexPosition;","uniform mat3 translationMatrix;","uniform vec2 projectionVector;","uniform vec2 offsetVector;","uniform vec3 tint;","uniform float alpha;","uniform vec3 color;","uniform float flipY;","varying vec4 vColor;","void main(void) {","   vec3 v = translationMatrix * vec3(aVertexPosition , 1.0);","   v -= offsetVector.xyx;","   gl_Position = vec4( v.x / projectionVector.x -1.0, (v.y / projectionVector.y * -flipY) + flipY , 0.0, 1.0);","   vColor = vec4(color * alpha * tint, alpha);","}"];this.init()};PIXI.ComplexPrimitiveShader.prototype.constructor=PIXI.ComplexPrimitiveShader;PIXI.ComplexPrimitiveShader.prototype.init=function(){var b=this.gl;var a=PIXI.compileProgram(b,this.vertexSrc,this.fragmentSrc);b.useProgram(a);this.projectionVector=b.getUniformLocation(a,"projectionVector");this.offsetVector=b.getUniformLocation(a,"offsetVector");this.tintColor=b.getUniformLocation(a,"tint");this.color=b.getUniformLocation(a,"color");this.flipY=b.getUniformLocation(a,"flipY");this.aVertexPosition=b.getAttribLocation(a,"aVertexPosition");this.attributes=[this.aVertexPosition,this.colorAttribute];this.translationMatrix=b.getUniformLocation(a,"translationMatrix");this.alpha=b.getUniformLocation(a,"alpha");this.program=a};PIXI.ComplexPrimitiveShader.prototype.destroy=function(){this.gl.deleteProgram(this.program);this.uniforms=null;this.gl=null;this.attribute=null};PIXI.glContexts=[];PIXI.instances=[];PIXI.WebGLRenderer=function(a){this.game=a;if(!PIXI.defaultRenderer){PIXI.defaultRenderer=this}this.type=PIXI.WEBGL_RENDERER;this.resolution=a.resolution;this.transparent=a.transparent;this.autoResize=false;this.preserveDrawingBuffer=a.preserveDrawingBuffer;this.clearBeforeRender=a.clearBeforeRender;this.width=a.width;this.height=a.height;this.view=a.canvas;this._contextOptions={alpha:this.transparent,antialias:a.antialias,premultipliedAlpha:this.transparent&&this.transparent!=="notMultiplied",stencil:true,preserveDrawingBuffer:this.preserveDrawingBuffer};this.projection=new PIXI.Point();this.offset=new PIXI.Point();this.shaderManager=new PIXI.WebGLShaderManager();this.spriteBatch=new PIXI.WebGLSpriteBatch();this.maskManager=new PIXI.WebGLMaskManager();this.filterManager=new PIXI.WebGLFilterManager();this.stencilManager=new PIXI.WebGLStencilManager();this.blendModeManager=new PIXI.WebGLBlendModeManager();this.renderSession={};this.renderSession.game=this.game;this.renderSession.gl=this.gl;this.renderSession.drawCount=0;this.renderSession.shaderManager=this.shaderManager;this.renderSession.maskManager=this.maskManager;this.renderSession.filterManager=this.filterManager;this.renderSession.blendModeManager=this.blendModeManager;this.renderSession.spriteBatch=this.spriteBatch;this.renderSession.stencilManager=this.stencilManager;this.renderSession.renderer=this;this.renderSession.resolution=this.resolution;this.initContext();this.mapBlendModes()};PIXI.WebGLRenderer.prototype.constructor=PIXI.WebGLRenderer;PIXI.WebGLRenderer.prototype.initContext=function(){var a=this.view.getContext("webgl",this._contextOptions)||this.view.getContext("experimental-webgl",this._contextOptions);this.gl=a;if(!a){throw new Error("This browser does not support webGL. Try using the canvas renderer")}this.glContextId=a.id=PIXI.WebGLRenderer.glContextId++;PIXI.glContexts[this.glContextId]=a;PIXI.instances[this.glContextId]=this;a.disable(a.DEPTH_TEST);a.disable(a.CULL_FACE);a.enable(a.BLEND);this.shaderManager.setContext(a);this.spriteBatch.setContext(a);this.maskManager.setContext(a);this.filterManager.setContext(a);this.blendModeManager.setContext(a);this.stencilManager.setContext(a);this.renderSession.gl=this.gl;this.resize(this.width,this.height)};PIXI.WebGLRenderer.prototype.render=function(a){if(this.contextLost){return}var b=this.gl;b.viewport(0,0,this.width,this.height);b.bindFramebuffer(b.FRAMEBUFFER,null);if(this.game.clearBeforeRender){b.clearColor(a._bgColor.r,a._bgColor.g,a._bgColor.b,a._bgColor.a);b.clear(b.COLOR_BUFFER_BIT)}this.offset.x=this.game.camera._shake.x;this.offset.y=this.game.camera._shake.y;this.renderDisplayObject(a,this.projection)};PIXI.WebGLRenderer.prototype.renderDisplayObject=function(d,a,b,c){this.renderSession.blendModeManager.setBlendMode(PIXI.blendModes.NORMAL);this.renderSession.drawCount=0;this.renderSession.flipY=b?-1:1;this.renderSession.projection=a;
	this.renderSession.offset=this.offset;this.spriteBatch.begin(this.renderSession);this.filterManager.begin(this.renderSession,b);d._renderWebGL(this.renderSession,c);this.spriteBatch.end()};PIXI.WebGLRenderer.prototype.resize=function(b,a){this.width=b*this.resolution;this.height=a*this.resolution;this.view.width=this.width;this.view.height=this.height;if(this.autoResize){this.view.style.width=this.width/this.resolution+"px";this.view.style.height=this.height/this.resolution+"px"}this.gl.viewport(0,0,this.width,this.height);this.projection.x=this.width/2/this.resolution;this.projection.y=-this.height/2/this.resolution};PIXI.WebGLRenderer.prototype.updateTexture=function(a){if(!a.hasLoaded){return false}var b=this.gl;if(!a._glTextures[b.id]){a._glTextures[b.id]=b.createTexture()}b.bindTexture(b.TEXTURE_2D,a._glTextures[b.id]);b.pixelStorei(b.UNPACK_PREMULTIPLY_ALPHA_WEBGL,a.premultipliedAlpha);b.texImage2D(b.TEXTURE_2D,0,b.RGBA,b.RGBA,b.UNSIGNED_BYTE,a.source);b.texParameteri(b.TEXTURE_2D,b.TEXTURE_MAG_FILTER,a.scaleMode===PIXI.scaleModes.LINEAR?b.LINEAR:b.NEAREST);if(a.mipmap&&PIXI.isPowerOfTwo(a.width,a.height)){b.texParameteri(b.TEXTURE_2D,b.TEXTURE_MIN_FILTER,a.scaleMode===PIXI.scaleModes.LINEAR?b.LINEAR_MIPMAP_LINEAR:b.NEAREST_MIPMAP_NEAREST);b.generateMipmap(b.TEXTURE_2D)}else{b.texParameteri(b.TEXTURE_2D,b.TEXTURE_MIN_FILTER,a.scaleMode===PIXI.scaleModes.LINEAR?b.LINEAR:b.NEAREST)}if(!a._powerOf2){b.texParameteri(b.TEXTURE_2D,b.TEXTURE_WRAP_S,b.CLAMP_TO_EDGE);b.texParameteri(b.TEXTURE_2D,b.TEXTURE_WRAP_T,b.CLAMP_TO_EDGE)}else{b.texParameteri(b.TEXTURE_2D,b.TEXTURE_WRAP_S,b.REPEAT);b.texParameteri(b.TEXTURE_2D,b.TEXTURE_WRAP_T,b.REPEAT)}a._dirty[b.id]=false;return true};PIXI.WebGLRenderer.prototype.destroy=function(){PIXI.glContexts[this.glContextId]=null;this.projection=null;this.offset=null;this.shaderManager.destroy();this.spriteBatch.destroy();this.maskManager.destroy();this.filterManager.destroy();this.shaderManager=null;this.spriteBatch=null;this.maskManager=null;this.filterManager=null;this.gl=null;this.renderSession=null;PIXI.CanvasPool.remove(this);PIXI.instances[this.glContextId]=null;PIXI.WebGLRenderer.glContextId--};PIXI.WebGLRenderer.prototype.mapBlendModes=function(){var d=this.gl;if(!PIXI.blendModesWebGL){var a=[];var c=PIXI.blendModes;a[c.NORMAL]=[d.ONE,d.ONE_MINUS_SRC_ALPHA];a[c.ADD]=[d.SRC_ALPHA,d.DST_ALPHA];a[c.MULTIPLY]=[d.DST_COLOR,d.ONE_MINUS_SRC_ALPHA];a[c.SCREEN]=[d.SRC_ALPHA,d.ONE];a[c.OVERLAY]=[d.ONE,d.ONE_MINUS_SRC_ALPHA];a[c.DARKEN]=[d.ONE,d.ONE_MINUS_SRC_ALPHA];a[c.LIGHTEN]=[d.ONE,d.ONE_MINUS_SRC_ALPHA];a[c.COLOR_DODGE]=[d.ONE,d.ONE_MINUS_SRC_ALPHA];a[c.COLOR_BURN]=[d.ONE,d.ONE_MINUS_SRC_ALPHA];a[c.HARD_LIGHT]=[d.ONE,d.ONE_MINUS_SRC_ALPHA];a[c.SOFT_LIGHT]=[d.ONE,d.ONE_MINUS_SRC_ALPHA];a[c.DIFFERENCE]=[d.ONE,d.ONE_MINUS_SRC_ALPHA];a[c.EXCLUSION]=[d.ONE,d.ONE_MINUS_SRC_ALPHA];a[c.HUE]=[d.ONE,d.ONE_MINUS_SRC_ALPHA];a[c.SATURATION]=[d.ONE,d.ONE_MINUS_SRC_ALPHA];a[c.COLOR]=[d.ONE,d.ONE_MINUS_SRC_ALPHA];a[c.LUMINOSITY]=[d.ONE,d.ONE_MINUS_SRC_ALPHA];PIXI.blendModesWebGL=a}};PIXI.WebGLRenderer.glContextId=0;PIXI.WebGLBlendModeManager=function(){this.currentBlendMode=99999};PIXI.WebGLBlendModeManager.prototype.constructor=PIXI.WebGLBlendModeManager;PIXI.WebGLBlendModeManager.prototype.setContext=function(a){this.gl=a};PIXI.WebGLBlendModeManager.prototype.setBlendMode=function(a){if(this.currentBlendMode===a){return false}this.currentBlendMode=a;var b=PIXI.blendModesWebGL[this.currentBlendMode];if(b){this.gl.blendFunc(b[0],b[1])}return true};PIXI.WebGLBlendModeManager.prototype.destroy=function(){this.gl=null};PIXI.WebGLMaskManager=function(){};PIXI.WebGLMaskManager.prototype.constructor=PIXI.WebGLMaskManager;PIXI.WebGLMaskManager.prototype.setContext=function(a){this.gl=a};PIXI.WebGLMaskManager.prototype.pushMask=function(b,a){var c=a.gl;if(b.dirty){PIXI.WebGLGraphics.updateGraphics(b,c)}if(b._webGL[c.id]===undefined||b._webGL[c.id].data===undefined||b._webGL[c.id].data.length===0){return}a.stencilManager.pushStencil(b,b._webGL[c.id].data[0],a)};PIXI.WebGLMaskManager.prototype.popMask=function(b,a){var c=this.gl;if(b._webGL[c.id]===undefined||b._webGL[c.id].data===undefined||b._webGL[c.id].data.length===0){return}a.stencilManager.popStencil(b,b._webGL[c.id].data[0],a)};PIXI.WebGLMaskManager.prototype.destroy=function(){this.gl=null};PIXI.WebGLStencilManager=function(){this.stencilStack=[];this.reverse=true;this.count=0};PIXI.WebGLStencilManager.prototype.setContext=function(a){this.gl=a};PIXI.WebGLStencilManager.prototype.pushStencil=function(a,d,b){var c=this.gl;this.bindGraphics(a,d,b);if(this.stencilStack.length===0){c.enable(c.STENCIL_TEST);c.clear(c.STENCIL_BUFFER_BIT);this.reverse=true;this.count=0}this.stencilStack.push(d);var e=this.count;c.colorMask(false,false,false,false);c.stencilFunc(c.ALWAYS,0,255);c.stencilOp(c.KEEP,c.KEEP,c.INVERT);if(d.mode===1){c.drawElements(c.TRIANGLE_FAN,d.indices.length-4,c.UNSIGNED_SHORT,0);if(this.reverse){c.stencilFunc(c.EQUAL,255-e,255);c.stencilOp(c.KEEP,c.KEEP,c.DECR)
}else{c.stencilFunc(c.EQUAL,e,255);c.stencilOp(c.KEEP,c.KEEP,c.INCR)}c.drawElements(c.TRIANGLE_FAN,4,c.UNSIGNED_SHORT,(d.indices.length-4)*2);if(this.reverse){c.stencilFunc(c.EQUAL,255-(e+1),255)}else{c.stencilFunc(c.EQUAL,e+1,255)}this.reverse=!this.reverse}else{if(!this.reverse){c.stencilFunc(c.EQUAL,255-e,255);c.stencilOp(c.KEEP,c.KEEP,c.DECR)}else{c.stencilFunc(c.EQUAL,e,255);c.stencilOp(c.KEEP,c.KEEP,c.INCR)}c.drawElements(c.TRIANGLE_STRIP,d.indices.length,c.UNSIGNED_SHORT,0);if(!this.reverse){c.stencilFunc(c.EQUAL,255-(e+1),255)}else{c.stencilFunc(c.EQUAL,e+1,255)}}c.colorMask(true,true,true,true);c.stencilOp(c.KEEP,c.KEEP,c.KEEP);this.count++};PIXI.WebGLStencilManager.prototype.bindGraphics=function(b,g,d){this._currentGraphics=b;var f=this.gl;var a=d.projection,e=d.offset,c;if(g.mode===1){c=d.shaderManager.complexPrimitiveShader;d.shaderManager.setShader(c);f.uniform1f(c.flipY,d.flipY);f.uniformMatrix3fv(c.translationMatrix,false,b.worldTransform.toArray(true));f.uniform2f(c.projectionVector,a.x,-a.y);f.uniform2f(c.offsetVector,-e.x,-e.y);f.uniform3fv(c.tintColor,PIXI.hex2rgb(b.tint));f.uniform3fv(c.color,g.color);f.uniform1f(c.alpha,b.worldAlpha*g.alpha);f.bindBuffer(f.ARRAY_BUFFER,g.buffer);f.vertexAttribPointer(c.aVertexPosition,2,f.FLOAT,false,4*2,0);f.bindBuffer(f.ELEMENT_ARRAY_BUFFER,g.indexBuffer)}else{c=d.shaderManager.primitiveShader;d.shaderManager.setShader(c);f.uniformMatrix3fv(c.translationMatrix,false,b.worldTransform.toArray(true));f.uniform1f(c.flipY,d.flipY);f.uniform2f(c.projectionVector,a.x,-a.y);f.uniform2f(c.offsetVector,-e.x,-e.y);f.uniform3fv(c.tintColor,PIXI.hex2rgb(b.tint));f.uniform1f(c.alpha,b.worldAlpha);f.bindBuffer(f.ARRAY_BUFFER,g.buffer);f.vertexAttribPointer(c.aVertexPosition,2,f.FLOAT,false,4*6,0);f.vertexAttribPointer(c.colorAttribute,4,f.FLOAT,false,4*6,2*4);f.bindBuffer(f.ELEMENT_ARRAY_BUFFER,g.indexBuffer)}};PIXI.WebGLStencilManager.prototype.popStencil=function(a,d,b){var c=this.gl;this.stencilStack.pop();this.count--;if(this.stencilStack.length===0){c.disable(c.STENCIL_TEST)}else{var e=this.count;this.bindGraphics(a,d,b);c.colorMask(false,false,false,false);if(d.mode===1){this.reverse=!this.reverse;if(this.reverse){c.stencilFunc(c.EQUAL,255-(e+1),255);c.stencilOp(c.KEEP,c.KEEP,c.INCR)}else{c.stencilFunc(c.EQUAL,e+1,255);c.stencilOp(c.KEEP,c.KEEP,c.DECR)}c.drawElements(c.TRIANGLE_FAN,4,c.UNSIGNED_SHORT,(d.indices.length-4)*2);c.stencilFunc(c.ALWAYS,0,255);c.stencilOp(c.KEEP,c.KEEP,c.INVERT);c.drawElements(c.TRIANGLE_FAN,d.indices.length-4,c.UNSIGNED_SHORT,0);if(!this.reverse){c.stencilFunc(c.EQUAL,255-(e),255)}else{c.stencilFunc(c.EQUAL,e,255)}}else{if(!this.reverse){c.stencilFunc(c.EQUAL,255-(e+1),255);c.stencilOp(c.KEEP,c.KEEP,c.INCR)}else{c.stencilFunc(c.EQUAL,e+1,255);c.stencilOp(c.KEEP,c.KEEP,c.DECR)}c.drawElements(c.TRIANGLE_STRIP,d.indices.length,c.UNSIGNED_SHORT,0);if(!this.reverse){c.stencilFunc(c.EQUAL,255-(e),255)}else{c.stencilFunc(c.EQUAL,e,255)}}c.colorMask(true,true,true,true);c.stencilOp(c.KEEP,c.KEEP,c.KEEP)}};PIXI.WebGLStencilManager.prototype.destroy=function(){this.stencilStack=null;this.gl=null};PIXI.WebGLShaderManager=function(){this.maxAttibs=10;this.attribState=[];this.tempAttribState=[];for(var a=0;a<this.maxAttibs;a++){this.attribState[a]=false}this.stack=[]};PIXI.WebGLShaderManager.prototype.constructor=PIXI.WebGLShaderManager;PIXI.WebGLShaderManager.prototype.setContext=function(a){this.gl=a;this.primitiveShader=new PIXI.PrimitiveShader(a);this.complexPrimitiveShader=new PIXI.ComplexPrimitiveShader(a);this.defaultShader=new PIXI.PixiShader(a);this.fastShader=new PIXI.PixiFastShader(a);this.stripShader=new PIXI.StripShader(a);this.setShader(this.defaultShader)};PIXI.WebGLShaderManager.prototype.setAttribs=function(d){var b;for(b=0;b<this.tempAttribState.length;b++){this.tempAttribState[b]=false}for(b=0;b<d.length;b++){var a=d[b];this.tempAttribState[a]=true}var c=this.gl;for(b=0;b<this.attribState.length;b++){if(this.attribState[b]!==this.tempAttribState[b]){this.attribState[b]=this.tempAttribState[b];if(this.tempAttribState[b]){c.enableVertexAttribArray(b)}else{c.disableVertexAttribArray(b)}}}};PIXI.WebGLShaderManager.prototype.setShader=function(a){if(this._currentId===a._UID){return false}this._currentId=a._UID;this.currentShader=a;this.gl.useProgram(a.program);this.setAttribs(a.attributes);return true};PIXI.WebGLShaderManager.prototype.destroy=function(){this.attribState=null;this.tempAttribState=null;this.primitiveShader.destroy();this.complexPrimitiveShader.destroy();this.defaultShader.destroy();this.fastShader.destroy();this.stripShader.destroy();this.gl=null};PIXI.WebGLSpriteBatch=function(){this.vertSize=5;this.size=2000;var a=this.size*4*4*this.vertSize;var d=this.size*6;this.vertices=new PIXI.ArrayBuffer(a);this.positions=new PIXI.Float32Array(this.vertices);this.colors=new PIXI.Uint32Array(this.vertices);this.indices=new PIXI.Uint16Array(d);this.lastIndexCount=0;for(var c=0,b=0;c<d;c+=6,b+=4){this.indices[c+0]=b+0;this.indices[c+1]=b+1;
	this.indices[c+2]=b+2;this.indices[c+3]=b+0;this.indices[c+4]=b+2;this.indices[c+5]=b+3}this.drawing=false;this.currentBatchSize=0;this.currentBaseTexture=null;this.dirty=true;this.textures=[];this.blendModes=[];this.shaders=[];this.sprites=[];this.defaultShader=new PIXI.AbstractFilter(["precision lowp float;","varying vec2 vTextureCoord;","varying vec4 vColor;","uniform sampler2D uSampler;","void main(void) {","   gl_FragColor = texture2D(uSampler, vTextureCoord) * vColor ;","}"])};PIXI.WebGLSpriteBatch.prototype.setContext=function(b){this.gl=b;this.vertexBuffer=b.createBuffer();this.indexBuffer=b.createBuffer();b.bindBuffer(b.ELEMENT_ARRAY_BUFFER,this.indexBuffer);b.bufferData(b.ELEMENT_ARRAY_BUFFER,this.indices,b.STATIC_DRAW);b.bindBuffer(b.ARRAY_BUFFER,this.vertexBuffer);b.bufferData(b.ARRAY_BUFFER,this.vertices,b.DYNAMIC_DRAW);this.currentBlendMode=99999;var a=new PIXI.PixiShader(b);a.fragmentSrc=this.defaultShader.fragmentSrc;a.uniforms={};a.init();this.defaultShader.shaders[b.id]=a};PIXI.WebGLSpriteBatch.prototype.begin=function(a){this.renderSession=a;this.shader=this.renderSession.shaderManager.defaultShader;this.start()};PIXI.WebGLSpriteBatch.prototype.end=function(){this.flush()};PIXI.WebGLSpriteBatch.prototype.render=function(r,t){var q=r.texture;var e=r.worldTransform;if(t){e=t}if(this.currentBatchSize>=this.size){this.flush();this.currentBaseTexture=q.baseTexture}var n=q._uvs;if(!n){return}var g=r.anchor.x;var f=r.anchor.y;var p,o,l,k;if(q.trim){var v=q.trim;o=v.x-g*v.width;p=o+q.crop.width;k=v.y-f*v.height;l=k+q.crop.height}else{p=(q.frame.width)*(1-g);o=(q.frame.width)*-g;l=q.frame.height*(1-f);k=q.frame.height*-f}var u=this.currentBatchSize*4*this.vertSize;var s=q.baseTexture.resolution;var B=e.a/s;var z=e.b/s;var x=e.c/s;var w=e.d/s;var A=e.tx;var y=e.ty;var m=this.colors;var j=this.positions;if(this.renderSession.roundPixels){j[u]=B*o+x*k+A|0;j[u+1]=w*k+z*o+y|0;j[u+5]=B*p+x*k+A|0;j[u+6]=w*k+z*p+y|0;j[u+10]=B*p+x*l+A|0;j[u+11]=w*l+z*p+y|0;j[u+15]=B*o+x*l+A|0;j[u+16]=w*l+z*o+y|0}else{j[u]=B*o+x*k+A;j[u+1]=w*k+z*o+y;j[u+5]=B*p+x*k+A;j[u+6]=w*k+z*p+y;j[u+10]=B*p+x*l+A;j[u+11]=w*l+z*p+y;j[u+15]=B*o+x*l+A;j[u+16]=w*l+z*o+y}j[u+2]=n.x0;j[u+3]=n.y0;j[u+7]=n.x1;j[u+8]=n.y1;j[u+12]=n.x2;j[u+13]=n.y2;j[u+17]=n.x3;j[u+18]=n.y3;var h=r.tint;m[u+4]=m[u+9]=m[u+14]=m[u+19]=(h>>16)+(h&65280)+((h&255)<<16)+(r.worldAlpha*255<<24);this.sprites[this.currentBatchSize++]=r};PIXI.WebGLSpriteBatch.prototype.renderTilingSprite=function(u){var s=u.tilingTexture;if(this.currentBatchSize>=this.size){this.flush();this.currentBaseTexture=s.baseTexture}if(!u._uvs){u._uvs=new PIXI.TextureUvs()}var o=u._uvs;var q=s.baseTexture.width;var A=s.baseTexture.height;u.tilePosition.x%=q*u.tileScaleOffset.x;u.tilePosition.y%=A*u.tileScaleOffset.y;var C=u.tilePosition.x/(q*u.tileScaleOffset.x);var B=u.tilePosition.y/(A*u.tileScaleOffset.y);var I=(u.width/q)/(u.tileScale.x*u.tileScaleOffset.x);var F=(u.height/A)/(u.tileScale.y*u.tileScaleOffset.y);o.x0=0-C;o.y0=0-B;o.x1=(1*I)-C;o.y1=0-B;o.x2=(1*I)-C;o.y2=(1*F)-B;o.x3=0-C;o.y3=(1*F)-B;var j=u.tint;var y=(j>>16)+(j&65280)+((j&255)<<16)+(u.worldAlpha*255<<24);var l=this.positions;var n=this.colors;var v=u.width;var t=u.height;var g=u.anchor.x;var f=u.anchor.y;var r=v*(1-g);var p=v*-g;var m=t*(1-f);var k=t*-f;var z=this.currentBatchSize*4*this.vertSize;var x=s.baseTexture.resolution;var e=u.worldTransform;var K=e.a/x;var H=e.b/x;var E=e.c/x;var D=e.d/x;var J=e.tx;var G=e.ty;l[z++]=K*p+E*k+J;l[z++]=D*k+H*p+G;l[z++]=o.x0;l[z++]=o.y0;n[z++]=y;l[z++]=(K*r+E*k+J);l[z++]=D*k+H*r+G;l[z++]=o.x1;l[z++]=o.y1;n[z++]=y;l[z++]=K*r+E*m+J;l[z++]=D*m+H*r+G;l[z++]=o.x2;l[z++]=o.y2;n[z++]=y;l[z++]=K*p+E*m+J;l[z++]=D*m+H*p+G;l[z++]=o.x3;l[z++]=o.y3;n[z++]=y;this.sprites[this.currentBatchSize++]=u};PIXI.WebGLSpriteBatch.prototype.flush=function(){if(this.currentBatchSize===0){return}var r=this.gl;var a;if(this.dirty){this.dirty=false;r.activeTexture(r.TEXTURE0);r.bindBuffer(r.ARRAY_BUFFER,this.vertexBuffer);r.bindBuffer(r.ELEMENT_ARRAY_BUFFER,this.indexBuffer);a=this.defaultShader.shaders[r.id];var l=this.vertSize*4;r.vertexAttribPointer(a.aVertexPosition,2,r.FLOAT,false,l,0);r.vertexAttribPointer(a.aTextureCoord,2,r.FLOAT,false,l,2*4);r.vertexAttribPointer(a.colorAttribute,4,r.UNSIGNED_BYTE,true,l,4*4)}if(this.currentBatchSize>(this.size*0.5)){r.bufferSubData(r.ARRAY_BUFFER,0,this.vertices)}else{var g=this.positions.subarray(0,this.currentBatchSize*4*this.vertSize);r.bufferSubData(r.ARRAY_BUFFER,0,g)}var p,u,f;var n=0;var e=0;var t=null;var h=this.renderSession.blendModeManager.currentBlendMode;var b=null;var d=false;var c=false;var k;for(var s=0,q=this.currentBatchSize;s<q;s++){k=this.sprites[s];if(k.tilingTexture){p=k.tilingTexture.baseTexture}else{p=k.texture.baseTexture}u=k.blendMode;f=k.shader||this.defaultShader;d=h!==u;c=b!==f;var m=p.skipRender;if(m&&k.children.length>0){m=false}if((t!==p&&!m)||d||c){this.renderBatch(t,n,e);e=s;n=0;t=p;if(d){h=u;this.renderSession.blendModeManager.setBlendMode(h)}if(c){b=f;
	a=b.shaders[r.id];if(!a){a=new PIXI.PixiShader(r);a.fragmentSrc=b.fragmentSrc;a.uniforms=b.uniforms;a.init();b.shaders[r.id]=a}this.renderSession.shaderManager.setShader(a);if(a.dirty){a.syncUniforms()}var v=this.renderSession.projection;r.uniform2f(a.projectionVector,v.x,v.y);var o=this.renderSession.offset;r.uniform2f(a.offsetVector,o.x,o.y)}}n++}this.renderBatch(t,n,e);this.currentBatchSize=0};PIXI.WebGLSpriteBatch.prototype.renderBatch=function(b,a,d){if(a===0){return}var c=this.gl;if(b._dirty[c.id]){if(!this.renderSession.renderer.updateTexture(b)){return}}else{c.bindTexture(c.TEXTURE_2D,b._glTextures[c.id])}c.drawElements(c.TRIANGLES,a*6,c.UNSIGNED_SHORT,d*6*2);this.renderSession.drawCount++};PIXI.WebGLSpriteBatch.prototype.stop=function(){this.flush();this.dirty=true};PIXI.WebGLSpriteBatch.prototype.start=function(){this.dirty=true};PIXI.WebGLSpriteBatch.prototype.destroy=function(){this.vertices=null;this.indices=null;this.gl.deleteBuffer(this.vertexBuffer);this.gl.deleteBuffer(this.indexBuffer);this.currentBaseTexture=null;this.gl=null};PIXI.WebGLFastSpriteBatch=function(e){this.vertSize=10;this.maxSize=6000;this.size=this.maxSize;var a=this.size*4*this.vertSize;var d=this.maxSize*6;this.vertices=new PIXI.Float32Array(a);this.indices=new PIXI.Uint16Array(d);this.vertexBuffer=null;this.indexBuffer=null;this.lastIndexCount=0;for(var c=0,b=0;c<d;c+=6,b+=4){this.indices[c+0]=b+0;this.indices[c+1]=b+1;this.indices[c+2]=b+2;this.indices[c+3]=b+0;this.indices[c+4]=b+2;this.indices[c+5]=b+3}this.drawing=false;this.currentBatchSize=0;this.currentBaseTexture=null;this.currentBlendMode=0;this.renderSession=null;this.shader=null;this.matrix=null;this.setContext(e)};PIXI.WebGLFastSpriteBatch.prototype.constructor=PIXI.WebGLFastSpriteBatch;PIXI.WebGLFastSpriteBatch.prototype.setContext=function(a){this.gl=a;this.vertexBuffer=a.createBuffer();this.indexBuffer=a.createBuffer();a.bindBuffer(a.ELEMENT_ARRAY_BUFFER,this.indexBuffer);a.bufferData(a.ELEMENT_ARRAY_BUFFER,this.indices,a.STATIC_DRAW);a.bindBuffer(a.ARRAY_BUFFER,this.vertexBuffer);a.bufferData(a.ARRAY_BUFFER,this.vertices,a.DYNAMIC_DRAW)};PIXI.WebGLFastSpriteBatch.prototype.begin=function(a,b){this.renderSession=b;this.shader=this.renderSession.shaderManager.fastShader;this.matrix=a.worldTransform.toArray(true);this.start()};PIXI.WebGLFastSpriteBatch.prototype.end=function(){this.flush()};PIXI.WebGLFastSpriteBatch.prototype.render=function(a){var e=a.children;var d=e[0];if(!d.texture._uvs){return}this.currentBaseTexture=d.texture.baseTexture;if(d.blendMode!==this.renderSession.blendModeManager.currentBlendMode){this.flush();this.renderSession.blendModeManager.setBlendMode(d.blendMode)}for(var c=0,b=e.length;c<b;c++){this.renderSprite(e[c])}this.flush()};PIXI.WebGLFastSpriteBatch.prototype.renderSprite=function(j){if(!j.visible){return}if(j.texture.baseTexture!==this.currentBaseTexture&&!j.texture.baseTexture.skipRender){this.flush();this.currentBaseTexture=j.texture.baseTexture;if(!j.texture._uvs){return}}var c,g=this.vertices,a,k,e,d,i,h,f;c=j.texture._uvs;a=j.texture.frame.width;k=j.texture.frame.height;if(j.texture.trim){var b=j.texture.trim;d=b.x-j.anchor.x*b.width;e=d+j.texture.crop.width;h=b.y-j.anchor.y*b.height;i=h+j.texture.crop.height}else{e=(j.texture.frame.width)*(1-j.anchor.x);d=(j.texture.frame.width)*-j.anchor.x;i=j.texture.frame.height*(1-j.anchor.y);h=j.texture.frame.height*-j.anchor.y}f=this.currentBatchSize*4*this.vertSize;g[f++]=d;g[f++]=h;g[f++]=j.position.x;g[f++]=j.position.y;g[f++]=j.scale.x;g[f++]=j.scale.y;g[f++]=j.rotation;g[f++]=c.x0;g[f++]=c.y1;g[f++]=j.alpha;g[f++]=e;g[f++]=h;g[f++]=j.position.x;g[f++]=j.position.y;g[f++]=j.scale.x;g[f++]=j.scale.y;g[f++]=j.rotation;g[f++]=c.x1;g[f++]=c.y1;g[f++]=j.alpha;g[f++]=e;g[f++]=i;g[f++]=j.position.x;g[f++]=j.position.y;g[f++]=j.scale.x;g[f++]=j.scale.y;g[f++]=j.rotation;g[f++]=c.x2;g[f++]=c.y2;g[f++]=j.alpha;g[f++]=d;g[f++]=i;g[f++]=j.position.x;g[f++]=j.position.y;g[f++]=j.scale.x;g[f++]=j.scale.y;g[f++]=j.rotation;g[f++]=c.x3;g[f++]=c.y3;g[f++]=j.alpha;this.currentBatchSize++;if(this.currentBatchSize>=this.size){this.flush()}};PIXI.WebGLFastSpriteBatch.prototype.flush=function(){if(this.currentBatchSize===0){return}var b=this.gl;if(!this.currentBaseTexture._glTextures[b.id]){this.renderSession.renderer.updateTexture(this.currentBaseTexture,b)}b.bindTexture(b.TEXTURE_2D,this.currentBaseTexture._glTextures[b.id]);if(this.currentBatchSize>(this.size*0.5)){b.bufferSubData(b.ARRAY_BUFFER,0,this.vertices)}else{var a=this.vertices.subarray(0,this.currentBatchSize*4*this.vertSize);b.bufferSubData(b.ARRAY_BUFFER,0,a)}b.drawElements(b.TRIANGLES,this.currentBatchSize*6,b.UNSIGNED_SHORT,0);this.currentBatchSize=0;this.renderSession.drawCount++};PIXI.WebGLFastSpriteBatch.prototype.stop=function(){this.flush()};PIXI.WebGLFastSpriteBatch.prototype.start=function(){var c=this.gl;c.activeTexture(c.TEXTURE0);c.bindBuffer(c.ARRAY_BUFFER,this.vertexBuffer);c.bindBuffer(c.ELEMENT_ARRAY_BUFFER,this.indexBuffer);
	var a=this.renderSession.projection;c.uniform2f(this.shader.projectionVector,a.x,a.y);c.uniformMatrix3fv(this.shader.uMatrix,false,this.matrix);var b=this.vertSize*4;c.vertexAttribPointer(this.shader.aVertexPosition,2,c.FLOAT,false,b,0);c.vertexAttribPointer(this.shader.aPositionCoord,2,c.FLOAT,false,b,2*4);c.vertexAttribPointer(this.shader.aScale,2,c.FLOAT,false,b,4*4);c.vertexAttribPointer(this.shader.aRotation,1,c.FLOAT,false,b,6*4);c.vertexAttribPointer(this.shader.aTextureCoord,2,c.FLOAT,false,b,7*4);c.vertexAttribPointer(this.shader.colorAttribute,1,c.FLOAT,false,b,9*4)};PIXI.WebGLFilterManager=function(){this.filterStack=[];this.offsetX=0;this.offsetY=0};PIXI.WebGLFilterManager.prototype.constructor=PIXI.WebGLFilterManager;PIXI.WebGLFilterManager.prototype.setContext=function(a){this.gl=a;this.texturePool=[];this.initShaderBuffers()};PIXI.WebGLFilterManager.prototype.begin=function(c,b){this.renderSession=c;this.defaultShader=c.shaderManager.defaultShader;var a=this.renderSession.projection;this.width=a.x*2;this.height=-a.y*2;this.buffer=b};PIXI.WebGLFilterManager.prototype.pushFilter=function(b){var h=this.gl;var a=this.renderSession.projection;var g=this.renderSession.offset;b._filterArea=b.target.filterArea||b.target.getBounds();b._previous_stencil_mgr=this.renderSession.stencilManager;this.renderSession.stencilManager=new PIXI.WebGLStencilManager();this.renderSession.stencilManager.setContext(h);h.disable(h.STENCIL_TEST);this.filterStack.push(b);var c=b.filterPasses[0];this.offsetX+=b._filterArea.x;this.offsetY+=b._filterArea.y;var d=this.texturePool.pop();if(!d){d=new PIXI.FilterTexture(this.gl,this.width*this.renderSession.resolution,this.height*this.renderSession.resolution)}else{d.resize(this.width*this.renderSession.resolution,this.height*this.renderSession.resolution)}h.bindTexture(h.TEXTURE_2D,d.texture);var e=b._filterArea;var f=c.padding;e.x-=f;e.y-=f;e.width+=f*2;e.height+=f*2;if(e.x<0){e.x=0}if(e.width>this.width){e.width=this.width}if(e.y<0){e.y=0}if(e.height>this.height){e.height=this.height}h.bindFramebuffer(h.FRAMEBUFFER,d.frameBuffer);h.viewport(0,0,e.width*this.renderSession.resolution,e.height*this.renderSession.resolution);a.x=e.width/2;a.y=-e.height/2;g.x=-e.x;g.y=-e.y;h.colorMask(true,true,true,true);h.clearColor(0,0,0,0);h.clear(h.COLOR_BUFFER_BIT);b._glFilterTexture=d};PIXI.WebGLFilterManager.prototype.popFilter=function(){var n=this.gl;var k=this.filterStack.pop();var t=k._filterArea;var h=k._glFilterTexture;var u=this.renderSession.projection;var d=this.renderSession.offset;if(k.filterPasses.length>1){n.viewport(0,0,t.width*this.renderSession.resolution,t.height*this.renderSession.resolution);n.bindBuffer(n.ARRAY_BUFFER,this.vertexBuffer);this.vertexArray[0]=0;this.vertexArray[1]=t.height;this.vertexArray[2]=t.width;this.vertexArray[3]=t.height;this.vertexArray[4]=0;this.vertexArray[5]=0;this.vertexArray[6]=t.width;this.vertexArray[7]=0;n.bufferSubData(n.ARRAY_BUFFER,0,this.vertexArray);n.bindBuffer(n.ARRAY_BUFFER,this.uvBuffer);this.uvArray[2]=t.width/this.width;this.uvArray[5]=t.height/this.height;this.uvArray[6]=t.width/this.width;this.uvArray[7]=t.height/this.height;n.bufferSubData(n.ARRAY_BUFFER,0,this.uvArray);var p=h;var b=this.texturePool.pop();if(!b){b=new PIXI.FilterTexture(this.gl,this.width*this.renderSession.resolution,this.height*this.renderSession.resolution)}b.resize(this.width*this.renderSession.resolution,this.height*this.renderSession.resolution);n.bindFramebuffer(n.FRAMEBUFFER,b.frameBuffer);n.clear(n.COLOR_BUFFER_BIT);n.disable(n.BLEND);for(var o=0;o<k.filterPasses.length-1;o++){var c=k.filterPasses[o];n.bindFramebuffer(n.FRAMEBUFFER,b.frameBuffer);n.activeTexture(n.TEXTURE0);n.bindTexture(n.TEXTURE_2D,p.texture);this.applyFilterPass(c,t,t.width,t.height);var s=p;p=b;b=s}n.enable(n.BLEND);h=p;this.texturePool.push(b)}var g=k.filterPasses[k.filterPasses.length-1];this.offsetX-=t.x;this.offsetY-=t.y;var l=this.width;var j=this.height;var r=0;var q=0;var m=this.buffer;if(this.filterStack.length===0){n.colorMask(true,true,true,true)}else{var a=this.filterStack[this.filterStack.length-1];t=a._filterArea;l=t.width;j=t.height;r=t.x;q=t.y;m=a._glFilterTexture.frameBuffer}u.x=l/2;u.y=-j/2;d.x=r;d.y=q;t=k._filterArea;var f=t.x-r;var e=t.y-q;n.bindBuffer(n.ARRAY_BUFFER,this.vertexBuffer);this.vertexArray[0]=f;this.vertexArray[1]=e+t.height;this.vertexArray[2]=f+t.width;this.vertexArray[3]=e+t.height;this.vertexArray[4]=f;this.vertexArray[5]=e;this.vertexArray[6]=f+t.width;this.vertexArray[7]=e;n.bufferSubData(n.ARRAY_BUFFER,0,this.vertexArray);n.bindBuffer(n.ARRAY_BUFFER,this.uvBuffer);this.uvArray[2]=t.width/this.width;this.uvArray[5]=t.height/this.height;this.uvArray[6]=t.width/this.width;this.uvArray[7]=t.height/this.height;n.bufferSubData(n.ARRAY_BUFFER,0,this.uvArray);n.viewport(0,0,l*this.renderSession.resolution,j*this.renderSession.resolution);n.bindFramebuffer(n.FRAMEBUFFER,m);n.activeTexture(n.TEXTURE0);n.bindTexture(n.TEXTURE_2D,h.texture);if(this.renderSession.stencilManager){this.renderSession.stencilManager.destroy()
}this.renderSession.stencilManager=k._previous_stencil_mgr;k._previous_stencil_mgr=null;if(this.renderSession.stencilManager.count>0){n.enable(n.STENCIL_TEST)}else{n.disable(n.STENCIL_TEST)}this.applyFilterPass(g,t,l,j);this.texturePool.push(h);k._glFilterTexture=null};PIXI.WebGLFilterManager.prototype.applyFilterPass=function(c,e,b,a){var f=this.gl;var d=c.shaders[f.id];if(!d){d=new PIXI.PixiShader(f);d.fragmentSrc=c.fragmentSrc;d.uniforms=c.uniforms;d.init();c.shaders[f.id]=d}this.renderSession.shaderManager.setShader(d);f.uniform2f(d.projectionVector,b/2,-a/2);f.uniform2f(d.offsetVector,0,0);if(c.uniforms.dimensions){c.uniforms.dimensions.value[0]=this.width;c.uniforms.dimensions.value[1]=this.height;c.uniforms.dimensions.value[2]=this.vertexArray[0];c.uniforms.dimensions.value[3]=this.vertexArray[5]}d.syncUniforms();f.bindBuffer(f.ARRAY_BUFFER,this.vertexBuffer);f.vertexAttribPointer(d.aVertexPosition,2,f.FLOAT,false,0,0);f.bindBuffer(f.ARRAY_BUFFER,this.uvBuffer);f.vertexAttribPointer(d.aTextureCoord,2,f.FLOAT,false,0,0);f.bindBuffer(f.ARRAY_BUFFER,this.colorBuffer);f.vertexAttribPointer(d.colorAttribute,2,f.FLOAT,false,0,0);f.bindBuffer(f.ELEMENT_ARRAY_BUFFER,this.indexBuffer);f.drawElements(f.TRIANGLES,6,f.UNSIGNED_SHORT,0);this.renderSession.drawCount++};PIXI.WebGLFilterManager.prototype.initShaderBuffers=function(){var a=this.gl;this.vertexBuffer=a.createBuffer();this.uvBuffer=a.createBuffer();this.colorBuffer=a.createBuffer();this.indexBuffer=a.createBuffer();this.vertexArray=new PIXI.Float32Array([0,0,1,0,0,1,1,1]);a.bindBuffer(a.ARRAY_BUFFER,this.vertexBuffer);a.bufferData(a.ARRAY_BUFFER,this.vertexArray,a.STATIC_DRAW);this.uvArray=new PIXI.Float32Array([0,0,1,0,0,1,1,1]);a.bindBuffer(a.ARRAY_BUFFER,this.uvBuffer);a.bufferData(a.ARRAY_BUFFER,this.uvArray,a.STATIC_DRAW);this.colorArray=new PIXI.Float32Array([1,16777215,1,16777215,1,16777215,1,16777215]);a.bindBuffer(a.ARRAY_BUFFER,this.colorBuffer);a.bufferData(a.ARRAY_BUFFER,this.colorArray,a.STATIC_DRAW);a.bindBuffer(a.ELEMENT_ARRAY_BUFFER,this.indexBuffer);a.bufferData(a.ELEMENT_ARRAY_BUFFER,new Uint16Array([0,1,2,1,3,2]),a.STATIC_DRAW)};PIXI.WebGLFilterManager.prototype.destroy=function(){var b=this.gl;this.filterStack=null;this.offsetX=0;this.offsetY=0;for(var a=0;a<this.texturePool.length;a++){this.texturePool[a].destroy()}this.texturePool=null;b.deleteBuffer(this.vertexBuffer);b.deleteBuffer(this.uvBuffer);b.deleteBuffer(this.colorBuffer);b.deleteBuffer(this.indexBuffer)};PIXI.FilterTexture=function(d,c,a,b){this.gl=d;this.frameBuffer=d.createFramebuffer();this.texture=d.createTexture();b=b||PIXI.scaleModes.DEFAULT;d.bindTexture(d.TEXTURE_2D,this.texture);d.texParameteri(d.TEXTURE_2D,d.TEXTURE_MAG_FILTER,b===PIXI.scaleModes.LINEAR?d.LINEAR:d.NEAREST);d.texParameteri(d.TEXTURE_2D,d.TEXTURE_MIN_FILTER,b===PIXI.scaleModes.LINEAR?d.LINEAR:d.NEAREST);d.texParameteri(d.TEXTURE_2D,d.TEXTURE_WRAP_S,d.CLAMP_TO_EDGE);d.texParameteri(d.TEXTURE_2D,d.TEXTURE_WRAP_T,d.CLAMP_TO_EDGE);d.bindFramebuffer(d.FRAMEBUFFER,this.frameBuffer);d.bindFramebuffer(d.FRAMEBUFFER,this.frameBuffer);d.framebufferTexture2D(d.FRAMEBUFFER,d.COLOR_ATTACHMENT0,d.TEXTURE_2D,this.texture,0);this.renderBuffer=d.createRenderbuffer();d.bindRenderbuffer(d.RENDERBUFFER,this.renderBuffer);d.framebufferRenderbuffer(d.FRAMEBUFFER,d.DEPTH_STENCIL_ATTACHMENT,d.RENDERBUFFER,this.renderBuffer);this.resize(c,a)};PIXI.FilterTexture.prototype.constructor=PIXI.FilterTexture;PIXI.FilterTexture.prototype.clear=function(){var a=this.gl;a.clearColor(0,0,0,0);a.clear(a.COLOR_BUFFER_BIT)};PIXI.FilterTexture.prototype.resize=function(b,a){if(this.width===b&&this.height===a){return}this.width=b;this.height=a;var c=this.gl;c.bindTexture(c.TEXTURE_2D,this.texture);c.texImage2D(c.TEXTURE_2D,0,c.RGBA,b,a,0,c.RGBA,c.UNSIGNED_BYTE,null);c.bindRenderbuffer(c.RENDERBUFFER,this.renderBuffer);c.renderbufferStorage(c.RENDERBUFFER,c.DEPTH_STENCIL,b,a)};PIXI.FilterTexture.prototype.destroy=function(){var a=this.gl;a.deleteFramebuffer(this.frameBuffer);a.deleteTexture(this.texture);this.frameBuffer=null;this.texture=null};PIXI.CanvasBuffer=function(b,a){this.width=b;this.height=a;this.canvas=PIXI.CanvasPool.create(this,this.width,this.height);this.context=this.canvas.getContext("2d");this.canvas.width=b;this.canvas.height=a};PIXI.CanvasBuffer.prototype.constructor=PIXI.CanvasBuffer;PIXI.CanvasBuffer.prototype.clear=function(){this.context.setTransform(1,0,0,1,0,0);this.context.clearRect(0,0,this.width,this.height)};PIXI.CanvasBuffer.prototype.resize=function(b,a){this.width=this.canvas.width=b;this.height=this.canvas.height=a};PIXI.CanvasBuffer.prototype.destroy=function(){PIXI.CanvasPool.remove(this)};PIXI.CanvasMaskManager=function(){};PIXI.CanvasMaskManager.prototype.constructor=PIXI.CanvasMaskManager;PIXI.CanvasMaskManager.prototype.pushMask=function(f,e){var d=e.context;d.save();var a=f.alpha;var c=f.worldTransform;var b=e.resolution;d.setTransform(c.a*b,c.b*b,c.c*b,c.d*b,c.tx*b,c.ty*b);PIXI.CanvasGraphics.renderGraphicsMask(f,d);
	d.clip();f.worldAlpha=a};PIXI.CanvasMaskManager.prototype.popMask=function(a){a.context.restore()};PIXI.CanvasTinter=function(){};PIXI.CanvasTinter.getTintedTexture=function(c,a){var b=c.tintedTexture||PIXI.CanvasPool.create(this);PIXI.CanvasTinter.tintMethod(c.texture,a,b);return b};PIXI.CanvasTinter.tintWithMultiply=function(e,a,b){var c=b.getContext("2d");var d=e.crop;if(b.width!==d.width||b.height!==d.height){b.width=d.width;b.height=d.height}c.clearRect(0,0,d.width,d.height);c.fillStyle="#"+("00000"+(a|0).toString(16)).substr(-6);c.fillRect(0,0,d.width,d.height);c.globalCompositeOperation="multiply";c.drawImage(e.baseTexture.source,d.x,d.y,d.width,d.height,0,0,d.width,d.height);c.globalCompositeOperation="destination-atop";c.drawImage(e.baseTexture.source,d.x,d.y,d.width,d.height,0,0,d.width,d.height)};PIXI.CanvasTinter.tintWithPerPixel=function(n,j,e){var d=e.getContext("2d");var l=n.crop;e.width=l.width;e.height=l.height;d.globalCompositeOperation="copy";d.drawImage(n.baseTexture.source,l.x,l.y,l.width,l.height,0,0,l.width,l.height);var c=PIXI.hex2rgb(j);var a=c[0],m=c[1],o=c[2];var p=d.getImageData(0,0,l.width,l.height);var f=p.data;for(var k=0;k<f.length;k+=4){f[k+0]*=a;f[k+1]*=m;f[k+2]*=o;if(!PIXI.CanvasTinter.canHandleAlpha){var h=f[k+3];f[k+0]/=255/h;f[k+1]/=255/h;f[k+2]/=255/h}}d.putImageData(p,0,0)};PIXI.CanvasTinter.checkInverseAlpha=function(){var b=new PIXI.CanvasBuffer(2,1);b.context.fillStyle="rgba(10, 20, 30, 0.5)";b.context.fillRect(0,0,1,1);var c=b.context.getImageData(0,0,1,1);if(c===null){return false}b.context.putImageData(c,1,0);var a=b.context.getImageData(1,0,1,1);return(a.data[0]===c.data[0]&&a.data[1]===c.data[1]&&a.data[2]===c.data[2]&&a.data[3]===c.data[3])};PIXI.CanvasTinter.canHandleAlpha=PIXI.CanvasTinter.checkInverseAlpha();PIXI.CanvasTinter.canUseMultiply=PIXI.canUseNewCanvasBlendModes();PIXI.CanvasTinter.tintMethod=PIXI.CanvasTinter.canUseMultiply?PIXI.CanvasTinter.tintWithMultiply:PIXI.CanvasTinter.tintWithPerPixel;PIXI.CanvasRenderer=function(a){this.game=a;if(!PIXI.defaultRenderer){PIXI.defaultRenderer=this}this.type=PIXI.CANVAS_RENDERER;this.resolution=a.resolution;this.clearBeforeRender=a.clearBeforeRender;this.transparent=a.transparent;this.autoResize=false;this.width=a.width*this.resolution;this.height=a.height*this.resolution;this.view=a.canvas;this.context=this.view.getContext("2d",{alpha:this.transparent});this.refresh=true;this.count=0;this.maskManager=new PIXI.CanvasMaskManager();this.renderSession={context:this.context,maskManager:this.maskManager,scaleMode:null,smoothProperty:Phaser.Canvas.getSmoothingPrefix(this.context),roundPixels:false};this.mapBlendModes();this.resize(this.width,this.height)};PIXI.CanvasRenderer.prototype.constructor=PIXI.CanvasRenderer;PIXI.CanvasRenderer.prototype.render=function(a){this.context.setTransform(1,0,0,1,0,0);this.context.globalAlpha=1;this.renderSession.currentBlendMode=0;this.renderSession.shakeX=this.game.camera._shake.x;this.renderSession.shakeY=this.game.camera._shake.y;this.context.globalCompositeOperation="source-over";if(navigator.isCocoonJS&&this.view.screencanvas){this.context.fillStyle="black";this.context.clear()}if(this.clearBeforeRender){if(this.transparent){this.context.clearRect(0,0,this.width,this.height)}else{if(a._bgColor){this.context.fillStyle=a._bgColor.rgba;this.context.fillRect(0,0,this.width,this.height)}}}this.renderDisplayObject(a)};PIXI.CanvasRenderer.prototype.destroy=function(a){if(a===undefined){a=true}if(a&&this.view.parent){this.view.parent.removeChild(this.view)}this.view=null;this.context=null;this.maskManager=null;this.renderSession=null};PIXI.CanvasRenderer.prototype.resize=function(b,a){this.width=b*this.resolution;this.height=a*this.resolution;this.view.width=this.width;this.view.height=this.height;if(this.autoResize){this.view.style.width=this.width/this.resolution+"px";this.view.style.height=this.height/this.resolution+"px"}if(this.renderSession.smoothProperty){this.context[this.renderSession.smoothProperty]=(this.renderSession.scaleMode===PIXI.scaleModes.LINEAR)}};PIXI.CanvasRenderer.prototype.renderDisplayObject=function(c,b,a){this.renderSession.context=b||this.context;this.renderSession.resolution=this.resolution;c._renderCanvas(this.renderSession,a)};PIXI.CanvasRenderer.prototype.mapBlendModes=function(){if(!PIXI.blendModesCanvas){var a=[];var c=PIXI.blendModes;var d=PIXI.canUseNewCanvasBlendModes();a[c.NORMAL]="source-over";a[c.ADD]="lighter";a[c.MULTIPLY]=(d)?"multiply":"source-over";a[c.SCREEN]=(d)?"screen":"source-over";a[c.OVERLAY]=(d)?"overlay":"source-over";a[c.DARKEN]=(d)?"darken":"source-over";a[c.LIGHTEN]=(d)?"lighten":"source-over";a[c.COLOR_DODGE]=(d)?"color-dodge":"source-over";a[c.COLOR_BURN]=(d)?"color-burn":"source-over";a[c.HARD_LIGHT]=(d)?"hard-light":"source-over";a[c.SOFT_LIGHT]=(d)?"soft-light":"source-over";a[c.DIFFERENCE]=(d)?"difference":"source-over";a[c.EXCLUSION]=(d)?"exclusion":"source-over";a[c.HUE]=(d)?"hue":"source-over";a[c.SATURATION]=(d)?"saturation":"source-over";
	a[c.COLOR]=(d)?"color":"source-over";a[c.LUMINOSITY]=(d)?"luminosity":"source-over";PIXI.blendModesCanvas=a}};PIXI.BaseTexture=function(b,a){this.resolution=1;this.width=100;this.height=100;this.scaleMode=a||PIXI.scaleModes.DEFAULT;this.hasLoaded=false;this.source=b;this.premultipliedAlpha=true;this._glTextures=[];this.mipmap=false;this._dirty=[true,true,true,true];if(!b){return}if((this.source.complete||this.source.getContext)&&this.source.width&&this.source.height){this.hasLoaded=true;this.width=this.source.naturalWidth||this.source.width;this.height=this.source.naturalHeight||this.source.height;this.dirty()}this.skipRender=false;this._powerOf2=false};PIXI.BaseTexture.prototype.constructor=PIXI.BaseTexture;PIXI.BaseTexture.prototype.forceLoaded=function(b,a){this.hasLoaded=true;this.width=b;this.height=a;this.dirty()};PIXI.BaseTexture.prototype.destroy=function(){if(this.source){PIXI.CanvasPool.removeByCanvas(this.source)}this.source=null;this.unloadFromGPU()};PIXI.BaseTexture.prototype.updateSourceImage=function(a){console.warn("PIXI.BaseTexture.updateSourceImage is deprecated. Use Phaser.Sprite.loadTexture instead.")};PIXI.BaseTexture.prototype.dirty=function(){for(var a=0;a<this._glTextures.length;a++){this._dirty[a]=true}};PIXI.BaseTexture.prototype.unloadFromGPU=function(){this.dirty();for(var b=this._glTextures.length-1;b>=0;b--){var a=this._glTextures[b];var c=PIXI.glContexts[b];if(c&&a){c.deleteTexture(a)}}this._glTextures.length=0;this.dirty()};PIXI.BaseTexture.fromCanvas=function(a,b){if(a.width===0){a.width=1}if(a.height===0){a.height=1}return new PIXI.BaseTexture(a,b)};PIXI.TextureSilentFail=false;PIXI.Texture=function(c,d,b,a){this.noFrame=false;if(!d){this.noFrame=true;d=new PIXI.Rectangle(0,0,1,1)}if(c instanceof PIXI.Texture){c=c.baseTexture}this.baseTexture=c;this.frame=d;this.trim=a;this.valid=false;this.isTiling=false;this.requiresUpdate=false;this.requiresReTint=false;this._uvs=null;this.width=0;this.height=0;this.crop=b||new PIXI.Rectangle(0,0,1,1);if(c.hasLoaded){if(this.noFrame){d=new PIXI.Rectangle(0,0,c.width,c.height)}this.setFrame(d)}};PIXI.Texture.prototype.constructor=PIXI.Texture;PIXI.Texture.prototype.onBaseTextureLoaded=function(){var a=this.baseTexture;if(this.noFrame){this.frame=new PIXI.Rectangle(0,0,a.width,a.height)}this.setFrame(this.frame)};PIXI.Texture.prototype.destroy=function(a){if(a){this.baseTexture.destroy()}this.valid=false};PIXI.Texture.prototype.setFrame=function(a){this.noFrame=false;this.frame=a;this.width=a.width;this.height=a.height;this.crop.x=a.x;this.crop.y=a.y;this.crop.width=a.width;this.crop.height=a.height;if(!this.trim&&(a.x+a.width>this.baseTexture.width||a.y+a.height>this.baseTexture.height)){if(!PIXI.TextureSilentFail){throw new Error("Texture Error: frame does not fit inside the base Texture dimensions "+this)}this.valid=false;return}this.valid=a&&a.width&&a.height&&this.baseTexture.source&&this.baseTexture.hasLoaded;if(this.trim){this.width=this.trim.width;this.height=this.trim.height;this.frame.width=this.trim.width;this.frame.height=this.trim.height}if(this.valid){this._updateUvs()}};PIXI.Texture.prototype._updateUvs=function(){if(!this._uvs){this._uvs=new PIXI.TextureUvs()}var c=this.crop;var a=this.baseTexture.width;var b=this.baseTexture.height;this._uvs.x0=c.x/a;this._uvs.y0=c.y/b;this._uvs.x1=(c.x+c.width)/a;this._uvs.y1=c.y/b;this._uvs.x2=(c.x+c.width)/a;this._uvs.y2=(c.y+c.height)/b;this._uvs.x3=c.x/a;this._uvs.y3=(c.y+c.height)/b};PIXI.Texture.fromCanvas=function(a,b){var c=PIXI.BaseTexture.fromCanvas(a,b);return new PIXI.Texture(c)};PIXI.TextureUvs=function(){this.x0=0;this.y0=0;this.x1=0;this.y1=0;this.x2=0;this.y2=0;this.x3=0;this.y3=0};PIXI.RenderTexture=function(d,a,e,c,b){this.width=d||100;this.height=a||100;this.resolution=b||1;this.frame=new PIXI.Rectangle(0,0,this.width*this.resolution,this.height*this.resolution);this.crop=new PIXI.Rectangle(0,0,this.width*this.resolution,this.height*this.resolution);this.baseTexture=new PIXI.BaseTexture();this.baseTexture.width=this.width*this.resolution;this.baseTexture.height=this.height*this.resolution;this.baseTexture._glTextures=[];this.baseTexture.resolution=this.resolution;this.baseTexture.scaleMode=c||PIXI.scaleModes.DEFAULT;this.baseTexture.hasLoaded=true;PIXI.Texture.call(this,this.baseTexture,new PIXI.Rectangle(0,0,this.width*this.resolution,this.height*this.resolution));this.renderer=e||PIXI.defaultRenderer;if(this.renderer.type===PIXI.WEBGL_RENDERER){var f=this.renderer.gl;this.baseTexture._dirty[f.id]=false;this.textureBuffer=new PIXI.FilterTexture(f,this.width,this.height,this.baseTexture.scaleMode);this.baseTexture._glTextures[f.id]=this.textureBuffer.texture;this.render=this.renderWebGL;this.projection=new PIXI.Point(this.width*0.5,-this.height*0.5)}else{this.render=this.renderCanvas;this.textureBuffer=new PIXI.CanvasBuffer(this.width*this.resolution,this.height*this.resolution);this.baseTexture.source=this.textureBuffer.canvas}this.valid=true;this.tempMatrix=new Phaser.Matrix();
	this._updateUvs()};PIXI.RenderTexture.prototype=Object.create(PIXI.Texture.prototype);PIXI.RenderTexture.prototype.constructor=PIXI.RenderTexture;PIXI.RenderTexture.prototype.resize=function(c,a,b){if(c===this.width&&a===this.height){return}this.valid=(c>0&&a>0);this.width=c;this.height=a;this.frame.width=this.crop.width=c*this.resolution;this.frame.height=this.crop.height=a*this.resolution;if(b){this.baseTexture.width=this.width*this.resolution;this.baseTexture.height=this.height*this.resolution}if(this.renderer.type===PIXI.WEBGL_RENDERER){this.projection.x=this.width/2;this.projection.y=-this.height/2}if(!this.valid){return}this.textureBuffer.resize(this.width,this.height)};PIXI.RenderTexture.prototype.clear=function(){if(!this.valid){return}if(this.renderer.type===PIXI.WEBGL_RENDERER){this.renderer.gl.bindFramebuffer(this.renderer.gl.FRAMEBUFFER,this.textureBuffer.frameBuffer)}this.textureBuffer.clear()};PIXI.RenderTexture.prototype.renderWebGL=function(f,c,b){if(!this.valid||f.alpha===0){return}var a=f.worldTransform;a.identity();a.translate(0,this.projection.y*2);if(c){a.append(c)}a.scale(1,-1);for(var d=0;d<f.children.length;d++){f.children[d].updateTransform()}var e=this.renderer.gl;e.viewport(0,0,this.width*this.resolution,this.height*this.resolution);e.bindFramebuffer(e.FRAMEBUFFER,this.textureBuffer.frameBuffer);if(b){this.textureBuffer.clear()}this.renderer.spriteBatch.dirty=true;this.renderer.renderDisplayObject(f,this.projection,this.textureBuffer.frameBuffer,c);this.renderer.spriteBatch.dirty=true};PIXI.RenderTexture.prototype.renderCanvas=function(f,c,b){if(!this.valid||f.alpha===0){return}var a=f.worldTransform;a.identity();if(c){a.append(c)}for(var d=0;d<f.children.length;d++){f.children[d].updateTransform()}if(b){this.textureBuffer.clear()}var e=this.renderer.resolution;this.renderer.resolution=this.resolution;this.renderer.renderDisplayObject(f,this.textureBuffer.context,c);this.renderer.resolution=e};PIXI.RenderTexture.prototype.getImage=function(){var a=new Image();a.src=this.getBase64();return a};PIXI.RenderTexture.prototype.getBase64=function(){return this.getCanvas().toDataURL()};PIXI.RenderTexture.prototype.getCanvas=function(){if(this.renderer.type===PIXI.WEBGL_RENDERER){var f=this.renderer.gl;var d=this.textureBuffer.width;var a=this.textureBuffer.height;var b=new Uint8Array(4*d*a);f.bindFramebuffer(f.FRAMEBUFFER,this.textureBuffer.frameBuffer);f.readPixels(0,0,d,a,f.RGBA,f.UNSIGNED_BYTE,b);f.bindFramebuffer(f.FRAMEBUFFER,null);var e=new PIXI.CanvasBuffer(d,a);var c=e.context.getImageData(0,0,d,a);c.data.set(b);e.context.putImageData(c,0,0);return e.canvas}else{return this.textureBuffer.canvas}};PIXI.AbstractFilter=function(b,a){this.passes=[this];this.shaders=[];this.dirty=true;this.padding=0;this.uniforms=a||{};this.fragmentSrc=b||[]};PIXI.AbstractFilter.prototype.constructor=PIXI.AbstractFilter;PIXI.AbstractFilter.prototype.syncUniforms=function(){for(var b=0,a=this.shaders.length;b<a;b++){this.shaders[b].dirty=true}};PIXI.Strip=function(a){PIXI.DisplayObjectContainer.call(this);this.texture=a;this.uvs=new PIXI.Float32Array([0,1,1,1,1,0,0,1]);this.vertices=new PIXI.Float32Array([0,0,100,0,100,100,0,100]);this.colors=new PIXI.Float32Array([1,1,1,1]);this.indices=new PIXI.Uint16Array([0,1,2,3]);this.dirty=true;this.blendMode=PIXI.blendModes.NORMAL;this.canvasPadding=0;this.drawMode=PIXI.Strip.DrawModes.TRIANGLE_STRIP};PIXI.Strip.prototype=Object.create(PIXI.DisplayObjectContainer.prototype);PIXI.Strip.prototype.constructor=PIXI.Strip;PIXI.Strip.prototype._renderWebGL=function(a){if(!this.visible||this.alpha<=0){return}a.spriteBatch.stop();if(!this._vertexBuffer){this._initWebGL(a)}a.shaderManager.setShader(a.shaderManager.stripShader);this._renderStrip(a);a.spriteBatch.start()};PIXI.Strip.prototype._initWebGL=function(a){var b=a.gl;this._vertexBuffer=b.createBuffer();this._indexBuffer=b.createBuffer();this._uvBuffer=b.createBuffer();this._colorBuffer=b.createBuffer();b.bindBuffer(b.ARRAY_BUFFER,this._vertexBuffer);b.bufferData(b.ARRAY_BUFFER,this.vertices,b.DYNAMIC_DRAW);b.bindBuffer(b.ARRAY_BUFFER,this._uvBuffer);b.bufferData(b.ARRAY_BUFFER,this.uvs,b.STATIC_DRAW);b.bindBuffer(b.ARRAY_BUFFER,this._colorBuffer);b.bufferData(b.ARRAY_BUFFER,this.colors,b.STATIC_DRAW);b.bindBuffer(b.ELEMENT_ARRAY_BUFFER,this._indexBuffer);b.bufferData(b.ELEMENT_ARRAY_BUFFER,this.indices,b.STATIC_DRAW)};PIXI.Strip.prototype._renderStrip=function(d){var f=d.gl;var a=d.projection,e=d.offset,b=d.shaderManager.stripShader;var c=this.drawMode===PIXI.Strip.DrawModes.TRIANGLE_STRIP?f.TRIANGLE_STRIP:f.TRIANGLES;d.blendModeManager.setBlendMode(this.blendMode);f.uniformMatrix3fv(b.translationMatrix,false,this.worldTransform.toArray(true));f.uniform2f(b.projectionVector,a.x,-a.y);f.uniform2f(b.offsetVector,-e.x,-e.y);f.uniform1f(b.alpha,this.worldAlpha);if(!this.dirty){f.bindBuffer(f.ARRAY_BUFFER,this._vertexBuffer);f.bufferSubData(f.ARRAY_BUFFER,0,this.vertices);f.vertexAttribPointer(b.aVertexPosition,2,f.FLOAT,false,0,0);
	f.bindBuffer(f.ARRAY_BUFFER,this._uvBuffer);f.vertexAttribPointer(b.aTextureCoord,2,f.FLOAT,false,0,0);f.activeTexture(f.TEXTURE0);if(this.texture.baseTexture._dirty[f.id]){d.renderer.updateTexture(this.texture.baseTexture)}else{f.bindTexture(f.TEXTURE_2D,this.texture.baseTexture._glTextures[f.id])}f.bindBuffer(f.ELEMENT_ARRAY_BUFFER,this._indexBuffer)}else{this.dirty=false;f.bindBuffer(f.ARRAY_BUFFER,this._vertexBuffer);f.bufferData(f.ARRAY_BUFFER,this.vertices,f.STATIC_DRAW);f.vertexAttribPointer(b.aVertexPosition,2,f.FLOAT,false,0,0);f.bindBuffer(f.ARRAY_BUFFER,this._uvBuffer);f.bufferData(f.ARRAY_BUFFER,this.uvs,f.STATIC_DRAW);f.vertexAttribPointer(b.aTextureCoord,2,f.FLOAT,false,0,0);f.activeTexture(f.TEXTURE0);if(this.texture.baseTexture._dirty[f.id]){d.renderer.updateTexture(this.texture.baseTexture)}else{f.bindTexture(f.TEXTURE_2D,this.texture.baseTexture._glTextures[f.id])}f.bindBuffer(f.ELEMENT_ARRAY_BUFFER,this._indexBuffer);f.bufferData(f.ELEMENT_ARRAY_BUFFER,this.indices,f.STATIC_DRAW)}f.drawElements(c,this.indices.length,f.UNSIGNED_SHORT,0)};PIXI.Strip.prototype._renderCanvas=function(e){var d=e.context;var c=this.worldTransform;var b=(c.tx*e.resolution)+e.shakeX;var a=(c.ty*e.resolution)+e.shakeY;if(e.roundPixels){d.setTransform(c.a,c.b,c.c,c.d,b|0,a|0)}else{d.setTransform(c.a,c.b,c.c,c.d,b,a)}if(this.drawMode===PIXI.Strip.DrawModes.TRIANGLE_STRIP){this._renderCanvasTriangleStrip(d)}else{this._renderCanvasTriangles(d)}};PIXI.Strip.prototype._renderCanvasTriangleStrip=function(e){var b=this.vertices;var d=this.uvs;var f=b.length/2;this.count++;for(var c=0;c<f-2;c++){var a=c*2;this._renderCanvasDrawTriangle(e,b,d,a,(a+2),(a+4))}};PIXI.Strip.prototype._renderCanvasTriangles=function(a){var f=this.vertices;var c=this.uvs;var j=this.indices;var b=j.length;this.count++;for(var d=0;d<b;d+=3){var h=j[d]*2,g=j[d+1]*2,e=j[d+2]*2;this._renderCanvasDrawTriangle(a,f,c,h,g,e)}};PIXI.Strip.prototype._renderCanvasDrawTriangle=function(f,l,v,n,k,j){var c=this.texture.baseTexture.source;var a=this.texture.width;var w=this.texture.height;var H=l[n],G=l[k],E=l[j];var i=l[n+1],h=l[k+1],e=l[j+1];var F=v[n]*a,D=v[k]*a,C=v[j]*a;var g=v[n+1]*w,d=v[k+1]*w,b=v[j+1]*w;if(this.canvasPadding>0){var B=this.canvasPadding/this.worldTransform.a;var A=this.canvasPadding/this.worldTransform.d;var t=(H+G+E)/3;var r=(i+h+e)/3;var z=H-t;var y=i-r;var x=Math.sqrt(z*z+y*y);H=t+(z/x)*(x+B);i=r+(y/x)*(x+A);z=G-t;y=h-r;x=Math.sqrt(z*z+y*y);G=t+(z/x)*(x+B);h=r+(y/x)*(x+A);z=E-t;y=e-r;x=Math.sqrt(z*z+y*y);E=t+(z/x)*(x+B);e=r+(y/x)*(x+A)}f.save();f.beginPath();f.moveTo(H,i);f.lineTo(G,h);f.lineTo(E,e);f.closePath();f.clip();var I=(F*d)+(g*C)+(D*b)-(d*C)-(g*D)-(F*b);var u=(H*d)+(g*E)+(G*b)-(d*E)-(g*G)-(H*b);var s=(F*G)+(H*C)+(D*E)-(G*C)-(H*D)-(F*E);var q=(F*d*E)+(g*G*C)+(H*D*b)-(H*d*C)-(g*D*E)-(F*G*b);var p=(i*d)+(g*e)+(h*b)-(d*e)-(g*h)-(i*b);var o=(F*h)+(i*C)+(D*e)-(h*C)-(i*D)-(F*e);var m=(F*d*e)+(g*h*C)+(i*D*b)-(i*d*C)-(g*D*e)-(F*h*b);f.transform(u/I,p/I,s/I,o/I,q/I,m/I);f.drawImage(c,0,0);f.restore()};PIXI.Strip.prototype.renderStripFlat=function(b){var c=this.context;var j=b.vertices;var e=j.length/2;this.count++;c.beginPath();for(var g=1;g<e-2;g++){var h=g*2;var f=j[h],d=j[h+2],a=j[h+4];var m=j[h+1],l=j[h+3],k=j[h+5];c.moveTo(f,m);c.lineTo(d,l);c.lineTo(a,k)}c.fillStyle="#FF0000";c.fill();c.closePath()};PIXI.Strip.prototype.onTextureUpdate=function(){this.updateFrame=true};PIXI.Strip.prototype.getBounds=function(o){var m=o||this.worldTransform;var A=m.a;var w=m.b;var u=m.c;var r=m.d;var B=m.tx;var z=m.ty;var t=-Infinity;var q=-Infinity;var v=Infinity;var s=Infinity;var g=this.vertices;for(var p=0,l=g.length;p<l;p+=2){var f=g[p],e=g[p+1];var k=(A*f)+(u*e)+B;var j=(r*e)+(w*f)+z;v=k<v?k:v;s=j<s?j:s;t=k>t?k:t;q=j>q?j:q}if(v===-Infinity||q===Infinity){return PIXI.EmptyRectangle}var h=this._bounds;h.x=v;h.width=t-v;h.y=s;h.height=q-s;this._currentBounds=h;return h};PIXI.Strip.DrawModes={TRIANGLE_STRIP:0,TRIANGLES:1};PIXI.Rope=function(b,a){PIXI.Strip.call(this,b);this.points=a;this.vertices=new PIXI.Float32Array(a.length*4);this.uvs=new PIXI.Float32Array(a.length*4);this.colors=new PIXI.Float32Array(a.length*2);this.indices=new PIXI.Uint16Array(a.length*2);this.refresh()};PIXI.Rope.prototype=Object.create(PIXI.Strip.prototype);PIXI.Rope.prototype.constructor=PIXI.Rope;PIXI.Rope.prototype.refresh=function(){var j=this.points;if(j.length<1){return}var b=this.uvs;var g=j[0];var k=this.indices;var a=this.colors;this.count-=0.2;b[0]=0;b[1]=0;b[2]=0;b[3]=1;a[0]=1;a[1]=1;k[0]=0;k[1]=1;var f=j.length,h,e,d;for(var c=1;c<f;c++){h=j[c];e=c*4;d=c/(f-1);if(c%2){b[e]=d;b[e+1]=0;b[e+2]=d;b[e+3]=1}else{b[e]=d;b[e+1]=0;b[e+2]=d;b[e+3]=1}e=c*2;a[e]=1;a[e+1]=1;e=c*2;k[e]=e;k[e+1]=e+1;g=h}};PIXI.Rope.prototype.updateTransform=function(){var m=this.points;if(m.length<1){return}var k=m[0];var h;var a={x:0,y:0};this.count-=0.2;var f=this.vertices;var j=m.length,l,e,g,b,d;for(var c=0;c<j;c++){l=m[c];e=c*4;if(c<m.length-1){h=m[c+1]}else{h=l}a.y=-(h.x-k.x);a.x=h.y-k.y;
	g=(1-(c/(j-1)))*10;if(g>1){g=1}b=Math.sqrt(a.x*a.x+a.y*a.y);d=this.texture.height/2;a.x/=b;a.y/=b;a.x*=d;a.y*=d;f[e]=l.x+a.x;f[e+1]=l.y+a.y;f[e+2]=l.x-a.x;f[e+3]=l.y-a.y;k=l}PIXI.DisplayObjectContainer.prototype.updateTransform.call(this)};PIXI.Rope.prototype.setTexture=function(a){this.texture=a};PIXI.TilingSprite=function(c,b,a){PIXI.Sprite.call(this,c);this._width=b||128;this._height=a||128;this.tileScale=new PIXI.Point(1,1);this.tileScaleOffset=new PIXI.Point(1,1);this.tilePosition=new PIXI.Point();this.renderable=true;this.tint=16777215;this.textureDebug=false;this.blendMode=PIXI.blendModes.NORMAL;this.canvasBuffer=null;this.tilingTexture=null;this.tilePattern=null;this.refreshTexture=true;this.frameWidth=0;this.frameHeight=0};PIXI.TilingSprite.prototype=Object.create(PIXI.Sprite.prototype);PIXI.TilingSprite.prototype.constructor=PIXI.TilingSprite;PIXI.TilingSprite.prototype.setTexture=function(a){if(this.texture!==a){this.texture=a;this.refreshTexture=true;this.cachedTint=16777215}};PIXI.TilingSprite.prototype._renderWebGL=function(b){if(!this.visible||!this.renderable||this.alpha===0){return}if(this._mask){b.spriteBatch.stop();b.maskManager.pushMask(this.mask,b);b.spriteBatch.start()}if(this._filters){b.spriteBatch.flush();b.filterManager.pushFilter(this._filterBlock)}if(this.refreshTexture){this.generateTilingTexture(true,b);if(this.tilingTexture){if(this.tilingTexture.needsUpdate){b.renderer.updateTexture(this.tilingTexture.baseTexture);this.tilingTexture.needsUpdate=false}}else{return}}b.spriteBatch.renderTilingSprite(this);for(var a=0;a<this.children.length;a++){this.children[a]._renderWebGL(b)}b.spriteBatch.stop();if(this._filters){b.filterManager.popFilter()}if(this._mask){b.maskManager.popMask(this._mask,b)}b.spriteBatch.start()};PIXI.TilingSprite.prototype._renderCanvas=function(l){if(!this.visible||!this.renderable||this.alpha===0){return}var b=l.context;if(this._mask){l.maskManager.pushMask(this._mask,l)}b.globalAlpha=this.worldAlpha;var j=this.worldTransform;var c=l.resolution;var f=(j.tx*c)+l.shakeX;var d=(j.ty*c)+l.shakeY;b.setTransform(j.a*c,j.b*c,j.c*c,j.d*c,f,d);if(this.refreshTexture){this.generateTilingTexture(false,l);if(this.tilingTexture){this.tilePattern=b.createPattern(this.tilingTexture.baseTexture.source,"repeat")}else{return}}var k=l.currentBlendMode;if(this.blendMode!==l.currentBlendMode){l.currentBlendMode=this.blendMode;b.globalCompositeOperation=PIXI.blendModesCanvas[l.currentBlendMode]}var g=this.tilePosition;var m=this.tileScale;g.x%=this.tilingTexture.baseTexture.width;g.y%=this.tilingTexture.baseTexture.height;b.scale(m.x,m.y);b.translate(g.x+(this.anchor.x*-this._width),g.y+(this.anchor.y*-this._height));b.fillStyle=this.tilePattern;var f=-g.x;var d=-g.y;var h=this._width/m.x;var a=this._height/m.y;if(l.roundPixels){f|=0;d|=0;h|=0;a|=0}b.fillRect(f,d,h,a);b.scale(1/m.x,1/m.y);b.translate(-g.x+(this.anchor.x*this._width),-g.y+(this.anchor.y*this._height));if(this._mask){l.maskManager.popMask(l)}for(var e=0;e<this.children.length;e++){this.children[e]._renderCanvas(l)}if(k!==this.blendMode){l.currentBlendMode=k;b.globalCompositeOperation=PIXI.blendModesCanvas[k]}};PIXI.TilingSprite.prototype.onTextureUpdate=function(){};PIXI.TilingSprite.prototype.generateTilingTexture=function(j,g){if(!this.texture.baseTexture.hasLoaded){return}var d=this.texture;var a=d.frame;var e=this._frame.sourceSizeW||this._frame.width;var c=this._frame.sourceSizeH||this._frame.height;var k=0;var i=0;if(this._frame.trimmed){k=this._frame.spriteSourceSizeX;i=this._frame.spriteSourceSizeY}if(j){e=PIXI.getNextPowerOfTwo(e);c=PIXI.getNextPowerOfTwo(c)}if(this.canvasBuffer){this.canvasBuffer.resize(e,c);this.tilingTexture.baseTexture.width=e;this.tilingTexture.baseTexture.height=c;this.tilingTexture.needsUpdate=true}else{this.canvasBuffer=new PIXI.CanvasBuffer(e,c);this.tilingTexture=PIXI.Texture.fromCanvas(this.canvasBuffer.canvas);this.tilingTexture.isTiling=true;this.tilingTexture.needsUpdate=true}if(this.textureDebug){this.canvasBuffer.context.strokeStyle="#00ff00";this.canvasBuffer.context.strokeRect(0,0,e,c)}var f=d.crop.width;var b=d.crop.height;if(f!==e||b!==c){f=e;b=c}this.canvasBuffer.context.drawImage(d.baseTexture.source,d.crop.x,d.crop.y,d.crop.width,d.crop.height,k,i,f,b);this.tileScaleOffset.x=a.width/e;this.tileScaleOffset.y=a.height/c;this.refreshTexture=false;this.tilingTexture.baseTexture._powerOf2=true};PIXI.TilingSprite.prototype.getBounds=function(){var o=this._width;var n=this._height;var m=o*(1-this.anchor.x);var l=o*-this.anchor.x;var k=n*(1-this.anchor.y);var j=n*-this.anchor.y;var p=this.worldTransform;var C=p.a;var A=p.b;var z=p.c;var x=p.d;var D=p.tx;var B=p.ty;var t=C*l+z*j+D;var h=x*j+A*l+B;var s=C*m+z*j+D;var g=x*j+A*m+B;var r=C*m+z*k+D;var f=x*k+A*m+B;var q=C*l+z*k+D;var e=x*k+A*l+B;var w=-Infinity;var u=-Infinity;var y=Infinity;var v=Infinity;y=t<y?t:y;y=s<y?s:y;y=r<y?r:y;y=q<y?q:y;v=h<v?h:v;v=g<v?g:v;v=f<v?f:v;v=e<v?e:v;w=t>w?t:w;w=s>w?s:w;w=r>w?r:w;w=q>w?q:w;u=h>u?h:u;
	u=g>u?g:u;u=f>u?f:u;u=e>u?e:u;var i=this._bounds;i.x=y;i.width=w-y;i.y=v;i.height=u-v;this._currentBounds=i;return i};PIXI.TilingSprite.prototype.destroy=function(){PIXI.Sprite.prototype.destroy.call(this);if(this.canvasBuffer){this.canvasBuffer.destroy();this.canvasBuffer=null}this.tileScale=null;this.tileScaleOffset=null;this.tilePosition=null;if(this.tilingTexture){this.tilingTexture.destroy(true);this.tilingTexture=null}};Object.defineProperty(PIXI.TilingSprite.prototype,"width",{get:function(){return this._width},set:function(a){this._width=a}});Object.defineProperty(PIXI.TilingSprite.prototype,"height",{get:function(){return this._height},set:function(a){this._height=a}});var Phaser=Phaser||{VERSION:"2.6.2",GAMES:[],AUTO:0,CANVAS:1,WEBGL:2,HEADLESS:3,NONE:0,LEFT:1,RIGHT:2,UP:3,DOWN:4,SPRITE:0,BUTTON:1,IMAGE:2,GRAPHICS:3,TEXT:4,TILESPRITE:5,BITMAPTEXT:6,GROUP:7,RENDERTEXTURE:8,TILEMAP:9,TILEMAPLAYER:10,EMITTER:11,POLYGON:12,BITMAPDATA:13,CANVAS_FILTER:14,WEBGL_FILTER:15,ELLIPSE:16,SPRITEBATCH:17,RETROFONT:18,POINTER:19,ROPE:20,CIRCLE:21,RECTANGLE:22,LINE:23,MATRIX:24,POINT:25,ROUNDEDRECTANGLE:26,CREATURE:27,VIDEO:28,PENDING_ATLAS:-1,HORIZONTAL:0,VERTICAL:1,LANDSCAPE:0,PORTRAIT:1,ANGLE_UP:270,ANGLE_DOWN:90,ANGLE_LEFT:180,ANGLE_RIGHT:0,ANGLE_NORTH_EAST:315,ANGLE_NORTH_WEST:225,ANGLE_SOUTH_EAST:45,ANGLE_SOUTH_WEST:135,TOP_LEFT:0,TOP_CENTER:1,TOP_RIGHT:2,LEFT_TOP:3,LEFT_CENTER:4,LEFT_BOTTOM:5,CENTER:6,RIGHT_TOP:7,RIGHT_CENTER:8,RIGHT_BOTTOM:9,BOTTOM_LEFT:10,BOTTOM_CENTER:11,BOTTOM_RIGHT:12,blendModes:{NORMAL:0,ADD:1,MULTIPLY:2,SCREEN:3,OVERLAY:4,DARKEN:5,LIGHTEN:6,COLOR_DODGE:7,COLOR_BURN:8,HARD_LIGHT:9,SOFT_LIGHT:10,DIFFERENCE:11,EXCLUSION:12,HUE:13,SATURATION:14,COLOR:15,LUMINOSITY:16},scaleModes:{DEFAULT:0,LINEAR:0,NEAREST:1},PIXI:PIXI||{}};if(!Math.trunc){Math.trunc=function trunc(a){return a<0?Math.ceil(a):Math.floor(a)}}if(!Function.prototype.bind){Function.prototype.bind=(function(){var a=Array.prototype.slice;return function(b){var e=this,f=a.call(arguments,1);if(typeof e!=="function"){throw new TypeError()}function c(){var g=f.concat(a.call(arguments));e.apply(this instanceof c?this:b,g)}c.prototype=(function d(g){if(g){d.prototype=g}if(!(this instanceof d)){return new d}})(e.prototype);return c}})()}if(!Array.isArray){Array.isArray=function(a){return Object.prototype.toString.call(a)==="[object Array]"}}if(!Array.prototype.forEach){Array.prototype.forEach=function(c){if(this===void 0||this===null){throw new TypeError()}var e=Object(this);var a=e.length>>>0;if(typeof c!=="function"){throw new TypeError()}var b=arguments.length>=2?arguments[1]:void 0;for(var d=0;d<a;d++){if(d in e){c.call(b,e[d],d,e)}}}}if(typeof window.Uint32Array!=="function"&&typeof window.Uint32Array!=="object"){var CheapArray=function(a){var b=new Array();window[a]=function(c){if(typeof(c)==="number"){Array.call(this,c);this.length=c;for(var d=0;d<this.length;d++){this[d]=0}}else{Array.call(this,c.length);this.length=c.length;for(var d=0;d<this.length;d++){this[d]=c[d]}}};window[a].prototype=b;window[a].constructor=window[a]};CheapArray("Uint32Array");CheapArray("Int16Array")}if(!window.console){window.console={};window.console.log=window.console.assert=function(){};window.console.warn=window.console.assert=function(){}}Phaser.Utils={reverseString:function(a){return a.split("").reverse().join("")},getProperty:function(f,g){var e=g.split("."),c=e.pop(),a=e.length,b=1,d=e[0];while(b<a&&(f=f[d])){d=e[b];b++}if(f){return f[c]}else{return null}},setProperty:function(g,h,d){var f=h.split("."),c=f.pop(),a=f.length,b=1,e=f[0];while(b<a&&(g=g[e])){e=f[b];b++}if(g){g[c]=d}return g},chanceRoll:function(a){if(a===undefined){a=50}return a>0&&(Math.random()*100<=a)},randomChoice:function(b,a){return(Math.random()<0.5)?b:a},parseDimension:function(b,d){var c=0;var a=0;if(typeof b==="string"){if(b.substr(-1)==="%"){c=parseInt(b,10)/100;if(d===0){a=window.innerWidth*c}else{a=window.innerHeight*c}}else{a=parseInt(b,10)}}else{a=b}return a},pad:function(g,a,f,b){if(a===undefined){var a=0}if(f===undefined){var f=" "}if(b===undefined){var b=3}g=g.toString();var d=0;if(a+1>=g.length){switch(b){case 1:g=new Array(a+1-g.length).join(f)+g;break;case 3:var c=Math.ceil((d=a-g.length)/2);var e=d-c;g=new Array(e+1).join(f)+g+new Array(c+1).join(f);break;default:g=g+new Array(a+1-g.length).join(f);break}}return g},isPlainObject:function(b){if(typeof(b)!=="object"||b.nodeType||b===b.window){return false}try{if(b.constructor&&!({}).hasOwnProperty.call(b.constructor.prototype,"isPrototypeOf")){return false}}catch(a){return false}return true},extend:function(){var k,c,a,b,g,h,f=arguments[0]||{},e=1,d=arguments.length,j=false;if(typeof f==="boolean"){j=f;f=arguments[1]||{};e=2}if(d===e){f=this;--e}for(;e<d;e++){if((k=arguments[e])!=null){for(c in k){a=f[c];b=k[c];if(f===b){continue}if(j&&b&&(Phaser.Utils.isPlainObject(b)||(g=Array.isArray(b)))){if(g){g=false;h=a&&Array.isArray(a)?a:[]}else{h=a&&Phaser.Utils.isPlainObject(a)?a:{}}f[c]=Phaser.Utils.extend(j,h,b)}else{if(b!==undefined){f[c]=b
}}}}}return f},mixinPrototype:function(g,a,e){if(e===undefined){e=false}var d=Object.keys(a);for(var c=0;c<d.length;c++){var b=d[c];var f=a[b];if(!e&&(b in g)){continue}else{if(f&&(typeof f.get==="function"||typeof f.set==="function")){if(typeof f.clone==="function"){g[b]=f.clone()}else{Object.defineProperty(g,b,f)}}else{g[b]=f}}}},mixin:function(e,d){if(!e||typeof(e)!=="object"){return d}for(var a in e){var c=e[a];if(c.childNodes||c.cloneNode){continue}var b=typeof(e[a]);if(!e[a]||b!=="object"){d[a]=e[a]}else{if(typeof(d[a])===b){d[a]=Phaser.Utils.mixin(e[a],d[a])}else{d[a]=Phaser.Utils.mixin(e[a],new c.constructor())}}}return d}};Phaser.Circle=function(a,c,b){a=a||0;c=c||0;b=b||0;this.x=a;this.y=c;this._diameter=b;this._radius=0;if(b>0){this._radius=b*0.5}this.type=Phaser.CIRCLE};Phaser.Circle.prototype={circumference:function(){return 2*(Math.PI*this._radius)},random:function(c){if(c===undefined){c=new Phaser.Point()}var d=2*Math.PI*Math.random();var b=Math.random()+Math.random();var e=(b>1)?2-b:b;var a=e*Math.cos(d);var f=e*Math.sin(d);c.x=this.x+(a*this.radius);c.y=this.y+(f*this.radius);return c},getBounds:function(){return new Phaser.Rectangle(this.x-this.radius,this.y-this.radius,this.diameter,this.diameter)},setTo:function(a,c,b){this.x=a;this.y=c;this._diameter=b;this._radius=b*0.5;return this},copyFrom:function(a){return this.setTo(a.x,a.y,a.diameter)},copyTo:function(a){a.x=this.x;a.y=this.y;a.diameter=this._diameter;return a},distance:function(b,a){var c=Phaser.Math.distance(this.x,this.y,b.x,b.y);return a?Math.round(c):c},clone:function(a){if(a===undefined||a===null){a=new Phaser.Circle(this.x,this.y,this.diameter)}else{a.setTo(this.x,this.y,this.diameter)}return a},contains:function(a,b){return Phaser.Circle.contains(this,a,b)},circumferencePoint:function(c,b,a){return Phaser.Circle.circumferencePoint(this,c,b,a)},offset:function(b,a){this.x+=b;this.y+=a;return this},offsetPoint:function(a){return this.offset(a.x,a.y)},toString:function(){return"[{Phaser.Circle (x="+this.x+" y="+this.y+" diameter="+this.diameter+" radius="+this.radius+")}]"}};Phaser.Circle.prototype.constructor=Phaser.Circle;Object.defineProperty(Phaser.Circle.prototype,"diameter",{get:function(){return this._diameter},set:function(a){if(a>0){this._diameter=a;this._radius=a*0.5}}});Object.defineProperty(Phaser.Circle.prototype,"radius",{get:function(){return this._radius},set:function(a){if(a>0){this._radius=a;this._diameter=a*2}}});Object.defineProperty(Phaser.Circle.prototype,"left",{get:function(){return this.x-this._radius},set:function(a){if(a>this.x){this._radius=0;this._diameter=0}else{this.radius=this.x-a}}});Object.defineProperty(Phaser.Circle.prototype,"right",{get:function(){return this.x+this._radius},set:function(a){if(a<this.x){this._radius=0;this._diameter=0}else{this.radius=a-this.x}}});Object.defineProperty(Phaser.Circle.prototype,"top",{get:function(){return this.y-this._radius},set:function(a){if(a>this.y){this._radius=0;this._diameter=0}else{this.radius=this.y-a}}});Object.defineProperty(Phaser.Circle.prototype,"bottom",{get:function(){return this.y+this._radius},set:function(a){if(a<this.y){this._radius=0;this._diameter=0}else{this.radius=a-this.y}}});Object.defineProperty(Phaser.Circle.prototype,"area",{get:function(){if(this._radius>0){return Math.PI*this._radius*this._radius}else{return 0}}});Object.defineProperty(Phaser.Circle.prototype,"empty",{get:function(){return(this._diameter===0)},set:function(a){if(a===true){this.setTo(0,0,0)}}});Phaser.Circle.contains=function(d,b,f){if(d.radius>0&&b>=d.left&&b<=d.right&&f>=d.top&&f<=d.bottom){var e=(d.x-b)*(d.x-b);var c=(d.y-f)*(d.y-f);return(e+c)<=(d.radius*d.radius)}else{return false}};Phaser.Circle.equals=function(d,c){return(d.x===c.x&&d.y===c.y&&d.diameter===c.diameter)};Phaser.Circle.intersects=function(d,c){return(Phaser.Math.distance(d.x,d.y,c.x,c.y)<=(d.radius+c.radius))};Phaser.Circle.circumferencePoint=function(b,e,d,c){if(d===undefined){d=false}if(c===undefined){c=new Phaser.Point()}if(d===true){e=Phaser.Math.degToRad(e)}c.x=b.x+b.radius*Math.cos(e);c.y=b.y+b.radius*Math.sin(e);return c};Phaser.Circle.intersectsRectangle=function(l,b){var f=Math.abs(l.x-b.x-b.halfWidth);var k=b.halfWidth+l.radius;if(f>k){return false}var e=Math.abs(l.y-b.y-b.halfHeight);var i=b.halfHeight+l.radius;if(e>i){return false}if(f<=b.halfWidth||e<=b.halfHeight){return true}var g=f-b.halfWidth;var d=e-b.halfHeight;var j=g*g;var a=d*d;var h=l.radius*l.radius;return j+a<=h};PIXI.Circle=Phaser.Circle;Phaser.Ellipse=function(b,d,c,a){b=b||0;d=d||0;c=c||0;a=a||0;this.x=b;this.y=d;this.width=c;this.height=a;this.type=Phaser.ELLIPSE};Phaser.Ellipse.prototype={setTo:function(b,d,c,a){this.x=b;this.y=d;this.width=c;this.height=a;return this},getBounds:function(){return new Phaser.Rectangle(this.x-this.width,this.y-this.height,this.width,this.height)},copyFrom:function(a){return this.setTo(a.x,a.y,a.width,a.height)},copyTo:function(a){a.x=this.x;a.y=this.y;a.width=this.width;a.height=this.height;
	return a},clone:function(a){if(a===undefined||a===null){a=new Phaser.Ellipse(this.x,this.y,this.width,this.height)}else{a.setTo(this.x,this.y,this.width,this.height)}return a},contains:function(a,b){return Phaser.Ellipse.contains(this,a,b)},random:function(a){if(a===undefined){a=new Phaser.Point()}var c=Math.random()*Math.PI*2;var b=Math.random();a.x=Math.sqrt(b)*Math.cos(c);a.y=Math.sqrt(b)*Math.sin(c);a.x=this.x+(a.x*this.width/2);a.y=this.y+(a.y*this.height/2);return a},toString:function(){return"[{Phaser.Ellipse (x="+this.x+" y="+this.y+" width="+this.width+" height="+this.height+")}]"}};Phaser.Ellipse.prototype.constructor=Phaser.Ellipse;Object.defineProperty(Phaser.Ellipse.prototype,"left",{get:function(){return this.x},set:function(a){this.x=a}});Object.defineProperty(Phaser.Ellipse.prototype,"right",{get:function(){return this.x+this.width},set:function(a){if(a<this.x){this.width=0}else{this.width=a-this.x}}});Object.defineProperty(Phaser.Ellipse.prototype,"top",{get:function(){return this.y},set:function(a){this.y=a}});Object.defineProperty(Phaser.Ellipse.prototype,"bottom",{get:function(){return this.y+this.height},set:function(a){if(a<this.y){this.height=0}else{this.height=a-this.y}}});Object.defineProperty(Phaser.Ellipse.prototype,"empty",{get:function(){return(this.width===0||this.height===0)},set:function(a){if(a===true){this.setTo(0,0,0,0)}}});Phaser.Ellipse.contains=function(e,c,f){if(e.width<=0||e.height<=0){return false}var d=((c-e.x)/e.width)-0.5;var b=((f-e.y)/e.height)-0.5;d*=d;b*=b;return(d+b<0.25)};PIXI.Ellipse=Phaser.Ellipse;Phaser.Line=function(b,d,a,c){b=b||0;d=d||0;a=a||0;c=c||0;this.start=new Phaser.Point(b,d);this.end=new Phaser.Point(a,c);this.type=Phaser.LINE};Phaser.Line.prototype={setTo:function(b,d,a,c){this.start.setTo(b,d);this.end.setTo(a,c);return this},fromSprite:function(b,c,a){if(a===undefined){a=false}if(a){return this.setTo(b.center.x,b.center.y,c.center.x,c.center.y)}return this.setTo(b.x,b.y,c.x,c.y)},fromAngle:function(a,d,c,b){this.start.setTo(a,d);this.end.setTo(a+(Math.cos(c)*b),d+(Math.sin(c)*b));return this},rotate:function(c,b){var a=(this.start.x+this.end.x)/2;var d=(this.start.y+this.end.y)/2;this.start.rotate(a,d,c,b);this.end.rotate(a,d,c,b);return this},rotateAround:function(a,d,c,b){this.start.rotate(a,d,c,b);this.end.rotate(a,d,c,b);return this},intersects:function(b,c,a){return Phaser.Line.intersectsPoints(this.start,this.end,b.start,b.end,c,a)},reflect:function(a){return Phaser.Line.reflect(this,a)},midPoint:function(a){if(a===undefined){a=new Phaser.Point()}a.x=(this.start.x+this.end.x)/2;a.y=(this.start.y+this.end.y)/2;return a},centerOn:function(c,f){var b=(this.start.x+this.end.x)/2;var e=(this.start.y+this.end.y)/2;var d=c-b;var a=f-e;this.start.add(d,a);this.end.add(d,a)},pointOnLine:function(a,b){return((a-this.start.x)*(this.end.y-this.start.y)===(this.end.x-this.start.x)*(b-this.start.y))},pointOnSegment:function(b,f){var c=Math.min(this.start.x,this.end.x);var e=Math.max(this.start.x,this.end.x);var a=Math.min(this.start.y,this.end.y);var d=Math.max(this.start.y,this.end.y);return(this.pointOnLine(b,f)&&(b>=c&&b<=e)&&(f>=a&&f<=d))},random:function(a){if(a===undefined){a=new Phaser.Point()}var b=Math.random();a.x=this.start.x+b*(this.end.x-this.start.x);a.y=this.start.y+b*(this.end.y-this.start.y);return a},coordinatesOnLine:function(f,e){if(f===undefined){f=1}if(e===undefined){e=[]}var b=Math.round(this.start.x);var l=Math.round(this.start.y);var a=Math.round(this.end.x);var j=Math.round(this.end.y);var n=Math.abs(a-b);var m=Math.abs(j-l);var k=(b<a)?1:-1;var h=(l<j)?1:-1;var c=n-m;e.push([b,l]);var d=1;while(!((b===a)&&(l===j))){var g=c<<1;if(g>-m){c-=m;b+=k}if(g<n){c+=n;l+=h}if(d%f===0){e.push([b,l])}d++}return e},clone:function(a){if(a===undefined||a===null){a=new Phaser.Line(this.start.x,this.start.y,this.end.x,this.end.y)}else{a.setTo(this.start.x,this.start.y,this.end.x,this.end.y)}return a}};Object.defineProperty(Phaser.Line.prototype,"length",{get:function(){return Math.sqrt((this.end.x-this.start.x)*(this.end.x-this.start.x)+(this.end.y-this.start.y)*(this.end.y-this.start.y))}});Object.defineProperty(Phaser.Line.prototype,"angle",{get:function(){return Math.atan2(this.end.y-this.start.y,this.end.x-this.start.x)}});Object.defineProperty(Phaser.Line.prototype,"slope",{get:function(){return(this.end.y-this.start.y)/(this.end.x-this.start.x)}});Object.defineProperty(Phaser.Line.prototype,"perpSlope",{get:function(){return -((this.end.x-this.start.x)/(this.end.y-this.start.y))}});Object.defineProperty(Phaser.Line.prototype,"x",{get:function(){return Math.min(this.start.x,this.end.x)}});Object.defineProperty(Phaser.Line.prototype,"y",{get:function(){return Math.min(this.start.y,this.end.y)}});Object.defineProperty(Phaser.Line.prototype,"left",{get:function(){return Math.min(this.start.x,this.end.x)}});Object.defineProperty(Phaser.Line.prototype,"right",{get:function(){return Math.max(this.start.x,this.end.x)}});Object.defineProperty(Phaser.Line.prototype,"top",{get:function(){return Math.min(this.start.y,this.end.y)
}});Object.defineProperty(Phaser.Line.prototype,"bottom",{get:function(){return Math.max(this.start.y,this.end.y)}});Object.defineProperty(Phaser.Line.prototype,"width",{get:function(){return Math.abs(this.start.x-this.end.x)}});Object.defineProperty(Phaser.Line.prototype,"height",{get:function(){return Math.abs(this.start.y-this.end.y)}});Object.defineProperty(Phaser.Line.prototype,"normalX",{get:function(){return Math.cos(this.angle-1.5707963267948966)}});Object.defineProperty(Phaser.Line.prototype,"normalY",{get:function(){return Math.sin(this.angle-1.5707963267948966)}});Object.defineProperty(Phaser.Line.prototype,"normalAngle",{get:function(){return Phaser.Math.wrap(this.angle-1.5707963267948966,-Math.PI,Math.PI)}});Phaser.Line.intersectsPoints=function(r,p,m,l,n,t){if(n===undefined){n=true}if(t===undefined){t=new Phaser.Point()}var h=p.y-r.y;var g=l.y-m.y;var q=r.x-p.x;var o=m.x-l.x;var j=(p.x*r.y)-(r.x*p.y);var i=(l.x*m.y)-(m.x*l.y);var k=(h*o)-(g*q);if(k===0){return null}t.x=((q*i)-(o*j))/k;t.y=((g*j)-(h*i))/k;if(n){var s=((l.y-m.y)*(p.x-r.x)-(l.x-m.x)*(p.y-r.y));var d=(((l.x-m.x)*(r.y-m.y))-(l.y-m.y)*(r.x-m.x))/s;var c=(((p.x-r.x)*(r.y-m.y))-((p.y-r.y)*(r.x-m.x)))/s;if(d>=0&&d<=1&&c>=0&&c<=1){return t}else{return null}}return t};Phaser.Line.intersects=function(e,d,f,c){return Phaser.Line.intersectsPoints(e.start,e.end,d.start,d.end,f,c)};Phaser.Line.intersectsRectangle=function(k,g){if(!Phaser.Rectangle.intersects(k,g)){return false}var d=k.start.x;var i=k.start.y;var c=k.end.x;var h=k.end.y;var f=g.x;var b=g.y;var e=g.right;var a=g.bottom;var j=0;if((d>=f&&d<=e&&i>=b&&i<=a)||(c>=f&&c<=e&&h>=b&&h<=a)){return true}if(d<f&&c>=f){j=i+(h-i)*(f-d)/(c-d);if(j>b&&j<=a){return true}}else{if(d>e&&c<=e){j=i+(h-i)*(e-d)/(c-d);if(j>=b&&j<=a){return true}}}if(i<b&&h>=b){j=d+(c-d)*(b-i)/(h-i);if(j>=f&&j<=e){return true}}else{if(i>a&&h<=a){j=d+(c-d)*(a-i)/(h-i);if(j>=f&&j<=e){return true}}}return false};Phaser.Line.reflect=function(d,c){return 2*c.normalAngle-3.141592653589793-d.angle};Phaser.Matrix=function(h,f,j,i,g,e){if(h===undefined||h===null){h=1}if(f===undefined||f===null){f=0}if(j===undefined||j===null){j=0}if(i===undefined||i===null){i=1}if(g===undefined||g===null){g=0}if(e===undefined||e===null){e=0}this.a=h;this.b=f;this.c=j;this.d=i;this.tx=g;this.ty=e;this.type=Phaser.MATRIX};Phaser.Matrix.prototype={fromArray:function(a){return this.setTo(a[0],a[1],a[3],a[4],a[2],a[5])},setTo:function(h,f,j,i,g,e){this.a=h;this.b=f;this.c=j;this.d=i;this.tx=g;this.ty=e;return this},clone:function(a){if(a===undefined||a===null){a=new Phaser.Matrix(this.a,this.b,this.c,this.d,this.tx,this.ty)}else{a.a=this.a;a.b=this.b;a.c=this.c;a.d=this.d;a.tx=this.tx;a.ty=this.ty}return a},copyTo:function(a){a.copyFrom(this);return a},copyFrom:function(a){this.a=a.a;this.b=a.b;this.c=a.c;this.d=a.d;this.tx=a.tx;this.ty=a.ty;return this},toArray:function(a,b){if(b===undefined){b=new PIXI.Float32Array(9)}if(a){b[0]=this.a;b[1]=this.b;b[2]=0;b[3]=this.c;b[4]=this.d;b[5]=0;b[6]=this.tx;b[7]=this.ty;b[8]=1}else{b[0]=this.a;b[1]=this.c;b[2]=this.tx;b[3]=this.b;b[4]=this.d;b[5]=this.ty;b[6]=0;b[7]=0;b[8]=1}return b},apply:function(b,a){if(a===undefined){a=new Phaser.Point()}a.x=this.a*b.x+this.c*b.y+this.tx;a.y=this.b*b.x+this.d*b.y+this.ty;return a},applyInverse:function(e,b){if(b===undefined){b=new Phaser.Point()}var d=1/(this.a*this.d+this.c*-this.b);var a=e.x;var c=e.y;b.x=this.d*d*a+-this.c*d*c+(this.ty*this.c-this.tx*this.d)*d;b.y=this.a*d*c+-this.b*d*a+(-this.ty*this.a+this.tx*this.b)*d;return b},translate:function(a,b){this.tx+=a;this.ty+=b;return this},scale:function(a,b){this.a*=a;this.d*=b;this.c*=a;this.b*=b;this.tx*=a;this.ty*=b;return this},rotate:function(f){var e=Math.cos(f);var c=Math.sin(f);var b=this.a;var d=this.c;var a=this.tx;this.a=b*e-this.b*c;this.b=b*c+this.b*e;this.c=d*e-this.d*c;this.d=d*c+this.d*e;this.tx=a*e-this.ty*c;this.ty=a*c+this.ty*e;return this},append:function(b){var a=this.a;var c=this.b;var d=this.c;var e=this.d;this.a=b.a*a+b.b*d;this.b=b.a*c+b.b*e;this.c=b.c*a+b.d*d;this.d=b.c*c+b.d*e;this.tx=b.tx*a+b.ty*d+this.tx;this.ty=b.tx*c+b.ty*e+this.ty;return this},identity:function(){return this.setTo(1,0,0,1,0,0)}};Phaser.identityMatrix=new Phaser.Matrix();PIXI.Matrix=Phaser.Matrix;PIXI.identityMatrix=Phaser.identityMatrix;Phaser.Point=function(a,b){a=a||0;b=b||0;this.x=a;this.y=b;this.type=Phaser.POINT};Phaser.Point.prototype={copyFrom:function(a){return this.setTo(a.x,a.y)},invert:function(){return this.setTo(this.y,this.x)},setTo:function(a,b){this.x=a||0;this.y=b||((b!==0)?this.x:0);return this},set:function(a,b){this.x=a||0;this.y=b||((b!==0)?this.x:0);return this},add:function(a,b){this.x+=a;this.y+=b;return this},subtract:function(a,b){this.x-=a;this.y-=b;return this},multiply:function(a,b){this.x*=a;this.y*=b;return this},divide:function(a,b){this.x/=a;this.y/=b;return this},clampX:function(b,a){this.x=Phaser.Math.clamp(this.x,b,a);return this},clampY:function(b,a){this.y=Phaser.Math.clamp(this.y,b,a);
	return this},clamp:function(b,a){this.x=Phaser.Math.clamp(this.x,b,a);this.y=Phaser.Math.clamp(this.y,b,a);return this},clone:function(a){if(a===undefined||a===null){a=new Phaser.Point(this.x,this.y)}else{a.setTo(this.x,this.y)}return a},copyTo:function(a){a.x=this.x;a.y=this.y;return a},distance:function(b,a){return Phaser.Point.distance(this,b,a)},equals:function(b){return(b.x===this.x&&b.y===this.y)},angle:function(b,c){if(c===undefined){c=false}if(c){return Phaser.Math.radToDeg(Math.atan2(b.y-this.y,b.x-this.x))}else{return Math.atan2(b.y-this.y,b.x-this.x)}},rotate:function(a,e,c,b,d){return Phaser.Point.rotate(this,a,e,c,b,d)},getMagnitude:function(){return Math.sqrt((this.x*this.x)+(this.y*this.y))},getMagnitudeSq:function(){return(this.x*this.x)+(this.y*this.y)},setMagnitude:function(a){return this.normalize().multiply(a,a)},normalize:function(){if(!this.isZero()){var a=this.getMagnitude();this.x/=a;this.y/=a}return this},isZero:function(){return(this.x===0&&this.y===0)},dot:function(b){return((this.x*b.x)+(this.y*b.y))},cross:function(b){return((this.x*b.y)-(this.y*b.x))},perp:function(){return this.setTo(-this.y,this.x)},rperp:function(){return this.setTo(this.y,-this.x)},normalRightHand:function(){return this.setTo(this.y*-1,this.x)},floor:function(){return this.setTo(Math.floor(this.x),Math.floor(this.y))},ceil:function(){return this.setTo(Math.ceil(this.x),Math.ceil(this.y))},toString:function(){return"[{Point (x="+this.x+" y="+this.y+")}]"}};Phaser.Point.prototype.constructor=Phaser.Point;Phaser.Point.add=function(d,c,e){if(e===undefined){e=new Phaser.Point()}e.x=d.x+c.x;e.y=d.y+c.y;return e};Phaser.Point.subtract=function(d,c,e){if(e===undefined){e=new Phaser.Point()}e.x=d.x-c.x;e.y=d.y-c.y;return e};Phaser.Point.multiply=function(d,c,e){if(e===undefined){e=new Phaser.Point()}e.x=d.x*c.x;e.y=d.y*c.y;return e};Phaser.Point.divide=function(d,c,e){if(e===undefined){e=new Phaser.Point()}e.x=d.x/c.x;e.y=d.y/c.y;return e};Phaser.Point.equals=function(d,c){return(d.x===c.x&&d.y===c.y)};Phaser.Point.angle=function(d,c){return Math.atan2(d.y-c.y,d.x-c.x)};Phaser.Point.negative=function(b,c){if(c===undefined){c=new Phaser.Point()}return c.setTo(-b.x,-b.y)};Phaser.Point.multiplyAdd=function(d,c,f,e){if(e===undefined){e=new Phaser.Point()}return e.setTo(d.x+c.x*f,d.y+c.y*f)};Phaser.Point.interpolate=function(d,c,g,e){if(e===undefined){e=new Phaser.Point()}return e.setTo(d.x+(c.x-d.x)*g,d.y+(c.y-d.y)*g)};Phaser.Point.perp=function(b,c){if(c===undefined){c=new Phaser.Point()}return c.setTo(-b.y,b.x)};Phaser.Point.rperp=function(b,c){if(c===undefined){c=new Phaser.Point()}return c.setTo(b.y,-b.x)};Phaser.Point.distance=function(d,c,e){var f=Phaser.Math.distance(d.x,d.y,c.x,c.y);return e?Math.round(f):f};Phaser.Point.project=function(d,c,e){if(e===undefined){e=new Phaser.Point()}var f=d.dot(c)/c.getMagnitudeSq();if(f!==0){e.setTo(f*c.x,f*c.y)}return e};Phaser.Point.projectUnit=function(d,c,e){if(e===undefined){e=new Phaser.Point()}var f=d.dot(c);if(f!==0){e.setTo(f*c.x,f*c.y)}return e};Phaser.Point.normalRightHand=function(b,c){if(c===undefined){c=new Phaser.Point()}return c.setTo(b.y*-1,b.x)};Phaser.Point.normalize=function(c,d){if(d===undefined){d=new Phaser.Point()}var b=c.getMagnitude();if(b!==0){d.setTo(c.x/b,c.y/b)}return d};Phaser.Point.rotate=function(j,k,i,d,f,b){if(f){d=Phaser.Math.degToRad(d)}if(b===undefined){j.subtract(k,i);var m=Math.sin(d);var h=Math.cos(d);var g=h*j.x-m*j.y;var e=m*j.x+h*j.y;j.x=g+k;j.y=e+i}else{var l=d+Math.atan2(j.y-i,j.x-k);j.x=k+b*Math.cos(l);j.y=i+b*Math.sin(l)}return j};Phaser.Point.centroid=function(c,a){if(a===undefined){a=new Phaser.Point()}if(Object.prototype.toString.call(c)!=="[object Array]"){throw new Error("Phaser.Point. Parameter 'points' must be an array")}var d=c.length;if(d<1){throw new Error("Phaser.Point. Parameter 'points' array must not be empty")}if(d===1){a.copyFrom(c[0]);return a}for(var b=0;b<d;b++){Phaser.Point.add(a,c[b],a)}a.divide(d,d);return a};Phaser.Point.parse=function(d,b,c){b=b||"x";c=c||"y";var a=new Phaser.Point();if(d[b]){a.x=parseInt(d[b],10)}if(d[c]){a.y=parseInt(d[c],10)}return a};PIXI.Point=Phaser.Point;Phaser.Polygon=function(){this.area=0;this._points=[];if(arguments.length>0){this.setTo.apply(this,arguments)}this.closed=true;this.flattened=false;this.type=Phaser.POLYGON};Phaser.Polygon.prototype={toNumberArray:function(a){if(a===undefined){a=[]}for(var b=0;b<this._points.length;b++){if(typeof this._points[b]==="number"){a.push(this._points[b]);a.push(this._points[b+1]);b++}else{a.push(this._points[b].x);a.push(this._points[b].y)}}return a},flatten:function(){this._points=this.toNumberArray();this.flattened=true;return this},clone:function(a){var b=this._points.slice();if(a===undefined||a===null){a=new Phaser.Polygon(b)}else{a.setTo(b)}return a},contains:function(g,f){var c=false;if(this.flattened){for(var e=-2,d=this._points.length-2;(e+=2)<this._points.length;d=e){var b=this._points[e];var a=this._points[e+1];var k=this._points[d];
	var h=this._points[d+1];if(((a<=f&&f<h)||(h<=f&&f<a))&&(g<(k-b)*(f-a)/(h-a)+b)){c=!c}}}else{for(var e=-1,d=this._points.length-1;++e<this._points.length;d=e){var b=this._points[e].x;var a=this._points[e].y;var k=this._points[d].x;var h=this._points[d].y;if(((a<=f&&f<h)||(h<=f&&f<a))&&(g<(k-b)*(f-a)/(h-a)+b)){c=!c}}}return c},setTo:function(c){this.area=0;this._points=[];if(arguments.length>0){if(!Array.isArray(c)){c=Array.prototype.slice.call(arguments)}var d=Number.MAX_VALUE;for(var b=0,a=c.length;b<a;b++){if(typeof c[b]==="number"){var e=new PIXI.Point(c[b],c[b+1]);b++}else{if(Array.isArray(c[b])){var e=new PIXI.Point(c[b][0],c[b][1])}else{var e=new PIXI.Point(c[b].x,c[b].y)}}this._points.push(e);if(e.y<d){d=e.y}}this.calculateArea(d)}return this},calculateArea:function(e){var g;var f;var b;var d;for(var c=0,a=this._points.length;c<a;c++){g=this._points[c];if(c===a-1){f=this._points[0]}else{f=this._points[c+1]}b=((g.y-e)+(f.y-e))/2;d=g.x-f.x;this.area+=b*d}return this.area}};Phaser.Polygon.prototype.constructor=Phaser.Polygon;Object.defineProperty(Phaser.Polygon.prototype,"points",{get:function(){return this._points},set:function(a){if(a!=null){this.setTo(a)}else{this.setTo()}}});PIXI.Polygon=Phaser.Polygon;Phaser.Rectangle=function(b,d,c,a){b=b||0;d=d||0;c=c||0;a=a||0;this.x=b;this.y=d;this.width=c;this.height=a;this.type=Phaser.RECTANGLE};Phaser.Rectangle.prototype={offset:function(b,a){this.x+=b;this.y+=a;return this},offsetPoint:function(a){return this.offset(a.x,a.y)},setTo:function(b,d,c,a){this.x=b;this.y=d;this.width=c;this.height=a;return this},scale:function(a,b){if(b===undefined){b=a}this.width*=a;this.height*=b;return this},centerOn:function(a,b){this.centerX=a;this.centerY=b;return this},floor:function(){this.x=Math.floor(this.x);this.y=Math.floor(this.y)},floorAll:function(){this.x=Math.floor(this.x);this.y=Math.floor(this.y);this.width=Math.floor(this.width);this.height=Math.floor(this.height)},ceil:function(){this.x=Math.ceil(this.x);this.y=Math.ceil(this.y)},ceilAll:function(){this.x=Math.ceil(this.x);this.y=Math.ceil(this.y);this.width=Math.ceil(this.width);this.height=Math.ceil(this.height)},copyFrom:function(a){return this.setTo(a.x,a.y,a.width,a.height)},copyTo:function(a){a.x=this.x;a.y=this.y;a.width=this.width;a.height=this.height;return a},inflate:function(b,a){return Phaser.Rectangle.inflate(this,b,a)},size:function(a){return Phaser.Rectangle.size(this,a)},resize:function(b,a){this.width=b;this.height=a;return this},clone:function(a){return Phaser.Rectangle.clone(this,a)},contains:function(a,b){return Phaser.Rectangle.contains(this,a,b)},containsRect:function(a){return Phaser.Rectangle.containsRect(a,this)},equals:function(a){return Phaser.Rectangle.equals(this,a)},intersection:function(a,c){return Phaser.Rectangle.intersection(this,a,c)},intersects:function(a){return Phaser.Rectangle.intersects(this,a)},intersectsRaw:function(e,c,d,b,a){return Phaser.Rectangle.intersectsRaw(this,e,c,d,b,a)},union:function(a,c){return Phaser.Rectangle.union(this,a,c)},random:function(a){if(a===undefined){a=new Phaser.Point()}a.x=this.randomX;a.y=this.randomY;return a},getPoint:function(a,b){if(b===undefined){b=new Phaser.Point()}switch(a){default:case Phaser.TOP_LEFT:return b.set(this.x,this.y);case Phaser.TOP_CENTER:return b.set(this.centerX,this.y);case Phaser.TOP_RIGHT:return b.set(this.right,this.y);case Phaser.LEFT_CENTER:return b.set(this.x,this.centerY);case Phaser.CENTER:return b.set(this.centerX,this.centerY);case Phaser.RIGHT_CENTER:return b.set(this.right,this.centerY);case Phaser.BOTTOM_LEFT:return b.set(this.x,this.bottom);case Phaser.BOTTOM_CENTER:return b.set(this.centerX,this.bottom);case Phaser.BOTTOM_RIGHT:return b.set(this.right,this.bottom)}},toString:function(){return"[{Rectangle (x="+this.x+" y="+this.y+" width="+this.width+" height="+this.height+" empty="+this.empty+")}]"}};Object.defineProperty(Phaser.Rectangle.prototype,"halfWidth",{get:function(){return Math.round(this.width/2)}});Object.defineProperty(Phaser.Rectangle.prototype,"halfHeight",{get:function(){return Math.round(this.height/2)}});Object.defineProperty(Phaser.Rectangle.prototype,"bottom",{get:function(){return this.y+this.height},set:function(a){if(a<=this.y){this.height=0}else{this.height=a-this.y}}});Object.defineProperty(Phaser.Rectangle.prototype,"bottomLeft",{get:function(){return new Phaser.Point(this.x,this.bottom)},set:function(a){this.x=a.x;this.bottom=a.y}});Object.defineProperty(Phaser.Rectangle.prototype,"bottomRight",{get:function(){return new Phaser.Point(this.right,this.bottom)},set:function(a){this.right=a.x;this.bottom=a.y}});Object.defineProperty(Phaser.Rectangle.prototype,"left",{get:function(){return this.x},set:function(a){if(a>=this.right){this.width=0}else{this.width=this.right-a}this.x=a}});Object.defineProperty(Phaser.Rectangle.prototype,"right",{get:function(){return this.x+this.width},set:function(a){if(a<=this.x){this.width=0}else{this.width=a-this.x}}});Object.defineProperty(Phaser.Rectangle.prototype,"volume",{get:function(){return this.width*this.height
}});Object.defineProperty(Phaser.Rectangle.prototype,"perimeter",{get:function(){return(this.width*2)+(this.height*2)}});Object.defineProperty(Phaser.Rectangle.prototype,"centerX",{get:function(){return this.x+this.halfWidth},set:function(a){this.x=a-this.halfWidth}});Object.defineProperty(Phaser.Rectangle.prototype,"centerY",{get:function(){return this.y+this.halfHeight},set:function(a){this.y=a-this.halfHeight}});Object.defineProperty(Phaser.Rectangle.prototype,"randomX",{get:function(){return this.x+(Math.random()*this.width)}});Object.defineProperty(Phaser.Rectangle.prototype,"randomY",{get:function(){return this.y+(Math.random()*this.height)}});Object.defineProperty(Phaser.Rectangle.prototype,"top",{get:function(){return this.y},set:function(a){if(a>=this.bottom){this.height=0;this.y=a}else{this.height=(this.bottom-a)}}});Object.defineProperty(Phaser.Rectangle.prototype,"topLeft",{get:function(){return new Phaser.Point(this.x,this.y)},set:function(a){this.x=a.x;this.y=a.y}});Object.defineProperty(Phaser.Rectangle.prototype,"topRight",{get:function(){return new Phaser.Point(this.x+this.width,this.y)},set:function(a){this.right=a.x;this.y=a.y}});Object.defineProperty(Phaser.Rectangle.prototype,"empty",{get:function(){return(!this.width||!this.height)},set:function(a){if(a===true){this.setTo(0,0,0,0)}}});Phaser.Rectangle.prototype.constructor=Phaser.Rectangle;Phaser.Rectangle.inflate=function(c,d,b){c.x-=d;c.width+=2*d;c.y-=b;c.height+=2*b;return c};Phaser.Rectangle.inflatePoint=function(c,b){return Phaser.Rectangle.inflate(c,b.x,b.y)};Phaser.Rectangle.size=function(b,c){if(c===undefined||c===null){c=new Phaser.Point(b.width,b.height)}else{c.setTo(b.width,b.height)}return c};Phaser.Rectangle.clone=function(b,c){if(c===undefined||c===null){c=new Phaser.Rectangle(b.x,b.y,b.width,b.height)}else{c.setTo(b.x,b.y,b.width,b.height)}return c};Phaser.Rectangle.contains=function(c,b,d){if(c.width<=0||c.height<=0){return false}return(b>=c.x&&b<c.right&&d>=c.y&&d<c.bottom)};Phaser.Rectangle.containsRaw=function(d,c,e,b,a,f){return(a>=d&&a<(d+e)&&f>=c&&f<(c+b))};Phaser.Rectangle.containsPoint=function(c,b){return Phaser.Rectangle.contains(c,b.x,b.y)};Phaser.Rectangle.containsRect=function(d,c){if(d.volume>c.volume){return false}return(d.x>=c.x&&d.y>=c.y&&d.right<c.right&&d.bottom<c.bottom)};Phaser.Rectangle.equals=function(d,c){return(d.x===c.x&&d.y===c.y&&d.width===c.width&&d.height===c.height)};Phaser.Rectangle.sameDimensions=function(d,c){return(d.width===c.width&&d.height===c.height)};Phaser.Rectangle.intersection=function(d,c,e){if(e===undefined){e=new Phaser.Rectangle()}if(Phaser.Rectangle.intersects(d,c)){e.x=Math.max(d.x,c.x);e.y=Math.max(d.y,c.y);e.width=Math.min(d.right,c.right)-e.x;e.height=Math.min(d.bottom,c.bottom)-e.y}return e};Phaser.Rectangle.intersects=function(d,c){if(d.width<=0||d.height<=0||c.width<=0||c.height<=0){return false}return !(d.right<c.x||d.bottom<c.y||d.x>c.right||d.y>c.bottom)};Phaser.Rectangle.intersectsRaw=function(b,g,e,f,d,c){if(c===undefined){c=0}return !(g>b.right+c||e<b.left-c||f>b.bottom+c||d<b.top-c)};Phaser.Rectangle.union=function(d,c,e){if(e===undefined){e=new Phaser.Rectangle()}return e.setTo(Math.min(d.x,c.x),Math.min(d.y,c.y),Math.max(d.right,c.right)-Math.min(d.left,c.left),Math.max(d.bottom,c.bottom)-Math.min(d.top,c.top))};Phaser.Rectangle.aabb=function(d,c){if(c===undefined){c=new Phaser.Rectangle()}var f=Number.NEGATIVE_INFINITY,b=Number.POSITIVE_INFINITY,e=Number.NEGATIVE_INFINITY,a=Number.POSITIVE_INFINITY;d.forEach(function(g){if(g.x>f){f=g.x}if(g.x<b){b=g.x}if(g.y>e){e=g.y}if(g.y<a){a=g.y}});c.setTo(b,a,f-b,e-a);return c};PIXI.Rectangle=Phaser.Rectangle;PIXI.EmptyRectangle=new Phaser.Rectangle(0,0,0,0);Phaser.RoundedRectangle=function(c,e,d,b,a){if(c===undefined){c=0}if(e===undefined){e=0}if(d===undefined){d=0}if(b===undefined){b=0}if(a===undefined){a=20}this.x=c;this.y=e;this.width=d;this.height=b;this.radius=a||20;this.type=Phaser.ROUNDEDRECTANGLE};Phaser.RoundedRectangle.prototype={clone:function(){return new Phaser.RoundedRectangle(this.x,this.y,this.width,this.height,this.radius)},contains:function(a,d){if(this.width<=0||this.height<=0){return false}var b=this.x;if(a>=b&&a<=b+this.width){var c=this.y;if(d>=c&&d<=c+this.height){return true}}return false}};Phaser.RoundedRectangle.prototype.constructor=Phaser.RoundedRectangle;PIXI.RoundedRectangle=Phaser.RoundedRectangle;Phaser.Camera=function(c,f,b,e,d,a){this.game=c;this.world=c.world;this.id=0;this.view=new Phaser.Rectangle(b,e,d,a);this.bounds=new Phaser.Rectangle(b,e,d,a);this.deadzone=null;this.visible=true;this.roundPx=true;this.atLimit={x:false,y:false};this.target=null;this.displayObject=null;this.scale=null;this.totalInView=0;this.lerp=new Phaser.Point(1,1);this.onShakeComplete=new Phaser.Signal();this.onFlashComplete=new Phaser.Signal();this.onFadeComplete=new Phaser.Signal();this.fx=null;this._targetPosition=new Phaser.Point();this._edge=0;this._position=new Phaser.Point();this._shake={intensity:0,duration:0,horizontal:false,vertical:false,shakeBounds:true,x:0,y:0};
	this._fxDuration=0;this._fxType=0};Phaser.Camera.FOLLOW_LOCKON=0;Phaser.Camera.FOLLOW_PLATFORMER=1;Phaser.Camera.FOLLOW_TOPDOWN=2;Phaser.Camera.FOLLOW_TOPDOWN_TIGHT=3;Phaser.Camera.SHAKE_BOTH=4;Phaser.Camera.SHAKE_HORIZONTAL=5;Phaser.Camera.SHAKE_VERTICAL=6;Phaser.Camera.ENABLE_FX=true;Phaser.Camera.prototype={boot:function(){this.displayObject=this.game.world;this.scale=this.game.world.scale;this.game.camera=this;if(Phaser.Graphics&&Phaser.Camera.ENABLE_FX){this.fx=new Phaser.Graphics(this.game);this.game.stage.addChild(this.fx)}},preUpdate:function(){this.totalInView=0},follow:function(g,e,c,b){if(e===undefined){e=Phaser.Camera.FOLLOW_LOCKON}if(c===undefined){c=1}if(b===undefined){b=1}this.target=g;this.lerp.set(c,b);var f;switch(e){case Phaser.Camera.FOLLOW_PLATFORMER:var a=this.width/8;var d=this.height/3;this.deadzone=new Phaser.Rectangle((this.width-a)/2,(this.height-d)/2-d*0.25,a,d);break;case Phaser.Camera.FOLLOW_TOPDOWN:f=Math.max(this.width,this.height)/4;this.deadzone=new Phaser.Rectangle((this.width-f)/2,(this.height-f)/2,f,f);break;case Phaser.Camera.FOLLOW_TOPDOWN_TIGHT:f=Math.max(this.width,this.height)/8;this.deadzone=new Phaser.Rectangle((this.width-f)/2,(this.height-f)/2,f,f);break;case Phaser.Camera.FOLLOW_LOCKON:this.deadzone=null;break;default:this.deadzone=null;break}},unfollow:function(){this.target=null},focusOn:function(a){this.setPosition(Math.round(a.x-this.view.halfWidth),Math.round(a.y-this.view.halfHeight))},focusOnXY:function(a,b){this.setPosition(Math.round(a-this.view.halfWidth),Math.round(b-this.view.halfHeight))},shake:function(a,e,c,d,b){if(a===undefined){a=0.05}if(e===undefined){e=500}if(c===undefined){c=true}if(d===undefined){d=Phaser.Camera.SHAKE_BOTH}if(b===undefined){b=true}if(!c&&this._shake.duration>0){return false}this._shake.intensity=a;this._shake.duration=e;this._shake.shakeBounds=b;this._shake.x=0;this._shake.y=0;this._shake.horizontal=(d===Phaser.Camera.SHAKE_BOTH||d===Phaser.Camera.SHAKE_HORIZONTAL);this._shake.vertical=(d===Phaser.Camera.SHAKE_BOTH||d===Phaser.Camera.SHAKE_VERTICAL);return true},flash:function(a,c,b){if(a===undefined){a=16777215}if(c===undefined){c=500}if(b===undefined){b=false}if(!this.fx||(!b&&this._fxDuration>0)){return false}this.fx.clear();this.fx.beginFill(a);this.fx.drawRect(0,0,this.width,this.height);this.fx.endFill();this.fx.alpha=1;this._fxDuration=c;this._fxType=0;return true},fade:function(a,c,b){if(a===undefined){a=0}if(c===undefined){c=500}if(b===undefined){b=false}if(!this.fx||(!b&&this._fxDuration>0)){return false}this.fx.clear();this.fx.beginFill(a);this.fx.drawRect(0,0,this.width,this.height);this.fx.endFill();this.fx.alpha=0;this._fxDuration=c;this._fxType=1;return true},update:function(){if(this._fxDuration>0){this.updateFX()}if(this._shake.duration>0){this.updateShake()}if(this.bounds){this.checkBounds()}if(this.roundPx){this.view.floor();this._shake.x=Math.floor(this._shake.x);this._shake.y=Math.floor(this._shake.y)}this.displayObject.position.x=-this.view.x;this.displayObject.position.y=-this.view.y},updateFX:function(){if(this._fxType===0){this.fx.alpha-=this.game.time.elapsedMS/this._fxDuration;if(this.fx.alpha<=0){this._fxDuration=0;this.fx.alpha=0;this.onFlashComplete.dispatch()}}else{this.fx.alpha+=this.game.time.elapsedMS/this._fxDuration;if(this.fx.alpha>=1){this._fxDuration=0;this.fx.alpha=1;this.onFadeComplete.dispatch()}}},updateShake:function(){this._shake.duration-=this.game.time.elapsedMS;if(this._shake.duration<=0){this.onShakeComplete.dispatch();this._shake.x=0;this._shake.y=0}else{if(this._shake.horizontal){this._shake.x=this.game.rnd.frac()*this._shake.intensity*this.view.width*2-this._shake.intensity*this.view.width}if(this._shake.vertical){this._shake.y=this.game.rnd.frac()*this._shake.intensity*this.view.height*2-this._shake.intensity*this.view.height}}},updateTarget:function(){this._targetPosition.x=this.view.x+this.target.worldPosition.x;this._targetPosition.y=this.view.y+this.target.worldPosition.y;if(this.deadzone){this._edge=this._targetPosition.x-this.view.x;if(this._edge<this.deadzone.left){this.view.x=this.game.math.linear(this.view.x,this._targetPosition.x-this.deadzone.left,this.lerp.x)}else{if(this._edge>this.deadzone.right){this.view.x=this.game.math.linear(this.view.x,this._targetPosition.x-this.deadzone.right,this.lerp.x)}}this._edge=this._targetPosition.y-this.view.y;if(this._edge<this.deadzone.top){this.view.y=this.game.math.linear(this.view.y,this._targetPosition.y-this.deadzone.top,this.lerp.y)}else{if(this._edge>this.deadzone.bottom){this.view.y=this.game.math.linear(this.view.y,this._targetPosition.y-this.deadzone.bottom,this.lerp.y)}}}else{this.view.x=this.game.math.linear(this.view.x,this._targetPosition.x-this.view.halfWidth,this.lerp.x);this.view.y=this.game.math.linear(this.view.y,this._targetPosition.y-this.view.halfHeight,this.lerp.y)}if(this.bounds){this.checkBounds()}if(this.roundPx){this.view.floor()}this.displayObject.position.x=-this.view.x;this.displayObject.position.y=-this.view.y
},setBoundsToWorld:function(){if(this.bounds){this.bounds.copyFrom(this.game.world.bounds)}},checkBounds:function(){this.atLimit.x=false;this.atLimit.y=false;var b=this.view.x+this._shake.x;var c=this.view.right+this._shake.x;var a=this.view.y+this._shake.y;var d=this.view.bottom+this._shake.y;if(b<=this.bounds.x*this.scale.x){this.atLimit.x=true;this.view.x=this.bounds.x*this.scale.x;if(!this._shake.shakeBounds){this._shake.x=0}}if(c>=this.bounds.right*this.scale.x){this.atLimit.x=true;this.view.x=(this.bounds.right*this.scale.x)-this.width;if(!this._shake.shakeBounds){this._shake.x=0}}if(a<=this.bounds.top*this.scale.y){this.atLimit.y=true;this.view.y=this.bounds.top*this.scale.y;if(!this._shake.shakeBounds){this._shake.y=0}}if(d>=this.bounds.bottom*this.scale.y){this.atLimit.y=true;this.view.y=(this.bounds.bottom*this.scale.y)-this.height;if(!this._shake.shakeBounds){this._shake.y=0}}},setPosition:function(a,b){this.view.x=a;this.view.y=b;if(this.bounds){this.checkBounds()}},setSize:function(b,a){this.view.width=b;this.view.height=a},reset:function(){this.target=null;this.view.x=0;this.view.y=0;this._shake.duration=0;this.resetFX()},resetFX:function(){this.fx.clear();this.fx.alpha=0;this._fxDuration=0}};Phaser.Camera.prototype.constructor=Phaser.Camera;Object.defineProperty(Phaser.Camera.prototype,"x",{get:function(){return this.view.x},set:function(a){this.view.x=a;if(this.bounds){this.checkBounds()}}});Object.defineProperty(Phaser.Camera.prototype,"y",{get:function(){return this.view.y},set:function(a){this.view.y=a;if(this.bounds){this.checkBounds()}}});Object.defineProperty(Phaser.Camera.prototype,"position",{get:function(){this._position.set(this.view.x,this.view.y);return this._position},set:function(a){if(typeof a.x!=="undefined"){this.view.x=a.x}if(typeof a.y!=="undefined"){this.view.y=a.y}if(this.bounds){this.checkBounds()}}});Object.defineProperty(Phaser.Camera.prototype,"width",{get:function(){return this.view.width},set:function(a){this.view.width=a}});Object.defineProperty(Phaser.Camera.prototype,"height",{get:function(){return this.view.height},set:function(a){this.view.height=a}});Object.defineProperty(Phaser.Camera.prototype,"shakeIntensity",{get:function(){return this._shake.intensity},set:function(a){this._shake.intensity=a}});Phaser.State=function(){this.game=null;this.key="";this.add=null;this.make=null;this.camera=null;this.cache=null;this.input=null;this.load=null;this.math=null;this.sound=null;this.scale=null;this.stage=null;this.state=null;this.time=null;this.tweens=null;this.world=null;this.particles=null;this.physics=null;this.rnd=null};Phaser.State.prototype={init:function(){},preload:function(){},loadUpdate:function(){},loadRender:function(){},create:function(){},update:function(){},preRender:function(){},render:function(){},resize:function(){},paused:function(){},resumed:function(){},pauseUpdate:function(){},shutdown:function(){}};Phaser.State.prototype.constructor=Phaser.State;Phaser.StateManager=function(b,a){this.game=b;this.states={};this._pendingState=null;if(typeof a!=="undefined"&&a!==null){this._pendingState=a}this._clearWorld=false;this._clearCache=false;this._created=false;this._args=[];this.current="";this.onStateChange=new Phaser.Signal();this.onInitCallback=null;this.onPreloadCallback=null;this.onCreateCallback=null;this.onUpdateCallback=null;this.onRenderCallback=null;this.onResizeCallback=null;this.onPreRenderCallback=null;this.onLoadUpdateCallback=null;this.onLoadRenderCallback=null;this.onPausedCallback=null;this.onResumedCallback=null;this.onPauseUpdateCallback=null;this.onShutDownCallback=null};Phaser.StateManager.prototype={boot:function(){this.game.onPause.add(this.pause,this);this.game.onResume.add(this.resume,this);if(this._pendingState!==null&&typeof this._pendingState!=="string"){this.add("default",this._pendingState,true)}},add:function(b,c,a){if(a===undefined){a=false}var d;if(c instanceof Phaser.State){d=c}else{if(typeof c==="object"){d=c;d.game=this.game}else{if(typeof c==="function"){d=new c(this.game)}}}this.states[b]=d;if(a){if(this.game.isBooted){this.start(b)}else{this._pendingState=b}}return d},remove:function(a){if(this.current===a){this.callbackContext=null;this.onInitCallback=null;this.onShutDownCallback=null;this.onPreloadCallback=null;this.onLoadRenderCallback=null;this.onLoadUpdateCallback=null;this.onCreateCallback=null;this.onUpdateCallback=null;this.onPreRenderCallback=null;this.onRenderCallback=null;this.onResizeCallback=null;this.onPausedCallback=null;this.onResumedCallback=null;this.onPauseUpdateCallback=null}delete this.states[a]},start:function(b,a,c){if(a===undefined){a=true}if(c===undefined){c=false}if(this.checkState(b)){this._pendingState=b;this._clearWorld=a;this._clearCache=c;if(arguments.length>3){this._args=Array.prototype.splice.call(arguments,3)}}},restart:function(a,b){if(a===undefined){a=true}if(b===undefined){b=false}this._pendingState=this.current;this._clearWorld=a;this._clearCache=b;if(arguments.length>2){this._args=Array.prototype.slice.call(arguments,2)
}},dummy:function(){},preUpdate:function(){if(this._pendingState&&this.game.isBooted){var a=this.current;this.clearCurrentState();this.setCurrentState(this._pendingState);this.onStateChange.dispatch(this.current,a);if(this.current!==this._pendingState){return}else{this._pendingState=null}if(this.onPreloadCallback){this.game.load.reset(true);this.onPreloadCallback.call(this.callbackContext,this.game);if(this.game.load.totalQueuedFiles()===0&&this.game.load.totalQueuedPacks()===0){this.loadComplete()}else{this.game.load.start()}}else{this.loadComplete()}}},clearCurrentState:function(){if(this.current){if(this.onShutDownCallback){this.onShutDownCallback.call(this.callbackContext,this.game)}this.game.tweens.removeAll();this.game.camera.reset();this.game.input.reset(true);this.game.physics.clear();this.game.time.removeAll();this.game.scale.reset(this._clearWorld);if(this.game.debug){this.game.debug.reset()}if(this._clearWorld){this.game.world.shutdown();if(this._clearCache){this.game.cache.destroy()}}}},checkState:function(a){if(this.states[a]){if(this.states[a]["preload"]||this.states[a]["create"]||this.states[a]["update"]||this.states[a]["render"]){return true}else{console.warn("Invalid Phaser State object given. Must contain at least a one of the required functions: preload, create, update or render");return false}}else{console.warn("Phaser.StateManager - No state found with the key: "+a);return false}},link:function(a){this.states[a].game=this.game;this.states[a].add=this.game.add;this.states[a].make=this.game.make;this.states[a].camera=this.game.camera;this.states[a].cache=this.game.cache;this.states[a].input=this.game.input;this.states[a].load=this.game.load;this.states[a].math=this.game.math;this.states[a].sound=this.game.sound;this.states[a].scale=this.game.scale;this.states[a].state=this;this.states[a].stage=this.game.stage;this.states[a].time=this.game.time;this.states[a].tweens=this.game.tweens;this.states[a].world=this.game.world;this.states[a].particles=this.game.particles;this.states[a].rnd=this.game.rnd;this.states[a].physics=this.game.physics;this.states[a].key=a},unlink:function(a){if(this.states[a]){this.states[a].game=null;this.states[a].add=null;this.states[a].make=null;this.states[a].camera=null;this.states[a].cache=null;this.states[a].input=null;this.states[a].load=null;this.states[a].math=null;this.states[a].sound=null;this.states[a].scale=null;this.states[a].state=null;this.states[a].stage=null;this.states[a].time=null;this.states[a].tweens=null;this.states[a].world=null;this.states[a].particles=null;this.states[a].rnd=null;this.states[a].physics=null}},setCurrentState:function(a){this.callbackContext=this.states[a];this.link(a);this.onInitCallback=this.states[a]["init"]||this.dummy;this.onPreloadCallback=this.states[a]["preload"]||null;this.onLoadRenderCallback=this.states[a]["loadRender"]||null;this.onLoadUpdateCallback=this.states[a]["loadUpdate"]||null;this.onCreateCallback=this.states[a]["create"]||null;this.onUpdateCallback=this.states[a]["update"]||null;this.onPreRenderCallback=this.states[a]["preRender"]||null;this.onRenderCallback=this.states[a]["render"]||null;this.onResizeCallback=this.states[a]["resize"]||null;this.onPausedCallback=this.states[a]["paused"]||null;this.onResumedCallback=this.states[a]["resumed"]||null;this.onPauseUpdateCallback=this.states[a]["pauseUpdate"]||null;this.onShutDownCallback=this.states[a]["shutdown"]||this.dummy;if(this.current!==""){this.game.physics.reset()}this.current=a;this._created=false;this.onInitCallback.apply(this.callbackContext,this._args);if(a===this._pendingState){this._args=[]}this.game._kickstart=true},getCurrentState:function(){return this.states[this.current]},loadComplete:function(){if(this._created===false&&this.onLoadUpdateCallback){this.onLoadUpdateCallback.call(this.callbackContext,this.game)}if(this._created===false&&this.onCreateCallback){this._created=true;this.onCreateCallback.call(this.callbackContext,this.game)}else{this._created=true}},pause:function(){if(this._created&&this.onPausedCallback){this.onPausedCallback.call(this.callbackContext,this.game)}},resume:function(){if(this._created&&this.onResumedCallback){this.onResumedCallback.call(this.callbackContext,this.game)}},update:function(){if(this._created){if(this.onUpdateCallback){this.onUpdateCallback.call(this.callbackContext,this.game)}}else{if(this.onLoadUpdateCallback){this.onLoadUpdateCallback.call(this.callbackContext,this.game)}}},pauseUpdate:function(){if(this._created){if(this.onPauseUpdateCallback){this.onPauseUpdateCallback.call(this.callbackContext,this.game)}}else{if(this.onLoadUpdateCallback){this.onLoadUpdateCallback.call(this.callbackContext,this.game)}}},preRender:function(a){if(this._created&&this.onPreRenderCallback){this.onPreRenderCallback.call(this.callbackContext,this.game,a)}},resize:function(b,a){if(this.onResizeCallback){this.onResizeCallback.call(this.callbackContext,b,a)}},render:function(){if(this._created){if(this.onRenderCallback){if(this.game.renderType===Phaser.CANVAS){this.game.context.save();
	this.game.context.setTransform(1,0,0,1,0,0);this.onRenderCallback.call(this.callbackContext,this.game);this.game.context.restore()}else{this.onRenderCallback.call(this.callbackContext,this.game)}}}else{if(this.onLoadRenderCallback){this.onLoadRenderCallback.call(this.callbackContext,this.game)}}},destroy:function(){this._clearWorld=true;this._clearCache=true;this.clearCurrentState();this.callbackContext=null;this.onInitCallback=null;this.onShutDownCallback=null;this.onPreloadCallback=null;this.onLoadRenderCallback=null;this.onLoadUpdateCallback=null;this.onCreateCallback=null;this.onUpdateCallback=null;this.onRenderCallback=null;this.onPausedCallback=null;this.onResumedCallback=null;this.onPauseUpdateCallback=null;this.game=null;this.states={};this._pendingState=null;this.current=""}};Phaser.StateManager.prototype.constructor=Phaser.StateManager;Object.defineProperty(Phaser.StateManager.prototype,"created",{get:function(){return this._created}});Phaser.Signal=function(){};Phaser.Signal.prototype={_bindings:null,_prevParams:null,memorize:false,_shouldPropagate:true,active:true,_boundDispatch:false,validateListener:function(a,b){if(typeof a!=="function"){throw new Error("Phaser.Signal: listener is a required param of {fn}() and should be a Function.".replace("{fn}",b))}},_registerListener:function(f,d,e,c,a){var b=this._indexOfListener(f,e);var g;if(b!==-1){g=this._bindings[b];if(g.isOnce()!==d){throw new Error("You cannot add"+(d?"":"Once")+"() then add"+(!d?"":"Once")+"() the same listener without removing the relationship first.")}}else{g=new Phaser.SignalBinding(this,f,d,e,c,a);this._addBinding(g)}if(this.memorize&&this._prevParams){g.execute(this._prevParams)}return g},_addBinding:function(a){if(!this._bindings){this._bindings=[]}var b=this._bindings.length;do{b--}while(this._bindings[b]&&a._priority<=this._bindings[b]._priority);this._bindings.splice(b+1,0,a)},_indexOfListener:function(b,a){if(!this._bindings){return -1}if(a===undefined){a=null}var d=this._bindings.length;var c;while(d--){c=this._bindings[d];if(c._listener===b&&c.context===a){return d}}return -1},has:function(b,a){return this._indexOfListener(b,a)!==-1},add:function(e,d,c){this.validateListener(e,"add");var a=[];if(arguments.length>3){for(var b=3;b<arguments.length;b++){a.push(arguments[b])}}return this._registerListener(e,false,d,c,a)},addOnce:function(e,d,c){this.validateListener(e,"addOnce");var a=[];if(arguments.length>3){for(var b=3;b<arguments.length;b++){a.push(arguments[b])}}return this._registerListener(e,true,d,c,a)},remove:function(c,b){this.validateListener(c,"remove");var a=this._indexOfListener(c,b);if(a!==-1){this._bindings[a]._destroy();this._bindings.splice(a,1)}return c},removeAll:function(a){if(a===undefined){a=null}if(!this._bindings){return}var b=this._bindings.length;while(b--){if(a){if(this._bindings[b].context===a){this._bindings[b]._destroy();this._bindings.splice(b,1)}}else{this._bindings[b]._destroy()}}if(!a){this._bindings.length=0}},getNumListeners:function(){return this._bindings?this._bindings.length:0},halt:function(){this._shouldPropagate=false},dispatch:function(){if(!this.active||!this._bindings){return}var a=Array.prototype.slice.call(arguments);var c=this._bindings.length;var b;if(this.memorize){this._prevParams=a}if(!c){return}b=this._bindings.slice();this._shouldPropagate=true;do{c--}while(b[c]&&this._shouldPropagate&&b[c].execute(a)!==false)},forget:function(){if(this._prevParams){this._prevParams=null}},dispose:function(){this.removeAll();this._bindings=null;if(this._prevParams){this._prevParams=null}},toString:function(){return"[Phaser.Signal active:"+this.active+" numListeners:"+this.getNumListeners()+"]"}};Object.defineProperty(Phaser.Signal.prototype,"boundDispatch",{get:function(){var a=this;return this._boundDispatch||(this._boundDispatch=function(){return a.dispatch.apply(a,arguments)})}});Phaser.Signal.prototype.constructor=Phaser.Signal;Phaser.SignalBinding=function(f,e,c,d,b,a){this._listener=e;if(c){this._isOnce=true}if(d!=null){this.context=d}this._signal=f;if(b){this._priority=b}if(a&&a.length){this._args=a}};Phaser.SignalBinding.prototype={context:null,_isOnce:false,_priority:0,_args:null,callCount:0,active:true,params:null,execute:function(a){var c,b;if(this.active&&!!this._listener){b=this.params?this.params.concat(a):a;if(this._args){b=b.concat(this._args)}c=this._listener.apply(this.context,b);this.callCount++;if(this._isOnce){this.detach()}}return c},detach:function(){return this.isBound()?this._signal.remove(this._listener,this.context):null},isBound:function(){return(!!this._signal&&!!this._listener)},isOnce:function(){return this._isOnce},getListener:function(){return this._listener},getSignal:function(){return this._signal},_destroy:function(){delete this._signal;delete this._listener;delete this.context},toString:function(){return"[Phaser.SignalBinding isOnce:"+this._isOnce+", isBound:"+this.isBound()+", active:"+this.active+"]"}};Phaser.SignalBinding.prototype.constructor=Phaser.SignalBinding;
Phaser.Filter=function(b,a,e){this.game=b;this.type=Phaser.WEBGL_FILTER;this.passes=[this];this.shaders=[];this.dirty=true;this.padding=0;this.prevPoint=new Phaser.Point();var f=new Date();this.uniforms={resolution:{type:"2f",value:{x:256,y:256}},time:{type:"1f",value:0},mouse:{type:"2f",value:{x:0,y:0}},date:{type:"4fv",value:[f.getFullYear(),f.getMonth(),f.getDate(),f.getHours()*60*60+f.getMinutes()*60+f.getSeconds()]},sampleRate:{type:"1f",value:44100},iChannel0:{type:"sampler2D",value:null,textureData:{repeat:true}},iChannel1:{type:"sampler2D",value:null,textureData:{repeat:true}},iChannel2:{type:"sampler2D",value:null,textureData:{repeat:true}},iChannel3:{type:"sampler2D",value:null,textureData:{repeat:true}}};if(a){for(var c in a){this.uniforms[c]=a[c]}}this.fragmentSrc=e||""};Phaser.Filter.prototype={init:function(){},setResolution:function(b,a){this.uniforms.resolution.value.x=b;this.uniforms.resolution.value.y=a},update:function(b){if(typeof b!=="undefined"){var a=b.x/this.game.width;var c=1-b.y/this.game.height;if(a!==this.prevPoint.x||c!==this.prevPoint.y){this.uniforms.mouse.value.x=a.toFixed(2);this.uniforms.mouse.value.y=c.toFixed(2);this.prevPoint.set(a,c)}}this.uniforms.time.value=this.game.time.totalElapsedSeconds()},addToWorld:function(c,g,d,b,a,f){if(a===undefined){a=0}if(f===undefined){f=0}if(d!==undefined&&d!==null){this.width=d}else{d=this.width}if(b!==undefined&&b!==null){this.height=b}else{b=this.height}var e=this.game.add.image(c,g,"__default");e.width=d;e.height=b;e.anchor.set(a,f);e.filters=[this];return e},destroy:function(){this.game=null}};Phaser.Filter.prototype.constructor=Phaser.Filter;Object.defineProperty(Phaser.Filter.prototype,"width",{get:function(){return this.uniforms.resolution.value.x},set:function(a){this.uniforms.resolution.value.x=a}});Object.defineProperty(Phaser.Filter.prototype,"height",{get:function(){return this.uniforms.resolution.value.y},set:function(a){this.uniforms.resolution.value.y=a}});Phaser.Plugin=function(a,b){if(b===undefined){b=null}this.game=a;this.parent=b;this.active=false;this.visible=false;this.hasPreUpdate=false;this.hasUpdate=false;this.hasPostUpdate=false;this.hasRender=false;this.hasPostRender=false};Phaser.Plugin.prototype={preUpdate:function(){},update:function(){},render:function(){},postRender:function(){},destroy:function(){this.game=null;this.parent=null;this.active=false;this.visible=false}};Phaser.Plugin.prototype.constructor=Phaser.Plugin;Phaser.PluginManager=function(a){this.game=a;this.plugins=[];this._len=0;this._i=0};Phaser.PluginManager.prototype={add:function(c){var b=Array.prototype.slice.call(arguments,1);var a=false;if(typeof c==="function"){c=new c(this.game,this)}else{c.game=this.game;c.parent=this}if(typeof c["preUpdate"]==="function"){c.hasPreUpdate=true;a=true}if(typeof c["update"]==="function"){c.hasUpdate=true;a=true}if(typeof c["postUpdate"]==="function"){c.hasPostUpdate=true;a=true}if(typeof c["render"]==="function"){c.hasRender=true;a=true}if(typeof c["postRender"]==="function"){c.hasPostRender=true;a=true}if(a){if(c.hasPreUpdate||c.hasUpdate||c.hasPostUpdate){c.active=true}if(c.hasRender||c.hasPostRender){c.visible=true}this._len=this.plugins.push(c);if(typeof c["init"]==="function"){c.init.apply(c,b)}return c}else{return null}},remove:function(b,a){if(a===undefined){a=true}this._i=this._len;while(this._i--){if(this.plugins[this._i]===b){if(a){b.destroy()}this.plugins.splice(this._i,1);this._len--;return}}},removeAll:function(){this._i=this._len;while(this._i--){this.plugins[this._i].destroy()}this.plugins.length=0;this._len=0},preUpdate:function(){this._i=this._len;while(this._i--){if(this.plugins[this._i].active&&this.plugins[this._i].hasPreUpdate){this.plugins[this._i].preUpdate()}}},update:function(){this._i=this._len;while(this._i--){if(this.plugins[this._i].active&&this.plugins[this._i].hasUpdate){this.plugins[this._i].update()}}},postUpdate:function(){this._i=this._len;while(this._i--){if(this.plugins[this._i].active&&this.plugins[this._i].hasPostUpdate){this.plugins[this._i].postUpdate()}}},render:function(){this._i=this._len;while(this._i--){if(this.plugins[this._i].visible&&this.plugins[this._i].hasRender){this.plugins[this._i].render()}}},postRender:function(){this._i=this._len;while(this._i--){if(this.plugins[this._i].visible&&this.plugins[this._i].hasPostRender){this.plugins[this._i].postRender()}}},destroy:function(){this.removeAll();this.game=null}};Phaser.PluginManager.prototype.constructor=Phaser.PluginManager;Phaser.Stage=function(a){this.game=a;PIXI.DisplayObjectContainer.call(this);this.name="_stage_root";this.disableVisibilityChange=false;this.exists=true;this.worldTransform=new PIXI.Matrix();this.stage=this;this.currentRenderOrderID=0;this._hiddenVar="hidden";this._onChange=null;this._bgColor={r:0,g:0,b:0,a:0,color:0,rgba:"#000000"};if(!this.game.transparent){this._bgColor.a=1}if(a.config){this.parseConfig(a.config)}};Phaser.Stage.prototype=Object.create(PIXI.DisplayObjectContainer.prototype);
Phaser.Stage.prototype.constructor=Phaser.Stage;Phaser.Stage.prototype.parseConfig=function(a){if(a["disableVisibilityChange"]){this.disableVisibilityChange=a["disableVisibilityChange"]}if(a["backgroundColor"]){this.setBackgroundColor(a["backgroundColor"])}};Phaser.Stage.prototype.boot=function(){Phaser.DOM.getOffset(this.game.canvas,this.offset);Phaser.Canvas.setUserSelect(this.game.canvas,"none");Phaser.Canvas.setTouchAction(this.game.canvas,"none");this.checkVisibility()};Phaser.Stage.prototype.preUpdate=function(){this.currentRenderOrderID=0;for(var a=0;a<this.children.length;a++){this.children[a].preUpdate()}};Phaser.Stage.prototype.update=function(){var a=this.children.length;while(a--){this.children[a].update()}};Phaser.Stage.prototype.postUpdate=function(){this.game.camera.update();if(this.game.camera.target){this.game.camera.target.postUpdate();this.updateTransform();this.game.camera.updateTarget()}for(var a=0;a<this.children.length;a++){this.children[a].postUpdate()}this.updateTransform()};Phaser.Stage.prototype.updateTransform=function(){this.worldAlpha=1;for(var a=0;a<this.children.length;a++){this.children[a].updateTransform()}};Phaser.Stage.prototype.checkVisibility=function(){if(document.hidden!==undefined){this._hiddenVar="visibilitychange"}else{if(document.webkitHidden!==undefined){this._hiddenVar="webkitvisibilitychange"}else{if(document.mozHidden!==undefined){this._hiddenVar="mozvisibilitychange"}else{if(document.msHidden!==undefined){this._hiddenVar="msvisibilitychange"}else{this._hiddenVar=null}}}}var a=this;this._onChange=function(b){return a.visibilityChange(b)};if(this._hiddenVar){document.addEventListener(this._hiddenVar,this._onChange,false)}window.onblur=this._onChange;window.onfocus=this._onChange;window.onpagehide=this._onChange;window.onpageshow=this._onChange;if(this.game.device.cocoonJSApp){CocoonJS.App.onSuspended.addEventListener(function(){Phaser.Stage.prototype.visibilityChange.call(a,{type:"pause"})});CocoonJS.App.onActivated.addEventListener(function(){Phaser.Stage.prototype.visibilityChange.call(a,{type:"resume"})})}};Phaser.Stage.prototype.visibilityChange=function(a){if(a.type==="pagehide"||a.type==="blur"||a.type==="pageshow"||a.type==="focus"){if(a.type==="pagehide"||a.type==="blur"){this.game.focusLoss(a)}else{if(a.type==="pageshow"||a.type==="focus"){this.game.focusGain(a)}}return}if(this.disableVisibilityChange){return}if(document.hidden||document.mozHidden||document.msHidden||document.webkitHidden||a.type==="pause"){this.game.gamePaused(a)}else{this.game.gameResumed(a)}};Phaser.Stage.prototype.setBackgroundColor=function(a){if(this.game.transparent){return}Phaser.Color.valueToColor(a,this._bgColor);Phaser.Color.updateColor(this._bgColor);this._bgColor.r/=255;this._bgColor.g/=255;this._bgColor.b/=255;this._bgColor.a=1};Phaser.Stage.prototype.destroy=function(){if(this._hiddenVar){document.removeEventListener(this._hiddenVar,this._onChange,false)}window.onpagehide=null;window.onpageshow=null;window.onblur=null;window.onfocus=null};Object.defineProperty(Phaser.Stage.prototype,"backgroundColor",{get:function(){return this._bgColor.color},set:function(a){this.setBackgroundColor(a)}});Object.defineProperty(Phaser.Stage.prototype,"smoothed",{get:function(){return PIXI.scaleModes.DEFAULT===PIXI.scaleModes.LINEAR},set:function(a){if(a){PIXI.scaleModes.DEFAULT=PIXI.scaleModes.LINEAR}else{PIXI.scaleModes.DEFAULT=PIXI.scaleModes.NEAREST}}});Phaser.Group=function(b,e,c,a,f,d){if(a===undefined){a=false}if(f===undefined){f=false}if(d===undefined){d=Phaser.Physics.ARCADE}this.game=b;if(e===undefined){e=b.world}this.name=c||"group";this.z=0;PIXI.DisplayObjectContainer.call(this);if(a){this.game.stage.addChild(this);this.z=this.game.stage.children.length}else{if(e){e.addChild(this);this.z=e.children.length}}this.type=Phaser.GROUP;this.physicsType=Phaser.GROUP;this.alive=true;this.exists=true;this.ignoreDestroy=false;this.pendingDestroy=false;this.classType=Phaser.Sprite;this.cursor=null;this.inputEnableChildren=false;this.onChildInputDown=new Phaser.Signal();this.onChildInputUp=new Phaser.Signal();this.onChildInputOver=new Phaser.Signal();this.onChildInputOut=new Phaser.Signal();this.enableBody=f;this.enableBodyDebug=false;this.physicsBodyType=d;this.physicsSortDirection=null;this.onDestroy=new Phaser.Signal();this.cursorIndex=0;this.fixedToCamera=false;this.cameraOffset=new Phaser.Point();this.hash=[];this._sortProperty="z"};Phaser.Group.prototype=Object.create(PIXI.DisplayObjectContainer.prototype);Phaser.Group.prototype.constructor=Phaser.Group;Phaser.Group.RETURN_NONE=0;Phaser.Group.RETURN_TOTAL=1;Phaser.Group.RETURN_CHILD=2;Phaser.Group.RETURN_ALL=3;Phaser.Group.SORT_ASCENDING=-1;Phaser.Group.SORT_DESCENDING=1;Phaser.Group.prototype.add=function(c,a,b){if(a===undefined){a=false}if(c.parent===this){return c}if(c.body&&c.parent&&c.parent.hash){c.parent.removeFromHash(c)}if(b===undefined){c.z=this.children.length;this.addChild(c)}else{this.addChildAt(c,b);this.updateZ()}if(this.enableBody&&c.hasOwnProperty("body")&&c.body===null){this.game.physics.enable(c,this.physicsBodyType)
}else{if(c.body){this.addToHash(c)}}if(this.inputEnableChildren&&(!c.input||c.inputEnabled)){c.inputEnabled=true}if(!a&&c.events){c.events.onAddedToGroup$dispatch(c,this)}if(this.cursor===null){this.cursor=c}return c};Phaser.Group.prototype.addAt=function(c,b,a){this.add(c,a,b)};Phaser.Group.prototype.addToHash=function(b){if(b.parent===this){var a=this.hash.indexOf(b);if(a===-1){this.hash.push(b);return true}}return false};Phaser.Group.prototype.removeFromHash=function(b){if(b){var a=this.hash.indexOf(b);if(a!==-1){this.hash.splice(a,1);return true}}return false};Phaser.Group.prototype.addMultiple=function(c,a){if(c instanceof Phaser.Group){c.moveAll(this,a)}else{if(Array.isArray(c)){for(var b=0;b<c.length;b++){this.add(c[b],a)}}}return c};Phaser.Group.prototype.getAt=function(a){if(a<0||a>=this.children.length){return -1}else{return this.getChildAt(a)}};Phaser.Group.prototype.create=function(a,g,c,e,d,b){if(d===undefined){d=true}var f=new this.classType(this.game,a,g,c,e);f.exists=d;f.visible=d;f.alive=d;return this.add(f,false,b)};Phaser.Group.prototype.createMultiple=function(d,b,e,c){if(e===undefined){e=0}if(c===undefined){c=false}if(!Array.isArray(b)){b=[b]}if(!Array.isArray(e)){e=[e]}var f=this;var a=[];b.forEach(function(g){e.forEach(function(j){for(var h=0;h<d;h++){a.push(f.create(0,0,g,j,c))}})});return a};Phaser.Group.prototype.updateZ=function(){var a=this.children.length;while(a--){this.children[a].z=a}};Phaser.Group.prototype.align=function(b,m,d,k,j,e){if(j===undefined){j=Phaser.TOP_LEFT}if(e===undefined){e=0}if(this.children.length===0||e>this.children.length||(b===-1&&m===-1)){return false}var a=new Phaser.Rectangle(0,0,d,k);var l=(b*d);var g=(m*k);for(var f=e;f<this.children.length;f++){var c=this.children[f];if(c["alignIn"]){c.alignIn(a,j)}else{continue}if(b===-1){a.y+=k;if(a.y===g){a.x+=d;a.y=0}}else{if(m===-1){a.x+=d;if(a.x===l){a.x=0;a.y+=k}}else{a.x+=d;if(a.x===l){a.x=0;a.y+=k;if(a.y===g){return true}}}}}return true};Phaser.Group.prototype.resetCursor=function(a){if(a===undefined){a=0}if(a>this.children.length-1){a=0}if(this.cursor){this.cursorIndex=a;this.cursor=this.children[this.cursorIndex];return this.cursor}};Phaser.Group.prototype.next=function(){if(this.cursor){if(this.cursorIndex>=this.children.length-1){this.cursorIndex=0}else{this.cursorIndex++}this.cursor=this.children[this.cursorIndex];return this.cursor}};Phaser.Group.prototype.previous=function(){if(this.cursor){if(this.cursorIndex===0){this.cursorIndex=this.children.length-1}else{this.cursorIndex--}this.cursor=this.children[this.cursorIndex];return this.cursor}};Phaser.Group.prototype.swap=function(b,a){this.swapChildren(b,a);this.updateZ()};Phaser.Group.prototype.bringToTop=function(a){if(a.parent===this&&this.getIndex(a)<this.children.length){this.remove(a,false,true);this.add(a,true)}return a};Phaser.Group.prototype.sendToBack=function(a){if(a.parent===this&&this.getIndex(a)>0){this.remove(a,false,true);this.addAt(a,0,true)}return a};Phaser.Group.prototype.moveUp=function(e){if(e.parent===this&&this.getIndex(e)<this.children.length-1){var d=this.getIndex(e);var c=this.getAt(d+1);if(c){this.swap(e,c)}}return e};Phaser.Group.prototype.moveDown=function(e){if(e.parent===this&&this.getIndex(e)>0){var d=this.getIndex(e);var c=this.getAt(d-1);if(c){this.swap(e,c)}}return e};Phaser.Group.prototype.xy=function(b,a,c){if(b<0||b>this.children.length){return -1}else{this.getChildAt(b).x=a;this.getChildAt(b).y=c}};Phaser.Group.prototype.reverse=function(){this.children.reverse();this.updateZ()};Phaser.Group.prototype.getIndex=function(a){return this.children.indexOf(a)};Phaser.Group.prototype.getByName=function(a){for(var b=0;b<this.children.length;b++){if(this.children[b].name===a){return this.children[b]}}return null};Phaser.Group.prototype.replace=function(c,a){var b=this.getIndex(c);if(b!==-1){if(a.parent){if(a.parent instanceof Phaser.Group){a.parent.remove(a)}else{a.parent.removeChild(a)}}this.remove(c);this.addAt(a,b);return c}};Phaser.Group.prototype.hasProperty=function(c,b){var a=b.length;if(a===1&&b[0] in c){return true}else{if(a===2&&b[0] in c&&b[1] in c[b[0]]){return true}else{if(a===3&&b[0] in c&&b[1] in c[b[0]]&&b[2] in c[b[0]][b[1]]){return true}else{if(a===4&&b[0] in c&&b[1] in c[b[0]]&&b[2] in c[b[0]][b[1]]&&b[3] in c[b[0]][b[1]][b[2]]){return true}}}}return false};Phaser.Group.prototype.setProperty=function(f,c,e,b,d){if(d===undefined){d=false}b=b||0;if(!this.hasProperty(f,c)&&(!d||b>0)){return false}var a=c.length;if(a===1){if(b===0){f[c[0]]=e}else{if(b===1){f[c[0]]+=e}else{if(b===2){f[c[0]]-=e}else{if(b===3){f[c[0]]*=e}else{if(b===4){f[c[0]]/=e}}}}}}else{if(a===2){if(b===0){f[c[0]][c[1]]=e}else{if(b===1){f[c[0]][c[1]]+=e}else{if(b===2){f[c[0]][c[1]]-=e}else{if(b===3){f[c[0]][c[1]]*=e}else{if(b===4){f[c[0]][c[1]]/=e}}}}}}else{if(a===3){if(b===0){f[c[0]][c[1]][c[2]]=e}else{if(b===1){f[c[0]][c[1]][c[2]]+=e}else{if(b===2){f[c[0]][c[1]][c[2]]-=e}else{if(b===3){f[c[0]][c[1]][c[2]]*=e}else{if(b===4){f[c[0]][c[1]][c[2]]/=e
}}}}}}else{if(a===4){if(b===0){f[c[0]][c[1]][c[2]][c[3]]=e}else{if(b===1){f[c[0]][c[1]][c[2]][c[3]]+=e}else{if(b===2){f[c[0]][c[1]][c[2]][c[3]]-=e}else{if(b===3){f[c[0]][c[1]][c[2]][c[3]]*=e}else{if(b===4){f[c[0]][c[1]][c[2]][c[3]]/=e}}}}}}}}}return true};Phaser.Group.prototype.checkProperty=function(d,a,c,b){if(b===undefined){b=false}if(!Phaser.Utils.getProperty(d,a)&&b){return false}if(Phaser.Utils.getProperty(d,a)!==c){return false}return true};Phaser.Group.prototype.set=function(g,c,e,b,f,a,d){if(d===undefined){d=false}c=c.split(".");if(b===undefined){b=false}if(f===undefined){f=false}if((b===false||(b&&g.alive))&&(f===false||(f&&g.visible))){return this.setProperty(g,c,e,a,d)}};Phaser.Group.prototype.setAll=function(d,f,b,g,a,e){if(b===undefined){b=false}if(g===undefined){g=false}if(e===undefined){e=false}d=d.split(".");a=a||0;for(var c=0;c<this.children.length;c++){if((!b||(b&&this.children[c].alive))&&(!g||(g&&this.children[c].visible))){this.setProperty(this.children[c],d,f,a,e)}}};Phaser.Group.prototype.setAllChildren=function(d,f,b,g,a,e){if(b===undefined){b=false}if(g===undefined){g=false}if(e===undefined){e=false}a=a||0;for(var c=0;c<this.children.length;c++){if((!b||(b&&this.children[c].alive))&&(!g||(g&&this.children[c].visible))){if(this.children[c] instanceof Phaser.Group){this.children[c].setAllChildren(d,f,b,g,a,e)}else{this.setProperty(this.children[c],d.split("."),f,a,e)}}}};Phaser.Group.prototype.checkAll=function(c,e,a,f,d){if(a===undefined){a=false}if(f===undefined){f=false}if(d===undefined){d=false}for(var b=0;b<this.children.length;b++){if((!a||(a&&this.children[b].alive))&&(!f||(f&&this.children[b].visible))){if(!this.checkProperty(this.children[b],c,e,d)){return false}}}return true};Phaser.Group.prototype.addAll=function(c,b,a,d){this.setAll(c,b,a,d,1)};Phaser.Group.prototype.subAll=function(c,b,a,d){this.setAll(c,b,a,d,2)};Phaser.Group.prototype.multiplyAll=function(c,b,a,d){this.setAll(c,b,a,d,3)};Phaser.Group.prototype.divideAll=function(c,b,a,d){this.setAll(c,b,a,d,4)};Phaser.Group.prototype.callAllExists=function(d,c){var a;if(arguments.length>2){a=[];for(var b=2;b<arguments.length;b++){a.push(arguments[b])}}for(var b=0;b<this.children.length;b++){if(this.children[b].exists===c&&this.children[b][d]){this.children[b][d].apply(this.children[b],a)}}};Phaser.Group.prototype.callbackFromArray=function(c,b,a){if(a===1){if(c[b[0]]){return c[b[0]]}}else{if(a===2){if(c[b[0]][b[1]]){return c[b[0]][b[1]]}}else{if(a===3){if(c[b[0]][b[1]][b[2]]){return c[b[0]][b[1]][b[2]]}}else{if(a===4){if(c[b[0]][b[1]][b[2]][b[3]]){return c[b[0]][b[1]][b[2]][b[3]]}}else{if(c[b]){return c[b]}}}}}return false};Phaser.Group.prototype.callAll=function(h,d){if(h===undefined){return}h=h.split(".");var f=h.length;if(d===undefined||d===null||d===""){d=null}else{if(typeof d==="string"){d=d.split(".");var e=d.length}}var b;if(arguments.length>2){b=[];for(var c=2;c<arguments.length;c++){b.push(arguments[c])}}var g=null;var a=null;for(var c=0;c<this.children.length;c++){g=this.callbackFromArray(this.children[c],h,f);if(d&&g){a=this.callbackFromArray(this.children[c],d,e);if(g){g.apply(a,b)}}else{if(g){g.apply(this.children[c],b)}}}};Phaser.Group.prototype.preUpdate=function(){if(this.pendingDestroy){this.destroy();return false}if(!this.exists||!this.parent.exists){this.renderOrderID=-1;return false}for(var a=0;a<this.children.length;a++){this.children[a].preUpdate()}return true};Phaser.Group.prototype.update=function(){var a=this.children.length;while(a--){this.children[a].update()}};Phaser.Group.prototype.postUpdate=function(){if(this.fixedToCamera){this.x=this.game.camera.view.x+this.cameraOffset.x;this.y=this.game.camera.view.y+this.cameraOffset.y}for(var a=0;a<this.children.length;a++){this.children[a].postUpdate()}};Phaser.Group.prototype.filter=function(a,f){var b=-1;var d=this.children.length;var c=[];while(++b<d){var e=this.children[b];if(!f||(f&&e.exists)){if(a(e,b,this.children)){c.push(e)}}}return new Phaser.ArraySet(c)};Phaser.Group.prototype.forEach=function(e,a,d){if(d===undefined){d=false}if(arguments.length<=3){for(var c=0;c<this.children.length;c++){if(!d||(d&&this.children[c].exists)){e.call(a,this.children[c],c)}}}else{var b=[null];for(var c=3;c<arguments.length;c++){b.push(arguments[c])}for(var c=0;c<this.children.length;c++){if(!d||(d&&this.children[c].exists)){b[0]=this.children[c];e.apply(a,b.concat([c]))}}}};Phaser.Group.prototype.forEachExists=function(d,a){var b;if(arguments.length>2){b=[null];for(var c=2;c<arguments.length;c++){b.push(arguments[c])}}this.iterate("exists",true,Phaser.Group.RETURN_TOTAL,d,a,b)};Phaser.Group.prototype.forEachAlive=function(d,a){var b;if(arguments.length>2){b=[null];for(var c=2;c<arguments.length;c++){b.push(arguments[c])}}this.iterate("alive",true,Phaser.Group.RETURN_TOTAL,d,a,b)};Phaser.Group.prototype.forEachDead=function(d,a){var b;if(arguments.length>2){b=[null];for(var c=2;c<arguments.length;c++){b.push(arguments[c])}}this.iterate("alive",false,Phaser.Group.RETURN_TOTAL,d,a,b)
};Phaser.Group.prototype.sort=function(b,a){if(this.children.length<2){return}if(b===undefined){b="z"}if(a===undefined){a=Phaser.Group.SORT_ASCENDING}this._sortProperty=b;if(a===Phaser.Group.SORT_ASCENDING){this.children.sort(this.ascendingSortHandler.bind(this))}else{this.children.sort(this.descendingSortHandler.bind(this))}this.updateZ()};Phaser.Group.prototype.customSort=function(a,b){if(this.children.length<2){return}this.children.sort(a.bind(b));this.updateZ()};Phaser.Group.prototype.ascendingSortHandler=function(d,c){if(d[this._sortProperty]<c[this._sortProperty]){return -1}else{if(d[this._sortProperty]>c[this._sortProperty]){return 1}else{if(d.z<c.z){return -1}else{return 1}}}};Phaser.Group.prototype.descendingSortHandler=function(d,c){if(d[this._sortProperty]<c[this._sortProperty]){return 1}else{if(d[this._sortProperty]>c[this._sortProperty]){return -1}else{return 0}}};Phaser.Group.prototype.iterate=function(h,g,d,j,b,e){if(this.children.length===0){if(d===Phaser.Group.RETURN_TOTAL){return 0}else{if(d===Phaser.Group.RETURN_ALL){return[]}}}var f=0;if(d===Phaser.Group.RETURN_ALL){var a=[]}for(var c=0;c<this.children.length;c++){if(this.children[c][h]===g){f++;if(j){if(e){e[0]=this.children[c];j.apply(b,e)}else{j.call(b,this.children[c])}}if(d===Phaser.Group.RETURN_CHILD){return this.children[c]}else{if(d===Phaser.Group.RETURN_ALL){a.push(this.children[c])}}}}if(d===Phaser.Group.RETURN_TOTAL){return f}else{if(d===Phaser.Group.RETURN_ALL){return a}else{return null}}};Phaser.Group.prototype.getFirstExists=function(d,b,a,g,c,e){if(b===undefined){b=false}if(typeof d!=="boolean"){d=true}var f=this.iterate("exists",d,Phaser.Group.RETURN_CHILD);return(f===null&&b)?this.create(a,g,c,e):this.resetChild(f,a,g,c,e)};Phaser.Group.prototype.getFirstAlive=function(b,a,f,c,d){if(b===undefined){b=false}var e=this.iterate("alive",true,Phaser.Group.RETURN_CHILD);return(e===null&&b)?this.create(a,f,c,d):this.resetChild(e,a,f,c,d)};Phaser.Group.prototype.getFirstDead=function(b,a,f,c,d){if(b===undefined){b=false}var e=this.iterate("alive",false,Phaser.Group.RETURN_CHILD);return(e===null&&b)?this.create(a,f,c,d):this.resetChild(e,a,f,c,d)};Phaser.Group.prototype.resetChild=function(e,a,d,b,c){if(e===null){return null}if(a===undefined){a=null}if(d===undefined){d=null}if(a!==null&&d!==null){e.reset(a,d)}if(b!==undefined){e.loadTexture(b,c)}return e};Phaser.Group.prototype.getTop=function(){if(this.children.length>0){return this.children[this.children.length-1]}};Phaser.Group.prototype.getBottom=function(){if(this.children.length>0){return this.children[0]}};Phaser.Group.prototype.getClosestTo=function(d,h,c){var g=Number.MAX_VALUE;var b=0;var a=null;for(var e=0;e<this.children.length;e++){var f=this.children[e];if(f.exists){b=Math.abs(Phaser.Point.distance(d,f));if(b<g&&(!h||h.call(c,f,b))){g=b;a=f}}}return a};Phaser.Group.prototype.getFurthestFrom=function(d,h,c){var g=0;var b=0;var a=null;for(var e=0;e<this.children.length;e++){var f=this.children[e];if(f.exists){b=Math.abs(Phaser.Point.distance(d,f));if(b>g&&(!h||h.call(c,f,b))){g=b;a=f}}}return a};Phaser.Group.prototype.countLiving=function(){return this.iterate("alive",true,Phaser.Group.RETURN_TOTAL)};Phaser.Group.prototype.countDead=function(){return this.iterate("alive",false,Phaser.Group.RETURN_TOTAL)};Phaser.Group.prototype.getRandom=function(b,a){if(b===undefined){b=0}if(a===undefined){a=this.children.length}if(a===0){return null}return Phaser.ArrayUtils.getRandomItem(this.children,b,a)};Phaser.Group.prototype.getRandomExists=function(c,b){var a=this.getAll("exists",true,c,b);return this.game.rnd.pick(a)};Phaser.Group.prototype.getAll=function(e,d,f,c){if(f===undefined){f=0}if(c===undefined){c=this.children.length}var a=[];for(var b=f;b<c;b++){var g=this.children[b];if(e&&g[e]===d){a.push(g)}}return a};Phaser.Group.prototype.remove=function(d,b,a){if(b===undefined){b=false}if(a===undefined){a=false}if(this.children.length===0||this.children.indexOf(d)===-1){return false}if(!a&&d.events&&!d.destroyPhase){d.events.onRemovedFromGroup$dispatch(d,this)}var c=this.removeChild(d);this.removeFromHash(d);this.updateZ();if(this.cursor===d){this.next()}if(b&&c){c.destroy(true)}return true};Phaser.Group.prototype.moveAll=function(b,a){if(a===undefined){a=false}if(this.children.length>0&&b instanceof Phaser.Group){do{b.add(this.children[0],a)}while(this.children.length>0);this.hash=[];this.cursor=null}return b};Phaser.Group.prototype.removeAll=function(c,a,b){if(c===undefined){c=false}if(a===undefined){a=false}if(b===undefined){b=false}if(this.children.length===0){return}do{if(!a&&this.children[0].events){this.children[0].events.onRemovedFromGroup$dispatch(this.children[0],this)}var d=this.removeChild(this.children[0]);this.removeFromHash(d);if(c&&d){d.destroy(true,b)}}while(this.children.length>0);this.hash=[];this.cursor=null};Phaser.Group.prototype.removeBetween=function(f,d,c,a){if(d===undefined){d=this.children.length-1}if(c===undefined){c=false}if(a===undefined){a=false}if(this.children.length===0){return
}if(f>d||f<0||d>this.children.length){return false}var b=d;while(b>=f){if(!a&&this.children[b].events){this.children[b].events.onRemovedFromGroup$dispatch(this.children[b],this)}var e=this.removeChild(this.children[b]);this.removeFromHash(e);if(c&&e){e.destroy(true)}if(this.cursor===this.children[b]){this.cursor=null}b--}this.updateZ()};Phaser.Group.prototype.destroy=function(b,a){if(this.game===null||this.ignoreDestroy){return}if(b===undefined){b=true}if(a===undefined){a=false}this.onDestroy.dispatch(this,b,a);this.removeAll(b);this.cursor=null;this.filters=null;this.pendingDestroy=false;if(!a){if(this.parent){this.parent.removeChild(this)}this.game=null;this.exists=false}};Object.defineProperty(Phaser.Group.prototype,"total",{get:function(){return this.iterate("exists",true,Phaser.Group.RETURN_TOTAL)}});Object.defineProperty(Phaser.Group.prototype,"length",{get:function(){return this.children.length}});Object.defineProperty(Phaser.Group.prototype,"angle",{get:function(){return Phaser.Math.radToDeg(this.rotation)},set:function(a){this.rotation=Phaser.Math.degToRad(a)}});Object.defineProperty(Phaser.Group.prototype,"centerX",{get:function(){return this.getBounds(this.parent).centerX},set:function(b){var a=this.getBounds(this.parent);var c=this.x-a.x;this.x=(b+c)-a.halfWidth}});Object.defineProperty(Phaser.Group.prototype,"centerY",{get:function(){return this.getBounds(this.parent).centerY},set:function(b){var a=this.getBounds(this.parent);var c=this.y-a.y;this.y=(b+c)-a.halfHeight}});Object.defineProperty(Phaser.Group.prototype,"left",{get:function(){return this.getBounds(this.parent).left},set:function(b){var a=this.getBounds(this.parent);var c=this.x-a.x;this.x=b+c}});Object.defineProperty(Phaser.Group.prototype,"right",{get:function(){return this.getBounds(this.parent).right},set:function(b){var a=this.getBounds(this.parent);var c=this.x-a.x;this.x=(b+c)-a.width}});Object.defineProperty(Phaser.Group.prototype,"top",{get:function(){return this.getBounds(this.parent).top},set:function(b){var a=this.getBounds(this.parent);var c=this.y-a.y;this.y=(b+c)}});Object.defineProperty(Phaser.Group.prototype,"bottom",{get:function(){return this.getBounds(this.parent).bottom},set:function(b){var a=this.getBounds(this.parent);var c=this.y-a.y;this.y=(b+c)-a.height}});Phaser.World=function(a){Phaser.Group.call(this,a,null,"__world",false);this.bounds=new Phaser.Rectangle(0,0,a.width,a.height);this.camera=null;this._definedSize=false;this._width=a.width;this._height=a.height;this.game.state.onStateChange.add(this.stateChange,this)};Phaser.World.prototype=Object.create(Phaser.Group.prototype);Phaser.World.prototype.constructor=Phaser.World;Phaser.World.prototype.boot=function(){this.camera=new Phaser.Camera(this.game,0,0,0,this.game.width,this.game.height);this.game.stage.addChild(this);this.camera.boot()};Phaser.World.prototype.stateChange=function(){this.x=0;this.y=0;this.camera.reset()};Phaser.World.prototype.setBounds=function(b,d,c,a){this._definedSize=true;this._width=c;this._height=a;this.bounds.setTo(b,d,c,a);this.x=b;this.y=d;if(this.camera.bounds){this.camera.bounds.setTo(b,d,Math.max(c,this.game.width),Math.max(a,this.game.height))}this.game.physics.setBoundsToWorld()};Phaser.World.prototype.resize=function(b,a){if(this._definedSize){if(b<this._width){b=this._width}if(a<this._height){a=this._height}}this.bounds.width=b;this.bounds.height=a;this.game.camera.setBoundsToWorld();this.game.physics.setBoundsToWorld()};Phaser.World.prototype.shutdown=function(){this.destroy(true,true)};Phaser.World.prototype.wrap=function(d,e,b,a,c){if(e===undefined){e=0}if(b===undefined){b=false}if(a===undefined){a=true}if(c===undefined){c=true}if(!b){if(a&&d.x+e<this.bounds.x){d.x=this.bounds.right+e}else{if(a&&d.x-e>this.bounds.right){d.x=this.bounds.left-e}}if(c&&d.y+e<this.bounds.top){d.y=this.bounds.bottom+e}else{if(c&&d.y-e>this.bounds.bottom){d.y=this.bounds.top-e}}}else{d.getBounds();if(a){if((d.x+d._currentBounds.width)<this.bounds.x){d.x=this.bounds.right}else{if(d.x>this.bounds.right){d.x=this.bounds.left}}}if(c){if((d.y+d._currentBounds.height)<this.bounds.top){d.y=this.bounds.bottom}else{if(d.y>this.bounds.bottom){d.y=this.bounds.top}}}}};Object.defineProperty(Phaser.World.prototype,"width",{get:function(){return this.bounds.width},set:function(a){if(a<this.game.width){a=this.game.width}this.bounds.width=a;this._width=a;this._definedSize=true}});Object.defineProperty(Phaser.World.prototype,"height",{get:function(){return this.bounds.height},set:function(a){if(a<this.game.height){a=this.game.height}this.bounds.height=a;this._height=a;this._definedSize=true}});Object.defineProperty(Phaser.World.prototype,"centerX",{get:function(){return this.bounds.halfWidth+this.bounds.x}});Object.defineProperty(Phaser.World.prototype,"centerY",{get:function(){return this.bounds.halfHeight+this.bounds.y}});Object.defineProperty(Phaser.World.prototype,"randomX",{get:function(){if(this.bounds.x<0){return this.game.rnd.between(this.bounds.x,(this.bounds.width-Math.abs(this.bounds.x)))
}else{return this.game.rnd.between(this.bounds.x,this.bounds.width)}}});Object.defineProperty(Phaser.World.prototype,"randomY",{get:function(){if(this.bounds.y<0){return this.game.rnd.between(this.bounds.y,(this.bounds.height-Math.abs(this.bounds.y)))}else{return this.game.rnd.between(this.bounds.y,this.bounds.height)}}});Phaser.Game=function(e,a,g,d,f,h,b,c){this.id=Phaser.GAMES.push(this)-1;this.config=null;this.physicsConfig=c;this.parent="";this.width=800;this.height=600;this.resolution=1;this._width=800;this._height=600;this.transparent=false;this.antialias=true;this.preserveDrawingBuffer=false;this.clearBeforeRender=true;this.renderer=null;this.renderType=Phaser.AUTO;this.state=null;this.isBooted=false;this.isRunning=false;this.raf=null;this.add=null;this.make=null;this.cache=null;this.input=null;this.load=null;this.math=null;this.net=null;this.scale=null;this.sound=null;this.stage=null;this.time=null;this.tweens=null;this.world=null;this.physics=null;this.plugins=null;this.rnd=null;this.device=Phaser.Device;this.camera=null;this.canvas=null;this.context=null;this.debug=null;this.particles=null;this.create=null;this.lockRender=false;this.stepping=false;this.pendingStep=false;this.stepCount=0;this.onPause=null;this.onResume=null;this.onBlur=null;this.onFocus=null;this._paused=false;this._codePaused=false;this.currentUpdateID=0;this.updatesThisFrame=1;this._deltaTime=0;this._lastCount=0;this._spiraling=0;this._kickstart=true;this.fpsProblemNotifier=new Phaser.Signal();this.forceSingleUpdate=true;this._nextFpsNotification=0;if(arguments.length===1&&typeof arguments[0]==="object"){this.parseConfig(arguments[0])}else{this.config={enableDebug:true};if(typeof e!=="undefined"){this._width=e}if(typeof a!=="undefined"){this._height=a}if(typeof g!=="undefined"){this.renderType=g}if(typeof d!=="undefined"){this.parent=d}if(typeof h!=="undefined"){this.transparent=h}if(typeof b!=="undefined"){this.antialias=b}this.rnd=new Phaser.RandomDataGenerator([(Date.now()*Math.random()).toString()]);this.state=new Phaser.StateManager(this,f)}this.device.whenReady(this.boot,this);return this};Phaser.Game.prototype={parseConfig:function(b){this.config=b;if(b["enableDebug"]===undefined){this.config.enableDebug=true}if(b["width"]){this._width=b["width"]}if(b["height"]){this._height=b["height"]}if(b["renderer"]){this.renderType=b["renderer"]}if(b["parent"]){this.parent=b["parent"]}if(b["transparent"]!==undefined){this.transparent=b["transparent"]}if(b["antialias"]!==undefined){this.antialias=b["antialias"]}if(b["resolution"]){this.resolution=b["resolution"]}if(b["preserveDrawingBuffer"]!==undefined){this.preserveDrawingBuffer=b["preserveDrawingBuffer"]}if(b["physicsConfig"]){this.physicsConfig=b["physicsConfig"]}var a=[(Date.now()*Math.random()).toString()];if(b["seed"]){a=b["seed"]}this.rnd=new Phaser.RandomDataGenerator(a);var c=null;if(b["state"]){c=b["state"]}this.state=new Phaser.StateManager(this,c)},boot:function(){if(this.isBooted){return}this.onPause=new Phaser.Signal();this.onResume=new Phaser.Signal();this.onBlur=new Phaser.Signal();this.onFocus=new Phaser.Signal();this.isBooted=true;PIXI.game=this;this.math=Phaser.Math;this.scale=new Phaser.ScaleManager(this,this._width,this._height);this.stage=new Phaser.Stage(this);this.setUpRenderer();this.world=new Phaser.World(this);this.add=new Phaser.GameObjectFactory(this);this.make=new Phaser.GameObjectCreator(this);this.cache=new Phaser.Cache(this);this.load=new Phaser.Loader(this);this.time=new Phaser.Time(this);this.tweens=new Phaser.TweenManager(this);this.input=new Phaser.Input(this);this.sound=new Phaser.SoundManager(this);this.physics=new Phaser.Physics(this,this.physicsConfig);this.particles=new Phaser.Particles(this);this.create=new Phaser.Create(this);this.plugins=new Phaser.PluginManager(this);this.net=new Phaser.Net(this);this.time.boot();this.stage.boot();this.world.boot();this.scale.boot();this.input.boot();this.sound.boot();this.state.boot();if(this.config["enableDebug"]){this.debug=new Phaser.Utils.Debug(this);this.debug.boot()}else{this.debug={preUpdate:function(){},update:function(){},reset:function(){}}}this.showDebugHeader();this.isRunning=true;if(this.config&&this.config["forceSetTimeOut"]){this.raf=new Phaser.RequestAnimationFrame(this,this.config["forceSetTimeOut"])}else{this.raf=new Phaser.RequestAnimationFrame(this,false)}this._kickstart=true;if(window["focus"]){if(!window["PhaserGlobal"]||(window["PhaserGlobal"]&&!window["PhaserGlobal"].stopFocus)){window.focus()}}this.raf.start()},showDebugHeader:function(){if(window["PhaserGlobal"]&&window["PhaserGlobal"].hideBanner){return}var d=Phaser.VERSION;var g="Canvas";var b="HTML Audio";var h=1;if(this.renderType===Phaser.WEBGL){g="WebGL";h++}else{if(this.renderType===Phaser.HEADLESS){g="Headless"}}if(this.device.webAudio){b="WebAudio";h++}if(this.device.chrome){var e=["%c %c %c Phaser v"+d+" | Pixi.js | "+g+" | "+b+"  %c %c "+"%c http://phaser.io %c\u2665%c\u2665%c\u2665","background: #fb8cb3","background: #d44a52","color: #ffffff; background: #871905;","background: #d44a52","background: #fb8cb3","background: #ffffff"];
	for(var f=0;f<3;f++){if(f<h){e.push("color: #ff2424; background: #fff")}else{e.push("color: #959595; background: #fff")}}console.log.apply(console,e)}else{if(window["console"]){console.log("Phaser v"+d+" | Pixi.js "+PIXI.VERSION+" | "+g+" | "+b+" | https://www.phaser-china.com/");console.log("亲爱的微信小游戏开发者，您好！");console.log("phaser-wx.js是由Phaser小站维护的一个兼容微信小游戏的Phaser版本，我们在原生 Phaser 2.6.2 的基础上进行了一些修改，让您更加方便地集成进微信小游戏。");console.log("更多信息，请关注Phaser小站，https://www.phaser-china.com/")}}},setUpRenderer:function(){if(this.config["canvas"]){this.canvas=this.config["canvas"]}else{this.canvas=Phaser.Canvas.create(this,this.width,this.height,this.config["canvasID"],true)}if(this.config["canvasStyle"]){this.canvas.style=this.config["canvasStyle"]}else{this.canvas.style["-webkit-full-screen"]="width: 100%; height: 100%"}if(this.renderType===Phaser.HEADLESS||this.renderType===Phaser.CANVAS||(this.renderType===Phaser.AUTO&&!this.device.webGL)){if(this.device.canvas=true){this.renderType=Phaser.CANVAS;this.renderer=new PIXI.CanvasRenderer(this);this.context=this.renderer.context}else{throw new Error("Phaser.Game - Cannot create Canvas or WebGL context, aborting.")}}else{this.renderType=Phaser.WEBGL;this.renderer=new PIXI.WebGLRenderer(this);this.context=null;this.canvas.addEventListener("webglcontextlost",this.contextLost.bind(this),false);this.canvas.addEventListener("webglcontextrestored",this.contextRestored.bind(this),false)}if(this.device.cocoonJS){this.canvas.screencanvas=(this.renderType===Phaser.CANVAS)?true:false}if(this.renderType!==Phaser.HEADLESS){this.stage.smoothed=this.antialias;Phaser.Canvas.addToDOM(this.canvas,this.parent,false);Phaser.Canvas.setTouchAction(this.canvas)}},contextLost:function(a){a.preventDefault();this.renderer.contextLost=true},contextRestored:function(){this.renderer.initContext();this.cache.clearGLTextures();this.renderer.contextLost=false},update:function(c){this.time.update(c);if(this._kickstart){this.updateLogic(this.time.desiredFpsMult);this.updateRender(this.time.slowMotion*this.time.desiredFps);this._kickstart=false;return}if(this._spiraling>1&&!this.forceSingleUpdate){if(this.time.time>this._nextFpsNotification){this._nextFpsNotification=this.time.time+10000;this.fpsProblemNotifier.dispatch()}this._deltaTime=0;this._spiraling=0;this.updateRender(this.time.slowMotion*this.time.desiredFps)}else{var a=this.time.slowMotion*1000/this.time.desiredFps;this._deltaTime+=Math.max(Math.min(a*3,this.time.elapsed),0);var b=0;this.updatesThisFrame=Math.floor(this._deltaTime/a);if(this.forceSingleUpdate){this.updatesThisFrame=Math.min(1,this.updatesThisFrame)}while(this._deltaTime>=a){this._deltaTime-=a;this.currentUpdateID=b;this.updateLogic(this.time.desiredFpsMult);b++;if(this.forceSingleUpdate&&b===1){break}else{this.time.refresh()}}if(b>this._lastCount){this._spiraling++}else{if(b<this._lastCount){this._spiraling=0}}this._lastCount=b;this.updateRender(this._deltaTime/a)}},updateLogic:function(a){if(!this._paused&&!this.pendingStep){if(this.stepping){this.pendingStep=true}this.scale.preUpdate();this.debug.preUpdate();this.camera.preUpdate();this.physics.preUpdate();this.state.preUpdate(a);this.plugins.preUpdate(a);this.stage.preUpdate();this.state.update();this.stage.update();this.tweens.update();this.sound.update();this.input.update();this.physics.update();this.particles.update();this.plugins.update();this.stage.postUpdate();this.plugins.postUpdate()}else{this.scale.pauseUpdate();this.state.pauseUpdate();this.debug.preUpdate()}this.stage.updateTransform()},updateRender:function(a){if(this.lockRender){return}this.state.preRender(a);if(this.renderType!==Phaser.HEADLESS){this.renderer.render(this.stage);this.plugins.render(a);this.state.render(a)}this.plugins.postRender(a)},enableStep:function(){this.stepping=true;this.pendingStep=false;this.stepCount=0},disableStep:function(){this.stepping=false;this.pendingStep=false},step:function(){this.pendingStep=false;this.stepCount++},destroy:function(){this.raf.stop();this.state.destroy();this.sound.destroy();this.scale.destroy();this.stage.destroy();this.input.destroy();this.physics.destroy();this.plugins.destroy();this.state=null;this.sound=null;this.scale=null;this.stage=null;this.input=null;this.physics=null;this.plugins=null;this.cache=null;this.load=null;this.time=null;this.world=null;this.isBooted=false;this.renderer.destroy(false);Phaser.Canvas.removeFromDOM(this.canvas);PIXI.defaultRenderer=null;Phaser.GAMES[this.id]=null},gamePaused:function(a){if(!this._paused){this._paused=true;this.time.gamePaused();if(this.sound.muteOnPause){this.sound.setMute()}this.onPause.dispatch(a);if(this.device.cordova&&this.device.iOS){this.lockRender=true}}},gameResumed:function(a){if(this._paused&&!this._codePaused){this._paused=false;this.time.gameResumed();this.input.reset();if(this.sound.muteOnPause){this.sound.unsetMute()}this.onResume.dispatch(a);if(this.device.cordova&&this.device.iOS){this.lockRender=false}}},focusLoss:function(a){this.onBlur.dispatch(a);if(!this.stage.disableVisibilityChange){this.gamePaused(a)
}},focusGain:function(a){this.onFocus.dispatch(a);if(!this.stage.disableVisibilityChange){this.gameResumed(a)}}};Phaser.Game.prototype.constructor=Phaser.Game;Object.defineProperty(Phaser.Game.prototype,"paused",{get:function(){return this._paused},set:function(a){if(a===true){if(this._paused===false){this._paused=true;this.sound.setMute();this.time.gamePaused();this.onPause.dispatch(this)}this._codePaused=true}else{if(this._paused){this._paused=false;this.input.reset();this.sound.unsetMute();this.time.gameResumed();this.onResume.dispatch(this)}this._codePaused=false}}});Phaser.Input=function(a){this.game=a;this.hitCanvas=null;this.hitContext=null;this.moveCallbacks=[];this.customCandidateHandler=null;this.customCandidateHandlerContext=null;this.pollRate=0;this.enabled=true;this.multiInputOverride=Phaser.Input.MOUSE_TOUCH_COMBINE;this.position=null;this.speed=null;this.circle=null;this.scale=null;this.maxPointers=-1;this.tapRate=200;this.doubleTapRate=300;this.holdRate=2000;this.justPressedRate=200;this.justReleasedRate=200;this.recordPointerHistory=false;this.recordRate=100;this.recordLimit=100;this.pointer1=null;this.pointer2=null;this.pointer3=null;this.pointer4=null;this.pointer5=null;this.pointer6=null;this.pointer7=null;this.pointer8=null;this.pointer9=null;this.pointer10=null;this.pointers=[];this.activePointer=null;this.mousePointer=null;this.mouse=null;this.keyboard=null;this.touch=null;this.mspointer=null;this.gamepad=null;this.resetLocked=false;this.onDown=null;this.onUp=null;this.onTap=null;this.onHold=null;this.minPriorityID=0;this.interactiveItems=new Phaser.ArraySet();this._localPoint=new Phaser.Point();this._pollCounter=0;this._oldPosition=null;this._x=0;this._y=0};Phaser.Input.MOUSE_OVERRIDES_TOUCH=0;Phaser.Input.TOUCH_OVERRIDES_MOUSE=1;Phaser.Input.MOUSE_TOUCH_COMBINE=2;Phaser.Input.MAX_POINTERS=10;Phaser.Input.prototype={boot:function(){this.mousePointer=new Phaser.Pointer(this.game,0,Phaser.PointerMode.CURSOR);this.addPointer();this.addPointer();this.mouse=new Phaser.Mouse(this.game);this.touch=new Phaser.Touch(this.game);this.mspointer=new Phaser.MSPointer(this.game);if(Phaser.Keyboard){this.keyboard=new Phaser.Keyboard(this.game)}if(Phaser.Gamepad){this.gamepad=new Phaser.Gamepad(this.game)}this.onDown=new Phaser.Signal();this.onUp=new Phaser.Signal();this.onTap=new Phaser.Signal();this.onHold=new Phaser.Signal();this.scale=new Phaser.Point(1,1);this.speed=new Phaser.Point();this.position=new Phaser.Point();this._oldPosition=new Phaser.Point();this.circle=new Phaser.Circle(0,0,44);this.activePointer=this.mousePointer;this.hitCanvas=PIXI.CanvasPool.create(this,1,1);this.hitContext=this.hitCanvas.getContext("2d");this.mouse.start();this.touch.start();this.mspointer.start();this.mousePointer.active=true;if(this.keyboard){this.keyboard.start()}var a=this;this._onClickTrampoline=function(b){a.onClickTrampoline(b)};this.game.canvas.addEventListener("click",this._onClickTrampoline,false)},destroy:function(){this.mouse.stop();this.touch.stop();this.mspointer.stop();if(this.keyboard){this.keyboard.stop()}if(this.gamepad){this.gamepad.stop()}this.moveCallbacks=[];PIXI.CanvasPool.remove(this);this.game.canvas.removeEventListener("click",this._onClickTrampoline)},setInteractiveCandidateHandler:function(b,a){this.customCandidateHandler=b;this.customCandidateHandlerContext=a},addMoveCallback:function(b,a){this.moveCallbacks.push({callback:b,context:a})},deleteMoveCallback:function(c,b){var a=this.moveCallbacks.length;while(a--){if(this.moveCallbacks[a].callback===c&&this.moveCallbacks[a].context===b){this.moveCallbacks.splice(a,1);return}}},addPointer:function(){if(this.pointers.length>=Phaser.Input.MAX_POINTERS){console.warn("Phaser.Input.addPointer: Maximum limit of "+Phaser.Input.MAX_POINTERS+" pointers reached.");return null}var b=this.pointers.length+1;var a=new Phaser.Pointer(this.game,b,Phaser.PointerMode.TOUCH);this.pointers.push(a);this["pointer"+b]=a;return a},update:function(){if(this.keyboard){this.keyboard.update()}if(this.pollRate>0&&this._pollCounter<this.pollRate){this._pollCounter++;return}this.speed.x=this.position.x-this._oldPosition.x;this.speed.y=this.position.y-this._oldPosition.y;this._oldPosition.copyFrom(this.position);this.mousePointer.update();if(this.gamepad&&this.gamepad.active){this.gamepad.update()}for(var a=0;a<this.pointers.length;a++){this.pointers[a].update()}this._pollCounter=0},reset:function(b){if(!this.game.isBooted||this.resetLocked){return}if(b===undefined){b=false}this.mousePointer.reset();if(this.keyboard){this.keyboard.reset(b)}if(this.gamepad){this.gamepad.reset()}for(var a=0;a<this.pointers.length;a++){this.pointers[a].reset()}if(this.game.canvas.style.cursor!=="none"){this.game.canvas.style.cursor="inherit"}if(b){this.onDown.dispose();this.onUp.dispose();this.onTap.dispose();this.onHold.dispose();this.onDown=new Phaser.Signal();this.onUp=new Phaser.Signal();this.onTap=new Phaser.Signal();this.onHold=new Phaser.Signal();this.moveCallbacks=[]}this._pollCounter=0
},resetSpeed:function(a,b){this._oldPosition.setTo(a,b);this.speed.setTo(0,0)},startPointer:function(b){if(this.maxPointers>=0&&this.countActivePointers(this.maxPointers)>=this.maxPointers){return null}if(!this.pointer1.active){return this.pointer1.start(b)}if(!this.pointer2.active){return this.pointer2.start(b)}for(var a=2;a<this.pointers.length;a++){var c=this.pointers[a];if(!c.active){return c.start(b)}}return null},updatePointer:function(b){if(this.pointer1.active&&this.pointer1.identifier===b.identifier){return this.pointer1.move(b)}if(this.pointer2.active&&this.pointer2.identifier===b.identifier){return this.pointer2.move(b)}for(var a=2;a<this.pointers.length;a++){var c=this.pointers[a];if(c.active&&c.identifier===b.identifier){return c.move(b)}}return null},stopPointer:function(b){if(this.pointer1.active&&this.pointer1.identifier===b.identifier){return this.pointer1.stop(b)}if(this.pointer2.active&&this.pointer2.identifier===b.identifier){return this.pointer2.stop(b)}for(var a=2;a<this.pointers.length;a++){var c=this.pointers[a];if(c.active&&c.identifier===b.identifier){return c.stop(b)}}return null},countActivePointers:function(a){if(a===undefined){a=this.pointers.length}var c=a;for(var b=0;b<this.pointers.length&&c>0;b++){var d=this.pointers[b];if(d.active){c--}}return(a-c)},getPointer:function(b){if(b===undefined){b=false}for(var a=0;a<this.pointers.length;a++){var c=this.pointers[a];if(c.active===b){return c}}return null},getPointerFromIdentifier:function(a){for(var b=0;b<this.pointers.length;b++){var c=this.pointers[b];if(c.identifier===a){return c}}return null},getPointerFromId:function(b){for(var a=0;a<this.pointers.length;a++){var c=this.pointers[a];if(c.pointerId===b){return c}}return null},getLocalPosition:function(d,c,b){if(b===undefined){b=new Phaser.Point()}var a=d.worldTransform;var e=1/(a.a*a.d+a.c*-a.b);return b.setTo(a.d*e*c.x+-a.c*e*c.y+(a.ty*a.c-a.tx*a.d)*e,a.a*e*c.y+-a.b*e*c.x+(-a.ty*a.a+a.tx*a.b)*e)},hitTest:function(f,a,j){if(!f.worldVisible){return false}this.getLocalPosition(f,a,this._localPoint);j.copyFrom(this._localPoint);if(f.hitArea&&f.hitArea.contains){return(f.hitArea.contains(this._localPoint.x,this._localPoint.y))}else{if(f instanceof Phaser.TileSprite){var b=f.width;var h=f.height;var c=-b*f.anchor.x;if(this._localPoint.x>=c&&this._localPoint.x<c+b){var g=-h*f.anchor.y;if(this._localPoint.y>=g&&this._localPoint.y<g+h){return true}}}else{if(f instanceof PIXI.Sprite){var b=f.texture.frame.width;var h=f.texture.frame.height;var c=-b*f.anchor.x;if(this._localPoint.x>=c&&this._localPoint.x<c+b){var g=-h*f.anchor.y;if(this._localPoint.y>=g&&this._localPoint.y<g+h){return true}}}else{if(f instanceof Phaser.Graphics){for(var e=0;e<f.graphicsData.length;e++){var d=f.graphicsData[e];if(!d.fill){continue}if(d.shape&&d.shape.contains(this._localPoint.x,this._localPoint.y)){return true}}}}}}for(var e=0;e<f.children.length;e++){if(this.hitTest(f.children[e],a,j)){return true}}return false},onClickTrampoline:function(){this.activePointer.processClickTrampolines()}};Phaser.Input.prototype.constructor=Phaser.Input;Object.defineProperty(Phaser.Input.prototype,"x",{get:function(){return this._x},set:function(a){this._x=Math.floor(a)}});Object.defineProperty(Phaser.Input.prototype,"y",{get:function(){return this._y},set:function(a){this._y=Math.floor(a)}});Object.defineProperty(Phaser.Input.prototype,"pollLocked",{get:function(){return(this.pollRate>0&&this._pollCounter<this.pollRate)}});Object.defineProperty(Phaser.Input.prototype,"totalInactivePointers",{get:function(){return this.pointers.length-this.countActivePointers()}});Object.defineProperty(Phaser.Input.prototype,"totalActivePointers",{get:function(){return this.countActivePointers()}});Object.defineProperty(Phaser.Input.prototype,"worldX",{get:function(){return this.game.camera.view.x+this.x}});Object.defineProperty(Phaser.Input.prototype,"worldY",{get:function(){return this.game.camera.view.y+this.y}});Phaser.Mouse=function(a){this.game=a;this.input=a.input;this.callbackContext=this.game;this.mouseDownCallback=null;this.mouseUpCallback=null;this.mouseOutCallback=null;this.mouseOverCallback=null;this.mouseWheelCallback=null;this.capture=false;this.button=-1;this.wheelDelta=0;this.enabled=true;this.locked=false;this.stopOnGameOut=false;this.pointerLock=new Phaser.Signal();this.event=null;this._onMouseDown=null;this._onMouseMove=null;this._onMouseUp=null;this._onMouseOut=null;this._onMouseOver=null;this._onMouseWheel=null;this._wheelEvent=null};Phaser.Mouse.NO_BUTTON=-1;Phaser.Mouse.LEFT_BUTTON=0;Phaser.Mouse.MIDDLE_BUTTON=1;Phaser.Mouse.RIGHT_BUTTON=2;Phaser.Mouse.BACK_BUTTON=3;Phaser.Mouse.FORWARD_BUTTON=4;Phaser.Mouse.WHEEL_UP=1;Phaser.Mouse.WHEEL_DOWN=-1;Phaser.Mouse.prototype={start:function(){if(this.game.device.android&&this.game.device.chrome===false){return}if(this._onMouseDown!==null){return}var c=this;this._onMouseDown=function(d){return c.onMouseDown(d)};this._onMouseMove=function(d){return c.onMouseMove(d)};this._onMouseUp=function(d){return c.onMouseUp(d)
};this._onMouseUpGlobal=function(d){return c.onMouseUpGlobal(d)};this._onMouseOutGlobal=function(d){return c.onMouseOutGlobal(d)};this._onMouseOut=function(d){return c.onMouseOut(d)};this._onMouseOver=function(d){return c.onMouseOver(d)};this._onMouseWheel=function(d){return c.onMouseWheel(d)};var b=this.game.canvas;b.addEventListener("mousedown",this._onMouseDown,true);b.addEventListener("mousemove",this._onMouseMove,true);b.addEventListener("mouseup",this._onMouseUp,true);if(!this.game.device.cocoonJS){window.addEventListener("mouseup",this._onMouseUpGlobal,true);window.addEventListener("mouseout",this._onMouseOutGlobal,true);b.addEventListener("mouseover",this._onMouseOver,true);b.addEventListener("mouseout",this._onMouseOut,true)}var a=this.game.device.wheelEvent;if(a){b.addEventListener(a,this._onMouseWheel,true);if(a==="mousewheel"){this._wheelEvent=new WheelEventProxy(-1/40,1)}else{if(a==="DOMMouseScroll"){this._wheelEvent=new WheelEventProxy(1,1)}}}},onMouseDown:function(a){this.event=a;if(this.capture){a.preventDefault()}if(this.mouseDownCallback){this.mouseDownCallback.call(this.callbackContext,a)}if(!this.input.enabled||!this.enabled){return}a["identifier"]=0;this.input.mousePointer.start(a)},onMouseMove:function(a){this.event=a;if(this.capture){a.preventDefault()}if(this.mouseMoveCallback){this.mouseMoveCallback.call(this.callbackContext,a)}if(!this.input.enabled||!this.enabled){return}a["identifier"]=0;this.input.mousePointer.move(a)},onMouseUp:function(a){this.event=a;if(this.capture){a.preventDefault()}if(this.mouseUpCallback){this.mouseUpCallback.call(this.callbackContext,a)}if(!this.input.enabled||!this.enabled){return}a["identifier"]=0;this.input.mousePointer.stop(a)},onMouseUpGlobal:function(a){if(!this.input.mousePointer.withinGame){if(this.mouseUpCallback){this.mouseUpCallback.call(this.callbackContext,a)}a["identifier"]=0;this.input.mousePointer.stop(a)}},onMouseOutGlobal:function(a){this.event=a;if(this.capture){a.preventDefault()}this.input.mousePointer.withinGame=false;if(!this.input.enabled||!this.enabled){return}this.input.mousePointer.stop(a);this.input.mousePointer.leftButton.stop(a);this.input.mousePointer.rightButton.stop(a)},onMouseOut:function(a){this.event=a;if(this.capture){a.preventDefault()}this.input.mousePointer.withinGame=false;if(this.mouseOutCallback){this.mouseOutCallback.call(this.callbackContext,a)}if(!this.input.enabled||!this.enabled){return}if(this.stopOnGameOut){a["identifier"]=0;this.input.mousePointer.stop(a)}},onMouseOver:function(a){this.event=a;if(this.capture){a.preventDefault()}this.input.mousePointer.withinGame=true;if(this.mouseOverCallback){this.mouseOverCallback.call(this.callbackContext,a)}},onMouseWheel:function(a){if(this._wheelEvent){a=this._wheelEvent.bindEvent(a)}this.event=a;if(this.capture){a.preventDefault()}this.wheelDelta=Phaser.Math.clamp(-a.deltaY,-1,1);if(this.mouseWheelCallback){this.mouseWheelCallback.call(this.callbackContext,a)}},requestPointerLock:function(){if(this.game.device.pointerLock){var a=this.game.canvas;a.requestPointerLock=a.requestPointerLock||a.mozRequestPointerLock||a.webkitRequestPointerLock;a.requestPointerLock();var b=this;this._pointerLockChange=function(c){return b.pointerLockChange(c)};document.addEventListener("pointerlockchange",this._pointerLockChange,true);document.addEventListener("mozpointerlockchange",this._pointerLockChange,true);document.addEventListener("webkitpointerlockchange",this._pointerLockChange,true)}},pointerLockChange:function(b){var a=this.game.canvas;if(document.pointerLockElement===a||document.mozPointerLockElement===a||document.webkitPointerLockElement===a){this.locked=true;this.pointerLock.dispatch(true,b)}else{this.locked=false;this.pointerLock.dispatch(false,b)}},releasePointerLock:function(){document.exitPointerLock=document.exitPointerLock||document.mozExitPointerLock||document.webkitExitPointerLock;document.exitPointerLock();document.removeEventListener("pointerlockchange",this._pointerLockChange,true);document.removeEventListener("mozpointerlockchange",this._pointerLockChange,true);document.removeEventListener("webkitpointerlockchange",this._pointerLockChange,true)},stop:function(){var b=this.game.canvas;b.removeEventListener("mousedown",this._onMouseDown,true);b.removeEventListener("mousemove",this._onMouseMove,true);b.removeEventListener("mouseup",this._onMouseUp,true);b.removeEventListener("mouseover",this._onMouseOver,true);b.removeEventListener("mouseout",this._onMouseOut,true);var a=this.game.device.wheelEvent;if(a){b.removeEventListener(a,this._onMouseWheel,true)}window.removeEventListener("mouseup",this._onMouseUpGlobal,true);window.removeEventListener("mouseout",this._onMouseOutGlobal,true);document.removeEventListener("pointerlockchange",this._pointerLockChange,true);document.removeEventListener("mozpointerlockchange",this._pointerLockChange,true);document.removeEventListener("webkitpointerlockchange",this._pointerLockChange,true)}};Phaser.Mouse.prototype.constructor=Phaser.Mouse;
function WheelEventProxy(b,a){this._scaleFactor=b;this._deltaMode=a;this.originalEvent=null}WheelEventProxy.prototype={};WheelEventProxy.prototype.constructor=WheelEventProxy;WheelEventProxy.prototype.bindEvent=function(b){if(!WheelEventProxy._stubsGenerated&&b){var a=function(d){return function(){var e=this.originalEvent[d];return typeof e!=="function"?e:e.bind(this.originalEvent)}};for(var c in b){if(!(c in WheelEventProxy.prototype)){Object.defineProperty(WheelEventProxy.prototype,c,{get:a(c)})}}WheelEventProxy._stubsGenerated=true}this.originalEvent=b;return this};Object.defineProperties(WheelEventProxy.prototype,{"type":{value:"wheel"},"deltaMode":{get:function(){return this._deltaMode}},"deltaY":{get:function(){return(this._scaleFactor*(this.originalEvent.wheelDelta||this.originalEvent.detail))||0}},"deltaX":{get:function(){return(this._scaleFactor*this.originalEvent.wheelDeltaX)||0}},"deltaZ":{value:0}});Phaser.MSPointer=function(a){this.game=a;this.input=a.input;this.callbackContext=this.game;this.pointerDownCallback=null;this.pointerMoveCallback=null;this.pointerUpCallback=null;this.capture=true;this.button=-1;this.event=null;this.enabled=true;this._onMSPointerDown=null;this._onMSPointerMove=null;this._onMSPointerUp=null;this._onMSPointerUpGlobal=null;this._onMSPointerOut=null;this._onMSPointerOver=null};Phaser.MSPointer.prototype={start:function(){if(this._onMSPointerDown!==null){return}var b=this;if(this.game.device.mspointer){this._onMSPointerDown=function(c){return b.onPointerDown(c)};this._onMSPointerMove=function(c){return b.onPointerMove(c)};this._onMSPointerUp=function(c){return b.onPointerUp(c)};this._onMSPointerUpGlobal=function(c){return b.onPointerUpGlobal(c)};this._onMSPointerOut=function(c){return b.onPointerOut(c)};this._onMSPointerOver=function(c){return b.onPointerOver(c)};var a=this.game.canvas;a.addEventListener("MSPointerDown",this._onMSPointerDown,false);a.addEventListener("MSPointerMove",this._onMSPointerMove,false);a.addEventListener("MSPointerUp",this._onMSPointerUp,false);a.addEventListener("pointerdown",this._onMSPointerDown,false);a.addEventListener("pointermove",this._onMSPointerMove,false);a.addEventListener("pointerup",this._onMSPointerUp,false);a.style["-ms-content-zooming"]="none";a.style["-ms-touch-action"]="none";if(!this.game.device.cocoonJS){window.addEventListener("MSPointerUp",this._onMSPointerUpGlobal,true);a.addEventListener("MSPointerOver",this._onMSPointerOver,true);a.addEventListener("MSPointerOut",this._onMSPointerOut,true);window.addEventListener("pointerup",this._onMSPointerUpGlobal,true);a.addEventListener("pointerover",this._onMSPointerOver,true);a.addEventListener("pointerout",this._onMSPointerOut,true)}}},onPointerDown:function(a){this.event=a;if(this.capture){a.preventDefault()}if(this.pointerDownCallback){this.pointerDownCallback.call(this.callbackContext,a)}if(!this.input.enabled||!this.enabled){return}a.identifier=a.pointerId;if(a.pointerType==="mouse"||a.pointerType===4){this.input.mousePointer.start(a)}else{this.input.startPointer(a)}},onPointerMove:function(a){this.event=a;if(this.capture){a.preventDefault()}if(this.pointerMoveCallback){this.pointerMoveCallback.call(this.callbackContext,a)}if(!this.input.enabled||!this.enabled){return}a.identifier=a.pointerId;if(a.pointerType==="mouse"||a.pointerType===4){this.input.mousePointer.move(a)}else{this.input.updatePointer(a)}},onPointerUp:function(a){this.event=a;if(this.capture){a.preventDefault()}if(this.pointerUpCallback){this.pointerUpCallback.call(this.callbackContext,a)}if(!this.input.enabled||!this.enabled){return}a.identifier=a.pointerId;if(a.pointerType==="mouse"||a.pointerType===4){this.input.mousePointer.stop(a)}else{this.input.stopPointer(a)}},onPointerUpGlobal:function(a){if((a.pointerType==="mouse"||a.pointerType===4)&&!this.input.mousePointer.withinGame){this.onPointerUp(a)}else{var b=this.input.getPointerFromIdentifier(a.identifier);if(b&&b.withinGame){this.onPointerUp(a)}}},onPointerOut:function(a){this.event=a;if(this.capture){a.preventDefault()}if(a.pointerType==="mouse"||a.pointerType===4){this.input.mousePointer.withinGame=false}else{var b=this.input.getPointerFromIdentifier(a.identifier);if(b){b.withinGame=false}}if(this.input.mouse.mouseOutCallback){this.input.mouse.mouseOutCallback.call(this.input.mouse.callbackContext,a)}if(!this.input.enabled||!this.enabled){return}if(this.input.mouse.stopOnGameOut){a["identifier"]=0;if(b){b.stop(a)}else{this.input.mousePointer.stop(a)}}},onPointerOver:function(a){this.event=a;if(this.capture){a.preventDefault()}if(a.pointerType==="mouse"||a.pointerType===4){this.input.mousePointer.withinGame=true}else{var b=this.input.getPointerFromIdentifier(a.identifier);if(b){b.withinGame=true}}if(this.input.mouse.mouseOverCallback){this.input.mouse.mouseOverCallback.call(this.input.mouse.callbackContext,a)}},stop:function(){var a=this.game.canvas;a.removeEventListener("MSPointerDown",this._onMSPointerDown,false);a.removeEventListener("MSPointerMove",this._onMSPointerMove,false);
	a.removeEventListener("MSPointerUp",this._onMSPointerUp,false);a.removeEventListener("pointerdown",this._onMSPointerDown,false);a.removeEventListener("pointermove",this._onMSPointerMove,false);a.removeEventListener("pointerup",this._onMSPointerUp,false);window.removeEventListener("MSPointerUp",this._onMSPointerUpGlobal,true);a.removeEventListener("MSPointerOver",this._onMSPointerOver,true);a.removeEventListener("MSPointerOut",this._onMSPointerOut,true);window.removeEventListener("pointerup",this._onMSPointerUpGlobal,true);a.removeEventListener("pointerover",this._onMSPointerOver,true);a.removeEventListener("pointerout",this._onMSPointerOut,true)}};Phaser.MSPointer.prototype.constructor=Phaser.MSPointer;Phaser.DeviceButton=function(b,a){this.parent=b;this.game=b.game;this.event=null;this.isDown=false;this.isUp=true;this.timeDown=0;this.timeUp=0;this.repeats=0;this.altKey=false;this.shiftKey=false;this.ctrlKey=false;this.value=0;this.buttonCode=a;this.onDown=new Phaser.Signal();this.onUp=new Phaser.Signal();this.onFloat=new Phaser.Signal()};Phaser.DeviceButton.prototype={start:function(a,b){if(this.isDown){return}this.isDown=true;this.isUp=false;this.timeDown=this.game.time.time;this.repeats=0;this.event=a;this.value=b;if(a){this.altKey=a.altKey;this.shiftKey=a.shiftKey;this.ctrlKey=a.ctrlKey}this.onDown.dispatch(this,b)},stop:function(a,b){if(this.isUp){return}this.isDown=false;this.isUp=true;this.timeUp=this.game.time.time;this.event=a;this.value=b;if(a){this.altKey=a.altKey;this.shiftKey=a.shiftKey;this.ctrlKey=a.ctrlKey}this.onUp.dispatch(this,b)},padFloat:function(a){this.value=a;this.onFloat.dispatch(this,a)},justPressed:function(a){a=a||250;return(this.isDown&&(this.timeDown+a)>this.game.time.time)},justReleased:function(a){a=a||250;return(this.isUp&&(this.timeUp+a)>this.game.time.time)},reset:function(){this.isDown=false;this.isUp=true;this.timeDown=this.game.time.time;this.repeats=0;this.altKey=false;this.shiftKey=false;this.ctrlKey=false},destroy:function(){this.onDown.dispose();this.onUp.dispose();this.onFloat.dispose();this.parent=null;this.game=null}};Phaser.DeviceButton.prototype.constructor=Phaser.DeviceButton;Object.defineProperty(Phaser.DeviceButton.prototype,"duration",{get:function(){if(this.isUp){return -1}return this.game.time.time-this.timeDown}});Phaser.Pointer=function(a,c,b){this.game=a;this.id=c;this.type=Phaser.POINTER;this.exists=true;this.identifier=0;this.pointerId=null;this.pointerMode=b||(Phaser.PointerMode.CURSOR|Phaser.PointerMode.CONTACT);this.target=null;this.button=null;this.leftButton=new Phaser.DeviceButton(this,Phaser.Pointer.LEFT_BUTTON);this.middleButton=new Phaser.DeviceButton(this,Phaser.Pointer.MIDDLE_BUTTON);this.rightButton=new Phaser.DeviceButton(this,Phaser.Pointer.RIGHT_BUTTON);this.backButton=new Phaser.DeviceButton(this,Phaser.Pointer.BACK_BUTTON);this.forwardButton=new Phaser.DeviceButton(this,Phaser.Pointer.FORWARD_BUTTON);this.eraserButton=new Phaser.DeviceButton(this,Phaser.Pointer.ERASER_BUTTON);this._holdSent=false;this._history=[];this._nextDrop=0;this._stateReset=false;this.withinGame=false;this.clientX=-1;this.clientY=-1;this.pageX=-1;this.pageY=-1;this.screenX=-1;this.screenY=-1;this.rawMovementX=0;this.rawMovementY=0;this.movementX=0;this.movementY=0;this.x=-1;this.y=-1;this.isMouse=(c===0);this.isDown=false;this.isUp=true;this.timeDown=0;this.timeUp=0;this.previousTapTime=0;this.totalTouches=0;this.msSinceLastClick=Number.MAX_VALUE;this.targetObject=null;this.interactiveCandidates=[];this.active=false;this.dirty=false;this.position=new Phaser.Point();this.positionDown=new Phaser.Point();this.positionUp=new Phaser.Point();this.circle=new Phaser.Circle(0,0,44);this._clickTrampolines=null;this._trampolineTargetObject=null};Phaser.Pointer.NO_BUTTON=0;Phaser.Pointer.LEFT_BUTTON=1;Phaser.Pointer.RIGHT_BUTTON=2;Phaser.Pointer.MIDDLE_BUTTON=4;Phaser.Pointer.BACK_BUTTON=8;Phaser.Pointer.FORWARD_BUTTON=16;Phaser.Pointer.ERASER_BUTTON=32;Phaser.Pointer.prototype={resetButtons:function(){this.isDown=false;this.isUp=true;if(this.isMouse){this.leftButton.reset();this.middleButton.reset();this.rightButton.reset();this.backButton.reset();this.forwardButton.reset();this.eraserButton.reset()}},processButtonsDown:function(b,a){if(Phaser.Pointer.LEFT_BUTTON&b){this.leftButton.start(a)}if(Phaser.Pointer.RIGHT_BUTTON&b){this.rightButton.start(a)}if(Phaser.Pointer.MIDDLE_BUTTON&b){this.middleButton.start(a)}if(Phaser.Pointer.BACK_BUTTON&b){this.backButton.start(a)}if(Phaser.Pointer.FORWARD_BUTTON&b){this.forwardButton.start(a)}if(Phaser.Pointer.ERASER_BUTTON&b){this.eraserButton.start(a)}},processButtonsUp:function(a,b){if(a===Phaser.Mouse.LEFT_BUTTON){this.leftButton.stop(b)}if(a===Phaser.Mouse.RIGHT_BUTTON){this.rightButton.stop(b)}if(a===Phaser.Mouse.MIDDLE_BUTTON){this.middleButton.stop(b)}if(a===Phaser.Mouse.BACK_BUTTON){this.backButton.stop(b)}if(a===Phaser.Mouse.FORWARD_BUTTON){this.forwardButton.stop(b)}if(a===5){this.eraserButton.stop(b)}},updateButtons:function(a){this.button=a.button;
	var b=(a.type.toLowerCase().substr(-4)==="down");if(a.buttons!==undefined){if(b){this.processButtonsDown(a.buttons,a)}else{this.processButtonsUp(a.button,a)}}else{if(b){this.leftButton.start(a)}else{this.leftButton.stop(a);this.rightButton.stop(a)}}if(a.buttons===1&&a.ctrlKey&&this.leftButton.isDown){this.leftButton.stop(a);this.rightButton.start(a)}this.isUp=true;this.isDown=false;if(this.leftButton.isDown||this.rightButton.isDown||this.middleButton.isDown||this.backButton.isDown||this.forwardButton.isDown||this.eraserButton.isDown){this.isUp=false;this.isDown=true}},start:function(b){var a=this.game.input;if(b["pointerId"]){this.pointerId=b.pointerId}this.identifier=b.identifier;this.target=b.target;if(this.isMouse){this.updateButtons(b)}else{this.isDown=true;this.isUp=false}this.active=true;this.withinGame=true;this.dirty=false;this._history=[];this._clickTrampolines=null;this._trampolineTargetObject=null;this.msSinceLastClick=this.game.time.time-this.timeDown;this.timeDown=this.game.time.time;this._holdSent=false;this.move(b,true);this.positionDown.setTo(this.x,this.y);if(a.multiInputOverride===Phaser.Input.MOUSE_OVERRIDES_TOUCH||a.multiInputOverride===Phaser.Input.MOUSE_TOUCH_COMBINE||(a.multiInputOverride===Phaser.Input.TOUCH_OVERRIDES_MOUSE&&a.totalActivePointers===0)){a.x=this.x;a.y=this.y;a.position.setTo(this.x,this.y);a.onDown.dispatch(this,b);a.resetSpeed(this.x,this.y)}this._stateReset=false;this.totalTouches++;if(this.targetObject!==null){this.targetObject._touchedHandler(this)}return this},update:function(){var a=this.game.input;if(this.active){if(this.dirty){if(a.interactiveItems.total>0){this.processInteractiveObjects(false)}this.dirty=false}if(this._holdSent===false&&this.duration>=a.holdRate){if(a.multiInputOverride===Phaser.Input.MOUSE_OVERRIDES_TOUCH||a.multiInputOverride===Phaser.Input.MOUSE_TOUCH_COMBINE||(a.multiInputOverride===Phaser.Input.TOUCH_OVERRIDES_MOUSE&&a.totalActivePointers===0)){a.onHold.dispatch(this)}this._holdSent=true}if(a.recordPointerHistory&&this.game.time.time>=this._nextDrop){this._nextDrop=this.game.time.time+a.recordRate;this._history.push({x:this.position.x,y:this.position.y});if(this._history.length>a.recordLimit){this._history.shift()}}}},move:function(c,d){var a=this.game.input;if(a.pollLocked){return}if(d===undefined){d=false}if(c.button!==undefined){this.button=c.button}if(d&&this.isMouse){this.updateButtons(c)}this.clientX=c.clientX;this.clientY=c.clientY;this.pageX=c.pageX;this.pageY=c.pageY;this.screenX=c.screenX;this.screenY=c.screenY;if(this.isMouse&&a.mouse.locked&&!d){this.rawMovementX=c.movementX||c.mozMovementX||c.webkitMovementX||0;this.rawMovementY=c.movementY||c.mozMovementY||c.webkitMovementY||0;this.movementX+=this.rawMovementX;this.movementY+=this.rawMovementY}this.x=(this.pageX-this.game.scale.offset.x)*a.scale.x;this.y=(this.pageY-this.game.scale.offset.y)*a.scale.y;this.position.setTo(this.x,this.y);this.circle.x=this.x;this.circle.y=this.y;if(a.multiInputOverride===Phaser.Input.MOUSE_OVERRIDES_TOUCH||a.multiInputOverride===Phaser.Input.MOUSE_TOUCH_COMBINE||(a.multiInputOverride===Phaser.Input.TOUCH_OVERRIDES_MOUSE&&a.totalActivePointers===0)){a.activePointer=this;a.x=this.x;a.y=this.y;a.position.setTo(a.x,a.y);a.circle.x=a.x;a.circle.y=a.y}this.withinGame=this.game.scale.bounds.contains(this.pageX,this.pageY);if(this.game.paused){return this}var b=a.moveCallbacks.length;while(b--){a.moveCallbacks[b].callback.call(a.moveCallbacks[b].context,this,this.x,this.y,d)}if(this.targetObject!==null&&this.targetObject.isDragged===true){if(this.targetObject.update(this)===false){this.targetObject=null}}else{if(a.interactiveItems.total>0){this.processInteractiveObjects(d)}}return this},processInteractiveObjects:function(e){var c=0;var b=-1;var a=null;var d=this.game.input.interactiveItems.first;this.interactiveCandidates=[];while(d){d.checked=false;if(d.validForInput(b,c,false)){d.checked=true;if((e&&d.checkPointerDown(this,true))||(!e&&d.checkPointerOver(this,true))){c=d.sprite.renderOrderID;b=d.priorityID;a=d;this.interactiveCandidates.push(d)}}d=this.game.input.interactiveItems.next}d=this.game.input.interactiveItems.first;while(d){if(!d.checked&&d.validForInput(b,c,true)){if((e&&d.checkPointerDown(this,false))||(!e&&d.checkPointerOver(this,false))){c=d.sprite.renderOrderID;b=d.priorityID;a=d;this.interactiveCandidates.push(d)}}d=this.game.input.interactiveItems.next}if(this.game.input.customCandidateHandler){a=this.game.input.customCandidateHandler.call(this.game.input.customCandidateHandlerContext,this,this.interactiveCandidates,a)}this.swapTarget(a,false);return(this.targetObject!==null)},swapTarget:function(b,a){if(a===undefined){a=false}if(b===null){if(this.targetObject){this.targetObject._pointerOutHandler(this,a);this.targetObject=null}}else{if(this.targetObject===null){this.targetObject=b;b._pointerOverHandler(this,a)}else{if(this.targetObject===b){if(b.update(this)===false){this.targetObject=null}}else{this.targetObject._pointerOutHandler(this,a);
	this.targetObject=b;this.targetObject._pointerOverHandler(this,a)}}}},leave:function(a){this.withinGame=false;this.move(a,false)},stop:function(b){var a=this.game.input;if(this._stateReset&&this.withinGame){b.preventDefault();return}this.timeUp=this.game.time.time;if(a.multiInputOverride===Phaser.Input.MOUSE_OVERRIDES_TOUCH||a.multiInputOverride===Phaser.Input.MOUSE_TOUCH_COMBINE||(a.multiInputOverride===Phaser.Input.TOUCH_OVERRIDES_MOUSE&&a.totalActivePointers===0)){a.onUp.dispatch(this,b);if(this.duration>=0&&this.duration<=a.tapRate){if(this.timeUp-this.previousTapTime<a.doubleTapRate){a.onTap.dispatch(this,true)}else{a.onTap.dispatch(this,false)}this.previousTapTime=this.timeUp}}if(this.isMouse){this.updateButtons(b)}else{this.isDown=false;this.isUp=true}if(this.id>0){this.active=false}this.withinGame=this.game.scale.bounds.contains(b.pageX,b.pageY);this.pointerId=null;this.identifier=null;this.positionUp.setTo(this.x,this.y);if(this.isMouse===false){a.currentPointers--}a.interactiveItems.callAll("_releasedHandler",this);if(this._clickTrampolines){this._trampolineTargetObject=this.targetObject}this.targetObject=null;return this},justPressed:function(a){a=a||this.game.input.justPressedRate;return(this.isDown===true&&(this.timeDown+a)>this.game.time.time)},justReleased:function(a){a=a||this.game.input.justReleasedRate;return(this.isUp&&(this.timeUp+a)>this.game.time.time)},addClickTrampoline:function(b,f,a,d){if(!this.isDown){return}var e=(this._clickTrampolines=this._clickTrampolines||[]);for(var c=0;c<e.length;c++){if(e[c].name===b){e.splice(c,1);break}}e.push({name:b,targetObject:this.targetObject,callback:f,callbackContext:a,callbackArgs:d})},processClickTrampolines:function(){var c=this._clickTrampolines;if(!c){return}for(var a=0;a<c.length;a++){var b=c[a];if(b.targetObject===this._trampolineTargetObject){b.callback.apply(b.callbackContext,b.callbackArgs)}}this._clickTrampolines=null;this._trampolineTargetObject=null},reset:function(){if(this.isMouse===false){this.active=false}this.pointerId=null;this.identifier=null;this.dirty=false;this.totalTouches=0;this._holdSent=false;this._history.length=0;this._stateReset=true;this.resetButtons();if(this.targetObject){this.targetObject._releasedHandler(this)}this.targetObject=null},resetMovement:function(){this.movementX=0;this.movementY=0}};Phaser.Pointer.prototype.constructor=Phaser.Pointer;Object.defineProperty(Phaser.Pointer.prototype,"duration",{get:function(){if(this.isUp){return -1}return this.game.time.time-this.timeDown}});Object.defineProperty(Phaser.Pointer.prototype,"worldX",{get:function(){return this.game.world.camera.x+this.x}});Object.defineProperty(Phaser.Pointer.prototype,"worldY",{get:function(){return this.game.world.camera.y+this.y}});Phaser.PointerMode={CURSOR:1<<0,CONTACT:1<<1};Phaser.Touch=function(a){this.game=a;this.enabled=true;this.touchLockCallbacks=[];this.callbackContext=this.game;this.touchStartCallback=null;this.touchMoveCallback=null;this.touchEndCallback=null;this.touchEnterCallback=null;this.touchLeaveCallback=null;this.touchCancelCallback=null;this.preventDefault=true;this.event=null;this._onTouchStart=null;this._onTouchMove=null;this._onTouchEnd=null;this._onTouchEnter=null;this._onTouchLeave=null;this._onTouchCancel=null;this._onTouchMove=null};Phaser.Touch.prototype={start:function(){if(this._onTouchStart!==null){return}var a=this;if(this.game.device.touch){this._onTouchStart=function(b){return a.onTouchStart(b)};this._onTouchMove=function(b){return a.onTouchMove(b)};this._onTouchEnd=function(b){return a.onTouchEnd(b)};this._onTouchEnter=function(b){return a.onTouchEnter(b)};this._onTouchLeave=function(b){return a.onTouchLeave(b)};this._onTouchCancel=function(b){return a.onTouchCancel(b)};this.game.canvas.addEventListener("touchstart",this._onTouchStart,false);this.game.canvas.addEventListener("touchmove",this._onTouchMove,false);this.game.canvas.addEventListener("touchend",this._onTouchEnd,false);this.game.canvas.addEventListener("touchcancel",this._onTouchCancel,false);if(!this.game.device.cocoonJS){this.game.canvas.addEventListener("touchenter",this._onTouchEnter,false);this.game.canvas.addEventListener("touchleave",this._onTouchLeave,false)}}},consumeDocumentTouches:function(){this._documentTouchMove=function(a){a.preventDefault()};document.addEventListener("touchmove",this._documentTouchMove,false)},addTouchLockCallback:function(c,b,a){if(a===undefined){a=false}this.touchLockCallbacks.push({callback:c,context:b,onEnd:a})},removeTouchLockCallback:function(c,b){var a=this.touchLockCallbacks.length;while(a--){if(this.touchLockCallbacks[a].callback===c&&this.touchLockCallbacks[a].context===b){this.touchLockCallbacks.splice(a,1);return true}}return false},onTouchStart:function(c){var b=this.touchLockCallbacks.length;while(b--){var a=this.touchLockCallbacks[b];if(!a.onEnd&&a.callback.call(a.context,this,c)){this.touchLockCallbacks.splice(b,1)}}this.event=c;if(!this.game.input.enabled||!this.enabled){return}if(this.touchStartCallback){this.touchStartCallback.call(this.callbackContext,c)
}if(this.preventDefault){c.preventDefault()}for(var b=0;b<c.changedTouches.length;b++){this.game.input.startPointer(c.changedTouches[b])}},onTouchCancel:function(b){this.event=b;if(this.touchCancelCallback){this.touchCancelCallback.call(this.callbackContext,b)}if(!this.game.input.enabled||!this.enabled){return}if(this.preventDefault){b.preventDefault()}for(var a=0;a<b.changedTouches.length;a++){this.game.input.stopPointer(b.changedTouches[a])}},onTouchEnter:function(a){this.event=a;if(this.touchEnterCallback){this.touchEnterCallback.call(this.callbackContext,a)}if(!this.game.input.enabled||!this.enabled){return}if(this.preventDefault){a.preventDefault()}},onTouchLeave:function(a){this.event=a;if(this.touchLeaveCallback){this.touchLeaveCallback.call(this.callbackContext,a)}if(this.preventDefault){a.preventDefault()}},onTouchMove:function(b){this.event=b;if(this.touchMoveCallback){this.touchMoveCallback.call(this.callbackContext,b)}if(this.preventDefault){b.preventDefault()}for(var a=0;a<b.changedTouches.length;a++){this.game.input.updatePointer(b.changedTouches[a])}},onTouchEnd:function(c){var b=this.touchLockCallbacks.length;while(b--){var a=this.touchLockCallbacks[b];if(a.onEnd&&a.callback.call(a.context,this,c)){this.touchLockCallbacks.splice(b,1)}}this.event=c;if(this.touchEndCallback){this.touchEndCallback.call(this.callbackContext,c)}if(this.preventDefault){c.preventDefault()}for(var b=0;b<c.changedTouches.length;b++){this.game.input.stopPointer(c.changedTouches[b])}},stop:function(){if(this.game.device.touch){this.game.canvas.removeEventListener("touchstart",this._onTouchStart);this.game.canvas.removeEventListener("touchmove",this._onTouchMove);this.game.canvas.removeEventListener("touchend",this._onTouchEnd);this.game.canvas.removeEventListener("touchenter",this._onTouchEnter);this.game.canvas.removeEventListener("touchleave",this._onTouchLeave);this.game.canvas.removeEventListener("touchcancel",this._onTouchCancel)}}};Phaser.Touch.prototype.constructor=Phaser.Touch;Phaser.InputHandler=function(a){this.sprite=a;this.game=a.game;this.enabled=false;this.checked=false;this.priorityID=0;this.useHandCursor=false;this._setHandCursor=false;this.isDragged=false;this.allowHorizontalDrag=true;this.allowVerticalDrag=true;this.bringToTop=false;this.snapOffset=null;this.snapOnDrag=false;this.snapOnRelease=false;this.snapX=0;this.snapY=0;this.snapOffsetX=0;this.snapOffsetY=0;this.pixelPerfectOver=false;this.pixelPerfectClick=false;this.pixelPerfectAlpha=255;this.draggable=false;this.boundsRect=null;this.boundsSprite=null;this.scaleLayer=false;this.dragOffset=new Phaser.Point();this.dragFromCenter=false;this.dragStopBlocksInputUp=false;this.dragStartPoint=new Phaser.Point();this.dragDistanceThreshold=0;this.dragTimeThreshold=0;this.downPoint=new Phaser.Point();this.snapPoint=new Phaser.Point();this._dragPoint=new Phaser.Point();this._dragPhase=false;this._pendingDrag=false;this._dragTimePass=false;this._dragDistancePass=false;this._wasEnabled=false;this._tempPoint=new Phaser.Point();this._pointerData=[];this._pointerData.push({id:0,x:0,y:0,camX:0,camY:0,isDown:false,isUp:false,isOver:false,isOut:false,timeOver:0,timeOut:0,timeDown:0,timeUp:0,downDuration:0,isDragged:false})};Phaser.InputHandler.prototype={start:function(c,a){c=c||0;if(a===undefined){a=false}if(this.enabled===false){this.game.input.interactiveItems.add(this);this.useHandCursor=a;this.priorityID=c;for(var b=0;b<10;b++){this._pointerData[b]={id:b,x:0,y:0,isDown:false,isUp:false,isOver:false,isOut:false,timeOver:0,timeOut:0,timeDown:0,timeUp:0,downDuration:0,isDragged:false}}this.snapOffset=new Phaser.Point();this.enabled=true;this._wasEnabled=true}this.sprite.events.onAddedToGroup.add(this.addedToGroup,this);this.sprite.events.onRemovedFromGroup.add(this.removedFromGroup,this);return this.sprite},addedToGroup:function(){if(this._dragPhase){return}if(this._wasEnabled&&!this.enabled){this.start()}},removedFromGroup:function(){if(this._dragPhase){return}if(this.enabled){this._wasEnabled=true;this.stop()}else{this._wasEnabled=false}},reset:function(){this.enabled=false;for(var a=0;a<10;a++){this._pointerData[a]={id:a,x:0,y:0,isDown:false,isUp:false,isOver:false,isOut:false,timeOver:0,timeOut:0,timeDown:0,timeUp:0,downDuration:0,isDragged:false}}},stop:function(){if(this.enabled===false){return}else{this.enabled=false;this.game.input.interactiveItems.remove(this)}},destroy:function(){if(this.sprite){if(this._setHandCursor){this.game.canvas.style.cursor="default";this._setHandCursor=false}this.enabled=false;this.game.input.interactiveItems.remove(this);this._pointerData.length=0;this.boundsRect=null;this.boundsSprite=null;this.sprite=null}},validForInput:function(c,b,a){if(a===undefined){a=true}if(!this.enabled||this.sprite.scale.x===0||this.sprite.scale.y===0||this.priorityID<this.game.input.minPriorityID||(this.sprite.parent&&this.sprite.parent.ignoreChildInput)){return false}if(!a&&(this.pixelPerfectClick||this.pixelPerfectOver)){return false}if(this.priorityID>c||(this.priorityID===c&&this.sprite.renderOrderID>b)){return true
}return false},isPixelPerfect:function(){return(this.pixelPerfectClick||this.pixelPerfectOver)},pointerX:function(a){a=a||0;return this._pointerData[a].x},pointerY:function(a){a=a||0;return this._pointerData[a].y},pointerDown:function(a){a=a||0;return this._pointerData[a].isDown},pointerUp:function(a){a=a||0;return this._pointerData[a].isUp},pointerTimeDown:function(a){a=a||0;return this._pointerData[a].timeDown},pointerTimeUp:function(a){a=a||0;return this._pointerData[a].timeUp},pointerOver:function(b){if(!this.enabled){return false}if(b===undefined){for(var a=0;a<10;a++){if(this._pointerData[a].isOver){return true}}return false}else{return this._pointerData[b].isOver}},pointerOut:function(b){if(!this.enabled){return false}if(b===undefined){for(var a=0;a<10;a++){if(this._pointerData[a].isOut){return true}}}else{return this._pointerData[b].isOut}},pointerTimeOver:function(a){a=a||0;return this._pointerData[a].timeOver},pointerTimeOut:function(a){a=a||0;return this._pointerData[a].timeOut},pointerDragged:function(a){a=a||0;return this._pointerData[a].isDragged},checkPointerDown:function(b,a){if(!b.isDown||!this.enabled||!this.sprite||!this.sprite.parent||!this.sprite.visible||!this.sprite.parent.visible||this.sprite.worldScale.x===0||this.sprite.worldScale.y===0){return false}if(this.game.input.hitTest(this.sprite,b,this._tempPoint)){if(a===undefined){a=false}if(!a&&this.pixelPerfectClick){return this.checkPixel(this._tempPoint.x,this._tempPoint.y)}else{return true}}return false},checkPointerOver:function(b,a){if(!this.enabled||!this.sprite||!this.sprite.parent||!this.sprite.visible||!this.sprite.parent.visible||this.sprite.worldScale.x===0||this.sprite.worldScale.y===0){return false}if(this.game.input.hitTest(this.sprite,b,this._tempPoint)){if(a===undefined){a=false}if(!a&&this.pixelPerfectOver){return this.checkPixel(this._tempPoint.x,this._tempPoint.y)}else{return true}}return false},checkPixel:function(a,d,c){if(this.sprite.texture.baseTexture.source){if(a===null&&d===null){this.game.input.getLocalPosition(this.sprite,c,this._tempPoint);var a=this._tempPoint.x;var d=this._tempPoint.y}if(this.sprite.anchor.x!==0){a-=-this.sprite.texture.frame.width*this.sprite.anchor.x}if(this.sprite.anchor.y!==0){d-=-this.sprite.texture.frame.height*this.sprite.anchor.y}a+=this.sprite.texture.frame.x;d+=this.sprite.texture.frame.y;if(this.sprite.texture.trim){a-=this.sprite.texture.trim.x;d-=this.sprite.texture.trim.y;if(a<this.sprite.texture.crop.x||a>this.sprite.texture.crop.right||d<this.sprite.texture.crop.y||d>this.sprite.texture.crop.bottom){this._dx=a;this._dy=d;return false}}this._dx=a;this._dy=d;this.game.input.hitContext.clearRect(0,0,1,1);this.game.input.hitContext.drawImage(this.sprite.texture.baseTexture.source,a,d,1,1,0,0,1,1);var b=this.game.input.hitContext.getImageData(0,0,1,1);if(b.data[3]>=this.pixelPerfectAlpha){return true}}return false},update:function(a){if(this.sprite===null||this.sprite.parent===undefined){return}if(!this.enabled||!this.sprite.visible||!this.sprite.parent.visible){this._pointerOutHandler(a);return false}if(this._pendingDrag){if(!this._dragDistancePass){this._dragDistancePass=(Phaser.Math.distance(a.x,a.y,this.downPoint.x,this.downPoint.y)>=this.dragDistanceThreshold)}if(this._dragDistancePass&&this._dragTimePass){this.startDrag(a)}return true}else{if(this.draggable&&this._draggedPointerID===a.id){return this.updateDrag(a,false)}else{if(this._pointerData[a.id].isOver){if(this.checkPointerOver(a)){this._pointerData[a.id].x=a.x-this.sprite.x;this._pointerData[a.id].y=a.y-this.sprite.y;return true}else{this._pointerOutHandler(a);return false}}}}},_pointerOverHandler:function(c,a){if(this.sprite===null){return}var b=this._pointerData[c.id];if(b.isOver===false||c.dirty){var d=(b.isOver===false);b.isOver=true;b.isOut=false;b.timeOver=this.game.time.time;b.x=c.x-this.sprite.x;b.y=c.y-this.sprite.y;if(this.useHandCursor&&b.isDragged===false){this.game.canvas.style.cursor="pointer";this._setHandCursor=true}if(!a&&d&&this.sprite&&this.sprite.events){this.sprite.events.onInputOver$dispatch(this.sprite,c)}if(this.sprite.parent&&this.sprite.parent.type===Phaser.GROUP){this.sprite.parent.onChildInputOver.dispatch(this.sprite,c)}}},_pointerOutHandler:function(c,a){if(this.sprite===null){return}var b=this._pointerData[c.id];b.isOver=false;b.isOut=true;b.timeOut=this.game.time.time;if(this.useHandCursor&&b.isDragged===false){this.game.canvas.style.cursor="default";this._setHandCursor=false}if(!a&&this.sprite&&this.sprite.events){this.sprite.events.onInputOut$dispatch(this.sprite,c);if(this.sprite&&this.sprite.parent&&this.sprite.parent.type===Phaser.GROUP){this.sprite.parent.onChildInputOut.dispatch(this.sprite,c)}}},_touchedHandler:function(b){if(this.sprite===null){return}var a=this._pointerData[b.id];if(!a.isDown&&a.isOver){if(this.pixelPerfectClick&&!this.checkPixel(null,null,b)){return}a.isDown=true;a.isUp=false;a.timeDown=this.game.time.time;this.downPoint.set(b.x,b.y);b.dirty=true;if(this.sprite&&this.sprite.events){this.sprite.events.onInputDown$dispatch(this.sprite,b);
	if(this.sprite&&this.sprite.parent&&this.sprite.parent.type===Phaser.GROUP){this.sprite.parent.onChildInputDown.dispatch(this.sprite,b)}if(this.sprite===null){return}}if(this.draggable&&this.isDragged===false){if(this.dragTimeThreshold===0&&this.dragDistanceThreshold===0){this.startDrag(b)}else{this._pendingDrag=true;this._dragDistancePass=(this.dragDistanceThreshold===0);if(this.dragTimeThreshold>0){this._dragTimePass=false;this.game.time.events.add(this.dragTimeThreshold,this.dragTimeElapsed,this,b)}else{this._dragTimePass=true}}}if(this.bringToTop){this.sprite.bringToTop()}}},dragTimeElapsed:function(a){this._dragTimePass=true;if(this._pendingDrag&&this.sprite){if(this._dragDistancePass){this.startDrag(a)}}},_releasedHandler:function(c){if(this.sprite===null){return}var a=this._pointerData[c.id];if(a.isDown&&c.isUp){a.isDown=false;a.isUp=true;a.timeUp=this.game.time.time;a.downDuration=a.timeUp-a.timeDown;var b=this.checkPointerOver(c);if(this.sprite&&this.sprite.events){if(!this.dragStopBlocksInputUp||this.dragStopBlocksInputUp&&!(this.draggable&&this.isDragged&&this._draggedPointerID===c.id)){this.sprite.events.onInputUp$dispatch(this.sprite,c,b)}if(this.sprite&&this.sprite.parent&&this.sprite.parent.type===Phaser.GROUP){this.sprite.parent.onChildInputUp.dispatch(this.sprite,c,b)}if(b){b=this.checkPointerOver(c)}}a.isOver=b;if(!b&&this.useHandCursor){this.game.canvas.style.cursor="default";this._setHandCursor=false}c.dirty=true;this._pendingDrag=false;if(this.draggable&&this.isDragged&&this._draggedPointerID===c.id){this.stopDrag(c)}}},updateDrag:function(e,b){if(b===undefined){b=false}if(e.isUp){this.stopDrag(e);return false}var d=this.globalToLocalX(e.x)+this._dragPoint.x+this.dragOffset.x;var c=this.globalToLocalY(e.y)+this._dragPoint.y+this.dragOffset.y;if(this.sprite.fixedToCamera){if(this.allowHorizontalDrag){this.sprite.cameraOffset.x=d}if(this.allowVerticalDrag){this.sprite.cameraOffset.y=c}if(this.boundsRect){this.checkBoundsRect()}if(this.boundsSprite){this.checkBoundsSprite()}if(this.snapOnDrag){this.sprite.cameraOffset.x=Math.round((this.sprite.cameraOffset.x-(this.snapOffsetX%this.snapX))/this.snapX)*this.snapX+(this.snapOffsetX%this.snapX);this.sprite.cameraOffset.y=Math.round((this.sprite.cameraOffset.y-(this.snapOffsetY%this.snapY))/this.snapY)*this.snapY+(this.snapOffsetY%this.snapY);this.snapPoint.set(this.sprite.cameraOffset.x,this.sprite.cameraOffset.y)}}else{var a=this.game.camera.x-this._pointerData[e.id].camX;var f=this.game.camera.y-this._pointerData[e.id].camY;if(this.allowHorizontalDrag){this.sprite.x=d+a}if(this.allowVerticalDrag){this.sprite.y=c+f}if(this.boundsRect){this.checkBoundsRect()}if(this.boundsSprite){this.checkBoundsSprite()}if(this.snapOnDrag){this.sprite.x=Math.round((this.sprite.x-(this.snapOffsetX%this.snapX))/this.snapX)*this.snapX+(this.snapOffsetX%this.snapX);this.sprite.y=Math.round((this.sprite.y-(this.snapOffsetY%this.snapY))/this.snapY)*this.snapY+(this.snapOffsetY%this.snapY);this.snapPoint.set(this.sprite.x,this.sprite.y)}}this.sprite.events.onDragUpdate.dispatch(this.sprite,e,d,c,this.snapPoint,b);return true},justOver:function(b,a){b=b||0;a=a||500;return(this._pointerData[b].isOver&&this.overDuration(b)<a)},justOut:function(b,a){b=b||0;a=a||500;return(this._pointerData[b].isOut&&(this.game.time.time-this._pointerData[b].timeOut<a))},justPressed:function(b,a){b=b||0;a=a||500;return(this._pointerData[b].isDown&&this.downDuration(b)<a)},justReleased:function(b,a){b=b||0;a=a||500;return(this._pointerData[b].isUp&&(this.game.time.time-this._pointerData[b].timeUp<a))},overDuration:function(a){a=a||0;if(this._pointerData[a].isOver){return this.game.time.time-this._pointerData[a].timeOver}return -1},downDuration:function(a){a=a||0;if(this._pointerData[a].isDown){return this.game.time.time-this._pointerData[a].timeDown}return -1},enableDrag:function(b,e,a,d,f,c){if(b===undefined){b=false}if(e===undefined){e=false}if(a===undefined){a=false}if(d===undefined){d=255}if(f===undefined){f=null}if(c===undefined){c=null}this._dragPoint=new Phaser.Point();this.draggable=true;this.bringToTop=e;this.dragOffset=new Phaser.Point();this.dragFromCenter=b;this.pixelPerfectClick=a;this.pixelPerfectAlpha=d;if(f){this.boundsRect=f}if(c){this.boundsSprite=c}},disableDrag:function(){if(this._pointerData){for(var a=0;a<10;a++){this._pointerData[a].isDragged=false}}this.draggable=false;this.isDragged=false;this._draggedPointerID=-1;this._pendingDrag=false},startDrag:function(c){var a=this.sprite.x;var d=this.sprite.y;this.isDragged=true;this._draggedPointerID=c.id;this._pointerData[c.id].camX=this.game.camera.x;this._pointerData[c.id].camY=this.game.camera.y;this._pointerData[c.id].isDragged=true;if(this.sprite.fixedToCamera){if(this.dragFromCenter){var b=this.sprite.getBounds();this.sprite.cameraOffset.x=this.globalToLocalX(c.x)+(this.sprite.cameraOffset.x-b.centerX);this.sprite.cameraOffset.y=this.globalToLocalY(c.y)+(this.sprite.cameraOffset.y-b.centerY)}this._dragPoint.setTo(this.sprite.cameraOffset.x-c.x,this.sprite.cameraOffset.y-c.y)
}else{if(this.dragFromCenter){var b=this.sprite.getBounds();this.sprite.x=this.globalToLocalX(c.x)+(this.sprite.x-b.centerX);this.sprite.y=this.globalToLocalY(c.y)+(this.sprite.y-b.centerY)}this._dragPoint.setTo(this.sprite.x-this.globalToLocalX(c.x),this.sprite.y-this.globalToLocalY(c.y))}this.updateDrag(c,true);if(this.bringToTop){this._dragPhase=true;this.sprite.bringToTop()}this.dragStartPoint.set(a,d);this.sprite.events.onDragStart$dispatch(this.sprite,c,a,d);this._pendingDrag=false},globalToLocalX:function(a){if(this.scaleLayer){a-=this.game.scale.grid.boundsFluid.x;a*=this.game.scale.grid.scaleFluidInversed.x}return a},globalToLocalY:function(a){if(this.scaleLayer){a-=this.game.scale.grid.boundsFluid.y;a*=this.game.scale.grid.scaleFluidInversed.y}return a},stopDrag:function(a){this.isDragged=false;this._draggedPointerID=-1;this._pointerData[a.id].isDragged=false;this._dragPhase=false;this._pendingDrag=false;if(this.snapOnRelease){if(this.sprite.fixedToCamera){this.sprite.cameraOffset.x=Math.round((this.sprite.cameraOffset.x-(this.snapOffsetX%this.snapX))/this.snapX)*this.snapX+(this.snapOffsetX%this.snapX);this.sprite.cameraOffset.y=Math.round((this.sprite.cameraOffset.y-(this.snapOffsetY%this.snapY))/this.snapY)*this.snapY+(this.snapOffsetY%this.snapY)}else{this.sprite.x=Math.round((this.sprite.x-(this.snapOffsetX%this.snapX))/this.snapX)*this.snapX+(this.snapOffsetX%this.snapX);this.sprite.y=Math.round((this.sprite.y-(this.snapOffsetY%this.snapY))/this.snapY)*this.snapY+(this.snapOffsetY%this.snapY)}}this.sprite.events.onDragStop$dispatch(this.sprite,a);if(this.checkPointerOver(a)===false){this._pointerOutHandler(a)}},setDragLock:function(a,b){if(a===undefined){a=true}if(b===undefined){b=true}this.allowHorizontalDrag=a;this.allowVerticalDrag=b},enableSnap:function(d,c,b,a,f,e){if(b===undefined){b=true}if(a===undefined){a=false}if(f===undefined){f=0}if(e===undefined){e=0}this.snapX=d;this.snapY=c;this.snapOffsetX=f;this.snapOffsetY=e;this.snapOnDrag=b;this.snapOnRelease=a},disableSnap:function(){this.snapOnDrag=false;this.snapOnRelease=false},checkBoundsRect:function(){if(this.sprite.fixedToCamera){if(this.sprite.cameraOffset.x<this.boundsRect.left){this.sprite.cameraOffset.x=this.boundsRect.left}else{if((this.sprite.cameraOffset.x+this.sprite.width)>this.boundsRect.right){this.sprite.cameraOffset.x=this.boundsRect.right-this.sprite.width}}if(this.sprite.cameraOffset.y<this.boundsRect.top){this.sprite.cameraOffset.y=this.boundsRect.top}else{if((this.sprite.cameraOffset.y+this.sprite.height)>this.boundsRect.bottom){this.sprite.cameraOffset.y=this.boundsRect.bottom-this.sprite.height}}}else{if(this.sprite.left<this.boundsRect.left){this.sprite.x=this.boundsRect.x+this.sprite.offsetX}else{if(this.sprite.right>this.boundsRect.right){this.sprite.x=this.boundsRect.right-(this.sprite.width-this.sprite.offsetX)}}if(this.sprite.top<this.boundsRect.top){this.sprite.y=this.boundsRect.top+this.sprite.offsetY}else{if(this.sprite.bottom>this.boundsRect.bottom){this.sprite.y=this.boundsRect.bottom-(this.sprite.height-this.sprite.offsetY)}}}},checkBoundsSprite:function(){if(this.sprite.fixedToCamera&&this.boundsSprite.fixedToCamera){if(this.sprite.cameraOffset.x<this.boundsSprite.cameraOffset.x){this.sprite.cameraOffset.x=this.boundsSprite.cameraOffset.x}else{if((this.sprite.cameraOffset.x+this.sprite.width)>(this.boundsSprite.cameraOffset.x+this.boundsSprite.width)){this.sprite.cameraOffset.x=(this.boundsSprite.cameraOffset.x+this.boundsSprite.width)-this.sprite.width}}if(this.sprite.cameraOffset.y<this.boundsSprite.cameraOffset.y){this.sprite.cameraOffset.y=this.boundsSprite.cameraOffset.y}else{if((this.sprite.cameraOffset.y+this.sprite.height)>(this.boundsSprite.cameraOffset.y+this.boundsSprite.height)){this.sprite.cameraOffset.y=(this.boundsSprite.cameraOffset.y+this.boundsSprite.height)-this.sprite.height}}}else{if(this.sprite.left<this.boundsSprite.left){this.sprite.x=this.boundsSprite.left+this.sprite.offsetX}else{if(this.sprite.right>this.boundsSprite.right){this.sprite.x=this.boundsSprite.right-(this.sprite.width-this.sprite.offsetX)}}if(this.sprite.top<this.boundsSprite.top){this.sprite.y=this.boundsSprite.top+this.sprite.offsetY}else{if(this.sprite.bottom>this.boundsSprite.bottom){this.sprite.y=this.boundsSprite.bottom-(this.sprite.height-this.sprite.offsetY)}}}}};Phaser.InputHandler.prototype.constructor=Phaser.InputHandler;Phaser.Gamepad=function(a){this.game=a;this._gamepadIndexMap={};this._rawPads=[];this._active=false;this.enabled=true;this._gamepadSupportAvailable=!!navigator.webkitGetGamepads||!!navigator.webkitGamepads||(navigator.userAgent.indexOf("Firefox/")!==-1)||!!navigator.getGamepads;this._prevRawGamepadTypes=[];this._prevTimestamps=[];this.callbackContext=this;this.onConnectCallback=null;this.onDisconnectCallback=null;this.onDownCallback=null;this.onUpCallback=null;this.onAxisCallback=null;this.onFloatCallback=null;this._ongamepadconnected=null;this._gamepaddisconnected=null;this._gamepads=[new Phaser.SinglePad(a,this),new Phaser.SinglePad(a,this),new Phaser.SinglePad(a,this),new Phaser.SinglePad(a,this)]
};Phaser.Gamepad.prototype={addCallbacks:function(a,b){if(typeof b!=="undefined"){this.onConnectCallback=(typeof b.onConnect==="function")?b.onConnect:this.onConnectCallback;this.onDisconnectCallback=(typeof b.onDisconnect==="function")?b.onDisconnect:this.onDisconnectCallback;this.onDownCallback=(typeof b.onDown==="function")?b.onDown:this.onDownCallback;this.onUpCallback=(typeof b.onUp==="function")?b.onUp:this.onUpCallback;this.onAxisCallback=(typeof b.onAxis==="function")?b.onAxis:this.onAxisCallback;this.onFloatCallback=(typeof b.onFloat==="function")?b.onFloat:this.onFloatCallback;this.callbackContext=a}},start:function(){if(this._active){return}this._active=true;var a=this;this._onGamepadConnected=function(b){return a.onGamepadConnected(b)};this._onGamepadDisconnected=function(b){return a.onGamepadDisconnected(b)};window.addEventListener("gamepadconnected",this._onGamepadConnected,false);window.addEventListener("gamepaddisconnected",this._onGamepadDisconnected,false)},onGamepadConnected:function(b){var a=b.gamepad;this._rawPads.push(a);this._gamepads[a.index].connect(a)},onGamepadDisconnected:function(b){var c=b.gamepad;for(var a in this._rawPads){if(this._rawPads[a].index===c.index){this._rawPads.splice(a,1)}}this._gamepads[c.index].disconnect()},update:function(){this._pollGamepads();this.pad1.pollStatus();this.pad2.pollStatus();this.pad3.pollStatus();this.pad4.pollStatus()},_pollGamepads:function(){if(!this._active){return}if(navigator["getGamepads"]){var a=navigator.getGamepads()}else{if(navigator["webkitGetGamepads"]){var a=navigator.webkitGetGamepads()}else{if(navigator["webkitGamepads"]){var a=navigator.webkitGamepads()}}}if(a){this._rawPads=[];var n=false;for(var f=0;f<a.length;f++){if(typeof a[f]!==this._prevRawGamepadTypes[f]){n=true;this._prevRawGamepadTypes[f]=typeof a[f]}if(a[f]){this._rawPads.push(a[f])}if(f===3){break}}for(var h=0;h<this._gamepads.length;h++){this._gamepads[h]._rawPad=this._rawPads[h]}if(n){var q={rawIndices:{},padIndices:{}};var p;for(var e=0;e<this._gamepads.length;e++){p=this._gamepads[e];if(p.connected){for(var d=0;d<this._rawPads.length;d++){if(this._rawPads[d].index===p.index){q.rawIndices[p.index]=true;q.padIndices[e]=true}}}}for(var c=0;c<this._gamepads.length;c++){p=this._gamepads[c];if(q.padIndices[c]){continue}if(this._rawPads.length<1){p.disconnect()}for(var b=0;b<this._rawPads.length;b++){if(q.padIndices[c]){break}var o=this._rawPads[b];if(o){if(q.rawIndices[o.index]){p.disconnect();continue}else{p.connect(o);q.rawIndices[o.index]=true;q.padIndices[c]=true}}else{p.disconnect()}}}}}},setDeadZones:function(b){for(var a=0;a<this._gamepads.length;a++){this._gamepads[a].deadZone=b}},stop:function(){this._active=false;window.removeEventListener("gamepadconnected",this._onGamepadConnected);window.removeEventListener("gamepaddisconnected",this._onGamepadDisconnected)},reset:function(){this.update();for(var a=0;a<this._gamepads.length;a++){this._gamepads[a].reset()}},justPressed:function(a,c){for(var b=0;b<this._gamepads.length;b++){if(this._gamepads[b].justPressed(a,c)===true){return true}}return false},justReleased:function(a,c){for(var b=0;b<this._gamepads.length;b++){if(this._gamepads[b].justReleased(a,c)===true){return true}}return false},isDown:function(a){for(var b=0;b<this._gamepads.length;b++){if(this._gamepads[b].isDown(a)===true){return true}}return false},destroy:function(){this.stop();for(var a=0;a<this._gamepads.length;a++){this._gamepads[a].destroy()}}};Phaser.Gamepad.prototype.constructor=Phaser.Gamepad;Object.defineProperty(Phaser.Gamepad.prototype,"active",{get:function(){return this._active}});Object.defineProperty(Phaser.Gamepad.prototype,"supported",{get:function(){return this._gamepadSupportAvailable}});Object.defineProperty(Phaser.Gamepad.prototype,"padsConnected",{get:function(){return this._rawPads.length}});Object.defineProperty(Phaser.Gamepad.prototype,"pad1",{get:function(){return this._gamepads[0]}});Object.defineProperty(Phaser.Gamepad.prototype,"pad2",{get:function(){return this._gamepads[1]}});Object.defineProperty(Phaser.Gamepad.prototype,"pad3",{get:function(){return this._gamepads[2]}});Object.defineProperty(Phaser.Gamepad.prototype,"pad4",{get:function(){return this._gamepads[3]}});Phaser.Gamepad.BUTTON_0=0;Phaser.Gamepad.BUTTON_1=1;Phaser.Gamepad.BUTTON_2=2;Phaser.Gamepad.BUTTON_3=3;Phaser.Gamepad.BUTTON_4=4;Phaser.Gamepad.BUTTON_5=5;Phaser.Gamepad.BUTTON_6=6;Phaser.Gamepad.BUTTON_7=7;Phaser.Gamepad.BUTTON_8=8;Phaser.Gamepad.BUTTON_9=9;Phaser.Gamepad.BUTTON_10=10;Phaser.Gamepad.BUTTON_11=11;Phaser.Gamepad.BUTTON_12=12;Phaser.Gamepad.BUTTON_13=13;Phaser.Gamepad.BUTTON_14=14;Phaser.Gamepad.BUTTON_15=15;Phaser.Gamepad.AXIS_0=0;Phaser.Gamepad.AXIS_1=1;Phaser.Gamepad.AXIS_2=2;Phaser.Gamepad.AXIS_3=3;Phaser.Gamepad.AXIS_4=4;Phaser.Gamepad.AXIS_5=5;Phaser.Gamepad.AXIS_6=6;Phaser.Gamepad.AXIS_7=7;Phaser.Gamepad.AXIS_8=8;Phaser.Gamepad.AXIS_9=9;Phaser.Gamepad.XBOX360_A=0;Phaser.Gamepad.XBOX360_B=1;Phaser.Gamepad.XBOX360_X=2;Phaser.Gamepad.XBOX360_Y=3;
Phaser.Gamepad.XBOX360_LEFT_BUMPER=4;Phaser.Gamepad.XBOX360_RIGHT_BUMPER=5;Phaser.Gamepad.XBOX360_LEFT_TRIGGER=6;Phaser.Gamepad.XBOX360_RIGHT_TRIGGER=7;Phaser.Gamepad.XBOX360_BACK=8;Phaser.Gamepad.XBOX360_START=9;Phaser.Gamepad.XBOX360_STICK_LEFT_BUTTON=10;Phaser.Gamepad.XBOX360_STICK_RIGHT_BUTTON=11;Phaser.Gamepad.XBOX360_DPAD_LEFT=14;Phaser.Gamepad.XBOX360_DPAD_RIGHT=15;Phaser.Gamepad.XBOX360_DPAD_UP=12;Phaser.Gamepad.XBOX360_DPAD_DOWN=13;Phaser.Gamepad.XBOX360_STICK_LEFT_X=0;Phaser.Gamepad.XBOX360_STICK_LEFT_Y=1;Phaser.Gamepad.XBOX360_STICK_RIGHT_X=2;Phaser.Gamepad.XBOX360_STICK_RIGHT_Y=3;Phaser.Gamepad.PS3XC_X=0;Phaser.Gamepad.PS3XC_CIRCLE=1;Phaser.Gamepad.PS3XC_SQUARE=2;Phaser.Gamepad.PS3XC_TRIANGLE=3;Phaser.Gamepad.PS3XC_L1=4;Phaser.Gamepad.PS3XC_R1=5;Phaser.Gamepad.PS3XC_L2=6;Phaser.Gamepad.PS3XC_R2=7;Phaser.Gamepad.PS3XC_SELECT=8;Phaser.Gamepad.PS3XC_START=9;Phaser.Gamepad.PS3XC_STICK_LEFT_BUTTON=10;Phaser.Gamepad.PS3XC_STICK_RIGHT_BUTTON=11;Phaser.Gamepad.PS3XC_DPAD_UP=12;Phaser.Gamepad.PS3XC_DPAD_DOWN=13;Phaser.Gamepad.PS3XC_DPAD_LEFT=14;Phaser.Gamepad.PS3XC_DPAD_RIGHT=15;Phaser.Gamepad.PS3XC_STICK_LEFT_X=0;Phaser.Gamepad.PS3XC_STICK_LEFT_Y=1;Phaser.Gamepad.PS3XC_STICK_RIGHT_X=2;Phaser.Gamepad.PS3XC_STICK_RIGHT_Y=3;Phaser.SinglePad=function(a,b){this.game=a;this.index=null;this.connected=false;this.callbackContext=this;this.onConnectCallback=null;this.onDisconnectCallback=null;this.onDownCallback=null;this.onUpCallback=null;this.onAxisCallback=null;this.onFloatCallback=null;this.deadZone=0.26;this._padParent=b;this._rawPad=null;this._prevTimestamp=null;this._buttons=[];this._buttonsLen=0;this._axes=[];this._axesLen=0};Phaser.SinglePad.prototype={addCallbacks:function(a,b){if(typeof b!=="undefined"){this.onConnectCallback=(typeof b.onConnect==="function")?b.onConnect:this.onConnectCallback;this.onDisconnectCallback=(typeof b.onDisconnect==="function")?b.onDisconnect:this.onDisconnectCallback;this.onDownCallback=(typeof b.onDown==="function")?b.onDown:this.onDownCallback;this.onUpCallback=(typeof b.onUp==="function")?b.onUp:this.onUpCallback;this.onAxisCallback=(typeof b.onAxis==="function")?b.onAxis:this.onAxisCallback;this.onFloatCallback=(typeof b.onFloat==="function")?b.onFloat:this.onFloatCallback;this.callbackContext=a}},getButton:function(a){if(this._buttons[a]){return this._buttons[a]}else{return null}},pollStatus:function(){if(!this.connected||!this.game.input.enabled||!this.game.input.gamepad.enabled||(this._rawPad.timestamp&&(this._rawPad.timestamp===this._prevTimestamp))){return}for(var c=0;c<this._buttonsLen;c++){var a=isNaN(this._rawPad.buttons[c])?this._rawPad.buttons[c].value:this._rawPad.buttons[c];if(a!==this._buttons[c].value){if(a===1){this.processButtonDown(c,a)}else{if(a===0){this.processButtonUp(c,a)}else{this.processButtonFloat(c,a)}}}}for(var b=0;b<this._axesLen;b++){var d=this._rawPad.axes[b];if((d>0&&d>this.deadZone)||(d<0&&d<-this.deadZone)){this.processAxisChange(b,d)}else{this.processAxisChange(b,0)}}this._prevTimestamp=this._rawPad.timestamp},connect:function(d){var e=!this.connected;this.connected=true;this.index=d.index;this._rawPad=d;this._buttons=[];this._buttonsLen=d.buttons.length;this._axes=[];this._axesLen=d.axes.length;for(var b=0;b<this._axesLen;b++){this._axes[b]=d.axes[b]}for(var c in d.buttons){c=parseInt(c,10);this._buttons[c]=new Phaser.DeviceButton(this,c)}if(e&&this._padParent.onConnectCallback){this._padParent.onConnectCallback.call(this._padParent.callbackContext,this.index)}if(e&&this.onConnectCallback){this.onConnectCallback.call(this.callbackContext)}},disconnect:function(){var c=this.connected;var a=this.index;this.connected=false;this.index=null;this._rawPad=undefined;for(var b=0;b<this._buttonsLen;b++){this._buttons[b].destroy()}this._buttons=[];this._buttonsLen=0;this._axes=[];this._axesLen=0;if(c&&this._padParent.onDisconnectCallback){this._padParent.onDisconnectCallback.call(this._padParent.callbackContext,a)}if(c&&this.onDisconnectCallback){this.onDisconnectCallback.call(this.callbackContext)}},destroy:function(){this._rawPad=undefined;for(var a=0;a<this._buttonsLen;a++){this._buttons[a].destroy()}this._buttons=[];this._buttonsLen=0;this._axes=[];this._axesLen=0;this.onConnectCallback=null;this.onDisconnectCallback=null;this.onDownCallback=null;this.onUpCallback=null;this.onAxisCallback=null;this.onFloatCallback=null},processAxisChange:function(a,b){if(this._axes[a]===b){return}this._axes[a]=b;if(this._padParent.onAxisCallback){this._padParent.onAxisCallback.call(this._padParent.callbackContext,this,a,b)}if(this.onAxisCallback){this.onAxisCallback.call(this.callbackContext,this,a,b)}},processButtonDown:function(a,b){if(this._buttons[a]){this._buttons[a].start(null,b)}if(this._padParent.onDownCallback){this._padParent.onDownCallback.call(this._padParent.callbackContext,a,b,this.index)}if(this.onDownCallback){this.onDownCallback.call(this.callbackContext,a,b)}},processButtonUp:function(a,b){if(this._padParent.onUpCallback){this._padParent.onUpCallback.call(this._padParent.callbackContext,a,b,this.index)
}if(this.onUpCallback){this.onUpCallback.call(this.callbackContext,a,b)}if(this._buttons[a]){this._buttons[a].stop(null,b)}},processButtonFloat:function(a,b){if(this._padParent.onFloatCallback){this._padParent.onFloatCallback.call(this._padParent.callbackContext,a,b,this.index)}if(this.onFloatCallback){this.onFloatCallback.call(this.callbackContext,a,b)}if(this._buttons[a]){this._buttons[a].padFloat(b)}},axis:function(a){if(this._axes[a]){return this._axes[a]}return false},isDown:function(a){if(this._buttons[a]){return this._buttons[a].isDown}return false},isUp:function(a){if(this._buttons[a]){return this._buttons[a].isUp}return false},justReleased:function(a,b){if(this._buttons[a]){return this._buttons[a].justReleased(b)}},justPressed:function(a,b){if(this._buttons[a]){return this._buttons[a].justPressed(b)}},buttonValue:function(a){if(this._buttons[a]){return this._buttons[a].value}return null},reset:function(){for(var a=0;a<this._axes.length;a++){this._axes[a]=0}}};Phaser.SinglePad.prototype.constructor=Phaser.SinglePad;Phaser.Key=function(b,a){this.game=b;this._enabled=true;this.event=null;this.isDown=false;this.isUp=true;this.altKey=false;this.ctrlKey=false;this.shiftKey=false;this.timeDown=0;this.duration=0;this.timeUp=-2500;this.repeats=0;this.keyCode=a;this.onDown=new Phaser.Signal();this.onHoldCallback=null;this.onHoldContext=null;this.onUp=new Phaser.Signal();this._justDown=false;this._justUp=false};Phaser.Key.prototype={update:function(){if(!this._enabled){return}if(this.isDown){this.duration=this.game.time.time-this.timeDown;this.repeats++;if(this.onHoldCallback){this.onHoldCallback.call(this.onHoldContext,this)}}},processKeyDown:function(a){if(!this._enabled){return}this.event=a;if(this.isDown){return}this.altKey=a.altKey;this.ctrlKey=a.ctrlKey;this.shiftKey=a.shiftKey;this.isDown=true;this.isUp=false;this.timeDown=this.game.time.time;this.duration=0;this.repeats=0;this._justDown=true;this.onDown.dispatch(this)},processKeyUp:function(a){if(!this._enabled){return}this.event=a;if(this.isUp){return}this.isDown=false;this.isUp=true;this.timeUp=this.game.time.time;this.duration=this.game.time.time-this.timeDown;this._justUp=true;this.onUp.dispatch(this)},reset:function(a){if(a===undefined){a=true}this.isDown=false;this.isUp=true;this.timeUp=this.game.time.time;this.duration=0;this._enabled=true;this._justDown=false;this._justUp=false;if(a){this.onDown.removeAll();this.onUp.removeAll();this.onHoldCallback=null;this.onHoldContext=null}},downDuration:function(a){if(a===undefined){a=50}return(this.isDown&&this.duration<a)},upDuration:function(a){if(a===undefined){a=50}return(!this.isDown&&((this.game.time.time-this.timeUp)<a))}};Object.defineProperty(Phaser.Key.prototype,"justDown",{get:function(){var a=this._justDown;this._justDown=false;return a}});Object.defineProperty(Phaser.Key.prototype,"justUp",{get:function(){var a=this._justUp;this._justUp=false;return a}});Object.defineProperty(Phaser.Key.prototype,"enabled",{get:function(){return this._enabled},set:function(a){a=!!a;if(a!==this._enabled){if(!a){this.reset(false)}this._enabled=a}}});Phaser.Key.prototype.constructor=Phaser.Key;Phaser.Keyboard=function(a){this.game=a;this.enabled=true;this.event=null;this.pressEvent=null;this.callbackContext=this;this.onDownCallback=null;this.onPressCallback=null;this.onUpCallback=null;this._keys=[];this._capture=[];this._onKeyDown=null;this._onKeyPress=null;this._onKeyUp=null;this._i=0;this._k=0};Phaser.Keyboard.prototype={addCallbacks:function(a,b,d,c){this.callbackContext=a;if(b!==undefined&&b!==null){this.onDownCallback=b}if(d!==undefined&&d!==null){this.onUpCallback=d}if(c!==undefined&&c!==null){this.onPressCallback=c}},addKey:function(a){if(!this._keys[a]){this._keys[a]=new Phaser.Key(this.game,a);this.addKeyCapture(a)}return this._keys[a]},addKeys:function(c){var a={};for(var b in c){a[b]=this.addKey(c[b])}return a},removeKey:function(a){if(this._keys[a]){this._keys[a]=null;this.removeKeyCapture(a)}},createCursorKeys:function(){return this.addKeys({"up":Phaser.KeyCode.UP,"down":Phaser.KeyCode.DOWN,"left":Phaser.KeyCode.LEFT,"right":Phaser.KeyCode.RIGHT})},start:function(){if(this.game.device.cocoonJS){return}if(this._onKeyDown!==null){return}var a=this;this._onKeyDown=function(b){return a.processKeyDown(b)};this._onKeyUp=function(b){return a.processKeyUp(b)};this._onKeyPress=function(b){return a.processKeyPress(b)};window.addEventListener("keydown",this._onKeyDown,false);window.addEventListener("keyup",this._onKeyUp,false);window.addEventListener("keypress",this._onKeyPress,false)},stop:function(){window.removeEventListener("keydown",this._onKeyDown);window.removeEventListener("keyup",this._onKeyUp);window.removeEventListener("keypress",this._onKeyPress);this._onKeyDown=null;this._onKeyUp=null;this._onKeyPress=null},destroy:function(){this.stop();this.clearCaptures();this._keys.length=0;this._i=0},addKeyCapture:function(a){if(typeof a==="object"){for(var b in a){this._capture[a[b]]=true}}else{this._capture[a]=true
}},removeKeyCapture:function(a){delete this._capture[a]},clearCaptures:function(){this._capture={}},update:function(){this._i=this._keys.length;while(this._i--){if(this._keys[this._i]){this._keys[this._i].update()}}},processKeyDown:function(b){this.event=b;if(!this.game.input.enabled||!this.enabled){return}var a=b.keyCode;if(this._capture[a]){b.preventDefault()}if(!this._keys[a]){this._keys[a]=new Phaser.Key(this.game,a)}this._keys[a].processKeyDown(b);this._k=a;if(this.onDownCallback){this.onDownCallback.call(this.callbackContext,b)}},processKeyPress:function(a){this.pressEvent=a;if(!this.game.input.enabled||!this.enabled){return}if(this.onPressCallback){this.onPressCallback.call(this.callbackContext,String.fromCharCode(a.charCode),a)}},processKeyUp:function(b){this.event=b;if(!this.game.input.enabled||!this.enabled){return}var a=b.keyCode;if(this._capture[a]){b.preventDefault()}if(!this._keys[a]){this._keys[a]=new Phaser.Key(this.game,a)}this._keys[a].processKeyUp(b);if(this.onUpCallback){this.onUpCallback.call(this.callbackContext,b)}},reset:function(b){if(b===undefined){b=true}this.event=null;var a=this._keys.length;while(a--){if(this._keys[a]){this._keys[a].reset(b)}}},downDuration:function(a,b){if(this._keys[a]){return this._keys[a].downDuration(b)}else{return null}},upDuration:function(a,b){if(this._keys[a]){return this._keys[a].upDuration(b)}else{return null}},isDown:function(a){if(this._keys[a]){return this._keys[a].isDown}else{return null}}};Object.defineProperty(Phaser.Keyboard.prototype,"lastChar",{get:function(){if(this.event.charCode===32){return""}else{return String.fromCharCode(this.pressEvent.charCode)}}});Object.defineProperty(Phaser.Keyboard.prototype,"lastKey",{get:function(){return this._keys[this._k]}});Phaser.Keyboard.prototype.constructor=Phaser.Keyboard;Phaser.KeyCode={A:"A".charCodeAt(0),B:"B".charCodeAt(0),C:"C".charCodeAt(0),D:"D".charCodeAt(0),E:"E".charCodeAt(0),F:"F".charCodeAt(0),G:"G".charCodeAt(0),H:"H".charCodeAt(0),I:"I".charCodeAt(0),J:"J".charCodeAt(0),K:"K".charCodeAt(0),L:"L".charCodeAt(0),M:"M".charCodeAt(0),N:"N".charCodeAt(0),O:"O".charCodeAt(0),P:"P".charCodeAt(0),Q:"Q".charCodeAt(0),R:"R".charCodeAt(0),S:"S".charCodeAt(0),T:"T".charCodeAt(0),U:"U".charCodeAt(0),V:"V".charCodeAt(0),W:"W".charCodeAt(0),X:"X".charCodeAt(0),Y:"Y".charCodeAt(0),Z:"Z".charCodeAt(0),ZERO:"0".charCodeAt(0),ONE:"1".charCodeAt(0),TWO:"2".charCodeAt(0),THREE:"3".charCodeAt(0),FOUR:"4".charCodeAt(0),FIVE:"5".charCodeAt(0),SIX:"6".charCodeAt(0),SEVEN:"7".charCodeAt(0),EIGHT:"8".charCodeAt(0),NINE:"9".charCodeAt(0),NUMPAD_0:96,NUMPAD_1:97,NUMPAD_2:98,NUMPAD_3:99,NUMPAD_4:100,NUMPAD_5:101,NUMPAD_6:102,NUMPAD_7:103,NUMPAD_8:104,NUMPAD_9:105,NUMPAD_MULTIPLY:106,NUMPAD_ADD:107,NUMPAD_ENTER:108,NUMPAD_SUBTRACT:109,NUMPAD_DECIMAL:110,NUMPAD_DIVIDE:111,F1:112,F2:113,F3:114,F4:115,F5:116,F6:117,F7:118,F8:119,F9:120,F10:121,F11:122,F12:123,F13:124,F14:125,F15:126,COLON:186,EQUALS:187,COMMA:188,UNDERSCORE:189,PERIOD:190,QUESTION_MARK:191,TILDE:192,OPEN_BRACKET:219,BACKWARD_SLASH:220,CLOSED_BRACKET:221,QUOTES:222,BACKSPACE:8,TAB:9,CLEAR:12,ENTER:13,SHIFT:16,CONTROL:17,ALT:18,CAPS_LOCK:20,ESC:27,SPACEBAR:32,PAGE_UP:33,PAGE_DOWN:34,END:35,HOME:36,LEFT:37,UP:38,RIGHT:39,DOWN:40,PLUS:43,MINUS:44,INSERT:45,DELETE:46,HELP:47,NUM_LOCK:144};for(var key in Phaser.KeyCode){if(Phaser.KeyCode.hasOwnProperty(key)&&!key.match(/[a-z]/)){Phaser.Keyboard[key]=Phaser.KeyCode[key]}}Phaser.Component=function(){};Phaser.Component.Angle=function(){};Phaser.Component.Angle.prototype={angle:{get:function(){return Phaser.Math.wrapAngle(Phaser.Math.radToDeg(this.rotation))},set:function(a){this.rotation=Phaser.Math.degToRad(Phaser.Math.wrapAngle(a))}}};Phaser.Component.Animation=function(){};Phaser.Component.Animation.prototype={play:function(d,c,b,a){if(this.animations){return this.animations.play(d,c,b,a)}}};Phaser.Component.AutoCull=function(){};Phaser.Component.AutoCull.prototype={autoCull:false,inCamera:{get:function(){if(!this.autoCull&&!this.checkWorldBounds){this._bounds.copyFrom(this.getBounds());this._bounds.x+=this.game.camera.view.x;this._bounds.y+=this.game.camera.view.y}return this.game.world.camera.view.intersects(this._bounds)}}};Phaser.Component.Bounds=function(){};Phaser.Component.Bounds.prototype={offsetX:{get:function(){return this.anchor.x*this.width}},offsetY:{get:function(){return this.anchor.y*this.height}},centerX:{get:function(){return(this.x-this.offsetX)+(this.width*0.5)},set:function(a){this.x=(a+this.offsetX)-(this.width*0.5)}},centerY:{get:function(){return(this.y-this.offsetY)+(this.height*0.5)},set:function(a){this.y=(a+this.offsetY)-(this.height*0.5)}},left:{get:function(){return this.x-this.offsetX},set:function(a){this.x=a+this.offsetX}},right:{get:function(){return(this.x+this.width)-this.offsetX},set:function(a){this.x=a-(this.width)+this.offsetX}},top:{get:function(){return this.y-this.offsetY},set:function(a){this.y=a+this.offsetY}},bottom:{get:function(){return(this.y+this.height)-this.offsetY
},set:function(a){this.y=a-(this.height)+this.offsetY}},alignIn:function(c,b,a,d){if(a===undefined){a=0}if(d===undefined){d=0}switch(b){default:case Phaser.TOP_LEFT:this.left=c.left-a;this.top=c.top-d;break;case Phaser.TOP_CENTER:this.centerX=c.centerX+a;this.top=c.top-d;break;case Phaser.TOP_RIGHT:this.right=c.right+a;this.top=c.top-d;break;case Phaser.LEFT_CENTER:this.left=c.left-a;this.centerY=c.centerY+d;break;case Phaser.CENTER:this.centerX=c.centerX+a;this.centerY=c.centerY+d;break;case Phaser.RIGHT_CENTER:this.right=c.right+a;this.centerY=c.centerY+d;break;case Phaser.BOTTOM_LEFT:this.left=c.left-a;this.bottom=c.bottom+d;break;case Phaser.BOTTOM_CENTER:this.centerX=c.centerX+a;this.bottom=c.bottom+d;break;case Phaser.BOTTOM_RIGHT:this.right=c.right+a;this.bottom=c.bottom+d;break}return this},alignTo:function(c,b,a,d){if(a===undefined){a=0}if(d===undefined){d=0}switch(b){default:case Phaser.TOP_LEFT:this.left=c.left-a;this.bottom=c.top-d;break;case Phaser.TOP_CENTER:this.centerX=c.centerX+a;this.bottom=c.top-d;break;case Phaser.TOP_RIGHT:this.right=c.right+a;this.bottom=c.top-d;break;case Phaser.LEFT_TOP:this.right=c.left-a;this.top=c.top-d;break;case Phaser.LEFT_CENTER:this.right=c.left-a;this.centerY=c.centerY+d;break;case Phaser.LEFT_BOTTOM:this.right=c.left-a;this.bottom=c.bottom+d;break;case Phaser.RIGHT_TOP:this.left=c.right+a;this.top=c.top-d;break;case Phaser.RIGHT_CENTER:this.left=c.right+a;this.centerY=c.centerY+d;break;case Phaser.RIGHT_BOTTOM:this.left=c.right+a;this.bottom=c.bottom+d;break;case Phaser.BOTTOM_LEFT:this.left=c.left-a;this.top=c.bottom+d;break;case Phaser.BOTTOM_CENTER:this.centerX=c.centerX+a;this.top=c.bottom+d;break;case Phaser.BOTTOM_RIGHT:this.right=c.right+a;this.top=c.bottom+d;break}return this}};Phaser.Group.prototype.alignIn=Phaser.Component.Bounds.prototype.alignIn;Phaser.Group.prototype.alignTo=Phaser.Component.Bounds.prototype.alignTo;Phaser.Component.BringToTop=function(){};Phaser.Component.BringToTop.prototype.bringToTop=function(){if(this.parent){this.parent.bringToTop(this)}return this};Phaser.Component.BringToTop.prototype.sendToBack=function(){if(this.parent){this.parent.sendToBack(this)}return this};Phaser.Component.BringToTop.prototype.moveUp=function(){if(this.parent){this.parent.moveUp(this)}return this};Phaser.Component.BringToTop.prototype.moveDown=function(){if(this.parent){this.parent.moveDown(this)}return this};Phaser.Component.Core=function(){};Phaser.Component.Core.install=function(c){Phaser.Utils.mixinPrototype(this,Phaser.Component.Core.prototype);this.components={};for(var b=0;b<c.length;b++){var d=c[b];var a=false;if(d==="Destroy"){a=true}Phaser.Utils.mixinPrototype(this,Phaser.Component[d].prototype,a);this.components[d]=true}};Phaser.Component.Core.init=function(b,a,e,c,d){this.game=b;this.key=c;this.data={};this.position.set(a,e);this.world=new Phaser.Point(a,e);this.previousPosition=new Phaser.Point(a,e);this.events=new Phaser.Events(this);this._bounds=new Phaser.Rectangle();if(this.components.PhysicsBody){this.body=this.body}if(this.components.Animation){this.animations=new Phaser.AnimationManager(this)}if(this.components.LoadTexture&&c!==null){this.loadTexture(c,d)}if(this.components.FixedToCamera){this.cameraOffset=new Phaser.Point(a,e)}};Phaser.Component.Core.preUpdate=function(){if(this.pendingDestroy){this.destroy();return}this.previousPosition.set(this.world.x,this.world.y);this.previousRotation=this.rotation;if(!this.exists||!this.parent.exists){this.renderOrderID=-1;return false}this.world.setTo(this.game.camera.x+this.worldTransform.tx,this.game.camera.y+this.worldTransform.ty);if(this.visible){this.renderOrderID=this.game.stage.currentRenderOrderID++}if(this.animations){this.animations.update()}if(this.body){this.body.preUpdate()}for(var a=0;a<this.children.length;a++){this.children[a].preUpdate()}return true};Phaser.Component.Core.prototype={game:null,name:"",data:{},components:{},z:0,events:undefined,animations:undefined,key:"",world:null,debug:false,previousPosition:null,previousRotation:0,renderOrderID:0,fresh:true,pendingDestroy:false,_bounds:null,_exists:true,exists:{get:function(){return this._exists},set:function(a){if(a){this._exists=true;if(this.body&&this.body.type===Phaser.Physics.P2JS){this.body.addToWorld()}this.visible=true}else{this._exists=false;if(this.body&&this.body.type===Phaser.Physics.P2JS){this.body.removeFromWorld()}this.visible=false}}},update:function(){},postUpdate:function(){if(this.customRender){this.key.render()}if(this.components.PhysicsBody){Phaser.Component.PhysicsBody.postUpdate.call(this)}if(this.components.FixedToCamera){Phaser.Component.FixedToCamera.postUpdate.call(this)}for(var a=0;a<this.children.length;a++){this.children[a].postUpdate()}}};Phaser.Component.Crop=function(){};Phaser.Component.Crop.prototype={cropRect:null,_crop:null,crop:function(a,b){if(b===undefined){b=false}if(a){if(b&&this.cropRect!==null){this.cropRect.setTo(a.x,a.y,a.width,a.height)}else{if(b&&this.cropRect===null){this.cropRect=new Phaser.Rectangle(a.x,a.y,a.width,a.height)
}else{this.cropRect=a}}this.updateCrop()}else{this._crop=null;this.cropRect=null;this.resetFrame()}},updateCrop:function(){if(!this.cropRect){return}var f=this.texture.crop.x;var e=this.texture.crop.y;var g=this.texture.crop.width;var b=this.texture.crop.height;this._crop=Phaser.Rectangle.clone(this.cropRect,this._crop);this._crop.x+=this._frame.x;this._crop.y+=this._frame.y;var a=Math.max(this._frame.x,this._crop.x);var h=Math.max(this._frame.y,this._crop.y);var c=Math.min(this._frame.right,this._crop.right)-a;var d=Math.min(this._frame.bottom,this._crop.bottom)-h;this.texture.crop.x=a;this.texture.crop.y=h;this.texture.crop.width=c;this.texture.crop.height=d;this.texture.frame.width=Math.min(c,this.cropRect.width);this.texture.frame.height=Math.min(d,this.cropRect.height);this.texture.width=this.texture.frame.width;this.texture.height=this.texture.frame.height;this.texture._updateUvs();if(this.tint!==16777215&&(f!==a||e!==h||g!==c||b!==d)){this.texture.requiresReTint=true}}};Phaser.Component.Delta=function(){};Phaser.Component.Delta.prototype={deltaX:{get:function(){return this.world.x-this.previousPosition.x}},deltaY:{get:function(){return this.world.y-this.previousPosition.y}},deltaZ:{get:function(){return this.rotation-this.previousRotation}}};Phaser.Component.Destroy=function(){};Phaser.Component.Destroy.prototype={destroyPhase:false,destroy:function(c,a){if(this.game===null||this.destroyPhase){return}if(c===undefined){c=true}if(a===undefined){a=false}this.destroyPhase=true;if(this.events){this.events.onDestroy$dispatch(this)}if(this.parent){if(this.parent instanceof Phaser.Group){this.parent.remove(this)}else{this.parent.removeChild(this)}}if(this.input){this.input.destroy()}if(this.animations){this.animations.destroy()}if(this.body){this.body.destroy()}if(this.events){this.events.destroy()}this.game.tweens.removeFrom(this);var b=this.children.length;if(c){while(b--){this.children[b].destroy(c)}}else{while(b--){this.removeChild(this.children[b])}}if(this._crop){this._crop=null;this.cropRect=null}if(this._frame){this._frame=null}if(Phaser.Video&&this.key instanceof Phaser.Video){this.key.onChangeSource.remove(this.resizeFrame,this)}if(Phaser.BitmapText&&this._glyphs){this._glyphs=[]}this.alive=false;this.exists=false;this.visible=false;this.filters=null;this.mask=null;this.game=null;this.data={};this.renderable=false;if(this.transformCallback){this.transformCallback=null;this.transformCallbackContext=null}this.hitArea=null;this.parent=null;this.stage=null;this.worldTransform=null;this.filterArea=null;this._bounds=null;this._currentBounds=null;this._mask=null;this._destroyCachedSprite();if(a){this.texture.destroy(true)}this.destroyPhase=false;this.pendingDestroy=false}};Phaser.Events=function(a){this.parent=a};Phaser.Events.prototype={destroy:function(){this._parent=null;if(this._onDestroy){this._onDestroy.dispose()}if(this._onAddedToGroup){this._onAddedToGroup.dispose()}if(this._onRemovedFromGroup){this._onRemovedFromGroup.dispose()}if(this._onRemovedFromWorld){this._onRemovedFromWorld.dispose()}if(this._onKilled){this._onKilled.dispose()}if(this._onRevived){this._onRevived.dispose()}if(this._onEnterBounds){this._onEnterBounds.dispose()}if(this._onOutOfBounds){this._onOutOfBounds.dispose()}if(this._onInputOver){this._onInputOver.dispose()}if(this._onInputOut){this._onInputOut.dispose()}if(this._onInputDown){this._onInputDown.dispose()}if(this._onInputUp){this._onInputUp.dispose()}if(this._onDragStart){this._onDragStart.dispose()}if(this._onDragUpdate){this._onDragUpdate.dispose()}if(this._onDragStop){this._onDragStop.dispose()}if(this._onAnimationStart){this._onAnimationStart.dispose()}if(this._onAnimationComplete){this._onAnimationComplete.dispose()}if(this._onAnimationLoop){this._onAnimationLoop.dispose()}},onAddedToGroup:null,onRemovedFromGroup:null,onRemovedFromWorld:null,onDestroy:null,onKilled:null,onRevived:null,onOutOfBounds:null,onEnterBounds:null,onInputOver:null,onInputOut:null,onInputDown:null,onInputUp:null,onDragStart:null,onDragUpdate:null,onDragStop:null,onAnimationStart:null,onAnimationComplete:null,onAnimationLoop:null};Phaser.Events.prototype.constructor=Phaser.Events;for(var prop in Phaser.Events.prototype){if(!Phaser.Events.prototype.hasOwnProperty(prop)||prop.indexOf("on")!==0||Phaser.Events.prototype[prop]!==null){continue}(function(b,a){Object.defineProperty(Phaser.Events.prototype,b,{get:function(){return this[a]||(this[a]=new Phaser.Signal())}});Phaser.Events.prototype[b+"$dispatch"]=function(){return this[a]?this[a].dispatch.apply(this[a],arguments):null}})(prop,"_"+prop)}Phaser.Component.FixedToCamera=function(){};Phaser.Component.FixedToCamera.postUpdate=function(){if(this.fixedToCamera){this.position.x=(this.game.camera.view.x+this.cameraOffset.x)/this.game.camera.scale.x;this.position.y=(this.game.camera.view.y+this.cameraOffset.y)/this.game.camera.scale.y}};Phaser.Component.FixedToCamera.prototype={_fixedToCamera:false,fixedToCamera:{get:function(){return this._fixedToCamera
},set:function(a){if(a){this._fixedToCamera=true;this.cameraOffset.set(this.x,this.y)}else{this._fixedToCamera=false}}},cameraOffset:new Phaser.Point()};Phaser.Component.Health=function(){};Phaser.Component.Health.prototype={health:1,maxHealth:100,damage:function(a){if(this.alive){this.health-=a;if(this.health<=0){this.kill()}}return this},setHealth:function(a){this.health=a;if(this.health>this.maxHealth){this.health=this.maxHealth}return this},heal:function(a){if(this.alive){this.health+=a;if(this.health>this.maxHealth){this.health=this.maxHealth}}return this}};Phaser.Component.InCamera=function(){};Phaser.Component.InCamera.prototype={inCamera:{get:function(){return this.game.world.camera.view.intersects(this._bounds)}}};Phaser.Component.InputEnabled=function(){};Phaser.Component.InputEnabled.prototype={input:null,inputEnabled:{get:function(){return(this.input&&this.input.enabled)},set:function(a){if(a){if(this.input===null){this.input=new Phaser.InputHandler(this);this.input.start()}else{if(this.input&&!this.input.enabled){this.input.start()}}}else{if(this.input&&this.input.enabled){this.input.stop()}}}}};Phaser.Component.InWorld=function(){};Phaser.Component.InWorld.preUpdate=function(){if(this.autoCull||this.checkWorldBounds){this._bounds.copyFrom(this.getBounds());this._bounds.x+=this.game.camera.view.x;this._bounds.y+=this.game.camera.view.y;if(this.autoCull){if(this.game.world.camera.view.intersects(this._bounds)){this.renderable=true;this.game.world.camera.totalInView++}else{this.renderable=false;if(this.outOfCameraBoundsKill){this.kill();return false}}}if(this.checkWorldBounds){if(this._outOfBoundsFired&&this.game.world.bounds.intersects(this._bounds)){this._outOfBoundsFired=false;this.events.onEnterBounds$dispatch(this)}else{if(!this._outOfBoundsFired&&!this.game.world.bounds.intersects(this._bounds)){this._outOfBoundsFired=true;this.events.onOutOfBounds$dispatch(this);if(this.outOfBoundsKill){this.kill();return false}}}}}return true};Phaser.Component.InWorld.prototype={checkWorldBounds:false,outOfBoundsKill:false,outOfCameraBoundsKill:false,_outOfBoundsFired:false,inWorld:{get:function(){return this.game.world.bounds.intersects(this.getBounds())}}};Phaser.Component.LifeSpan=function(){};Phaser.Component.LifeSpan.preUpdate=function(){if(this.lifespan>0){this.lifespan-=this.game.time.physicsElapsedMS;if(this.lifespan<=0){this.kill();return false}}return true};Phaser.Component.LifeSpan.prototype={alive:true,lifespan:0,revive:function(a){if(a===undefined){a=100}this.alive=true;this.exists=true;this.visible=true;if(typeof this.setHealth==="function"){this.setHealth(a)}if(this.events){this.events.onRevived$dispatch(this)}return this},kill:function(){this.alive=false;this.exists=false;this.visible=false;if(this.events){this.events.onKilled$dispatch(this)}return this}};Phaser.Component.LoadTexture=function(){};Phaser.Component.LoadTexture.prototype={customRender:false,_frame:null,loadTexture:function(f,h,d){if(f===Phaser.PENDING_ATLAS){f=h;h=0}else{h=h||0}if((d||d===undefined)&&this.animations){this.animations.stop()}this.key=f;this.customRender=false;var c=this.game.cache;var a=true;var e=!this.texture.baseTexture.scaleMode;if(Phaser.RenderTexture&&f instanceof Phaser.RenderTexture){this.key=f.key;this.setTexture(f)}else{if(Phaser.BitmapData&&f instanceof Phaser.BitmapData){this.customRender=true;this.setTexture(f.texture);if(c.hasFrameData(f.key,Phaser.Cache.BITMAPDATA)){a=!this.animations.loadFrameData(c.getFrameData(f.key,Phaser.Cache.BITMAPDATA),h)}else{a=!this.animations.loadFrameData(f.frameData,0)}}else{if(Phaser.Video&&f instanceof Phaser.Video){this.customRender=true;var g=f.texture.valid;this.setTexture(f.texture);this.setFrame(f.texture.frame.clone());f.onChangeSource.add(this.resizeFrame,this);this.texture.valid=g}else{if(Phaser.Tilemap&&f instanceof Phaser.TilemapLayer){this.setTexture(PIXI.Texture.fromCanvas(f.canvas))}else{if(f instanceof PIXI.Texture){this.setTexture(f)}else{var b=c.getImage(f,true);this.key=b.key;this.setTexture(new PIXI.Texture(b.base));if(f==="__default"){this.texture.baseTexture.skipRender=true}else{this.texture.baseTexture.skipRender=false}a=!this.animations.loadFrameData(b.frameData,h)}}}}}if(a){this._frame=Phaser.Rectangle.clone(this.texture.frame)}if(!e){this.texture.baseTexture.scaleMode=1}},setFrame:function(a){this._frame=a;this.texture.frame.x=a.x;this.texture.frame.y=a.y;this.texture.frame.width=a.width;this.texture.frame.height=a.height;this.texture.crop.x=a.x;this.texture.crop.y=a.y;this.texture.crop.width=a.width;this.texture.crop.height=a.height;if(a.trimmed){if(this.texture.trim){this.texture.trim.x=a.spriteSourceSizeX;this.texture.trim.y=a.spriteSourceSizeY;this.texture.trim.width=a.sourceSizeW;this.texture.trim.height=a.sourceSizeH}else{this.texture.trim={x:a.spriteSourceSizeX,y:a.spriteSourceSizeY,width:a.sourceSizeW,height:a.sourceSizeH}}this.texture.width=a.sourceSizeW;this.texture.height=a.sourceSizeH;this.texture.frame.width=a.sourceSizeW;this.texture.frame.height=a.sourceSizeH
}else{if(!a.trimmed&&this.texture.trim){this.texture.trim=null}}if(this.cropRect){this.updateCrop()}this.texture.requiresReTint=true;this.texture._updateUvs();if(this.tilingTexture){this.refreshTexture=true}},resizeFrame:function(c,b,a){this.texture.frame.resize(b,a);this.texture.setFrame(this.texture.frame)},resetFrame:function(){if(this._frame){this.setFrame(this._frame)}},frame:{get:function(){return this.animations.frame},set:function(a){this.animations.frame=a}},frameName:{get:function(){return this.animations.frameName},set:function(a){this.animations.frameName=a}}};Phaser.Component.Overlap=function(){};Phaser.Component.Overlap.prototype={overlap:function(a){return Phaser.Rectangle.intersects(this.getBounds(),a.getBounds())}};Phaser.Component.PhysicsBody=function(){};Phaser.Component.PhysicsBody.preUpdate=function(){if(this.fresh&&this.exists){this.world.setTo(this.parent.position.x+this.position.x,this.parent.position.y+this.position.y);this.worldTransform.tx=this.world.x;this.worldTransform.ty=this.world.y;this.previousPosition.set(this.world.x,this.world.y);this.previousRotation=this.rotation;if(this.body){this.body.preUpdate()}this.fresh=false;return false}this.previousPosition.set(this.world.x,this.world.y);this.previousRotation=this.rotation;if(!this._exists||!this.parent.exists){this.renderOrderID=-1;return false}return true};Phaser.Component.PhysicsBody.postUpdate=function(){if(this.exists&&this.body){this.body.postUpdate()}};Phaser.Component.PhysicsBody.prototype={body:null,x:{get:function(){return this.position.x},set:function(a){this.position.x=a;if(this.body&&!this.body.dirty){this.body._reset=true}}},y:{get:function(){return this.position.y},set:function(a){this.position.y=a;if(this.body&&!this.body.dirty){this.body._reset=true}}}};Phaser.Component.Reset=function(){};Phaser.Component.Reset.prototype.reset=function(a,c,b){if(b===undefined){b=1}this.world.set(a,c);this.position.set(a,c);this.fresh=true;this.exists=true;this.visible=true;this.renderable=true;if(this.components.InWorld){this._outOfBoundsFired=false}if(this.components.LifeSpan){this.alive=true;this.health=b}if(this.components.PhysicsBody){if(this.body){this.body.reset(a,c,false,false)}}return this};Phaser.Component.ScaleMinMax=function(){};Phaser.Component.ScaleMinMax.prototype={transformCallback:null,transformCallbackContext:this,scaleMin:null,scaleMax:null,checkTransform:function(a){if(this.scaleMin){if(a.a<this.scaleMin.x){a.a=this.scaleMin.x}if(a.d<this.scaleMin.y){a.d=this.scaleMin.y}}if(this.scaleMax){if(a.a>this.scaleMax.x){a.a=this.scaleMax.x}if(a.d>this.scaleMax.y){a.d=this.scaleMax.y}}},setScaleMinMax:function(a,d,c,b){if(d===undefined){d=c=b=a}else{if(c===undefined){c=b=d;d=a}}if(a===null){this.scaleMin=null}else{if(this.scaleMin){this.scaleMin.set(a,d)}else{this.scaleMin=new Phaser.Point(a,d)}}if(c===null){this.scaleMax=null}else{if(this.scaleMax){this.scaleMax.set(c,b)}else{this.scaleMax=new Phaser.Point(c,b)}}if(this.scaleMin===null){this.transformCallback=null}else{this.transformCallback=this.checkTransform;this.transformCallbackContext=this}}};Phaser.Component.Smoothed=function(){};Phaser.Component.Smoothed.prototype={smoothed:{get:function(){return !this.texture.baseTexture.scaleMode},set:function(a){if(a){if(this.texture){this.texture.baseTexture.scaleMode=0}}else{if(this.texture){this.texture.baseTexture.scaleMode=1}}}}};Phaser.GameObjectFactory=function(a){this.game=a;this.world=this.game.world};Phaser.GameObjectFactory.prototype={existing:function(a){return this.world.add(a)},weapon:function(d,b,e,c){var a=this.game.plugins.add(Phaser.Weapon);a.createBullets(d,b,e,c);return a},image:function(a,e,b,d,c){if(c===undefined){c=this.world}return c.add(new Phaser.Image(this.game,a,e,b,d))},sprite:function(a,e,b,d,c){if(c===undefined){c=this.world}return c.create(a,e,b,d)},creature:function(a,f,b,e,d){if(d===undefined){d=this.world}var c=new Phaser.Creature(this.game,a,f,b,e);d.add(c);return c},tween:function(a){return this.game.tweens.create(a)},group:function(d,b,a,e,c){return new Phaser.Group(this.game,d,b,a,e,c)},physicsGroup:function(d,c,b,a){return new Phaser.Group(this.game,c,b,a,true,d)},spriteBatch:function(c,b,a){if(c===undefined){c=null}if(b===undefined){b="group"}if(a===undefined){a=false}return new Phaser.SpriteBatch(this.game,c,b,a)},audio:function(c,d,a,b){return this.game.sound.add(c,d,a,b)},sound:function(c,d,a,b){return this.game.sound.add(c,d,a,b)},audioSprite:function(a){return this.game.sound.addSprite(a)},tileSprite:function(b,g,d,a,c,f,e){if(e===undefined){e=this.world}return e.add(new Phaser.TileSprite(this.game,b,g,d,a,c,f))},rope:function(a,f,b,e,c,d){if(d===undefined){d=this.world}return d.add(new Phaser.Rope(this.game,a,f,b,e,c))},text:function(a,e,d,b,c){if(c===undefined){c=this.world}return c.add(new Phaser.Text(this.game,a,e,d,b))},button:function(g,f,i,j,b,c,a,d,e,h){if(h===undefined){h=this.world}return h.add(new Phaser.Button(this.game,g,f,i,j,b,c,a,d,e))},graphics:function(a,c,b){if(b===undefined){b=this.world
}return b.add(new Phaser.Graphics(this.game,a,c))},emitter:function(a,c,b){return this.game.particles.add(new Phaser.Particles.Arcade.Emitter(this.game,a,c,b))},retroFont:function(b,a,d,g,i,h,e,f,c){return new Phaser.RetroFont(this.game,b,a,d,g,i,h,e,f,c)},bitmapText:function(a,f,b,e,c,d){if(d===undefined){d=this.world}return d.add(new Phaser.BitmapText(this.game,a,f,b,e,c))},tilemap:function(c,e,b,d,a){return new Phaser.Tilemap(this.game,c,e,b,d,a)},renderTexture:function(d,b,c,a){if(c===undefined||c===""){c=this.game.rnd.uuid()}if(a===undefined){a=false}var e=new Phaser.RenderTexture(this.game,d,b,c);if(a){this.game.cache.addRenderTexture(c,e)}return e},video:function(b,a){return new Phaser.Video(this.game,b,a)},bitmapData:function(d,b,c,a){if(a===undefined){a=false}if(c===undefined||c===""){c=this.game.rnd.uuid()}var e=new Phaser.BitmapData(this.game,c,d,b);if(a){this.game.cache.addBitmapData(c,e)}return e},filter:function(b){var a=Array.prototype.slice.call(arguments,1);var b=new Phaser.Filter[b](this.game);b.init.apply(b,a);return b},plugin:function(a){return this.game.plugins.add(a)}};Phaser.GameObjectFactory.prototype.constructor=Phaser.GameObjectFactory;Phaser.GameObjectCreator=function(a){this.game=a;this.world=this.game.world};Phaser.GameObjectCreator.prototype={image:function(a,d,b,c){return new Phaser.Image(this.game,a,d,b,c)},sprite:function(a,d,b,c){return new Phaser.Sprite(this.game,a,d,b,c)},tween:function(a){return new Phaser.Tween(a,this.game,this.game.tweens)},group:function(d,b,a,e,c){return new Phaser.Group(this.game,d,b,a,e,c)},spriteBatch:function(c,b,a){if(b===undefined){b="group"}if(a===undefined){a=false}return new Phaser.SpriteBatch(this.game,c,b,a)},audio:function(c,d,a,b){return this.game.sound.add(c,d,a,b)},audioSprite:function(a){return this.game.sound.addSprite(a)},sound:function(c,d,a,b){return this.game.sound.add(c,d,a,b)},tileSprite:function(b,f,d,a,c,e){return new Phaser.TileSprite(this.game,b,f,d,a,c,e)},rope:function(a,e,b,d,c){return new Phaser.Rope(this.game,a,e,b,d,c)},text:function(a,d,c,b){return new Phaser.Text(this.game,a,d,c,b)},button:function(g,f,h,i,b,c,a,d,e){return new Phaser.Button(this.game,g,f,h,i,b,c,a,d,e)},graphics:function(a,b){return new Phaser.Graphics(this.game,a,b)},emitter:function(a,c,b){return new Phaser.Particles.Arcade.Emitter(this.game,a,c,b)},retroFont:function(b,a,d,g,i,h,e,f,c){return new Phaser.RetroFont(this.game,b,a,d,g,i,h,e,f,c)},bitmapText:function(a,f,b,d,c,e){return new Phaser.BitmapText(this.game,a,f,b,d,c,e)},tilemap:function(c,e,b,d,a){return new Phaser.Tilemap(this.game,c,e,b,d,a)},renderTexture:function(d,b,c,a){if(c===undefined||c===""){c=this.game.rnd.uuid()}if(a===undefined){a=false}var e=new Phaser.RenderTexture(this.game,d,b,c);if(a){this.game.cache.addRenderTexture(c,e)}return e},bitmapData:function(d,b,c,a){if(a===undefined){a=false}if(c===undefined||c===""){c=this.game.rnd.uuid()}var e=new Phaser.BitmapData(this.game,c,d,b);if(a){this.game.cache.addBitmapData(c,e)}return e},filter:function(b){var a=Array.prototype.slice.call(arguments,1);var b=new Phaser.Filter[b](this.game);b.init.apply(b,a);return b}};Phaser.GameObjectCreator.prototype.constructor=Phaser.GameObjectCreator;Phaser.Sprite=function(b,a,e,c,d){a=a||0;e=e||0;c=c||null;d=d||null;this.type=Phaser.SPRITE;this.physicsType=Phaser.SPRITE;PIXI.Sprite.call(this,Phaser.Cache.DEFAULT);Phaser.Component.Core.init.call(this,b,a,e,c,d)};Phaser.Sprite.prototype=Object.create(PIXI.Sprite.prototype);Phaser.Sprite.prototype.constructor=Phaser.Sprite;Phaser.Component.Core.install.call(Phaser.Sprite.prototype,["Angle","Animation","AutoCull","Bounds","BringToTop","Crop","Delta","Destroy","FixedToCamera","Health","InCamera","InputEnabled","InWorld","LifeSpan","LoadTexture","Overlap","PhysicsBody","Reset","ScaleMinMax","Smoothed"]);Phaser.Sprite.prototype.preUpdatePhysics=Phaser.Component.PhysicsBody.preUpdate;Phaser.Sprite.prototype.preUpdateLifeSpan=Phaser.Component.LifeSpan.preUpdate;Phaser.Sprite.prototype.preUpdateInWorld=Phaser.Component.InWorld.preUpdate;Phaser.Sprite.prototype.preUpdateCore=Phaser.Component.Core.preUpdate;Phaser.Sprite.prototype.preUpdate=function(){if(!this.preUpdatePhysics()||!this.preUpdateLifeSpan()||!this.preUpdateInWorld()){return false}return this.preUpdateCore()};Phaser.Image=function(b,a,e,c,d){a=a||0;e=e||0;c=c||null;d=d||null;this.type=Phaser.IMAGE;PIXI.Sprite.call(this,Phaser.Cache.DEFAULT);Phaser.Component.Core.init.call(this,b,a,e,c,d)};Phaser.Image.prototype=Object.create(PIXI.Sprite.prototype);Phaser.Image.prototype.constructor=Phaser.Image;Phaser.Component.Core.install.call(Phaser.Image.prototype,["Angle","Animation","AutoCull","Bounds","BringToTop","Crop","Destroy","FixedToCamera","InputEnabled","LifeSpan","LoadTexture","Overlap","Reset","ScaleMinMax","Smoothed"]);Phaser.Image.prototype.preUpdateInWorld=Phaser.Component.InWorld.preUpdate;Phaser.Image.prototype.preUpdateCore=Phaser.Component.Core.preUpdate;Phaser.Image.prototype.preUpdate=function(){if(!this.preUpdateInWorld()){return false
}return this.preUpdateCore()};Phaser.Button=function(j,g,f,h,i,b,c,a,d,e){g=g||0;f=f||0;h=h||null;i=i||null;b=b||this;Phaser.Image.call(this,j,g,f,h,a);this.type=Phaser.BUTTON;this.physicsType=Phaser.SPRITE;this._onOverFrame=null;this._onOutFrame=null;this._onDownFrame=null;this._onUpFrame=null;this.onOverSound=null;this.onOutSound=null;this.onDownSound=null;this.onUpSound=null;this.onOverSoundMarker="";this.onOutSoundMarker="";this.onDownSoundMarker="";this.onUpSoundMarker="";this.onInputOver=new Phaser.Signal();this.onInputOut=new Phaser.Signal();this.onInputDown=new Phaser.Signal();this.onInputUp=new Phaser.Signal();this.onOverMouseOnly=true;this.justReleasedPreventsOver=Phaser.PointerMode.TOUCH;this.freezeFrames=false;this.forceOut=false;this.inputEnabled=true;this.input.start(0,true);this.input.useHandCursor=true;this.setFrames(c,a,d,e);if(i!==null){this.onInputUp.add(i,b)}this.events.onInputOver.add(this.onInputOverHandler,this);this.events.onInputOut.add(this.onInputOutHandler,this);this.events.onInputDown.add(this.onInputDownHandler,this);this.events.onInputUp.add(this.onInputUpHandler,this);this.events.onRemovedFromWorld.add(this.removedFromWorld,this)};Phaser.Button.prototype=Object.create(Phaser.Image.prototype);Phaser.Button.prototype.constructor=Phaser.Button;var STATE_OVER="Over";var STATE_OUT="Out";var STATE_DOWN="Down";var STATE_UP="Up";Phaser.Button.prototype.clearFrames=function(){this.setFrames(null,null,null,null)};Phaser.Button.prototype.removedFromWorld=function(){this.inputEnabled=false};Phaser.Button.prototype.setStateFrame=function(c,d,b){var a="_on"+c+"Frame";if(d!==null){this[a]=d;if(b){this.changeStateFrame(c)}}else{this[a]=null}};Phaser.Button.prototype.changeStateFrame=function(b){if(this.freezeFrames){return false}var a="_on"+b+"Frame";var c=this[a];if(typeof c==="string"){this.frameName=c;return true}else{if(typeof c==="number"){this.frame=c;return true}else{return false}}};Phaser.Button.prototype.setFrames=function(b,d,a,c){this.setStateFrame(STATE_OVER,b,this.input.pointerOver());this.setStateFrame(STATE_OUT,d,!this.input.pointerOver());this.setStateFrame(STATE_DOWN,a,this.input.pointerDown());this.setStateFrame(STATE_UP,c,this.input.pointerUp())};Phaser.Button.prototype.setStateSound=function(c,d,a){var e="on"+c+"Sound";var b="on"+c+"SoundMarker";if(d instanceof Phaser.Sound||d instanceof Phaser.AudioSprite){this[e]=d;this[b]=typeof a==="string"?a:""}else{this[e]=null;this[b]=""}};Phaser.Button.prototype.playStateSound=function(c){var e="on"+c+"Sound";var d=this[e];if(d){var b="on"+c+"SoundMarker";var a=this[b];d.play(a);return true}else{return false}};Phaser.Button.prototype.setSounds=function(b,f,a,e,d,h,c,g){this.setStateSound(STATE_OVER,b,f);this.setStateSound(STATE_OUT,d,h);this.setStateSound(STATE_DOWN,a,e);this.setStateSound(STATE_UP,c,g)};Phaser.Button.prototype.setOverSound=function(b,a){this.setStateSound(STATE_OVER,b,a)};Phaser.Button.prototype.setOutSound=function(b,a){this.setStateSound(STATE_OUT,b,a)};Phaser.Button.prototype.setDownSound=function(b,a){this.setStateSound(STATE_DOWN,b,a)};Phaser.Button.prototype.setUpSound=function(b,a){this.setStateSound(STATE_UP,b,a)};Phaser.Button.prototype.onInputOverHandler=function(a,b){if(b.justReleased()&&(this.justReleasedPreventsOver&b.pointerMode)===b.pointerMode){return}this.changeStateFrame(STATE_OVER);if(this.onOverMouseOnly&&!b.isMouse){return}this.playStateSound(STATE_OVER);if(this.onInputOver){this.onInputOver.dispatch(this,b)}};Phaser.Button.prototype.onInputOutHandler=function(a,b){this.changeStateFrame(STATE_OUT);this.playStateSound(STATE_OUT);if(this.onInputOut){this.onInputOut.dispatch(this,b)}};Phaser.Button.prototype.onInputDownHandler=function(a,b){this.changeStateFrame(STATE_DOWN);this.playStateSound(STATE_DOWN);if(this.onInputDown){this.onInputDown.dispatch(this,b)}};Phaser.Button.prototype.onInputUpHandler=function(a,d,c){this.playStateSound(STATE_UP);if(this.onInputUp){this.onInputUp.dispatch(this,d,c)}if(this.freezeFrames){return}if(this.forceOut===true||(this.forceOut&d.pointerMode)===d.pointerMode){this.changeStateFrame(STATE_OUT)}else{var b=this.changeStateFrame(STATE_UP);if(!b){if(c){this.changeStateFrame(STATE_OVER)}else{this.changeStateFrame(STATE_OUT)}}}};Phaser.SpriteBatch=function(b,d,c,a){if(d===undefined||d===null){d=b.world}PIXI.SpriteBatch.call(this);Phaser.Group.call(this,b,d,c,a);this.type=Phaser.SPRITEBATCH};Phaser.SpriteBatch.prototype=Phaser.Utils.extend(true,Phaser.SpriteBatch.prototype,PIXI.SpriteBatch.prototype,Phaser.Group.prototype);Phaser.SpriteBatch.prototype.constructor=Phaser.SpriteBatch;Phaser.BitmapData=function(b,d,e,a,c){if(e===undefined||e===0){e=256}if(a===undefined||a===0){a=256}if(c===undefined){c=false}this.game=b;this.key=d;this.width=e;this.height=a;this.canvas=Phaser.Canvas.create(this,e,a,null,c);this.context=this.canvas.getContext("2d",{alpha:true});this.ctx=this.context;this.smoothProperty=(b.renderType===Phaser.CANVAS)?b.renderer.renderSession.smoothProperty:Phaser.Canvas.getSmoothingPrefix(this.context);
	this.imageData=this.context.getImageData(0,0,e,a);this.data=null;if(this.imageData){this.data=this.imageData.data}this.pixels=null;if(this.data){if(this.imageData.data.buffer){this.buffer=this.imageData.data.buffer;this.pixels=new Uint32Array(this.buffer)}else{if(window["ArrayBuffer"]){this.buffer=new ArrayBuffer(this.imageData.data.length);this.pixels=new Uint32Array(this.buffer)}else{this.pixels=this.imageData.data}}}this.baseTexture=new PIXI.BaseTexture(this.canvas);this.texture=new PIXI.Texture(this.baseTexture);this.frameData=new Phaser.FrameData();this.textureFrame=this.frameData.addFrame(new Phaser.Frame(0,0,0,e,a,"bitmapData"));this.texture.frame=this.textureFrame;this.type=Phaser.BITMAPDATA;this.disableTextureUpload=false;this.dirty=false;this.cls=this.clear;this._image=null;this._pos=new Phaser.Point();this._size=new Phaser.Point();this._scale=new Phaser.Point();this._rotate=0;this._alpha={prev:1,current:1};this._anchor=new Phaser.Point();this._tempR=0;this._tempG=0;this._tempB=0;this._circle=new Phaser.Circle();this._swapCanvas=undefined};Phaser.BitmapData.prototype={move:function(a,c,b){if(a!==0){this.moveH(a,b)}if(c!==0){this.moveV(c,b)}return this},moveH:function(i,e){if(e===undefined){e=true}if(this._swapCanvas===undefined){this._swapCanvas=PIXI.CanvasPool.create(this,this.width,this.height)}var g=this._swapCanvas;var b=g.getContext("2d");var d=this.height;var f=this.canvas;b.clearRect(0,0,this.width,this.height);if(i<0){i=Math.abs(i);var a=this.width-i;if(e){b.drawImage(f,0,0,i,d,a,0,i,d)}b.drawImage(f,i,0,a,d,0,0,a,d)}else{var a=this.width-i;if(e){b.drawImage(f,a,0,i,d,0,0,i,d)}b.drawImage(f,0,0,a,d,i,0,a,d)}this.clear();return this.copy(this._swapCanvas)},moveV:function(i,e){if(e===undefined){e=true}if(this._swapCanvas===undefined){this._swapCanvas=PIXI.CanvasPool.create(this,this.width,this.height)}var g=this._swapCanvas;var b=g.getContext("2d");var a=this.width;var f=this.canvas;b.clearRect(0,0,this.width,this.height);if(i<0){i=Math.abs(i);var d=this.height-i;if(e){b.drawImage(f,0,0,a,i,0,d,a,i)}b.drawImage(f,0,i,a,d,0,0,a,d)}else{var d=this.height-i;if(e){b.drawImage(f,0,d,a,i,0,0,a,i)}b.drawImage(f,0,0,a,d,0,i,a,d)}this.clear();return this.copy(this._swapCanvas)},add:function(a){if(Array.isArray(a)){for(var b=0;b<a.length;b++){if(a[b]["loadTexture"]){a[b].loadTexture(this)}}}else{a.loadTexture(this)}return this},load:function(a){if(typeof a==="string"){a=this.game.cache.getImage(a)}if(a){this.resize(a.width,a.height);this.cls()}else{return}this.draw(a);this.update();return this},clear:function(b,d,c,a){if(b===undefined){b=0}if(d===undefined){d=0}if(c===undefined){c=this.width}if(a===undefined){a=this.height}this.context.clearRect(b,d,c,a);this.dirty=true;return this},fill:function(f,e,c,d){if(d===undefined){d=1}this.context.fillStyle="rgba("+f+","+e+","+c+","+d+")";this.context.fillRect(0,0,this.width,this.height);this.dirty=true;return this},generateTexture:function(a){var c=new Image();c.src=this.canvas.toDataURL("image/png");var b=this.game.cache.addImage(a,"",c);return new PIXI.Texture(b.base)},resize:function(b,a){if(b!==this.width||a!==this.height){this.width=b;this.height=a;this.canvas.width=b;this.canvas.height=a;if(this._swapCanvas!==undefined){this._swapCanvas.width=b;this._swapCanvas.height=a}this.baseTexture.width=b;this.baseTexture.height=a;this.textureFrame.width=b;this.textureFrame.height=a;this.texture.width=b;this.texture.height=a;this.texture.crop.width=b;this.texture.crop.height=a;this.update();this.dirty=true}return this},update:function(b,d,c,a){if(b===undefined){b=0}if(d===undefined){d=0}if(c===undefined){c=Math.max(1,this.width)}if(a===undefined){a=Math.max(1,this.height)}this.imageData=this.context.getImageData(b,d,c,a);this.data=this.imageData.data;if(this.imageData.data.buffer){this.buffer=this.imageData.data.buffer;this.pixels=new Uint32Array(this.buffer)}else{if(window["ArrayBuffer"]){this.buffer=new ArrayBuffer(this.imageData.data.length);this.pixels=new Uint32Array(this.buffer)}else{this.pixels=this.imageData.data}}return this},processPixelRGB:function(l,d,j,i,c,m){if(j===undefined){j=0}if(i===undefined){i=0}if(c===undefined){c=this.width}if(m===undefined){m=this.height}var k=j+c;var g=i+m;var b=Phaser.Color.createColor();var n={r:0,g:0,b:0,a:0};var a=false;for(var e=i;e<g;e++){for(var f=j;f<k;f++){Phaser.Color.unpackPixel(this.getPixel32(f,e),b);n=l.call(d,b,f,e);if(n!==false&&n!==null&&n!==undefined){this.setPixel32(f,e,n.r,n.g,n.b,n.a,false);a=true}}}if(a){this.context.putImageData(this.imageData,0,0);this.dirty=true}return this},processPixel:function(l,d,j,i,c,m){if(j===undefined){j=0}if(i===undefined){i=0}if(c===undefined){c=this.width}if(m===undefined){m=this.height}var k=j+c;var g=i+m;var b=0;var n=0;var a=false;for(var e=i;e<g;e++){for(var f=j;f<k;f++){b=this.getPixel32(f,e);n=l.call(d,b,f,e);if(n!==b){this.pixels[e*this.width+f]=n;a=true}}}if(a){this.context.putImageData(this.imageData,0,0);this.dirty=true}return this},replaceRGB:function(f,b,o,d,e,q,l,c,k){var n=0;
	var j=0;var p=this.width;var g=this.height;var a=Phaser.Color.packPixel(f,b,o,d);if(k!==undefined&&k instanceof Phaser.Rectangle){n=k.x;j=k.y;p=k.width;g=k.height}for(var i=0;i<g;i++){for(var m=0;m<p;m++){if(this.getPixel32(n+m,j+i)===a){this.setPixel32(n+m,j+i,e,q,l,c,false)}}}this.context.putImageData(this.imageData,0,0);this.dirty=true;return this},setHSL:function(d,k,b,f){var j=d||d===0;var c=k||k===0;var g=b||b===0;if(!j&&!c&&!g){return}if(f===undefined){f=new Phaser.Rectangle(0,0,this.width,this.height)}var a=Phaser.Color.createColor();for(var e=f.y;e<f.bottom;e++){for(var i=f.x;i<f.right;i++){Phaser.Color.unpackPixel(this.getPixel32(i,e),a,true);if(j){a.h=d}if(c){a.s=k}if(g){a.l=b}Phaser.Color.HSLtoRGB(a.h,a.s,a.l,a);this.setPixel32(i,e,a.r,a.g,a.b,a.a,false)}}this.context.putImageData(this.imageData,0,0);this.dirty=true;return this},shiftHSL:function(e,d,b,f){if(e===undefined||e===null){e=false}if(d===undefined||d===null){d=false}if(b===undefined||b===null){b=false}if(!e&&!d&&!b){return}if(f===undefined){f=new Phaser.Rectangle(0,0,this.width,this.height)}var c=Phaser.Color.createColor();for(var g=f.y;g<f.bottom;g++){for(var a=f.x;a<f.right;a++){Phaser.Color.unpackPixel(this.getPixel32(a,g),c,true);if(e){c.h=this.game.math.wrap(c.h+e,0,1)}if(d){c.s=this.game.math.clamp(c.s+d,0,1)}if(b){c.l=this.game.math.clamp(c.l+b,0,1)}Phaser.Color.HSLtoRGB(c.h,c.s,c.l,c);this.setPixel32(a,g,c.r,c.g,c.b,c.a,false)}}this.context.putImageData(this.imageData,0,0);this.dirty=true;return this},setPixel32:function(b,g,f,d,a,e,c){if(c===undefined){c=true}if(b>=0&&b<=this.width&&g>=0&&g<=this.height){if(Phaser.Device.LITTLE_ENDIAN){this.pixels[g*this.width+b]=(e<<24)|(a<<16)|(d<<8)|f}else{this.pixels[g*this.width+b]=(f<<24)|(d<<16)|(a<<8)|e}if(c){this.context.putImageData(this.imageData,0,0);this.dirty=true}}return this},setPixel:function(b,f,e,d,a,c){return this.setPixel32(b,f,e,d,a,255,c)},getPixel:function(a,d,c){if(!c){c=Phaser.Color.createColor()}var b=~~(a+(d*this.width));b*=4;c.r=this.data[b];c.g=this.data[++b];c.b=this.data[++b];c.a=this.data[++b];return c},getPixel32:function(a,b){if(a>=0&&a<=this.width&&b>=0&&b<=this.height){return this.pixels[b*this.width+a]}},getPixelRGB:function(a,e,d,b,c){return Phaser.Color.unpackPixel(this.getPixel32(a,e),d,b,c)},getPixels:function(a){return this.context.getImageData(a.x,a.y,a.width,a.height)},getFirstPixel:function(e){if(e===undefined){e=0}var d=Phaser.Color.createColor();var a=0;var f=0;var c=1;var b=false;if(e===1){c=-1;f=this.height}else{if(e===3){c=-1;a=this.width}}do{Phaser.Color.unpackPixel(this.getPixel32(a,f),d);if(e===0||e===1){a++;if(a===this.width){a=0;f+=c;if(f>=this.height||f<=0){b=true}}}else{if(e===2||e===3){f++;if(f===this.height){f=0;a+=c;if(a>=this.width||a<=0){b=true}}}}}while(d.a===0&&!b);d.x=a;d.y=f;return d},getBounds:function(a){if(a===undefined){a=new Phaser.Rectangle()}a.x=this.getFirstPixel(2).x;if(a.x===this.width){return a.setTo(0,0,0,0)}a.y=this.getFirstPixel(0).y;a.width=(this.getFirstPixel(3).x-a.x)+1;a.height=(this.getFirstPixel(1).y-a.y)+1;return a},addToWorld:function(b,g,a,f,d,c){d=d||1;c=c||1;var e=this.game.add.image(b,g,this);e.anchor.set(a,f);e.scale.set(d,c);return e},copy:function(j,f,e,i,h,q,p,g,l,m,b,a,o,n,c,r,d){if(j===undefined||j===null){j=this}if(j instanceof Phaser.RenderTexture||j instanceof PIXI.RenderTexture){j=j.getCanvas()}this._image=j;if(j instanceof Phaser.Sprite||j instanceof Phaser.Image||j instanceof Phaser.Text||j instanceof PIXI.Sprite){this._pos.set(j.texture.crop.x,j.texture.crop.y);this._size.set(j.texture.crop.width,j.texture.crop.height);this._scale.set(j.scale.x,j.scale.y);this._anchor.set(j.anchor.x,j.anchor.y);this._rotate=j.rotation;this._alpha.current=j.alpha;if(j.texture instanceof Phaser.RenderTexture||j.texture instanceof PIXI.RenderTexture){this._image=j.texture.getCanvas()}else{this._image=j.texture.baseTexture.source}if(q===undefined||q===null){q=j.x}if(p===undefined||p===null){p=j.y}if(j.texture.trim){q+=j.texture.trim.x-j.anchor.x*j.texture.trim.width;p+=j.texture.trim.y-j.anchor.y*j.texture.trim.height}if(j.tint!==16777215){if(j.cachedTint!==j.tint){j.cachedTint=j.tint;j.tintedTexture=PIXI.CanvasTinter.getTintedTexture(j,j.tint)}this._image=j.tintedTexture;this._pos.set(0)}}else{this._pos.set(0);this._scale.set(1);this._anchor.set(0);this._rotate=0;this._alpha.current=1;if(j instanceof Phaser.BitmapData){this._image=j.canvas}else{if(typeof j==="string"){j=this.game.cache.getImage(j);if(j===null){return}else{this._image=j}}}this._size.set(this._image.width,this._image.height)}if(f===undefined||f===null){f=0}if(e===undefined||e===null){e=0}if(i){this._size.x=i}if(h){this._size.y=h}if(q===undefined||q===null){q=f}if(p===undefined||p===null){p=e}if(g===undefined||g===null){g=this._size.x}if(l===undefined||l===null){l=this._size.y}if(typeof m==="number"){this._rotate=m}if(typeof b==="number"){this._anchor.x=b}if(typeof a==="number"){this._anchor.y=a}if(typeof o==="number"){this._scale.x=o}if(typeof n==="number"){this._scale.y=n
}if(typeof c==="number"){this._alpha.current=c}if(r===undefined){r=null}if(d===undefined){d=false}if(this._alpha.current<=0||this._scale.x===0||this._scale.y===0||this._size.x===0||this._size.y===0){return}var k=this.context;this._alpha.prev=k.globalAlpha;k.save();k.globalAlpha=this._alpha.current;if(r){this.op=r}if(d){q|=0;p|=0}k.translate(q,p);k.scale(this._scale.x,this._scale.y);k.rotate(this._rotate);k.drawImage(this._image,this._pos.x+f,this._pos.y+e,this._size.x,this._size.y,-g*this._anchor.x,-l*this._anchor.y,g,l);k.restore();k.globalAlpha=this._alpha.prev;this.dirty=true;return this},copyTransform:function(g,f,e){if(f===undefined){f=null}if(e===undefined){e=false}if(!g.hasOwnProperty("worldTransform")||!g.worldVisible||g.worldAlpha===0){return this}var b=g.worldTransform;this._pos.set(g.texture.crop.x,g.texture.crop.y);this._size.set(g.texture.crop.width,g.texture.crop.height);if(b.a===0||b.d===0||this._size.x===0||this._size.y===0){return this}if(g.texture instanceof Phaser.RenderTexture||g.texture instanceof PIXI.RenderTexture){this._image=g.texture.getCanvas()}else{this._image=g.texture.baseTexture.source}var d=b.tx;var a=b.ty;if(g.texture.trim){d+=g.texture.trim.x-g.anchor.x*g.texture.trim.width;a+=g.texture.trim.y-g.anchor.y*g.texture.trim.height}if(g.tint!==16777215){if(g.cachedTint!==g.tint){g.cachedTint=g.tint;g.tintedTexture=PIXI.CanvasTinter.getTintedTexture(g,g.tint)}this._image=g.tintedTexture;this._pos.set(0)}if(e){d|=0;a|=0}var c=this.context;this._alpha.prev=c.globalAlpha;c.save();c.globalAlpha=this._alpha.current;if(f){this.op=f}c[this.smoothProperty]=(g.texture.baseTexture.scaleMode===PIXI.scaleModes.LINEAR);c.setTransform(b.a,b.b,b.c,b.d,d,a);c.drawImage(this._image,this._pos.x,this._pos.y,this._size.x,this._size.y,-this._size.x*g.anchor.x,-this._size.y*g.anchor.y,this._size.x,this._size.y);c.restore();c.globalAlpha=this._alpha.prev;this.dirty=true;return this},copyRect:function(e,d,a,g,f,c,b){return this.copy(e,d.x,d.y,d.width,d.height,a,g,d.width,d.height,0,0,0,1,1,f,c,b)},draw:function(f,b,g,e,a,d,c){return this.copy(f,null,null,null,null,b,g,e,a,null,null,null,null,null,null,d,c)},drawGroup:function(c,b,a){if(c.total>0){c.forEachExists(this.drawGroupProxy,this,b,a)}return this},drawGroupProxy:function(d,c,b){if(d.hasOwnProperty("texture")){this.copyTransform(d,c,b)}if(d.type===Phaser.GROUP&&d.exists){this.drawGroup(d,c,b)}else{if(d.hasOwnProperty("children")&&d.children.length>0){for(var a=0;a<d.children.length;a++){if(d.children[a].exists){this.copyTransform(d.children[a],c,b)}}}}},drawFull:function(d,c,b){if(d.worldVisible===false||d.worldAlpha===0||(d.hasOwnProperty("exists")&&d.exists===false)){return this}if(d.type!==Phaser.GROUP&&d.type!==Phaser.EMITTER&&d.type!==Phaser.BITMAPTEXT){if(d.type===Phaser.GRAPHICS){var e=d.getBounds();this.ctx.save();this.ctx.translate(e.x,e.y);PIXI.CanvasGraphics.renderGraphics(d,this.ctx);this.ctx.restore()}else{this.copy(d,null,null,null,null,d.worldPosition.x,d.worldPosition.y,null,null,d.worldRotation,null,null,d.worldScale.x,d.worldScale.y,d.worldAlpha,c,b)}}if(d.children){for(var a=0;a<d.children.length;a++){this.drawFull(d.children[a],c,b)}}return this},shadow:function(c,d,a,e){var b=this.context;if(c===undefined||c===null){b.shadowColor="rgba(0,0,0,0)"}else{b.shadowColor=c;b.shadowBlur=d||5;b.shadowOffsetX=a||10;b.shadowOffsetY=e||10}return this},alphaMask:function(d,a,b,c){if(c===undefined||c===null){this.draw(a).blendSourceAtop()}else{this.draw(a,c.x,c.y,c.width,c.height).blendSourceAtop()}if(b===undefined||b===null){this.draw(d).blendReset()}else{this.draw(d,b.x,b.y,b.width,b.height).blendReset()}return this},extract:function(i,c,f,j,k,d,e,l,h){if(k===undefined){k=255}if(d===undefined){d=false}if(e===undefined){e=c}if(l===undefined){l=f}if(h===undefined){h=j}if(d){i.resize(this.width,this.height)}this.processPixelRGB(function(b,a,g){if(b.r===c&&b.g===f&&b.b===j){i.setPixel32(a,g,e,l,h,k,false)}return false},this);i.context.putImageData(i.imageData,0,0);i.dirty=true;return i},rect:function(b,e,d,a,c){if(typeof c!=="undefined"){this.context.fillStyle=c}this.context.fillRect(b,e,d,a);return this},text:function(f,a,h,d,c,g){if(a===undefined){a=0}if(h===undefined){h=0}if(d===undefined){d="14px Courier"}if(c===undefined){c="rgb(255,255,255)"}if(g===undefined){g=true}var b=this.context;var e=b.font;b.font=d;if(g){b.fillStyle="rgb(0,0,0)";b.fillText(f,a+1,h+1)}b.fillStyle=c;b.fillText(f,a,h);b.font=e;return this},circle:function(b,e,a,d){var c=this.context;if(d!==undefined){c.fillStyle=d}c.beginPath();c.arc(b,e,a,0,Math.PI*2,false);c.closePath();c.fill();return this},line:function(d,g,c,e,b,f){if(b===undefined){b="#fff"}if(f===undefined){f=1}var a=this.context;a.beginPath();a.moveTo(d,g);a.lineTo(c,e);a.lineWidth=f;a.strokeStyle=b;a.stroke();a.closePath();return this},textureLine:function(b,e,d){if(d===undefined){d="repeat-x"}if(typeof e==="string"){e=this.game.cache.getImage(e);if(!e){return}}var c=b.length;if(d==="no-repeat"&&c>e.width){c=e.width
}var a=this.context;a.fillStyle=a.createPattern(e,d);this._circle=new Phaser.Circle(b.start.x,b.start.y,e.height);this._circle.circumferencePoint(b.angle-1.5707963267948966,false,this._pos);a.save();a.translate(this._pos.x,this._pos.y);a.rotate(b.angle);a.fillRect(0,0,c,e.height);a.restore();this.dirty=true;return this},render:function(){if(!this.disableTextureUpload&&this.dirty){this.baseTexture.dirty();this.dirty=false}return this},destroy:function(){this.frameData.destroy();this.texture.destroy(true);PIXI.CanvasPool.remove(this)},blendReset:function(){this.op="source-over";return this},blendSourceOver:function(){this.op="source-over";return this},blendSourceIn:function(){this.op="source-in";return this},blendSourceOut:function(){this.op="source-out";return this},blendSourceAtop:function(){this.op="source-atop";return this},blendDestinationOver:function(){this.op="destination-over";return this},blendDestinationIn:function(){this.op="destination-in";return this},blendDestinationOut:function(){this.op="destination-out";return this},blendDestinationAtop:function(){this.op="destination-atop";return this},blendXor:function(){this.op="xor";return this},blendAdd:function(){this.op="lighter";return this},blendMultiply:function(){this.op="multiply";return this},blendScreen:function(){this.op="screen";return this},blendOverlay:function(){this.op="overlay";return this},blendDarken:function(){this.op="darken";return this},blendLighten:function(){this.op="lighten";return this},blendColorDodge:function(){this.op="color-dodge";return this},blendColorBurn:function(){this.op="color-burn";return this},blendHardLight:function(){this.op="hard-light";return this},blendSoftLight:function(){this.op="soft-light";return this},blendDifference:function(){this.op="difference";return this},blendExclusion:function(){this.op="exclusion";return this},blendHue:function(){this.op="hue";return this},blendSaturation:function(){this.op="saturation";return this},blendColor:function(){this.op="color";return this},blendLuminosity:function(){this.op="luminosity";return this}};Object.defineProperty(Phaser.BitmapData.prototype,"smoothed",{get:function(){Phaser.Canvas.getSmoothingEnabled(this.context)},set:function(a){Phaser.Canvas.setSmoothingEnabled(this.context,a)}});Object.defineProperty(Phaser.BitmapData.prototype,"op",{get:function(){return this.context.globalCompositeOperation},set:function(a){this.context.globalCompositeOperation=a}});Phaser.BitmapData.getTransform=function(f,e,c,a,d,b){if(typeof f!=="number"){f=0}if(typeof e!=="number"){e=0}if(typeof c!=="number"){c=1}if(typeof a!=="number"){a=1}if(typeof d!=="number"){d=0}if(typeof b!=="number"){b=0}return{sx:c,sy:a,scaleX:c,scaleY:a,skewX:d,skewY:b,translateX:f,translateY:e,tx:f,ty:e}};Phaser.BitmapData.prototype.constructor=Phaser.BitmapData;PIXI.Graphics=function(){PIXI.DisplayObjectContainer.call(this);this.renderable=true;this.fillAlpha=1;this.lineWidth=0;this.lineColor=0;this.graphicsData=[];this.tint=16777215;this.blendMode=PIXI.blendModes.NORMAL;this.currentPath=null;this._webGL=[];this.isMask=false;this.boundsPadding=0;this._localBounds=new PIXI.Rectangle(0,0,1,1);this.dirty=true;this._boundsDirty=false;this.webGLDirty=false;this.cachedSpriteDirty=false};PIXI.Graphics.prototype=Object.create(PIXI.DisplayObjectContainer.prototype);PIXI.Graphics.prototype.constructor=PIXI.Graphics;PIXI.Graphics.prototype.lineStyle=function(a,b,c){this.lineWidth=a||0;this.lineColor=b||0;this.lineAlpha=(c===undefined)?1:c;if(this.currentPath){if(this.currentPath.shape.points.length){this.drawShape(new PIXI.Polygon(this.currentPath.shape.points.slice(-2)))}else{this.currentPath.lineWidth=this.lineWidth;this.currentPath.lineColor=this.lineColor;this.currentPath.lineAlpha=this.lineAlpha}}return this};PIXI.Graphics.prototype.moveTo=function(a,b){this.drawShape(new PIXI.Polygon([a,b]));return this};PIXI.Graphics.prototype.lineTo=function(a,b){if(!this.currentPath){this.moveTo(0,0)}this.currentPath.shape.points.push(a,b);this.dirty=true;this._boundsDirty=true;return this};PIXI.Graphics.prototype.quadraticCurveTo=function(k,e,m,h){if(this.currentPath){if(this.currentPath.shape.points.length===0){this.currentPath.shape.points=[0,0]}}else{this.moveTo(0,0)}var a,f,b=20,o=this.currentPath.shape.points;if(o.length===0){this.moveTo(0,0)}var l=o[o.length-2];var g=o[o.length-1];var c=0;for(var d=1;d<=b;++d){c=d/b;a=l+((k-l)*c);f=g+((e-g)*c);o.push(a+(((k+((m-k)*c))-a)*c),f+(((e+((h-e)*c))-f)*c))}this.dirty=true;this._boundsDirty=true;return this};PIXI.Graphics.prototype.bezierCurveTo=function(q,l,p,f,s,o){if(this.currentPath){if(this.currentPath.shape.points.length===0){this.currentPath.shape.points=[0,0]}}else{this.moveTo(0,0)}var d=20,b,c,a,k,h,t=this.currentPath.shape.points;var r=t[t.length-2];var m=t[t.length-1];var e=0;for(var g=1;g<=d;++g){e=g/d;b=(1-e);c=b*b;a=c*b;k=e*e;h=k*e;t.push(a*r+3*c*e*q+3*b*k*p+h*s,a*m+3*c*e*l+3*b*k*f+h*o)}this.dirty=true;this._boundsDirty=true;return this};PIXI.Graphics.prototype.arcTo=function(w,g,v,e,h){if(this.currentPath){if(this.currentPath.shape.points.length===0){this.currentPath.shape.points.push(w,g)
}}else{this.moveTo(w,g)}var t=this.currentPath.shape.points,o=t[t.length-2],m=t[t.length-1],B=m-g,j=o-w,A=e-g,i=v-w,u=Math.abs(B*i-j*A);if(u<1e-8||h===0){if(t[t.length-2]!==w||t[t.length-1]!==g){t.push(w,g)}}else{var z=B*B+j*j,q=A*A+i*i,b=B*A+j*i,l=h*Math.sqrt(z)/u,k=h*Math.sqrt(q)/u,c=l*b/z,a=k*b/q,f=l*i+k*j,d=l*A+k*B,p=j*(k+c),n=B*(k+c),y=i*(l+a),x=A*(l+a),s=Math.atan2(n-d,p-f),r=Math.atan2(x-d,y-f);this.arc(f+w,d+g,h,s,r,j*A>i*B)}this.dirty=true;this._boundsDirty=true;return this};PIXI.Graphics.prototype.arc=function(d,b,e,q,n,a,o){if(q===n){return this}if(a===undefined){a=false}if(o===undefined){o=40}if(!a&&n<=q){n+=Math.PI*2}else{if(a&&q<=n){q+=Math.PI*2}}var j=a?(q-n)*-1:(n-q);var m=Math.ceil(Math.abs(j)/(Math.PI*2))*o;if(j===0){return this}var x=d+Math.cos(q)*e;var v=b+Math.sin(q)*e;if(a&&this.filling){this.moveTo(d,b)}else{this.moveTo(x,v)}var u=this.currentPath.shape.points;var f=j/(m*2);var l=f*2;var p=Math.cos(f);var r=Math.sin(f);var z=m-1;var g=(z%1)/z;for(var t=0;t<=z;t++){var k=t+g*t;var w=((f)+q+(l*k));var y=Math.cos(w);var h=-Math.sin(w);u.push(((p*y)+(r*h))*e+d,((p*-h)+(r*y))*e+b)}this.dirty=true;this._boundsDirty=true;return this};PIXI.Graphics.prototype.beginFill=function(a,b){this.filling=true;this.fillColor=a||0;this.fillAlpha=(b===undefined)?1:b;if(this.currentPath){if(this.currentPath.shape.points.length<=2){this.currentPath.fill=this.filling;this.currentPath.fillColor=this.fillColor;this.currentPath.fillAlpha=this.fillAlpha}}return this};PIXI.Graphics.prototype.endFill=function(){this.filling=false;this.fillColor=null;this.fillAlpha=1;return this};PIXI.Graphics.prototype.drawRect=function(b,d,c,a){this.drawShape(new PIXI.Rectangle(b,d,c,a));return this};PIXI.Graphics.prototype.drawRoundedRect=function(c,e,d,b,a){this.drawShape(new PIXI.RoundedRectangle(c,e,d,b,a));return this};PIXI.Graphics.prototype.drawCircle=function(a,c,b){this.drawShape(new PIXI.Circle(a,c,b));return this};PIXI.Graphics.prototype.drawEllipse=function(b,d,c,a){this.drawShape(new PIXI.Ellipse(b,d,c,a));return this};PIXI.Graphics.prototype.drawPolygon=function(c){if(c instanceof Phaser.Polygon||c instanceof PIXI.Polygon){c=c.points}var b=c;if(!Array.isArray(b)){b=new Array(arguments.length);for(var a=0;a<b.length;++a){b[a]=arguments[a]}}this.drawShape(new Phaser.Polygon(b));return this};PIXI.Graphics.prototype.clear=function(){this.lineWidth=0;this.filling=false;this.dirty=true;this._boundsDirty=true;this.clearDirty=true;this.graphicsData=[];this.updateLocalBounds();return this};PIXI.Graphics.prototype.generateTexture=function(a,c,f){if(a===undefined){a=1}if(c===undefined){c=PIXI.scaleModes.DEFAULT}if(f===undefined){f=0}var e=this.getBounds();e.width+=f;e.height+=f;var b=new PIXI.CanvasBuffer(e.width*a,e.height*a);var d=PIXI.Texture.fromCanvas(b.canvas,c);d.baseTexture.resolution=a;b.context.scale(a,a);b.context.translate(-e.x,-e.y);PIXI.CanvasGraphics.renderGraphics(this,b.context);return d};PIXI.Graphics.prototype._renderWebGL=function(b){if(this.visible===false||this.alpha===0||this.isMask===true){return}if(this._cacheAsBitmap){if(this.dirty||this.cachedSpriteDirty){this._generateCachedSprite();this.updateCachedSpriteTexture();this.cachedSpriteDirty=false;this.dirty=false}this._cachedSprite.worldAlpha=this.worldAlpha;PIXI.Sprite.prototype._renderWebGL.call(this._cachedSprite,b);return}else{b.spriteBatch.stop();b.blendModeManager.setBlendMode(this.blendMode);if(this._mask){b.maskManager.pushMask(this._mask,b)}if(this._filters){b.filterManager.pushFilter(this._filterBlock)}if(this.blendMode!==b.spriteBatch.currentBlendMode){b.spriteBatch.currentBlendMode=this.blendMode;var c=PIXI.blendModesWebGL[b.spriteBatch.currentBlendMode];b.spriteBatch.gl.blendFunc(c[0],c[1])}if(this.webGLDirty){this.dirty=true;this.webGLDirty=false}PIXI.WebGLGraphics.renderGraphics(this,b);if(this.children.length){b.spriteBatch.start();for(var a=0;a<this.children.length;a++){this.children[a]._renderWebGL(b)}b.spriteBatch.stop()}if(this._filters){b.filterManager.popFilter()}if(this._mask){b.maskManager.popMask(this.mask,b)}b.drawCount++;b.spriteBatch.start()}};PIXI.Graphics.prototype._renderCanvas=function(g){if(this.visible===false||this.alpha===0||this.isMask===true){return}if(this._prevTint!==this.tint){this.dirty=true;this._prevTint=this.tint}if(this._cacheAsBitmap){if(this.dirty||this.cachedSpriteDirty){this._generateCachedSprite();this.updateCachedSpriteTexture();this.cachedSpriteDirty=false;this.dirty=false}this._cachedSprite.alpha=this.alpha;PIXI.Sprite.prototype._renderCanvas.call(this._cachedSprite,g);return}else{var f=g.context;var d=this.worldTransform;if(this.blendMode!==g.currentBlendMode){g.currentBlendMode=this.blendMode;f.globalCompositeOperation=PIXI.blendModesCanvas[g.currentBlendMode]}if(this._mask){g.maskManager.pushMask(this._mask,g)}var c=g.resolution;var b=(d.tx*g.resolution)+g.shakeX;var a=(d.ty*g.resolution)+g.shakeY;f.setTransform(d.a*c,d.b*c,d.c*c,d.d*c,b,a);PIXI.CanvasGraphics.renderGraphics(this,f);for(var e=0;e<this.children.length;
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           e++){this.children[e]._renderCanvas(g)}if(this._mask){g.maskManager.popMask(g)}}};PIXI.Graphics.prototype.getBounds=function(p){if(!this._currentBounds){if(!this.renderable){return PIXI.EmptyRectangle}if(this.dirty){this.updateLocalBounds();this.webGLDirty=true;this.cachedSpriteDirty=true;this.dirty=false}var i=this._localBounds;var m=i.x;var l=i.width+i.x;var k=i.y;var j=i.height+i.y;var n=p||this.worldTransform;var B=n.a;var z=n.b;var y=n.c;var w=n.d;var C=n.tx;var A=n.ty;var s=B*l+y*j+C;var h=w*j+z*l+A;var r=B*m+y*j+C;var g=w*j+z*m+A;var q=B*m+y*k+C;var f=w*k+z*m+A;var o=B*l+y*k+C;var e=w*k+z*l+A;var v=s;var t=h;var x=s;var u=h;x=r<x?r:x;x=q<x?q:x;x=o<x?o:x;u=g<u?g:u;u=f<u?f:u;u=e<u?e:u;v=r>v?r:v;v=q>v?q:v;v=o>v?o:v;t=g>t?g:t;t=f>t?f:t;t=e>t?e:t;this._bounds.x=x;this._bounds.width=v-x;this._bounds.y=u;this._bounds.height=t-u;this._currentBounds=this._bounds}return this._currentBounds};PIXI.Graphics.prototype.getLocalBounds=function(){var a=this.worldTransform;this.worldTransform=PIXI.identityMatrix;for(var b=0;b<this.children.length;b++){this.children[b].updateTransform()}var c=this.getBounds();this.worldTransform=a;for(b=0;b<this.children.length;b++){this.children[b].updateTransform()}return c};PIXI.Graphics.prototype.containsPoint=function(a){this.worldTransform.applyInverse(a,tempPoint);var d=this.graphicsData;for(var b=0;b<d.length;b++){var c=d[b];if(!c.fill){continue}if(c.shape){if(c.shape.contains(tempPoint.x,tempPoint.y)){return true}}}return false};PIXI.Graphics.prototype.updateLocalBounds=function(){var d=Infinity;var b=-Infinity;var c=Infinity;var a=-Infinity;if(this.graphicsData.length){var m,s,q,o,r,k;for(var g=0;g<this.graphicsData.length;g++){var f=this.graphicsData[g];var n=f.type;var l=f.lineWidth;m=f.shape;if(n===PIXI.Graphics.RECT||n===PIXI.Graphics.RREC){q=m.x-l/2;o=m.y-l/2;r=m.width+l;k=m.height+l;d=q<d?q:d;b=q+r>b?q+r:b;c=o<c?o:c;a=o+k>a?o+k:a}else{if(n===PIXI.Graphics.CIRC){q=m.x;o=m.y;r=m.radius+l/2;k=m.radius+l/2;d=q-r<d?q-r:d;b=q+r>b?q+r:b;c=o-k<c?o-k:c;a=o+k>a?o+k:a}else{if(n===PIXI.Graphics.ELIP){q=m.x;o=m.y;r=m.width+l/2;k=m.height+l/2;d=q-r<d?q-r:d;b=q+r>b?q+r:b;c=o-k<c?o-k:c;a=o+k>a?o+k:a}else{s=m.points;for(var e=0;e<s.length;e++){if(s[e] instanceof Phaser.Point){q=s[e].x;o=s[e].y}else{q=s[e];o=s[e+1];if(e<s.length-1){e++}}d=q-l<d?q-l:d;b=q+l>b?q+l:b;c=o-l<c?o-l:c;a=o+l>a?o+l:a}}}}}}else{d=0;b=0;c=0;a=0}var p=this.boundsPadding;this._localBounds.x=d-p;this._localBounds.width=(b-d)+p*2;this._localBounds.y=c-p;this._localBounds.height=(a-c)+p*2};PIXI.Graphics.prototype._generateCachedSprite=function(){var c=this.getLocalBounds();if(!this._cachedSprite){var a=new PIXI.CanvasBuffer(c.width,c.height);var b=PIXI.Texture.fromCanvas(a.canvas);this._cachedSprite=new PIXI.Sprite(b);this._cachedSprite.buffer=a;this._cachedSprite.worldTransform=this.worldTransform}else{this._cachedSprite.buffer.resize(c.width,c.height)}this._cachedSprite.anchor.x=-(c.x/c.width);this._cachedSprite.anchor.y=-(c.y/c.height);this._cachedSprite.buffer.context.translate(-c.x,-c.y);this.worldAlpha=1;PIXI.CanvasGraphics.renderGraphics(this,this._cachedSprite.buffer.context);this._cachedSprite.alpha=this.alpha};PIXI.Graphics.prototype.updateCachedSpriteTexture=function(){var c=this._cachedSprite;var b=c.texture;var a=c.buffer.canvas;b.baseTexture.width=a.width;b.baseTexture.height=a.height;b.crop.width=b.frame.width=a.width;b.crop.height=b.frame.height=a.height;c._width=a.width;c._height=a.height;b.baseTexture.dirty()};PIXI.Graphics.prototype.destroyCachedSprite=function(){this._cachedSprite.texture.destroy(true);this._cachedSprite=null};PIXI.Graphics.prototype.drawShape=function(a){if(this.currentPath){if(this.currentPath.shape.points.length<=2){this.graphicsData.pop()}}this.currentPath=null;if(a instanceof Phaser.Polygon){a=a.clone();a.flatten()}var b=new PIXI.GraphicsData(this.lineWidth,this.lineColor,this.lineAlpha,this.fillColor,this.fillAlpha,this.filling,a);this.graphicsData.push(b);if(b.type===PIXI.Graphics.POLY){b.shape.closed=this.filling;this.currentPath=b}this.dirty=true;this._boundsDirty=true;return b};Object.defineProperty(PIXI.Graphics.prototype,"cacheAsBitmap",{get:function(){return this._cacheAsBitmap},set:function(a){this._cacheAsBitmap=a;if(this._cacheAsBitmap){this._generateCachedSprite()}else{this.destroyCachedSprite()}this.dirty=true;this.webGLDirty=true}});PIXI.GraphicsData=function(a,f,c,g,d,e,b){this.lineWidth=a;this.lineColor=f;this.lineAlpha=c;this._lineTint=f;this.fillColor=g;this.fillAlpha=d;this._fillTint=g;this.fill=e;this.shape=b;this.type=b.type};PIXI.GraphicsData.prototype.constructor=PIXI.GraphicsData;PIXI.GraphicsData.prototype.clone=function(){return new GraphicsData(this.lineWidth,this.lineColor,this.lineAlpha,this.fillColor,this.fillAlpha,this.fill,this.shape)};PIXI.EarCut={};PIXI.EarCut.Triangulate=function(h,m,j){j=j||2;var k=m&&m.length,f=k?m[0]*j:h.length,l=PIXI.EarCut.linkedList(h,0,f,j,true),d=[];if(!l){return d}var e,c,b,a,o,n,p;if(k){l=PIXI.EarCut.eliminateHoles(h,m,l,j)
}if(h.length>80*j){e=b=h[0];c=a=h[1];for(var g=j;g<f;g+=j){o=h[g];n=h[g+1];if(o<e){e=o}if(n<c){c=n}if(o>b){b=o}if(n>a){a=n}}p=Math.max(b-e,a-c)}PIXI.EarCut.earcutLinked(l,d,j,e,c,p);return d};PIXI.EarCut.linkedList=function(e,b,c,g,a){var h=0,f,d,k;for(f=b,d=c-g;f<c;f+=g){h+=(e[d]-e[f])*(e[f+1]+e[d+1]);d=f}if(a===(h>0)){for(f=b;f<c;f+=g){k=PIXI.EarCut.insertNode(f,e[f],e[f+1],k)}}else{for(f=c-g;f>=b;f-=g){k=PIXI.EarCut.insertNode(f,e[f],e[f+1],k)}}return k};PIXI.EarCut.filterPoints=function(d,a){if(!d){return d}if(!a){a=d}var c=d,b;do{b=false;if(!c.steiner&&(PIXI.EarCut.equals(c,c.next)||PIXI.EarCut.area(c.prev,c,c.next)===0)){PIXI.EarCut.removeNode(c);c=a=c.prev;if(c===c.next){return null}b=true}else{c=c.next}}while(b||c!==a);return a};PIXI.EarCut.earcutLinked=function(b,d,g,e,a,j,i){if(!b){return}if(!i&&j){PIXI.EarCut.indexCurve(b,e,a,j)}var h=b,c,f;while(b.prev!==b.next){c=b.prev;f=b.next;if(j?PIXI.EarCut.isEarHashed(b,e,a,j):PIXI.EarCut.isEar(b)){d.push(c.i/g);d.push(b.i/g);d.push(f.i/g);PIXI.EarCut.removeNode(b);b=f.next;h=f.next;continue}b=f;if(b===h){if(!i){PIXI.EarCut.earcutLinked(PIXI.EarCut.filterPoints(b),d,g,e,a,j,1)}else{if(i===1){b=PIXI.EarCut.cureLocalIntersections(b,d,g);PIXI.EarCut.earcutLinked(b,d,g,e,a,j,2)}else{if(i===2){PIXI.EarCut.splitEarcut(b,d,g,e,a,j)}}}break}}};PIXI.EarCut.isEar=function(f){var e=f.prev,d=f,h=f.next;if(PIXI.EarCut.area(e,d,h)>=0){return false}var g=f.next.next;while(g!==f.prev){if(PIXI.EarCut.pointInTriangle(e.x,e.y,d.x,d.y,h.x,h.y,g.x,g.y)&&PIXI.EarCut.area(g.prev,g,g.next)>=0){return false}g=g.next}return true};PIXI.EarCut.isEarHashed=function(i,j,h,q){var m=i.prev,l=i,k=i.next;if(PIXI.EarCut.area(m,l,k)>=0){return false}var r=m.x<l.x?(m.x<k.x?m.x:k.x):(l.x<k.x?l.x:k.x),n=m.y<l.y?(m.y<k.y?m.y:k.y):(l.y<k.y?l.y:k.y),g=m.x>l.x?(m.x>k.x?m.x:k.x):(l.x>k.x?l.x:k.x),f=m.y>l.y?(m.y>k.y?m.y:k.y):(l.y>k.y?l.y:k.y);var e=PIXI.EarCut.zOrder(r,n,j,h,q),o=PIXI.EarCut.zOrder(g,f,j,h,q);var d=i.nextZ;while(d&&d.z<=o){if(d!==i.prev&&d!==i.next&&PIXI.EarCut.pointInTriangle(m.x,m.y,l.x,l.y,k.x,k.y,d.x,d.y)&&PIXI.EarCut.area(d.prev,d,d.next)>=0){return false}d=d.nextZ}d=i.prevZ;while(d&&d.z>=e){if(d!==i.prev&&d!==i.next&&PIXI.EarCut.pointInTriangle(m.x,m.y,l.x,l.y,k.x,k.y,d.x,d.y)&&PIXI.EarCut.area(d.prev,d,d.next)>=0){return false}d=d.prevZ}return true};PIXI.EarCut.cureLocalIntersections=function(h,e,g){var f=h;do{var d=f.prev,c=f.next.next;if(PIXI.EarCut.intersects(d,f,f.next,c)&&PIXI.EarCut.locallyInside(d,c)&&PIXI.EarCut.locallyInside(c,d)){e.push(d.i/g);e.push(f.i/g);e.push(c.i/g);PIXI.EarCut.removeNode(f);PIXI.EarCut.removeNode(f.next);f=h=c}f=f.next}while(f!==h);return f};PIXI.EarCut.splitEarcut=function(d,f,h,g,e,l){var k=d;do{var j=k.next.next;while(j!==k.prev){if(k.i!==j.i&&PIXI.EarCut.isValidDiagonal(k,j)){var i=PIXI.EarCut.splitPolygon(k,j);k=PIXI.EarCut.filterPoints(k,k.next);i=PIXI.EarCut.filterPoints(i,i.next);PIXI.EarCut.earcutLinked(k,f,h,g,e,l);PIXI.EarCut.earcutLinked(i,f,h,g,e,l);return}j=j.next}k=k.next}while(k!==d)};PIXI.EarCut.eliminateHoles=function(c,k,f,e){var g=[],d,h,a,b,j;for(d=0,h=k.length;d<h;d++){a=k[d]*e;b=d<h-1?k[d+1]*e:c.length;j=PIXI.EarCut.linkedList(c,a,b,e,false);if(j===j.next){j.steiner=true}g.push(PIXI.EarCut.getLeftmost(j))}g.sort(compareX);for(d=0;d<g.length;d++){PIXI.EarCut.eliminateHole(g[d],f);f=PIXI.EarCut.filterPoints(f,f.next)}return f};PIXI.EarCut.compareX=function(d,c){return d.x-c.x};PIXI.EarCut.eliminateHole=function(d,c){c=PIXI.EarCut.findHoleBridge(d,c);if(c){var a=PIXI.EarCut.splitPolygon(c,d);PIXI.EarCut.filterPoints(a,a.next)}};PIXI.EarCut.findHoleBridge=function(a,e){var b=e,g=a.x,f=a.y,d=-Infinity,c;do{if(f<=b.y&&f>=b.next.y){var j=b.x+(f-b.y)*(b.next.x-b.x)/(b.next.y-b.y);if(j<=g&&j>d){d=j;c=b.x<b.next.x?b:b.next}}b=b.next}while(b!==e);if(!c){return null}if(a.x===c.x){return c.prev}var i=c,k=Infinity,h;b=c.next;while(b!==i){if(g>=b.x&&b.x>=c.x&&PIXI.EarCut.pointInTriangle(f<c.y?g:d,f,c.x,c.y,f<c.y?d:g,f,b.x,b.y)){h=Math.abs(f-b.y)/(g-b.x);if((h<k||(h===k&&b.x>c.x))&&PIXI.EarCut.locallyInside(b,a)){c=b;k=h}}b=b.next}return c};PIXI.EarCut.indexCurve=function(e,a,d,b){var c=e;do{if(c.z===null){c.z=PIXI.EarCut.zOrder(c.x,c.y,a,d,b)}c.prevZ=c.prev;c.nextZ=c.next;c=c.next}while(c!==e);c.prevZ.nextZ=null;c.prevZ=null;PIXI.EarCut.sortLinked(c)};PIXI.EarCut.sortLinked=function(h){var d,c,b,g,j,a,k,f,l=1;do{c=h;h=null;j=null;a=0;while(c){a++;b=c;k=0;for(d=0;d<l;d++){k++;b=b.nextZ;if(!b){break}}f=l;while(k>0||(f>0&&b)){if(k===0){g=b;b=b.nextZ;f--}else{if(f===0||!b){g=c;c=c.nextZ;k--}else{if(c.z<=b.z){g=c;c=c.nextZ;k--}else{g=b;b=b.nextZ;f--}}}if(j){j.nextZ=g}else{h=g}g.prevZ=j;j=g}c=b}j.nextZ=null;l*=2}while(a>1);return h};PIXI.EarCut.zOrder=function(b,e,a,d,c){b=32767*(b-a)/c;e=32767*(e-d)/c;b=(b|(b<<8))&16711935;b=(b|(b<<4))&252645135;b=(b|(b<<2))&858993459;b=(b|(b<<1))&1431655765;e=(e|(e<<8))&16711935;e=(e|(e<<4))&252645135;e=(e|(e<<2))&858993459;e=(e|(e<<1))&1431655765;return b|(e<<1)};PIXI.EarCut.getLeftmost=function(c){var b=c,a=c;
	do{if(b.x<a.x){a=b}b=b.next}while(b!==c);return a};PIXI.EarCut.pointInTriangle=function(e,d,g,f,a,h,c,b){return(a-c)*(d-b)-(e-c)*(h-b)>=0&&(e-c)*(f-b)-(g-c)*(d-b)>=0&&(g-c)*(h-b)-(a-c)*(f-b)>=0};PIXI.EarCut.isValidDiagonal=function(d,c){return PIXI.EarCut.equals(d,c)||d.next.i!==c.i&&d.prev.i!==c.i&&!PIXI.EarCut.intersectsPolygon(d,c)&&PIXI.EarCut.locallyInside(d,c)&&PIXI.EarCut.locallyInside(c,d)&&PIXI.EarCut.middleInside(d,c)};PIXI.EarCut.area=function(c,b,a){return(b.y-c.y)*(a.x-b.x)-(b.x-c.x)*(a.y-b.y)};PIXI.EarCut.equals=function(b,a){return b.x===a.x&&b.y===a.y};PIXI.EarCut.intersects=function(c,a,b,d){return PIXI.EarCut.area(c,a,b)>0!==PIXI.EarCut.area(c,a,d)>0&&PIXI.EarCut.area(b,d,c)>0!==PIXI.EarCut.area(b,d,a)>0};PIXI.EarCut.intersectsPolygon=function(d,c){var e=d;do{if(e.i!==d.i&&e.next.i!==d.i&&e.i!==c.i&&e.next.i!==c.i&&PIXI.EarCut.intersects(e,e.next,d,c)){return true}e=e.next}while(e!==d);return false};PIXI.EarCut.locallyInside=function(d,c){return PIXI.EarCut.area(d.prev,d,d.next)<0?PIXI.EarCut.area(d,c,d.next)>=0&&PIXI.EarCut.area(d,d.prev,c)>=0:PIXI.EarCut.area(d,c,d.prev)<0||PIXI.EarCut.area(d,d.next,c)<0};PIXI.EarCut.middleInside=function(e,d){var h=e,c=false,g=(e.x+d.x)/2,f=(e.y+d.y)/2;do{if(((h.y>f)!==(h.next.y>f))&&(g<(h.next.x-h.x)*(f-h.y)/(h.next.y-h.y)+h.x)){c=!c}h=h.next}while(h!==e);return c};PIXI.EarCut.splitPolygon=function(e,d){var c=new PIXI.EarCut.Node(e.i,e.x,e.y),f=new PIXI.EarCut.Node(d.i,d.x,d.y),h=e.next,g=d.prev;e.next=d;d.prev=e;c.next=h;h.prev=c;f.next=c;c.prev=f;g.next=f;f.prev=g;return f};PIXI.EarCut.insertNode=function(b,a,e,c){var d=new PIXI.EarCut.Node(b,a,e);if(!c){d.prev=d;d.next=d}else{d.next=c.next;d.prev=c;c.next.prev=d;c.next=d}return d};PIXI.EarCut.removeNode=function(a){a.next.prev=a.prev;a.prev.next=a.next;if(a.prevZ){a.prevZ.nextZ=a.nextZ}if(a.nextZ){a.nextZ.prevZ=a.prevZ}};PIXI.EarCut.Node=function(b,a,c){this.i=b;this.x=a;this.y=c;this.prev=null;this.next=null;this.z=null;this.prevZ=null;this.nextZ=null;this.steiner=false};PIXI.WebGLGraphics=function(){};PIXI.WebGLGraphics.stencilBufferLimit=6;PIXI.WebGLGraphics.renderGraphics=function(h,j){var c=j.gl;var f=j.projection,a=j.offset,e=j.shaderManager.primitiveShader,d;if(h.dirty){PIXI.WebGLGraphics.updateGraphics(h,c)}var g=h._webGL[c.id];for(var b=0;b<g.data.length;b++){if(g.data[b].mode===1){d=g.data[b];j.stencilManager.pushStencil(h,d,j);c.drawElements(c.TRIANGLE_FAN,4,c.UNSIGNED_SHORT,(d.indices.length-4)*2);j.stencilManager.popStencil(h,d,j)}else{d=g.data[b];j.shaderManager.setShader(e);e=j.shaderManager.primitiveShader;c.uniformMatrix3fv(e.translationMatrix,false,h.worldTransform.toArray(true));c.uniform1f(e.flipY,1);c.uniform2f(e.projectionVector,f.x,-f.y);c.uniform2f(e.offsetVector,-a.x,-a.y);c.uniform3fv(e.tintColor,PIXI.hex2rgb(h.tint));c.uniform1f(e.alpha,h.worldAlpha);c.bindBuffer(c.ARRAY_BUFFER,d.buffer);c.vertexAttribPointer(e.aVertexPosition,2,c.FLOAT,false,4*6,0);c.vertexAttribPointer(e.colorAttribute,4,c.FLOAT,false,4*6,2*4);c.bindBuffer(c.ELEMENT_ARRAY_BUFFER,d.indexBuffer);c.drawElements(c.TRIANGLE_STRIP,d.indices.length,c.UNSIGNED_SHORT,0)}}};PIXI.WebGLGraphics.updateGraphics=function(a,g){var e=a._webGL[g.id];if(!e){e=a._webGL[g.id]={lastIndex:0,data:[],gl:g}}a.dirty=false;var b;if(a.clearDirty){a.clearDirty=false;for(b=0;b<e.data.length;b++){var h=e.data[b];h.reset();PIXI.WebGLGraphics.graphicsDataPool.push(h)}e.data=[];e.lastIndex=0}var f;for(b=e.lastIndex;b<a.graphicsData.length;b++){var d=a.graphicsData[b];if(d.type===PIXI.Graphics.POLY){d.points=d.shape.points.slice();if(d.shape.closed){if(d.points[0]!==d.points[d.points.length-2]||d.points[1]!==d.points[d.points.length-1]){d.points.push(d.points[0],d.points[1])}}if(d.fill){if(d.points.length>=PIXI.WebGLGraphics.stencilBufferLimit){if(d.points.length<PIXI.WebGLGraphics.stencilBufferLimit*2){f=PIXI.WebGLGraphics.switchMode(e,0);var c=PIXI.WebGLGraphics.buildPoly(d,f);if(!c){f=PIXI.WebGLGraphics.switchMode(e,1);PIXI.WebGLGraphics.buildComplexPoly(d,f)}}else{f=PIXI.WebGLGraphics.switchMode(e,1);PIXI.WebGLGraphics.buildComplexPoly(d,f)}}}if(d.lineWidth>0){f=PIXI.WebGLGraphics.switchMode(e,0);PIXI.WebGLGraphics.buildLine(d,f)}}else{f=PIXI.WebGLGraphics.switchMode(e,0);if(d.type===PIXI.Graphics.RECT){PIXI.WebGLGraphics.buildRectangle(d,f)}else{if(d.type===PIXI.Graphics.CIRC||d.type===PIXI.Graphics.ELIP){PIXI.WebGLGraphics.buildCircle(d,f)}else{if(d.type===PIXI.Graphics.RREC){PIXI.WebGLGraphics.buildRoundedRectangle(d,f)}}}}e.lastIndex++}for(b=0;b<e.data.length;b++){f=e.data[b];if(f.dirty){f.upload()}}};PIXI.WebGLGraphics.switchMode=function(b,a){var c;if(!b.data.length){c=PIXI.WebGLGraphics.graphicsDataPool.pop()||new PIXI.WebGLGraphicsData(b.gl);c.mode=a;b.data.push(c)}else{c=b.data[b.data.length-1];if(c.mode!==a||a===1){c=PIXI.WebGLGraphics.graphicsDataPool.pop()||new PIXI.WebGLGraphicsData(b.gl);c.mode=a;b.data.push(c)}}c.dirty=true;return c};PIXI.WebGLGraphics.buildRectangle=function(s,h){var e=s.shape;var n=e.x;var m=e.y;var c=e.width;
	var q=e.height;if(s.fill){var f=PIXI.hex2rgb(s.fillColor);var d=s.fillAlpha;var a=f[0]*d;var i=f[1]*d;var l=f[2]*d;var o=h.points;var p=h.indices;var k=o.length/6;o.push(n,m);o.push(a,i,l,d);o.push(n+c,m);o.push(a,i,l,d);o.push(n,m+q);o.push(a,i,l,d);o.push(n+c,m+q);o.push(a,i,l,d);p.push(k,k,k+1,k+2,k+3,k+3)}if(s.lineWidth){var j=s.points;s.points=[n,m,n+c,m,n+c,m+q,n,m+q,n,m];PIXI.WebGLGraphics.buildLine(s,h);s.points=j}};PIXI.WebGLGraphics.buildRoundedRectangle=function(l,z){var a=l.shape;var k=a.x;var j=a.y;var p=a.width;var o=a.height;var d=a.radius;var m=[];m.push(k,j+d);m=m.concat(PIXI.WebGLGraphics.quadraticBezierCurve(k,j+o-d,k,j+o,k+d,j+o));m=m.concat(PIXI.WebGLGraphics.quadraticBezierCurve(k+p-d,j+o,k+p,j+o,k+p,j+o-d));m=m.concat(PIXI.WebGLGraphics.quadraticBezierCurve(k+p,j+d,k+p,j,k+p-d,j));m=m.concat(PIXI.WebGLGraphics.quadraticBezierCurve(k+d,j,k,j,k,j+d));if(l.fill){var s=PIXI.hex2rgb(l.fillColor);var e=l.fillAlpha;var n=s[0]*e;var u=s[1]*e;var v=s[2]*e;var w=z.points;var f=z.indices;var c=w.length/6;var q=PIXI.EarCut.Triangulate(m,null,2);var t=0;for(t=0;t<q.length;t+=3){f.push(q[t]+c);f.push(q[t]+c);f.push(q[t+1]+c);f.push(q[t+2]+c);f.push(q[t+2]+c)}for(t=0;t<m.length;t++){w.push(m[t],m[++t],n,u,v,e)}}if(l.lineWidth){var h=l.points;l.points=m;PIXI.WebGLGraphics.buildLine(l,z);l.points=h}};PIXI.WebGLGraphics.quadraticBezierCurve=function(q,l,o,g,r,m){var b,h,t,f,p,k,c=20,s=[];function a(n,j,i){var u=j-n;return n+(u*i)}var d=0;for(var e=0;e<=c;e++){d=e/c;b=a(q,o,d);h=a(l,g,d);t=a(o,r,d);f=a(g,m,d);p=a(b,t,d);k=a(h,f,d);s.push(p,k)}return s};PIXI.WebGLGraphics.buildCircle=function(j,w){var s=j.shape;var h=s.x;var f=s.y;var n;var m;if(j.type===PIXI.Graphics.CIRC){n=s.radius;m=s.radius}else{n=s.width;m=s.height}var k=40;var t=(Math.PI*2)/k;var p=0;if(j.fill){var o=PIXI.hex2rgb(j.fillColor);var c=j.fillAlpha;var l=o[0]*c;var q=o[1]*c;var u=o[2]*c;var v=w.points;var d=w.indices;var a=v.length/6;d.push(a);for(p=0;p<k+1;p++){v.push(h,f,l,q,u,c);v.push(h+Math.sin(t*p)*n,f+Math.cos(t*p)*m,l,q,u,c);d.push(a++,a++)}d.push(a-1)}if(j.lineWidth){var e=j.points;j.points=[];for(p=0;p<k+1;p++){j.points.push(h+Math.sin(t*p)*n,f+Math.cos(t*p)*m)}PIXI.WebGLGraphics.buildLine(j,w);j.points=e}};PIXI.WebGLGraphics.buildLine=function(R,B){var N=0;var E=R.points;if(E.length===0){return}if(R.lineWidth%2){for(N=0;N<E.length;N++){E[N]+=0.5}}var s=new PIXI.Point(E[0],E[1]);var k=new PIXI.Point(E[E.length-2],E[E.length-1]);if(s.x===k.x&&s.y===k.y){E=E.slice();E.pop();E.pop();k=new PIXI.Point(E[E.length-2],E[E.length-1]);var u=k.x+(s.x-k.x)*0.5;var q=k.y+(s.y-k.y)*0.5;E.unshift(u,q);E.push(u,q)}var O=B.points;var h=B.indices;var t=E.length/2;var p=E.length;var Q=O.length/6;var a=R.lineWidth/2;var D=PIXI.hex2rgb(R.lineColor);var M=R.lineAlpha;var J=D[0]*M;var P=D[1]*M;var S=D[2]*M;var o,n,G,F,y,x,f,e;var I,H,w,v,d,c;var L,C,m,K,A,l;var T,z,j;G=E[0];F=E[1];y=E[2];x=E[3];I=-(F-x);H=G-y;j=Math.sqrt(I*I+H*H);I/=j;H/=j;I*=a;H*=a;O.push(G-I,F-H,J,P,S,M);O.push(G+I,F+H,J,P,S,M);for(N=1;N<t-1;N++){G=E[(N-1)*2];F=E[(N-1)*2+1];y=E[(N)*2];x=E[(N)*2+1];f=E[(N+1)*2];e=E[(N+1)*2+1];I=-(F-x);H=G-y;j=Math.sqrt(I*I+H*H);I/=j;H/=j;I*=a;H*=a;w=-(x-e);v=y-f;j=Math.sqrt(w*w+v*v);w/=j;v/=j;w*=a;v*=a;L=(-H+F)-(-H+x);C=(-I+y)-(-I+G);m=(-I+G)*(-H+x)-(-I+y)*(-H+F);K=(-v+e)-(-v+x);A=(-w+y)-(-w+f);l=(-w+f)*(-v+x)-(-w+y)*(-v+e);T=L*A-K*C;if(Math.abs(T)<0.1){T+=10.1;O.push(y-I,x-H,J,P,S,M);O.push(y+I,x+H,J,P,S,M);continue}o=(C*l-A*m)/T;n=(K*m-L*l)/T;z=(o-y)*(o-y)+(n-x)+(n-x);if(z>140*140){d=I-w;c=H-v;j=Math.sqrt(d*d+c*c);d/=j;c/=j;d*=a;c*=a;O.push(y-d,x-c);O.push(J,P,S,M);O.push(y+d,x+c);O.push(J,P,S,M);O.push(y-d,x-c);O.push(J,P,S,M);p++}else{O.push(o,n);O.push(J,P,S,M);O.push(y-(o-y),x-(n-x));O.push(J,P,S,M)}}G=E[(t-2)*2];F=E[(t-2)*2+1];y=E[(t-1)*2];x=E[(t-1)*2+1];I=-(F-x);H=G-y;j=Math.sqrt(I*I+H*H);I/=j;H/=j;I*=a;H*=a;O.push(y-I,x-H);O.push(J,P,S,M);O.push(y+I,x+H);O.push(J,P,S,M);h.push(Q);for(N=0;N<p;N++){h.push(Q++)}h.push(Q-1)};PIXI.WebGLGraphics.buildComplexPoly=function(m,g){var k=m.points.slice();if(k.length<6){return}var l=g.indices;g.points=k;g.alpha=m.fillAlpha;g.color=PIXI.hex2rgb(m.fillColor);var e=Infinity;var b=-Infinity;var d=Infinity;var a=-Infinity;var j,h;for(var f=0;f<k.length;f+=2){j=k[f];h=k[f+1];e=j<e?j:e;b=j>b?j:b;d=h<d?h:d;a=h>a?h:a}k.push(e,d,b,d,b,a,e,a);var c=k.length/2;for(f=0;f<c;f++){l.push(f)}};PIXI.WebGLGraphics.buildPoly=function(q,j){var o=q.points;if(o.length<6){return}var n=j.points;var p=j.indices;var c=o.length/2;var f=PIXI.hex2rgb(q.fillColor);var e=q.fillAlpha;var a=f[0]*e;var k=f[1]*e;var m=f[2]*e;var d=PIXI.EarCut.Triangulate(o,null,2);if(!d){return false}var l=n.length/6;var h=0;for(h=0;h<d.length;h+=3){p.push(d[h]+l);p.push(d[h]+l);p.push(d[h+1]+l);p.push(d[h+2]+l);p.push(d[h+2]+l)}for(h=0;h<c;h++){n.push(o[h*2],o[h*2+1],a,k,m,e)}return true};PIXI.WebGLGraphics.graphicsDataPool=[];PIXI.WebGLGraphicsData=function(a){this.gl=a;this.color=[0,0,0];this.points=[];this.indices=[];this.buffer=a.createBuffer();this.indexBuffer=a.createBuffer();
	this.mode=1;this.alpha=1;this.dirty=true};PIXI.WebGLGraphicsData.prototype.reset=function(){this.points=[];this.indices=[]};PIXI.WebGLGraphicsData.prototype.upload=function(){var a=this.gl;this.glPoints=new PIXI.Float32Array(this.points);a.bindBuffer(a.ARRAY_BUFFER,this.buffer);a.bufferData(a.ARRAY_BUFFER,this.glPoints,a.STATIC_DRAW);this.glIndicies=new PIXI.Uint16Array(this.indices);a.bindBuffer(a.ELEMENT_ARRAY_BUFFER,this.indexBuffer);a.bufferData(a.ELEMENT_ARRAY_BUFFER,this.glIndicies,a.STATIC_DRAW);this.dirty=false};PIXI.CanvasGraphics=function(){};PIXI.CanvasGraphics.renderGraphics=function(E,d){var z=E.worldAlpha;if(E.dirty){this.updateGraphicsTint(E);E.dirty=false}for(var C=0;C<E.graphicsData.length;C++){var G=E.graphicsData[C];var c=G.shape;var l=G._fillTint;var b=G._lineTint;d.lineWidth=G.lineWidth;if(G.type===PIXI.Graphics.POLY){d.beginPath();var B=c.points;d.moveTo(B[0],B[1]);for(var A=1;A<B.length/2;A++){d.lineTo(B[A*2],B[A*2+1])}if(c.closed){d.lineTo(B[0],B[1])}if(B[0]===B[B.length-2]&&B[1]===B[B.length-1]){d.closePath()}if(G.fill){d.globalAlpha=G.fillAlpha*z;d.fillStyle="#"+("00000"+(l|0).toString(16)).substr(-6);d.fill()}if(G.lineWidth){d.globalAlpha=G.lineAlpha*z;d.strokeStyle="#"+("00000"+(b|0).toString(16)).substr(-6);d.stroke()}}else{if(G.type===PIXI.Graphics.RECT){if(G.fillColor||G.fillColor===0){d.globalAlpha=G.fillAlpha*z;d.fillStyle="#"+("00000"+(l|0).toString(16)).substr(-6);d.fillRect(c.x,c.y,c.width,c.height)}if(G.lineWidth){d.globalAlpha=G.lineAlpha*z;d.strokeStyle="#"+("00000"+(b|0).toString(16)).substr(-6);d.strokeRect(c.x,c.y,c.width,c.height)}}else{if(G.type===PIXI.Graphics.CIRC){d.beginPath();d.arc(c.x,c.y,c.radius,0,2*Math.PI);d.closePath();if(G.fill){d.globalAlpha=G.fillAlpha*z;d.fillStyle="#"+("00000"+(l|0).toString(16)).substr(-6);d.fill()}if(G.lineWidth){d.globalAlpha=G.lineAlpha*z;d.strokeStyle="#"+("00000"+(b|0).toString(16)).substr(-6);d.stroke()}}else{if(G.type===PIXI.Graphics.ELIP){var q=c.width*2;var D=c.height*2;var p=c.x-q/2;var o=c.y-D/2;d.beginPath();var r=0.5522848,k=(q/2)*r,f=(D/2)*r,v=p+q,a=o+D,s=p+q/2,F=o+D/2;d.moveTo(p,F);d.bezierCurveTo(p,F-f,s-k,o,s,o);d.bezierCurveTo(s+k,o,v,F-f,v,F);d.bezierCurveTo(v,F+f,s+k,a,s,a);d.bezierCurveTo(s-k,a,p,F+f,p,F);d.closePath();if(G.fill){d.globalAlpha=G.fillAlpha*z;d.fillStyle="#"+("00000"+(l|0).toString(16)).substr(-6);d.fill()}if(G.lineWidth){d.globalAlpha=G.lineAlpha*z;d.strokeStyle="#"+("00000"+(b|0).toString(16)).substr(-6);d.stroke()}}else{if(G.type===PIXI.Graphics.RREC){var m=c.x;var g=c.y;var u=c.width;var t=c.height;var e=c.radius;var n=Math.min(u,t)/2|0;e=e>n?n:e;d.beginPath();d.moveTo(m,g+e);d.lineTo(m,g+t-e);d.quadraticCurveTo(m,g+t,m+e,g+t);d.lineTo(m+u-e,g+t);d.quadraticCurveTo(m+u,g+t,m+u,g+t-e);d.lineTo(m+u,g+e);d.quadraticCurveTo(m+u,g,m+u-e,g);d.lineTo(m+e,g);d.quadraticCurveTo(m,g,m,g+e);d.closePath();if(G.fillColor||G.fillColor===0){d.globalAlpha=G.fillAlpha*z;d.fillStyle="#"+("00000"+(l|0).toString(16)).substr(-6);d.fill()}if(G.lineWidth){d.globalAlpha=G.lineAlpha*z;d.strokeStyle="#"+("00000"+(b|0).toString(16)).substr(-6);d.stroke()}}}}}}}};PIXI.CanvasGraphics.renderGraphicsMask=function(C,c){var A=C.graphicsData.length;if(A===0){return}c.beginPath();for(var z=0;z<A;z++){var E=C.graphicsData[z];var b=E.shape;if(E.type===PIXI.Graphics.POLY){var v=b.points;c.moveTo(v[0],v[1]);for(var u=1;u<v.length/2;u++){c.lineTo(v[u*2],v[u*2+1])}if(v[0]===v[v.length-2]&&v[1]===v[v.length-1]){c.closePath()}}else{if(E.type===PIXI.Graphics.RECT){c.rect(b.x,b.y,b.width,b.height);c.closePath()}else{if(E.type===PIXI.Graphics.CIRC){c.arc(b.x,b.y,b.radius,0,2*Math.PI);c.closePath()}else{if(E.type===PIXI.Graphics.ELIP){var o=b.width*2;var B=b.height*2;var n=b.x-o/2;var m=b.y-B/2;var p=0.5522848,g=(o/2)*p,e=(B/2)*p,t=n+o,a=m+B,q=n+o/2,D=m+B/2;c.moveTo(n,D);c.bezierCurveTo(n,D-e,q-g,m,q,m);c.bezierCurveTo(q+g,m,t,D-e,t,D);c.bezierCurveTo(t,D+e,q+g,a,q,a);c.bezierCurveTo(q-g,a,n,D+e,n,D);c.closePath()}else{if(E.type===PIXI.Graphics.RREC){var k=b.x;var f=b.y;var s=b.width;var r=b.height;var d=b.radius;var l=Math.min(s,r)/2|0;d=d>l?l:d;c.moveTo(k,f+d);c.lineTo(k,f+r-d);c.quadraticCurveTo(k,f+r,k+d,f+r);c.lineTo(k+s-d,f+r);c.quadraticCurveTo(k+s,f+r,k+s,f+r-d);c.lineTo(k+s,f+d);c.quadraticCurveTo(k+s,f,k+s-d,f);c.lineTo(k+d,f);c.quadraticCurveTo(k,f,k,f+d);c.closePath()}}}}}}};PIXI.CanvasGraphics.updateGraphicsTint=function(c){if(c.tint===16777215){return}var b=(c.tint>>16&255)/255;var a=(c.tint>>8&255)/255;var f=(c.tint&255)/255;for(var d=0;d<c.graphicsData.length;d++){var e=c.graphicsData[d];var h=e.fillColor|0;var g=e.lineColor|0;e._fillTint=(((h>>16&255)/255*b*255<<16)+((h>>8&255)/255*a*255<<8)+(h&255)/255*f*255);e._lineTint=(((g>>16&255)/255*b*255<<16)+((g>>8&255)/255*a*255<<8)+(g&255)/255*f*255)}};Phaser.Graphics=function(b,a,c){if(a===undefined){a=0}if(c===undefined){c=0}this.type=Phaser.GRAPHICS;this.physicsType=Phaser.SPRITE;this.anchor=new Phaser.Point();PIXI.Graphics.call(this);Phaser.Component.Core.init.call(this,b,a,c,"",null)
};Phaser.Graphics.prototype=Object.create(PIXI.Graphics.prototype);Phaser.Graphics.prototype.constructor=Phaser.Graphics;Phaser.Component.Core.install.call(Phaser.Graphics.prototype,["Angle","AutoCull","Bounds","Destroy","FixedToCamera","InputEnabled","InWorld","LifeSpan","PhysicsBody","Reset"]);Phaser.Graphics.prototype.preUpdatePhysics=Phaser.Component.PhysicsBody.preUpdate;Phaser.Graphics.prototype.preUpdateLifeSpan=Phaser.Component.LifeSpan.preUpdate;Phaser.Graphics.prototype.preUpdateInWorld=Phaser.Component.InWorld.preUpdate;Phaser.Graphics.prototype.preUpdateCore=Phaser.Component.Core.preUpdate;Phaser.Graphics.prototype.preUpdate=function(){if(!this.preUpdatePhysics()||!this.preUpdateLifeSpan()||!this.preUpdateInWorld()){return false}return this.preUpdateCore()};Phaser.Graphics.prototype.postUpdate=function(){Phaser.Component.PhysicsBody.postUpdate.call(this);Phaser.Component.FixedToCamera.postUpdate.call(this);if(this._boundsDirty){this.updateLocalBounds();this._boundsDirty=false}for(var a=0;a<this.children.length;a++){this.children[a].postUpdate()}};Phaser.Graphics.prototype.destroy=function(a){this.clear();Phaser.Component.Destroy.prototype.destroy.call(this,a)};Phaser.Graphics.prototype.drawTriangle=function(c,b){if(b===undefined){b=false}var g=new Phaser.Polygon(c);if(b){var e=new Phaser.Point(this.game.camera.x-c[0].x,this.game.camera.y-c[0].y);var d=new Phaser.Point(c[1].x-c[0].x,c[1].y-c[0].y);var a=new Phaser.Point(c[1].x-c[2].x,c[1].y-c[2].y);var f=a.cross(d);if(e.dot(f)>0){this.drawPolygon(g)}}else{this.drawPolygon(g)}};Phaser.Graphics.prototype.drawTriangles=function(c,h,a){if(a===undefined){a=false}var g=new Phaser.Point();var e=new Phaser.Point();var b=new Phaser.Point();var f=[];var d;if(!h){if(c[0] instanceof Phaser.Point){for(d=0;d<c.length/3;d++){this.drawTriangle([c[d*3],c[d*3+1],c[d*3+2]],a)}}else{for(d=0;d<c.length/6;d++){g.x=c[d*6+0];g.y=c[d*6+1];e.x=c[d*6+2];e.y=c[d*6+3];b.x=c[d*6+4];b.y=c[d*6+5];this.drawTriangle([g,e,b],a)}}}else{if(c[0] instanceof Phaser.Point){for(d=0;d<h.length/3;d++){f.push(c[h[d*3]]);f.push(c[h[d*3+1]]);f.push(c[h[d*3+2]]);if(f.length===3){this.drawTriangle(f,a);f=[]}}}else{for(d=0;d<h.length;d++){g.x=c[h[d]*2];g.y=c[h[d]*2+1];f.push(g.copyTo({}));if(f.length===3){this.drawTriangle(f,a);f=[]}}}}};Phaser.RenderTexture=function(b,f,a,d,e,c){if(d===undefined){d=""}if(e===undefined){e=Phaser.scaleModes.DEFAULT}if(c===undefined){c=1}this.game=b;this.key=d;this.type=Phaser.RENDERTEXTURE;this._tempMatrix=new PIXI.Matrix();PIXI.RenderTexture.call(this,f,a,this.game.renderer,e,c);this.render=Phaser.RenderTexture.prototype.render};Phaser.RenderTexture.prototype=Object.create(PIXI.RenderTexture.prototype);Phaser.RenderTexture.prototype.constructor=Phaser.RenderTexture;Phaser.RenderTexture.prototype.renderXY=function(c,b,d,a){c.updateTransform();this._tempMatrix.copyFrom(c.worldTransform);this._tempMatrix.tx=b;this._tempMatrix.ty=d;if(this.renderer.type===PIXI.WEBGL_RENDERER){this.renderWebGL(c,this._tempMatrix,a)}else{this.renderCanvas(c,this._tempMatrix,a)}};Phaser.RenderTexture.prototype.renderRawXY=function(c,b,d,a){this._tempMatrix.identity().translate(b,d);if(this.renderer.type===PIXI.WEBGL_RENDERER){this.renderWebGL(c,this._tempMatrix,a)}else{this.renderCanvas(c,this._tempMatrix,a)}};Phaser.RenderTexture.prototype.render=function(c,b,a){if(b===undefined||b===null){this._tempMatrix.copyFrom(c.worldTransform)}else{this._tempMatrix.copyFrom(b)}if(this.renderer.type===PIXI.WEBGL_RENDERER){this.renderWebGL(c,this._tempMatrix,a)}else{this.renderCanvas(c,this._tempMatrix,a)}};Phaser.Text=function(b,a,e,d,c){a=a||0;e=e||0;if(d===undefined||d===null){d=""}else{d=d.toString()}c=Phaser.Utils.extend({},c);this.type=Phaser.TEXT;this.physicsType=Phaser.SPRITE;this.padding=new Phaser.Point();this.textBounds=null;this.canvas=PIXI.CanvasPool.create(this);this.context=this.canvas.getContext("2d");this.colors=[];this.strokeColors=[];this.fontStyles=[];this.fontWeights=[];this.autoRound=false;this.useAdvancedWrap=false;this._res=b.renderer.resolution;this._text=d;this._fontComponents=null;this._lineSpacing=0;this._charCount=0;this._width=0;this._height=0;Phaser.Sprite.call(this,b,a,e,PIXI.Texture.fromCanvas(this.canvas));this.setStyle(c);if(d!==""){this.updateText()}};Phaser.Text.prototype=Object.create(Phaser.Sprite.prototype);Phaser.Text.prototype.constructor=Phaser.Text;Phaser.Text.prototype.preUpdate=function(){if(!this.preUpdatePhysics()||!this.preUpdateLifeSpan()||!this.preUpdateInWorld()){return false}return this.preUpdateCore()};Phaser.Text.prototype.update=function(){};Phaser.Text.prototype.destroy=function(a){this.texture.destroy(true);Phaser.Component.Destroy.prototype.destroy.call(this,a)};Phaser.Text.prototype.setShadow=function(a,f,b,c,e,d){if(a===undefined){a=0}if(f===undefined){f=0}if(b===undefined){b="rgba(0, 0, 0, 1)"}if(c===undefined){c=0}if(e===undefined){e=true}if(d===undefined){d=true}this.style.shadowOffsetX=a;this.style.shadowOffsetY=f;this.style.shadowColor=b;
	this.style.shadowBlur=c;this.style.shadowStroke=e;this.style.shadowFill=d;this.dirty=true;return this};Phaser.Text.prototype.setStyle=function(a,c){if(c===undefined){c=false}a=a||{};a.font=a.font||"bold 20pt Arial";a.backgroundColor=a.backgroundColor||null;a.fill=a.fill||"black";a.align=a.align||"left";a.boundsAlignH=a.boundsAlignH||"left";a.boundsAlignV=a.boundsAlignV||"top";a.stroke=a.stroke||"black";a.strokeThickness=a.strokeThickness||0;a.wordWrap=a.wordWrap||false;a.wordWrapWidth=a.wordWrapWidth||100;a.maxLines=a.maxLines||0;a.shadowOffsetX=a.shadowOffsetX||0;a.shadowOffsetY=a.shadowOffsetY||0;a.shadowColor=a.shadowColor||"rgba(0,0,0,0)";a.shadowBlur=a.shadowBlur||0;a.tabs=a.tabs||0;var b=this.fontToComponents(a.font);if(a.fontStyle){b.fontStyle=a.fontStyle}if(a.fontVariant){b.fontVariant=a.fontVariant}if(a.fontWeight){b.fontWeight=a.fontWeight}if(a.fontSize){if(typeof a.fontSize==="number"){a.fontSize=a.fontSize+"px"}b.fontSize=a.fontSize}this._fontComponents=b;a.font=this.componentsToFont(this._fontComponents);this.style=a;this.dirty=true;if(c){this.updateText()}return this};Phaser.Text.prototype.updateText=function(){this.texture.baseTexture.resolution=this._res;this.context.font=this.style.font;var o=this.text;if(this.style.wordWrap){o=this.runWordWrap(this.text)}var b=o.split(/(?:\r\n|\r|\n)/);var r=this.style.tabs;var u=[];var p=0;var h=this.determineFontProperties(this.style.font);var j=b.length;if(this.style.maxLines>0&&this.style.maxLines<b.length){j=this.style.maxLines}this._charCount=0;for(var q=0;q<j;q++){if(r===0){var a=this.style.strokeThickness+this.padding.x;if(this.colors.length>0||this.strokeColors.length>0||this.fontWeights.length>0||this.fontStyles.length>0){a+=this.measureLine(b[q])}else{a+=this.context.measureText(b[q]).width}if(this.style.wordWrap){a-=this.context.measureText(" ").width}}else{var l=b[q].split(/(?:\t)/);var a=this.padding.x+this.style.strokeThickness;if(Array.isArray(r)){var d=0;for(var t=0;t<l.length;t++){var k=0;if(this.colors.length>0||this.strokeColors.length>0||this.fontWeights.length>0||this.fontStyles.length>0){k=this.measureLine(l[t])}else{k=Math.ceil(this.context.measureText(l[t]).width)}if(t>0){d+=r[t-1]}a=d+k}}else{for(var t=0;t<l.length;t++){if(this.colors.length>0||this.strokeColors.length>0||this.fontWeights.length>0||this.fontStyles.length>0){a+=this.measureLine(l[t])}else{a+=Math.ceil(this.context.measureText(l[t]).width)}var m=this.game.math.snapToCeil(a,r)-a;a+=m}}}u[q]=Math.ceil(a);p=Math.max(p,u[q])}this.canvas.width=p*this._res;var e=h.fontSize+this.style.strokeThickness+this.padding.y;var n=e*j;var s=this._lineSpacing;if(s<0&&Math.abs(s)>e){s=-e}if(s!==0){n+=(s>0)?s*b.length:s*(b.length-1)}this.canvas.height=n*this._res;this.context.scale(this._res,this._res);if(navigator.isCocoonJS){this.context.clearRect(0,0,this.canvas.width,this.canvas.height)}if(this.style.backgroundColor){this.context.fillStyle=this.style.backgroundColor;this.context.fillRect(0,0,this.canvas.width,this.canvas.height)}this.context.fillStyle=this.style.fill;this.context.font=this.style.font;this.context.strokeStyle=this.style.stroke;this.context.textBaseline="alphabetic";this.context.lineWidth=this.style.strokeThickness;this.context.lineCap="round";this.context.lineJoin="round";var g;var f;this._charCount=0;for(q=0;q<j;q++){g=this.style.strokeThickness/2;f=(this.style.strokeThickness/2+q*e)+h.ascent;if(q>0){f+=(s*q)}if(this.style.align==="right"){g+=p-u[q]}else{if(this.style.align==="center"){g+=(p-u[q])/2}}if(this.autoRound){g=Math.round(g);f=Math.round(f)}if(this.colors.length>0||this.strokeColors.length>0||this.fontWeights.length>0||this.fontStyles.length>0){this.updateLine(b[q],g,f)}else{if(this.style.stroke&&this.style.strokeThickness){this.updateShadow(this.style.shadowStroke);if(r===0){this.context.strokeText(b[q],g,f)}else{this.renderTabLine(b[q],g,f,false)}}if(this.style.fill){this.updateShadow(this.style.shadowFill);if(r===0){this.context.fillText(b[q],g,f)}else{this.renderTabLine(b[q],g,f,true)}}}}this.updateTexture();this.dirty=false};Phaser.Text.prototype.renderTabLine=function(k,g,e,j){var i=k.split(/(?:\t)/);var f=this.style.tabs;var b=0;if(Array.isArray(f)){var a=0;for(var d=0;d<i.length;d++){if(d>0){a+=f[d-1]}b=g+a;if(j){this.context.fillText(i[d],b,e)}else{this.context.strokeText(i[d],b,e)}}}else{for(var d=0;d<i.length;d++){var h=Math.ceil(this.context.measureText(i[d]).width);b=this.game.math.snapToCeil(g,f);if(j){this.context.fillText(i[d],b,e)}else{this.context.strokeText(i[d],b,e)}g=b+h}}};Phaser.Text.prototype.updateShadow=function(a){if(a){this.context.shadowOffsetX=this.style.shadowOffsetX;this.context.shadowOffsetY=this.style.shadowOffsetY;this.context.shadowColor=this.style.shadowColor;this.context.shadowBlur=this.style.shadowBlur}else{this.context.shadowOffsetX=0;this.context.shadowOffsetY=0;this.context.shadowColor=0;this.context.shadowBlur=0}};Phaser.Text.prototype.measureLine=function(b){var a=0;for(var c=0;c<b.length;c++){var e=b[c];if(this.fontWeights.length>0||this.fontStyles.length>0){var d=this.fontToComponents(this.context.font);
	if(this.fontStyles[this._charCount]){d.fontStyle=this.fontStyles[this._charCount]}if(this.fontWeights[this._charCount]){d.fontWeight=this.fontWeights[this._charCount]}this.context.font=this.componentsToFont(d)}if(this.style.stroke&&this.style.strokeThickness){if(this.strokeColors[this._charCount]){this.context.strokeStyle=this.strokeColors[this._charCount]}this.updateShadow(this.style.shadowStroke)}if(this.style.fill){if(this.colors[this._charCount]){this.context.fillStyle=this.colors[this._charCount]}this.updateShadow(this.style.shadowFill)}a+=this.context.measureText(e).width;this._charCount++}return Math.ceil(a)};Phaser.Text.prototype.updateLine=function(b,a,f){for(var c=0;c<b.length;c++){var e=b[c];if(this.fontWeights.length>0||this.fontStyles.length>0){var d=this.fontToComponents(this.context.font);if(this.fontStyles[this._charCount]){d.fontStyle=this.fontStyles[this._charCount]}if(this.fontWeights[this._charCount]){d.fontWeight=this.fontWeights[this._charCount]}this.context.font=this.componentsToFont(d)}if(this.style.stroke&&this.style.strokeThickness){if(this.strokeColors[this._charCount]){this.context.strokeStyle=this.strokeColors[this._charCount]}this.updateShadow(this.style.shadowStroke);this.context.strokeText(e,a,f)}if(this.style.fill){if(this.colors[this._charCount]){this.context.fillStyle=this.colors[this._charCount]}this.updateShadow(this.style.shadowFill);this.context.fillText(e,a,f)}a+=this.context.measureText(e).width;this._charCount++}};Phaser.Text.prototype.clearColors=function(){this.colors=[];this.strokeColors=[];this.dirty=true;return this};Phaser.Text.prototype.clearFontValues=function(){this.fontStyles=[];this.fontWeights=[];this.dirty=true;return this};Phaser.Text.prototype.addColor=function(b,a){this.colors[a]=b;this.dirty=true;return this};Phaser.Text.prototype.addStrokeColor=function(b,a){this.strokeColors[a]=b;this.dirty=true;return this};Phaser.Text.prototype.addFontStyle=function(b,a){this.fontStyles[a]=b;this.dirty=true;return this};Phaser.Text.prototype.addFontWeight=function(b,a){this.fontWeights[a]=b;this.dirty=true;return this};Phaser.Text.prototype.precalculateWordWrap=function(b){this.texture.baseTexture.resolution=this._res;this.context.font=this.style.font;var a=this.runWordWrap(b);return a.split(/(?:\r\n|\r|\n)/)};Phaser.Text.prototype.runWordWrap=function(a){if(this.useAdvancedWrap){return this.advancedWordWrap(a)}else{return this.basicWordWrap(a)}};Phaser.Text.prototype.advancedWordWrap=function(m){var d=this.context;var n=this.style.wordWrapWidth;var g="";var c=m.replace(/ +/gi," ").split(/\r?\n/gi);var t=c.length;for(var r=0;r<t;r++){var h=c[r];var s="";h=h.replace(/^ *|\s*$/gi,"");var b=d.measureText(h).width;if(b<n){g+=h+"\n";continue}var p=n;var o=h.split(" ");for(var q=0;q<o.length;q++){var u=o[q];var a=u+" ";var v=d.measureText(a).width;if(v>p){if(q===0){var e=a;while(e.length){e=e.slice(0,-1);v=d.measureText(e).width;if(v<=p){break}}if(!e.length){throw new Error("This text's wordWrapWidth setting is less than a single character!")}var k=u.substr(e.length);o[q]=k;s+=e}var f=(o[q].length)?q:q+1;var l=o.slice(f).join(" ").replace(/[ \n]*$/gi,"");c[r+1]=l+" "+(c[r+1]||"");t=c.length;break}else{s+=a;p-=v}}g+=s.replace(/[ \n]*$/gi,"")+"\n"}g=g.replace(/[\s|\n]*$/gi,"");return g};Phaser.Text.prototype.basicWordWrap=function(f){var k="";var h=f.split("\n");for(var c=0;c<h.length;c++){var b=this.style.wordWrapWidth;var e=h[c].split(" ");for(var a=0;a<e.length;a++){var g=this.context.measureText(e[a]).width;var d=g+this.context.measureText(" ").width;if(d>b){if(a>0){k+="\n"}k+=e[a]+" ";b=this.style.wordWrapWidth-g}else{b-=d;k+=e[a]+" "}}if(c<h.length-1){k+="\n"}}return k};Phaser.Text.prototype.updateFont=function(b){var a=this.componentsToFont(b);if(this.style.font!==a){this.style.font=a;this.dirty=true;if(this.parent){this.updateTransform()}}};Phaser.Text.prototype.fontToComponents=function(b){var a=b.match(/^\s*(?:\b(normal|italic|oblique|inherit)?\b)\s*(?:\b(normal|small-caps|inherit)?\b)\s*(?:\b(normal|bold|bolder|lighter|100|200|300|400|500|600|700|800|900|inherit)?\b)\s*(?:\b(xx-small|x-small|small|medium|large|x-large|xx-large|larger|smaller|0|\d*(?:[.]\d*)?(?:%|[a-z]{2,5}))?\b)\s*(.*)\s*$/);if(a){var c=a[5].trim();if(!/^(?:inherit|serif|sans-serif|cursive|fantasy|monospace)$/.exec(c)&&!/['",]/.exec(c)){c="'"+c+"'"}return{font:b,fontStyle:a[1]||"normal",fontVariant:a[2]||"normal",fontWeight:a[3]||"normal",fontSize:a[4]||"medium",fontFamily:c}}else{console.warn("Phaser.Text - unparsable CSS font: "+b);return{font:b}}};Phaser.Text.prototype.componentsToFont=function(b){var c=[];var a;a=b.fontStyle;if(a&&a!=="normal"){c.push(a)}a=b.fontVariant;if(a&&a!=="normal"){c.push(a)}a=b.fontWeight;if(a&&a!=="normal"){c.push(a)}a=b.fontSize;if(a&&a!=="medium"){c.push(a)}a=b.fontFamily;if(a){c.push(a)}if(!c.length){c.push(b.font)}return c.join(" ")};Phaser.Text.prototype.setText=function(b,a){if(a===undefined){a=false}this.text=b.toString()||"";if(a){this.updateText()}else{this.dirty=true
}return this};Phaser.Text.prototype.parseList=function(c){if(!Array.isArray(c)){return this}else{var b="";for(var a=0;a<c.length;a++){if(Array.isArray(c[a])){b+=c[a].join("\t");if(a<c.length-1){b+="\n"}}else{b+=c[a];if(a<c.length-1){b+="\t"}}}}this.text=b;this.dirty=true;return this};Phaser.Text.prototype.setTextBounds=function(b,d,c,a){if(b===undefined){this.textBounds=null}else{if(!this.textBounds){this.textBounds=new Phaser.Rectangle(b,d,c,a)}else{this.textBounds.setTo(b,d,c,a)}if(this.style.wordWrapWidth>c){this.style.wordWrapWidth=c}}this.updateTexture();return this};Phaser.Text.prototype.updateTexture=function(){var e=this.texture.baseTexture;var d=this.texture.crop;var f=this.texture.frame;var b=this.canvas.width;var c=this.canvas.height;e.width=b;e.height=c;d.width=b;d.height=c;f.width=b;f.height=c;this.texture.width=b;this.texture.height=c;this._width=b;this._height=c;if(this.textBounds){var a=this.textBounds.x;var g=this.textBounds.y;if(this.style.boundsAlignH==="right"){a+=this.textBounds.width-this.canvas.width/this.resolution}else{if(this.style.boundsAlignH==="center"){a+=this.textBounds.halfWidth-(this.canvas.width/this.resolution/2)}}if(this.style.boundsAlignV==="bottom"){g+=this.textBounds.height-this.canvas.height/this.resolution}else{if(this.style.boundsAlignV==="middle"){g+=this.textBounds.halfHeight-(this.canvas.height/this.resolution/2)}}this.pivot.x=-a;this.pivot.y=-g}this.renderable=(b!==0&&c!==0);this.texture.requiresReTint=true;this.texture.baseTexture.dirty()};Phaser.Text.prototype._renderWebGL=function(a){if(this.dirty){this.updateText();this.dirty=false}PIXI.Sprite.prototype._renderWebGL.call(this,a)};Phaser.Text.prototype._renderCanvas=function(a){if(this.dirty){this.updateText();this.dirty=false}PIXI.Sprite.prototype._renderCanvas.call(this,a)};Phaser.Text.prototype.determineFontProperties=function(f){var k=Phaser.Text.fontPropertiesCache[f];if(!k){k={};var c=Phaser.Text.fontPropertiesCanvas;var b=Phaser.Text.fontPropertiesContext;b.font=f;var a=Math.ceil(b.measureText("|MÉq").width);var h=Math.ceil(b.measureText("|MÉq").width);var o=2*h;h=h*1.4|0;c.width=a;c.height=o;b.fillStyle="#f00";b.fillRect(0,0,a,o);b.font=f;b.textBaseline="alphabetic";b.fillStyle="#000";b.fillText("|MÉq",0,h);if(!b.getImageData(0,0,a,o)){k.ascent=h;k.descent=h+6;k.fontSize=k.ascent+k.descent;Phaser.Text.fontPropertiesCache[f]=k;return k}var l=b.getImageData(0,0,a,o).data;var d=l.length;var p=a*4;var g,e;var n=0;var m=false;for(g=0;g<h;g++){for(e=0;e<p;e+=4){if(l[n+e]!==255){m=true;break}}if(!m){n+=p}else{break}}k.ascent=h-g;n=d-p;m=false;for(g=o;g>h;g--){for(e=0;e<p;e+=4){if(l[n+e]!==255){m=true;break}}if(!m){n-=p}else{break}}k.descent=g-h;k.descent+=6;k.fontSize=k.ascent+k.descent;Phaser.Text.fontPropertiesCache[f]=k}return k};Phaser.Text.prototype.getBounds=function(a){if(this.dirty){this.updateText();this.dirty=false}return PIXI.Sprite.prototype.getBounds.call(this,a)};Object.defineProperty(Phaser.Text.prototype,"text",{get:function(){return this._text},set:function(a){if(a!==this._text){this._text=a.toString()||"";this.dirty=true;if(this.parent){this.updateTransform()}}}});Object.defineProperty(Phaser.Text.prototype,"cssFont",{get:function(){return this.componentsToFont(this._fontComponents)},set:function(a){a=a||"bold 20pt Arial";this._fontComponents=this.fontToComponents(a);this.updateFont(this._fontComponents)}});Object.defineProperty(Phaser.Text.prototype,"font",{get:function(){return this._fontComponents.fontFamily},set:function(a){a=a||"Arial";a=a.trim();if(!/^(?:inherit|serif|sans-serif|cursive|fantasy|monospace)$/.exec(a)&&!/['",]/.exec(a)){a="'"+a+"'"}this._fontComponents.fontFamily=a;this.updateFont(this._fontComponents)}});Object.defineProperty(Phaser.Text.prototype,"fontSize",{get:function(){var a=this._fontComponents.fontSize;if(a&&/(?:^0$|px$)/.exec(a)){return parseInt(a,10)}else{return a}},set:function(a){a=a||"0";if(typeof a==="number"){a=a+"px"}this._fontComponents.fontSize=a;this.updateFont(this._fontComponents)}});Object.defineProperty(Phaser.Text.prototype,"fontWeight",{get:function(){return this._fontComponents.fontWeight||"normal"},set:function(a){a=a||"normal";this._fontComponents.fontWeight=a;this.updateFont(this._fontComponents)}});Object.defineProperty(Phaser.Text.prototype,"fontStyle",{get:function(){return this._fontComponents.fontStyle||"normal"},set:function(a){a=a||"normal";this._fontComponents.fontStyle=a;this.updateFont(this._fontComponents)}});Object.defineProperty(Phaser.Text.prototype,"fontVariant",{get:function(){return this._fontComponents.fontVariant||"normal"},set:function(a){a=a||"normal";this._fontComponents.fontVariant=a;this.updateFont(this._fontComponents)}});Object.defineProperty(Phaser.Text.prototype,"fill",{get:function(){return this.style.fill},set:function(a){if(a!==this.style.fill){this.style.fill=a;this.dirty=true}}});Object.defineProperty(Phaser.Text.prototype,"align",{get:function(){return this.style.align},set:function(a){if(a!==this.style.align){this.style.align=a;
	this.dirty=true}}});Object.defineProperty(Phaser.Text.prototype,"resolution",{get:function(){return this._res},set:function(a){if(a!==this._res){this._res=a;this.dirty=true}}});Object.defineProperty(Phaser.Text.prototype,"tabs",{get:function(){return this.style.tabs},set:function(a){if(a!==this.style.tabs){this.style.tabs=a;this.dirty=true}}});Object.defineProperty(Phaser.Text.prototype,"boundsAlignH",{get:function(){return this.style.boundsAlignH},set:function(a){if(a!==this.style.boundsAlignH){this.style.boundsAlignH=a;this.dirty=true}}});Object.defineProperty(Phaser.Text.prototype,"boundsAlignV",{get:function(){return this.style.boundsAlignV},set:function(a){if(a!==this.style.boundsAlignV){this.style.boundsAlignV=a;this.dirty=true}}});Object.defineProperty(Phaser.Text.prototype,"stroke",{get:function(){return this.style.stroke},set:function(a){if(a!==this.style.stroke){this.style.stroke=a;this.dirty=true}}});Object.defineProperty(Phaser.Text.prototype,"strokeThickness",{get:function(){return this.style.strokeThickness},set:function(a){if(a!==this.style.strokeThickness){this.style.strokeThickness=a;this.dirty=true}}});Object.defineProperty(Phaser.Text.prototype,"wordWrap",{get:function(){return this.style.wordWrap},set:function(a){if(a!==this.style.wordWrap){this.style.wordWrap=a;this.dirty=true}}});Object.defineProperty(Phaser.Text.prototype,"wordWrapWidth",{get:function(){return this.style.wordWrapWidth},set:function(a){if(a!==this.style.wordWrapWidth){this.style.wordWrapWidth=a;this.dirty=true}}});Object.defineProperty(Phaser.Text.prototype,"lineSpacing",{get:function(){return this._lineSpacing},set:function(a){if(a!==this._lineSpacing){this._lineSpacing=parseFloat(a);this.dirty=true;if(this.parent){this.updateTransform()}}}});Object.defineProperty(Phaser.Text.prototype,"shadowOffsetX",{get:function(){return this.style.shadowOffsetX},set:function(a){if(a!==this.style.shadowOffsetX){this.style.shadowOffsetX=a;this.dirty=true}}});Object.defineProperty(Phaser.Text.prototype,"shadowOffsetY",{get:function(){return this.style.shadowOffsetY},set:function(a){if(a!==this.style.shadowOffsetY){this.style.shadowOffsetY=a;this.dirty=true}}});Object.defineProperty(Phaser.Text.prototype,"shadowColor",{get:function(){return this.style.shadowColor},set:function(a){if(a!==this.style.shadowColor){this.style.shadowColor=a;this.dirty=true}}});Object.defineProperty(Phaser.Text.prototype,"shadowBlur",{get:function(){return this.style.shadowBlur},set:function(a){if(a!==this.style.shadowBlur){this.style.shadowBlur=a;this.dirty=true}}});Object.defineProperty(Phaser.Text.prototype,"shadowStroke",{get:function(){return this.style.shadowStroke},set:function(a){if(a!==this.style.shadowStroke){this.style.shadowStroke=a;this.dirty=true}}});Object.defineProperty(Phaser.Text.prototype,"shadowFill",{get:function(){return this.style.shadowFill},set:function(a){if(a!==this.style.shadowFill){this.style.shadowFill=a;this.dirty=true}}});Object.defineProperty(Phaser.Text.prototype,"width",{get:function(){if(this.dirty){this.updateText();this.dirty=false}return this.scale.x*this.texture.frame.width},set:function(a){this.scale.x=a/this.texture.frame.width;this._width=a}});Object.defineProperty(Phaser.Text.prototype,"height",{get:function(){if(this.dirty){this.updateText();this.dirty=false}return this.scale.y*this.texture.frame.height},set:function(a){this.scale.y=a/this.texture.frame.height;this._height=a}});Phaser.Text.fontPropertiesCache={};Phaser.Text.fontPropertiesCanvas=document.createElement("canvas");Phaser.Text.fontPropertiesContext=Phaser.Text.fontPropertiesCanvas.getContext("2d");Phaser.BitmapText=function(c,a,g,b,e,d,f){a=a||0;g=g||0;b=b||"";e=e||"";d=d||32;f=f||"left";PIXI.DisplayObjectContainer.call(this);this.type=Phaser.BITMAPTEXT;this.physicsType=Phaser.SPRITE;this.textWidth=0;this.textHeight=0;this.anchor=new Phaser.Point();this._prevAnchor=new Phaser.Point();this._glyphs=[];this._maxWidth=0;this._text=e.toString()||"";this._data=c.cache.getBitmapFont(b);this._font=b;this._fontSize=d;this._align=f;this._tint=16777215;this.updateText();this.dirty=false;Phaser.Component.Core.init.call(this,c,a,g,"",null)};Phaser.BitmapText.prototype=Object.create(PIXI.DisplayObjectContainer.prototype);Phaser.BitmapText.prototype.constructor=Phaser.BitmapText;Phaser.Component.Core.install.call(Phaser.BitmapText.prototype,["Angle","AutoCull","Bounds","Destroy","FixedToCamera","InputEnabled","InWorld","LifeSpan","PhysicsBody","Reset"]);Phaser.BitmapText.prototype.preUpdatePhysics=Phaser.Component.PhysicsBody.preUpdate;Phaser.BitmapText.prototype.preUpdateLifeSpan=Phaser.Component.LifeSpan.preUpdate;Phaser.BitmapText.prototype.preUpdateInWorld=Phaser.Component.InWorld.preUpdate;Phaser.BitmapText.prototype.preUpdateCore=Phaser.Component.Core.preUpdate;Phaser.BitmapText.prototype.preUpdate=function(){if(!this.preUpdatePhysics()||!this.preUpdateLifeSpan()||!this.preUpdateInWorld()){return false}return this.preUpdateCore()};Phaser.BitmapText.prototype.postUpdate=function(){Phaser.Component.PhysicsBody.postUpdate.call(this);
	Phaser.Component.FixedToCamera.postUpdate.call(this);if(this.body&&this.body.type===Phaser.Physics.ARCADE){if((this.textWidth!==this.body.sourceWidth)||(this.textHeight!==this.body.sourceHeight)){this.body.setSize(this.textWidth,this.textHeight)}}};Phaser.BitmapText.prototype.setText=function(a){this.text=a};Phaser.BitmapText.prototype.scanLine=function(g,d,q){var m=0;var n=0;var r=-1;var a=0;var j=null;var o=(this._maxWidth>0)?this._maxWidth:null;var l=[];for(var f=0;f<q.length;f++){var e=(f===q.length-1)?true:false;if(/(?:\r\n|\r|\n)/.test(q.charAt(f))){return{width:n,text:q.substr(0,f),end:e,chars:l}}else{var p=q.charCodeAt(f);var b=g.chars[p];var k=0;if(b===undefined){p=32;b=g.chars[p]}var h=(j&&b.kerning[j])?b.kerning[j]:0;if(/(\s)/.test(q.charAt(f))){r=f;a=n}k=(h+b.texture.width+b.xOffset)*d;if(o&&((n+k)>=o)&&r>-1){return{width:a||n,text:q.substr(0,f-(f-r)),end:e,chars:l}}else{n+=(b.xAdvance+h)*d;l.push(m+(b.xOffset+h)*d);m+=(b.xAdvance+h)*d;j=p}}}return{width:n,text:q,end:e,chars:l}};Phaser.BitmapText.prototype.cleanText=function(g,a){if(a===undefined){a=""}var d=this._data.font;if(!d){return""}var h=/\r\n|\n\r|\n|\r/g;var j=g.replace(h,"\n").split("\n");for(var e=0;e<j.length;e++){var b="";var k=j[e];for(var f=0;f<k.length;f++){if(d.chars[k.charCodeAt(f)]){b=b.concat(k[f])}else{b=b.concat(a)}}j[e]=b}return j.join("\n")};Phaser.BitmapText.prototype.updateText=function(){var f=this._data.font;if(!f){return}var n=this.text;var d=this._fontSize/f.size;var q=[];var l=0;this.textWidth=0;do{var r=this.scanLine(f,d,n);r.y=l;q.push(r);if(r.width>this.textWidth){this.textWidth=r.width}l+=(f.lineHeight*d);n=n.substr(r.text.length+1)}while(r.end===false);this.textHeight=l;var o=0;var j=0;var a=this.textWidth*this.anchor.x;var p=this.textHeight*this.anchor.y;for(var e=0;e<q.length;e++){var r=q[e];if(this._align==="right"){j=this.textWidth-r.width}else{if(this._align==="center"){j=(this.textWidth-r.width)/2}}for(var k=0;k<r.text.length;k++){var m=r.text.charCodeAt(k);var b=f.chars[m];if(b===undefined){m=32;b=f.chars[m]}var h=this._glyphs[o];if(h){h.texture=b.texture}else{h=new PIXI.Sprite(b.texture);h.name=r.text[k];this._glyphs.push(h)}h.position.x=(r.chars[k]+j)-a;h.position.y=(r.y+(b.yOffset*d))-p;h.scale.set(d);h.tint=this.tint;h.texture.requiresReTint=true;if(!h.parent){this.addChild(h)}o++}}for(e=o;e<this._glyphs.length;e++){this.removeChild(this._glyphs[e])}};Phaser.BitmapText.prototype.purgeGlyphs=function(){var a=this._glyphs.length;var c=[];for(var b=0;b<this._glyphs.length;b++){if(this._glyphs[b].parent!==this){this._glyphs[b].destroy()}else{c.push(this._glyphs[b])}}this._glyphs=[];this._glyphs=c;this.updateText();return a-c.length};Phaser.BitmapText.prototype.updateTransform=function(){if(this.dirty||!this.anchor.equals(this._prevAnchor)){this.updateText();this.dirty=false;this._prevAnchor.copyFrom(this.anchor)}PIXI.DisplayObjectContainer.prototype.updateTransform.call(this)};Object.defineProperty(Phaser.BitmapText.prototype,"align",{get:function(){return this._align},set:function(a){if(a!==this._align&&(a==="left"||a==="center"||a==="right")){this._align=a;this.updateText()}}});Object.defineProperty(Phaser.BitmapText.prototype,"tint",{get:function(){return this._tint},set:function(a){if(a!==this._tint){this._tint=a;this.updateText()}}});Object.defineProperty(Phaser.BitmapText.prototype,"font",{get:function(){return this._font},set:function(a){if(a!==this._font){this._font=a.trim();this._data=this.game.cache.getBitmapFont(this._font);this.updateText()}}});Object.defineProperty(Phaser.BitmapText.prototype,"fontSize",{get:function(){return this._fontSize},set:function(a){a=parseInt(a,10);if(a!==this._fontSize&&a>0){this._fontSize=a;this.updateText()}}});Object.defineProperty(Phaser.BitmapText.prototype,"text",{get:function(){return this._text},set:function(a){if(a!==this._text){this._text=a.toString()||"";this.updateText()}}});Object.defineProperty(Phaser.BitmapText.prototype,"maxWidth",{get:function(){return this._maxWidth},set:function(a){if(a!==this._maxWidth){this._maxWidth=a;this.updateText()}}});Object.defineProperty(Phaser.BitmapText.prototype,"smoothed",{get:function(){return !this._data.base.scaleMode},set:function(a){if(a){this._data.base.scaleMode=0}else{this._data.base.scaleMode=1}}});Phaser.RetroFont=function(p,o,b,h,l,n,m,j,i,g){if(!p.cache.checkImageKey(o)){return false}if(n===undefined||n===null){n=p.cache.getImage(o).width/b}this.characterWidth=b;this.characterHeight=h;this.characterSpacingX=m||0;this.characterSpacingY=j||0;this.characterPerRow=n;this.offsetX=i||0;this.offsetY=g||0;this.align="left";this.multiLine=false;this.autoUpperCase=true;this.customSpacingX=0;this.customSpacingY=0;this.fixedWidth=0;this.fontSet=p.cache.getImage(o);this._text="";this.grabData=[];this.frameData=new Phaser.FrameData();var f=this.offsetX;var e=this.offsetY;var a=0;for(var k=0;k<l.length;k++){var d=this.frameData.addFrame(new Phaser.Frame(k,f,e,this.characterWidth,this.characterHeight));this.grabData[l.charCodeAt(k)]=d.index;
	a++;if(a===this.characterPerRow){a=0;f=this.offsetX;e+=this.characterHeight+this.characterSpacingY}else{f+=this.characterWidth+this.characterSpacingX}}p.cache.updateFrameData(o,this.frameData);this.stamp=new Phaser.Image(p,0,0,o,0);Phaser.RenderTexture.call(this,p,100,100,"",Phaser.scaleModes.NEAREST);this.type=Phaser.RETROFONT};Phaser.RetroFont.prototype=Object.create(Phaser.RenderTexture.prototype);Phaser.RetroFont.prototype.constructor=Phaser.RetroFont;Phaser.RetroFont.ALIGN_LEFT="left";Phaser.RetroFont.ALIGN_RIGHT="right";Phaser.RetroFont.ALIGN_CENTER="center";Phaser.RetroFont.TEXT_SET1=" !\"#$%&'()*+,-./0123456789:;<=>?@ABCDEFGHIJKLMNOPQRSTUVWXYZ[\\]^_`abcdefghijklmnopqrstuvwxyz{|}~";Phaser.RetroFont.TEXT_SET2=" !\"#$%&'()*+,-./0123456789:;<=>?@ABCDEFGHIJKLMNOPQRSTUVWXYZ";Phaser.RetroFont.TEXT_SET3="ABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789 ";Phaser.RetroFont.TEXT_SET4="ABCDEFGHIJKLMNOPQRSTUVWXYZ 0123456789";Phaser.RetroFont.TEXT_SET5="ABCDEFGHIJKLMNOPQRSTUVWXYZ.,/() '!?-*:0123456789";Phaser.RetroFont.TEXT_SET6="ABCDEFGHIJKLMNOPQRSTUVWXYZ!?:;0123456789\"(),-.' ";Phaser.RetroFont.TEXT_SET7="AGMSY+:4BHNTZ!;5CIOU.?06DJPV,(17EKQW\")28FLRX-'39";Phaser.RetroFont.TEXT_SET8="0123456789 .ABCDEFGHIJKLMNOPQRSTUVWXYZ";Phaser.RetroFont.TEXT_SET9="ABCDEFGHIJKLMNOPQRSTUVWXYZ()-0123456789.:,'\"?!";Phaser.RetroFont.TEXT_SET10="ABCDEFGHIJKLMNOPQRSTUVWXYZ";Phaser.RetroFont.TEXT_SET11="ABCDEFGHIJKLMNOPQRSTUVWXYZ.,\"-+!?()':;0123456789";Phaser.RetroFont.prototype.setFixedWidth=function(b,a){if(a===undefined){a="left"}this.fixedWidth=b;this.align=a};Phaser.RetroFont.prototype.setText=function(d,e,c,f,b,a){this.multiLine=e||false;this.customSpacingX=c||0;this.customSpacingY=f||0;this.align=b||"left";if(a){this.autoUpperCase=false}else{this.autoUpperCase=true}if(d.length>0){this.text=d}};Phaser.RetroFont.prototype.buildRetroFontText=function(){var a=0;var d=0;this.clear();if(this.multiLine){var b=this._text.split("\n");if(this.fixedWidth>0){this.resize(this.fixedWidth,(b.length*(this.characterHeight+this.customSpacingY))-this.customSpacingY,true)}else{this.resize(this.getLongestLine()*(this.characterWidth+this.customSpacingX),(b.length*(this.characterHeight+this.customSpacingY))-this.customSpacingY,true)}for(var c=0;c<b.length;c++){a=0;if(this.align===Phaser.RetroFont.ALIGN_RIGHT){a=this.width-(b[c].length*(this.characterWidth+this.customSpacingX))}else{if(this.align===Phaser.RetroFont.ALIGN_CENTER){a=(this.width/2)-((b[c].length*(this.characterWidth+this.customSpacingX))/2);a+=this.customSpacingX/2}}if(a<0){a=0}this.pasteLine(b[c],a,d,this.customSpacingX);d+=this.characterHeight+this.customSpacingY}}else{if(this.fixedWidth>0){this.resize(this.fixedWidth,this.characterHeight,true)}else{this.resize(this._text.length*(this.characterWidth+this.customSpacingX),this.characterHeight,true)}a=0;if(this.align===Phaser.RetroFont.ALIGN_RIGHT){a=this.width-(this._text.length*(this.characterWidth+this.customSpacingX))}else{if(this.align===Phaser.RetroFont.ALIGN_CENTER){a=(this.width/2)-((this._text.length*(this.characterWidth+this.customSpacingX))/2);a+=this.customSpacingX/2}}if(a<0){a=0}this.pasteLine(this._text,a,0,this.customSpacingX)}this.requiresReTint=true};Phaser.RetroFont.prototype.pasteLine=function(b,a,f,d){for(var e=0;e<b.length;e++){if(b.charAt(e)===" "){a+=this.characterWidth+d}else{if(this.grabData[b.charCodeAt(e)]>=0){this.stamp.frame=this.grabData[b.charCodeAt(e)];this.renderXY(this.stamp,a,f,false);a+=this.characterWidth+d;if(a>this.width){break}}}}};Phaser.RetroFont.prototype.getLongestLine=function(){var b=0;if(this._text.length>0){var a=this._text.split("\n");for(var c=0;c<a.length;c++){if(a[c].length>b){b=a[c].length}}}return b};Phaser.RetroFont.prototype.removeUnsupportedCharacters=function(e){var b="";for(var f=0;f<this._text.length;f++){var a=this._text[f];var d=a.charCodeAt(0);if(this.grabData[d]>=0||(!e&&a==="\n")){b=b.concat(a)}}return b};Phaser.RetroFont.prototype.updateOffset=function(a,f){if(this.offsetX===a&&this.offsetY===f){return}var c=a-this.offsetX;var b=f-this.offsetY;var e=this.game.cache.getFrameData(this.stamp.key).getFrames();var d=e.length;while(d--){e[d].x+=c;e[d].y+=b}this.buildRetroFontText()};Object.defineProperty(Phaser.RetroFont.prototype,"text",{get:function(){return this._text},set:function(b){var a;if(this.autoUpperCase){a=b.toUpperCase()}else{a=b}if(a!==this._text){this._text=a;this.removeUnsupportedCharacters(this.multiLine);this.buildRetroFontText()}}});Object.defineProperty(Phaser.RetroFont.prototype,"smoothed",{get:function(){return this.stamp.smoothed},set:function(a){this.stamp.smoothed=a;this.buildRetroFontText()}});Phaser.Rope=function(b,a,f,c,e,d){this.points=[];this.points=d;this._hasUpdateAnimation=false;this._updateAnimationCallback=null;a=a||0;f=f||0;c=c||null;e=e||null;this.type=Phaser.ROPE;PIXI.Rope.call(this,Phaser.Cache.DEFAULT,this.points);Phaser.Component.Core.init.call(this,b,a,f,c,e)};Phaser.Rope.prototype=Object.create(PIXI.Rope.prototype);Phaser.Rope.prototype.constructor=Phaser.Rope;
Phaser.Component.Core.install.call(Phaser.Rope.prototype,["Angle","Animation","AutoCull","Bounds","BringToTop","Crop","Delta","Destroy","FixedToCamera","InWorld","LifeSpan","LoadTexture","Overlap","PhysicsBody","Reset","ScaleMinMax","Smoothed"]);Phaser.Rope.prototype.preUpdatePhysics=Phaser.Component.PhysicsBody.preUpdate;Phaser.Rope.prototype.preUpdateLifeSpan=Phaser.Component.LifeSpan.preUpdate;Phaser.Rope.prototype.preUpdateInWorld=Phaser.Component.InWorld.preUpdate;Phaser.Rope.prototype.preUpdateCore=Phaser.Component.Core.preUpdate;Phaser.Rope.prototype.preUpdate=function(){if(!this.preUpdatePhysics()||!this.preUpdateLifeSpan()||!this.preUpdateInWorld()){return false}return this.preUpdateCore()};Phaser.Rope.prototype.update=function(){if(this._hasUpdateAnimation){this.updateAnimation.call(this)}};Phaser.Rope.prototype.reset=function(a,b){Phaser.Component.Reset.prototype.reset.call(this,a,b);return this};Object.defineProperty(Phaser.Rope.prototype,"updateAnimation",{get:function(){return this._updateAnimation},set:function(a){if(a&&typeof a==="function"){this._hasUpdateAnimation=true;this._updateAnimation=a}else{this._hasUpdateAnimation=false;this._updateAnimation=null}}});Object.defineProperty(Phaser.Rope.prototype,"segments",{get:function(){var e=[];var f,c,j,a,h,b,k,g;for(var d=0;d<this.points.length;d++){f=d*4;c=this.vertices[f]*this.scale.x;j=this.vertices[f+1]*this.scale.y;a=this.vertices[f+4]*this.scale.x;h=this.vertices[f+3]*this.scale.y;b=Phaser.Math.difference(c,a);k=Phaser.Math.difference(j,h);c+=this.world.x;j+=this.world.y;g=new Phaser.Rectangle(c,j,b,k);e.push(g)}return e}});Phaser.TileSprite=function(c,b,h,e,a,d,g){b=b||0;h=h||0;e=e||256;a=a||256;d=d||null;g=g||null;this.type=Phaser.TILESPRITE;this.physicsType=Phaser.SPRITE;this._scroll=new Phaser.Point();var f=c.cache.getImage("__default",true);PIXI.TilingSprite.call(this,new PIXI.Texture(f.base),e,a);Phaser.Component.Core.init.call(this,c,b,h,d,g)};Phaser.TileSprite.prototype=Object.create(PIXI.TilingSprite.prototype);Phaser.TileSprite.prototype.constructor=Phaser.TileSprite;Phaser.Component.Core.install.call(Phaser.TileSprite.prototype,["Angle","Animation","AutoCull","Bounds","BringToTop","Destroy","FixedToCamera","Health","InCamera","InputEnabled","InWorld","LifeSpan","LoadTexture","Overlap","PhysicsBody","Reset","Smoothed"]);Phaser.TileSprite.prototype.preUpdatePhysics=Phaser.Component.PhysicsBody.preUpdate;Phaser.TileSprite.prototype.preUpdateLifeSpan=Phaser.Component.LifeSpan.preUpdate;Phaser.TileSprite.prototype.preUpdateInWorld=Phaser.Component.InWorld.preUpdate;Phaser.TileSprite.prototype.preUpdateCore=Phaser.Component.Core.preUpdate;Phaser.TileSprite.prototype.preUpdate=function(){if(this._scroll.x!==0){this.tilePosition.x+=this._scroll.x*this.game.time.physicsElapsed}if(this._scroll.y!==0){this.tilePosition.y+=this._scroll.y*this.game.time.physicsElapsed}if(!this.preUpdatePhysics()||!this.preUpdateLifeSpan()||!this.preUpdateInWorld()){return false}return this.preUpdateCore()};Phaser.TileSprite.prototype.autoScroll=function(a,b){this._scroll.set(a,b)};Phaser.TileSprite.prototype.stopScroll=function(){this._scroll.set(0,0)};Phaser.TileSprite.prototype.destroy=function(a){Phaser.Component.Destroy.prototype.destroy.call(this,a);PIXI.TilingSprite.prototype.destroy.call(this)};Phaser.TileSprite.prototype.reset=function(a,b){Phaser.Component.Reset.prototype.reset.call(this,a,b);this.tilePosition.x=0;this.tilePosition.y=0;return this};Phaser.Device=function(){this.deviceReadyAt=0;this.initialized=false;this.desktop=false;this.iOS=false;this.iOSVersion=0;this.cocoonJS=false;this.cocoonJSApp=false;this.cordova=false;this.node=false;this.nodeWebkit=false;this.electron=false;this.ejecta=false;this.crosswalk=false;this.android=false;this.chromeOS=false;this.linux=false;this.macOS=false;this.windows=false;this.windowsPhone=false;this.canvas=false;this.canvasBitBltShift=null;this.webGL=false;this.file=false;this.fileSystem=false;this.localStorage=false;this.worker=false;this.css3D=false;this.pointerLock=false;this.typedArray=false;this.vibration=false;this.getUserMedia=true;this.quirksMode=false;this.touch=false;this.mspointer=false;this.wheelEvent=null;this.arora=false;this.chrome=false;this.chromeVersion=0;this.epiphany=false;this.firefox=false;this.firefoxVersion=0;this.ie=false;this.ieVersion=0;this.trident=false;this.tridentVersion=0;this.edge=false;this.mobileSafari=false;this.midori=false;this.opera=false;this.safari=false;this.safariVersion=0;this.webApp=false;this.silk=false;this.audioData=false;this.webAudio=false;this.ogg=false;this.opus=false;this.mp3=false;this.wav=false;this.m4a=false;this.webm=false;this.dolby=false;this.oggVideo=false;this.h264Video=false;this.mp4Video=false;this.webmVideo=false;this.vp9Video=false;this.hlsVideo=false;this.iPhone=false;this.iPhone4=false;this.iPad=false;this.pixelRatio=0;this.littleEndian=false;this.LITTLE_ENDIAN=false;this.support32bit=false;this.fullscreen=false;this.requestFullscreen="";this.cancelFullscreen="";
	this.fullscreenKeyboard=false};Phaser.Device=new Phaser.Device();Phaser.Device.onInitialized=new Phaser.Signal();Phaser.Device.whenReady=function(f,c,b){var d=this._readyCheck;if(this.deviceReadyAt||!d){f.call(c,this)}else{if(d._monitor||b){d._queue=d._queue||[];d._queue.push([f,c])}else{d._monitor=d.bind(this);d._queue=d._queue||[];d._queue.push([f,c]);var e=typeof window.cordova!=="undefined";var a=navigator["isCocoonJS"];if(document.readyState==="complete"||document.readyState==="interactive"){window.setTimeout(d._monitor,0)}else{if(e&&!a){document.addEventListener("deviceready",d._monitor,false)}else{document.addEventListener("DOMContentLoaded",d._monitor,false);window.addEventListener("load",d._monitor,false)}}}}};Phaser.Device._readyCheck=function(){var b=this._readyCheck;if(!document.body){window.setTimeout(b._monitor,20)}else{if(!this.deviceReadyAt){this.deviceReadyAt=Date.now();document.removeEventListener("deviceready",b._monitor);document.removeEventListener("DOMContentLoaded",b._monitor);window.removeEventListener("load",b._monitor);this._initialize();this.initialized=true;this.onInitialized.dispatch(this);var c;while((c=b._queue.shift())){var d=c[0];var a=c[1];d.call(a,this)}this._readyCheck=null;this._initialize=null;this.onInitialized=null}}};Phaser.Device._initialize=function(){var d=this;function c(){var n=navigator.userAgent;if(/Playstation Vita/.test(n)){d.vita=true}else{if(/Kindle/.test(n)||/\bKF[A-Z][A-Z]+/.test(n)||/Silk.*Mobile Safari/.test(n)){d.kindle=true}else{if(/Android/.test(n)){d.android=true}else{if(/CrOS/.test(n)){d.chromeOS=true}else{if(/iP[ao]d|iPhone/i.test(n)){d.iOS=true;(navigator.appVersion).match(/OS (\d+)/);d.iOSVersion=parseInt(RegExp.$1,10)}else{if(/Linux/.test(n)){d.linux=true}else{if(/Mac OS/.test(n)){d.macOS=true}else{if(/Windows/.test(n)){d.windows=true}}}}}}}}if(/Windows Phone/i.test(n)||/IEMobile/i.test(n)){d.android=false;d.iOS=false;d.macOS=false;d.windows=true;d.windowsPhone=true}var m=/Silk/.test(n);if(d.windows||d.macOS||(d.linux&&!m)||d.chromeOS){d.desktop=true}if(d.windowsPhone||((/Windows NT/i.test(n))&&(/Touch/i.test(n)))){d.desktop=false}}function l(){d.canvas=!!window["CanvasRenderingContext2D"]||d.cocoonJS;try{d.localStorage=!!localStorage.getItem}catch(m){d.localStorage=false}d.file=!!window["File"]&&!!window["FileReader"]&&!!window["FileList"]&&!!window["Blob"];d.fileSystem=!!window["requestFileSystem"];d.webGL=(function(){try{var n=document.createElement("canvas");n.screencanvas=false;return !!window.WebGLRenderingContext&&(n.getContext("webgl")||n.getContext("experimental-webgl"))}catch(o){return false}})();d.webGL=!!d.webGL;d.worker=!!window["Worker"];d.pointerLock="pointerLockElement" in document||"mozPointerLockElement" in document||"webkitPointerLockElement" in document;d.quirksMode=(document.compatMode==="CSS1Compat")?false:true;navigator.getUserMedia=navigator.getUserMedia||navigator.webkitGetUserMedia||navigator.mozGetUserMedia||navigator.msGetUserMedia||navigator.oGetUserMedia;window.URL=window.URL||window.webkitURL||window.mozURL||window.msURL;d.getUserMedia=d.getUserMedia&&!!navigator.getUserMedia&&!!window.URL;if(d.firefox&&d.firefoxVersion<21){d.getUserMedia=false}if(!d.iOS&&(d.ie||d.firefox||d.chrome)){d.canvasBitBltShift=true}if(d.safari||d.mobileSafari){d.canvasBitBltShift=false}}function k(){if("ontouchstart" in document.documentElement||(window.navigator.maxTouchPoints&&window.navigator.maxTouchPoints>=1)){d.touch=true}if(window.navigator.msPointerEnabled||window.navigator.pointerEnabled){d.mspointer=true}if(!d.cocoonJS){if("onwheel" in window||(d.ie&&"WheelEvent" in window)){d.wheelEvent="wheel"}else{if("onmousewheel" in window){d.wheelEvent="mousewheel"}else{if(d.firefox&&"MouseScrollEvent" in window){d.wheelEvent="DOMMouseScroll"}}}}}function i(){var n=["requestFullscreen","requestFullScreen","webkitRequestFullscreen","webkitRequestFullScreen","msRequestFullscreen","msRequestFullScreen","mozRequestFullScreen","mozRequestFullscreen"];var p=document.createElement("div");for(var o=0;o<n.length;o++){if(p[n[o]]){d.fullscreen=true;d.requestFullscreen=n[o];break}}var m=["cancelFullScreen","exitFullscreen","webkitCancelFullScreen","webkitExitFullscreen","msCancelFullScreen","msExitFullscreen","mozCancelFullScreen","mozExitFullscreen"];if(d.fullscreen){for(var o=0;o<m.length;o++){if(document[m[o]]){d.cancelFullscreen=m[o];break}}}if(window["Element"]&&Element["ALLOW_KEYBOARD_INPUT"]){d.fullscreenKeyboard=true}}function j(){var n=navigator.userAgent;if(/Arora/.test(n)){d.arora=true}else{if(/Edge\/\d+/.test(n)){d.edge=true}else{if(/Chrome\/(\d+)/.test(n)&&!d.windowsPhone){d.chrome=true;d.chromeVersion=parseInt(RegExp.$1,10)}else{if(/Epiphany/.test(n)){d.epiphany=true}else{if(/Firefox\D+(\d+)/.test(n)){d.firefox=true;d.firefoxVersion=parseInt(RegExp.$1,10)}else{if(/AppleWebKit/.test(n)&&d.iOS){d.mobileSafari=true}else{if(/MSIE (\d+\.\d+);/.test(n)){d.ie=true;d.ieVersion=parseInt(RegExp.$1,10)}else{if(/Midori/.test(n)){d.midori=true}else{if(/Opera/.test(n)){d.opera=true
}else{if(/Safari\/(\d+)/.test(n)&&!d.windowsPhone){d.safari=true;if(/Version\/(\d+)\./.test(n)){d.safariVersion=parseInt(RegExp.$1,10)}}else{if(/Trident\/(\d+\.\d+)(.*)rv:(\d+\.\d+)/.test(n)){d.ie=true;d.trident=true;d.tridentVersion=parseInt(RegExp.$1,10);d.ieVersion=parseInt(RegExp.$3,10)}}}}}}}}}}}if(/Silk/.test(n)){d.silk=true}if(navigator["standalone"]){d.webApp=true}if(typeof window.cordova!=="undefined"){d.cordova=true}if(typeof process!=="undefined"&&typeof require!=="undefined"){d.node=true}if(d.node&&typeof process.versions==="object"){d.nodeWebkit=!!process.versions["node-webkit"];d.electron=!!process.versions.electron}if(navigator["isCocoonJS"]){d.cocoonJS=true}if(d.cocoonJS){try{d.cocoonJSApp=(typeof CocoonJS!=="undefined")}catch(m){d.cocoonJSApp=false}}if(typeof window.ejecta!=="undefined"){d.ejecta=true}if(/Crosswalk/.test(n)){d.crosswalk=true}}function e(){var n=document.createElement("video");var m=false;try{if(m=!!n.canPlayType){if(n.canPlayType('video/ogg; codecs="theora"').replace(/^no$/,"")){d.oggVideo=true}if(n.canPlayType('video/mp4; codecs="avc1.42E01E"').replace(/^no$/,"")){d.h264Video=true;d.mp4Video=true}if(n.canPlayType('video/webm; codecs="vp8, vorbis"').replace(/^no$/,"")){d.webmVideo=true}if(n.canPlayType('video/webm; codecs="vp9"').replace(/^no$/,"")){d.vp9Video=true}if(n.canPlayType('application/x-mpegURL; codecs="avc1.42E01E"').replace(/^no$/,"")){d.hlsVideo=true}}}catch(o){}}function h(){d.audioData=!!(window["Audio"]);d.webAudio=!!(window["AudioContext"]||window["webkitAudioContext"]);var q=document.createElement("audio");var m=false;try{if(m=!!q.canPlayType){if(q.canPlayType('audio/ogg; codecs="vorbis"').replace(/^no$/,"")){d.ogg=true}if(q.canPlayType('audio/ogg; codecs="opus"').replace(/^no$/,"")||q.canPlayType("audio/opus;").replace(/^no$/,"")){d.opus=true}if(q.canPlayType("audio/mpeg;").replace(/^no$/,"")){d.mp3=true}if(q.canPlayType('audio/wav; codecs="1"').replace(/^no$/,"")){d.wav=true}if(q.canPlayType("audio/x-m4a;")||q.canPlayType("audio/aac;").replace(/^no$/,"")){d.m4a=true}if(q.canPlayType('audio/webm; codecs="vorbis"').replace(/^no$/,"")){d.webm=true}if(q.canPlayType('audio/mp4;codecs="ec-3"')!==""){if(d.edge){d.dolby=true}else{if(d.safari&&d.safariVersion>=9){if(/Mac OS X (\d+)_(\d+)/.test(navigator.userAgent)){var n=parseInt(RegExp.$1,10);var o=parseInt(RegExp.$2,10);if((n===10&&o>=11)||n>10){d.dolby=true}}}}}}}catch(p){}}function g(){var n=new ArrayBuffer(4);var m=new Uint8Array(n);var o=new Uint32Array(n);m[0]=161;m[1]=178;m[2]=195;m[3]=212;if(o[0]===3569595041){return true}if(o[0]===2712847316){return false}else{return null}}function f(){if(Uint8ClampedArray===undefined){return false}var n=PIXI.CanvasPool.create(this,1,1);var m=n.getContext("2d");if(!m){return false}var o=m.createImageData(1,1);PIXI.CanvasPool.remove(this);return o.data instanceof Uint8ClampedArray}function a(){d.pixelRatio=window["devicePixelRatio"]||1;d.iPhone=navigator.userAgent.toLowerCase().indexOf("iphone")!==-1;d.iPhone4=(d.pixelRatio===2&&d.iPhone);d.iPad=navigator.userAgent.toLowerCase().indexOf("ipad")!==-1;if(typeof Int8Array!=="undefined"){d.typedArray=true}else{d.typedArray=false}if(typeof ArrayBuffer!=="undefined"&&typeof Uint8Array!=="undefined"&&typeof Uint32Array!=="undefined"){d.littleEndian=g();d.LITTLE_ENDIAN=d.littleEndian}d.support32bit=(typeof ArrayBuffer!=="undefined"&&typeof Uint8ClampedArray!=="undefined"&&typeof Int32Array!=="undefined"&&d.littleEndian!==null&&f());navigator.vibrate=navigator.vibrate||navigator.webkitVibrate||navigator.mozVibrate||navigator.msVibrate;if(navigator.vibrate){d.vibration=true}}function b(){var o=document.createElement("p");var p;var n={"webkitTransform":"-webkit-transform","OTransform":"-o-transform","msTransform":"-ms-transform","MozTransform":"-moz-transform","transform":"transform"};document.body.insertBefore(o,null);for(var m in n){if(o.style[m]!==undefined){o.style[m]="translate3d(1px,1px,1px)";p=window.getComputedStyle(o).getPropertyValue(n[m])}}document.body.removeChild(o);d.css3D=(p!==undefined&&p.length>0&&p!=="none")}c();j();h();e();b();a();l();i();k()};Phaser.Device.canPlayAudio=function(a){if(a==="mp3"&&this.mp3){return true}else{if(a==="ogg"&&(this.ogg||this.opus)){return true}else{if(a==="m4a"&&this.m4a){return true}else{if(a==="opus"&&this.opus){return true}else{if(a==="wav"&&this.wav){return true}else{if(a==="webm"&&this.webm){return true}else{if(a==="mp4"&&this.dolby){return true}}}}}}}return false};Phaser.Device.canPlayVideo=function(a){if(a==="webm"&&(this.webmVideo||this.vp9Video)){return true}else{if(a==="mp4"&&(this.mp4Video||this.h264Video)){return true}else{if((a==="ogg"||a==="ogv")&&this.oggVideo){return true}else{if(a==="mpeg"&&this.hlsVideo){return true}}}}return false};Phaser.Device.isConsoleOpen=function(){if(window.console&&window.console["firebug"]){return true}if(window.console){console.profile();console.profileEnd();if(console.clear){console.clear()}if(console["profiles"]){return console["profiles"].length>0
}}return false};Phaser.Device.isAndroidStockBrowser=function(){var a=window.navigator.userAgent.match(/Android.*AppleWebKit\/([\d.]+)/);return a&&a[1]<537};Phaser.Canvas={create:function(e,d,a,f,c){d=d||256;a=a||256;var b=(c)?document.createElement("canvas"):PIXI.CanvasPool.create(e,d,a);if(typeof f==="string"&&f!==""){b.id=f}b.width=d;b.height=a;b.style.display="block";return b},setBackgroundColor:function(b,a){a=a||"rgb(0,0,0)";b.style.backgroundColor=a;return b},setTouchAction:function(a,b){b=b||"none";a.style.msTouchAction=b;a.style["ms-touch-action"]=b;a.style["touch-action"]=b;return a},setUserSelect:function(a,b){b=b||"none";a.style["-webkit-touch-callout"]=b;a.style["-webkit-user-select"]=b;a.style["-khtml-user-select"]=b;a.style["-moz-user-select"]=b;a.style["-ms-user-select"]=b;a.style["user-select"]=b;a.style["-webkit-tap-highlight-color"]="rgba(0, 0, 0, 0)";return a},addToDOM:function(a,b,d){var c;if(d===undefined){d=true}if(b){if(typeof b==="string"){c=document.getElementById(b)}else{if(typeof b==="object"&&b.nodeType===1){c=b}}}if(!c){c=document.body}if(d&&c.style){c.style.overflow="hidden"}c.appendChild(a);return a},removeFromDOM:function(a){if(a.parentNode){a.parentNode.removeChild(a)}},setTransform:function(e,g,f,c,a,d,b){e.setTransform(c,d,b,a,g,f);return e},setSmoothingEnabled:function(a,c){var b=Phaser.Canvas.getSmoothingPrefix(a);if(b){a[b]=c}return a},getSmoothingPrefix:function(a){var d=["i","webkitI","msI","mozI","oI"];for(var c in d){var b=d[c]+"mageSmoothingEnabled";if(b in a){return b}}return null},getSmoothingEnabled:function(a){var b=Phaser.Canvas.getSmoothingPrefix(a);if(b){return a[b]}},setImageRenderingCrisp:function(a){var c=["optimizeSpeed","crisp-edges","-moz-crisp-edges","-webkit-optimize-contrast","optimize-contrast","pixelated"];for(var b=0;b<c.length;b++){a.style["image-rendering"]=c[b]}a.style.msInterpolationMode="nearest-neighbor";return a},setImageRenderingBicubic:function(a){a.style["image-rendering"]="auto";a.style.msInterpolationMode="bicubic";return a}};Phaser.RequestAnimationFrame=function(b,c){if(c===undefined){c=false}this.game=b;this.isRunning=false;this.forceSetTimeOut=c;var d=["ms","moz","webkit","o"];for(var a=0;a<d.length&&!window.requestAnimationFrame;a++){window.requestAnimationFrame=window[d[a]+"RequestAnimationFrame"];window.cancelAnimationFrame=window[d[a]+"CancelAnimationFrame"]}this._isSetTimeOut=false;this._onLoop=null;this._timeOutID=null};Phaser.RequestAnimationFrame.prototype={start:function(){this.isRunning=true;var a=this;if(!window.requestAnimationFrame||this.forceSetTimeOut){this._isSetTimeOut=true;this._onLoop=function(){return a.updateSetTimeout()};this._timeOutID=window.setTimeout(this._onLoop,0)}else{this._isSetTimeOut=false;this._onLoop=function(b){return a.updateRAF(b)};this._timeOutID=window.requestAnimationFrame(this._onLoop)}},updateRAF:function(a){if(this.isRunning){this.game.update(Math.floor(a));this._timeOutID=window.requestAnimationFrame(this._onLoop)}},updateSetTimeout:function(){if(this.isRunning){this.game.update(Date.now());this._timeOutID=window.setTimeout(this._onLoop,this.game.time.timeToCall)}},stop:function(){if(this._isSetTimeOut){clearTimeout(this._timeOutID)}else{window.cancelAnimationFrame(this._timeOutID)}this.isRunning=false},isSetTimeOut:function(){return this._isSetTimeOut},isRAF:function(){return(this._isSetTimeOut===false)}};Phaser.RequestAnimationFrame.prototype.constructor=Phaser.RequestAnimationFrame;Phaser.Math={PI2:Math.PI*2,between:function(b,a){return Math.floor(Math.random()*(a-b+1)+b)},fuzzyEqual:function(d,c,e){if(e===undefined){e=0.0001}return Math.abs(d-c)<e},fuzzyLessThan:function(d,c,e){if(e===undefined){e=0.0001}return d<c+e},fuzzyGreaterThan:function(d,c,e){if(e===undefined){e=0.0001}return d>c-e},fuzzyCeil:function(a,b){if(b===undefined){b=0.0001}return Math.ceil(a-b)},fuzzyFloor:function(a,b){if(b===undefined){b=0.0001}return Math.floor(a+b)},average:function(){var c=0;var a=arguments.length;for(var b=0;b<a;b++){c+=(+arguments[b])}return c/a},shear:function(a){return a%1},snapTo:function(a,c,b){if(b===undefined){b=0}if(c===0){return a}a-=b;a=c*Math.round(a/c);return b+a},snapToFloor:function(a,c,b){if(b===undefined){b=0}if(c===0){return a}a-=b;a=c*Math.floor(a/c);return b+a},snapToCeil:function(a,c,b){if(b===undefined){b=0}if(c===0){return a}a-=b;a=c*Math.ceil(a/c);return b+a},roundTo:function(c,a,b){if(a===undefined){a=0}if(b===undefined){b=10}var d=Math.pow(b,-a);return Math.round(c*d)/d},floorTo:function(c,a,b){if(a===undefined){a=0}if(b===undefined){b=10}var d=Math.pow(b,-a);return Math.floor(c*d)/d},ceilTo:function(c,a,b){if(a===undefined){a=0}if(b===undefined){b=10}var d=Math.pow(b,-a);return Math.ceil(c*d)/d},rotateToAngle:function(b,c,a){if(a===undefined){a=0.05}if(b===c){return b}if(Math.abs(c-b)<=a||Math.abs(c-b)>=(Phaser.Math.PI2-a)){b=c}else{if(Math.abs(c-b)>Math.PI){if(c<b){c+=Phaser.Math.PI2}else{c-=Phaser.Math.PI2}}if(c>b){b+=a}else{if(c<b){b-=a}}}return b},getShortestAngle:function(c,a){var d=a-c;
	if(d===0){return 0}var b=Math.floor((d-(-180))/360);return d-(b*360)},angleBetween:function(b,d,a,c){return Math.atan2(c-d,a-b)},angleBetweenY:function(b,d,a,c){return Math.atan2(a-b,c-d)},angleBetweenPoints:function(b,a){return Math.atan2(a.y-b.y,a.x-b.x)},angleBetweenPointsY:function(b,a){return Math.atan2(a.x-b.x,a.y-b.y)},reverseAngle:function(a){return this.normalizeAngle(a+Math.PI,true)},normalizeAngle:function(a){a=a%(2*Math.PI);return a>=0?a:a+2*Math.PI},maxAdd:function(c,b,a){return Math.min(c+b,a)},minSub:function(c,b,a){return Math.max(c-b,a)},wrap:function(e,d,b){var c=b-d;if(c<=0){return 0}var a=(e-d)%c;if(a<0){a+=c}return a+d},wrapValue:function(c,b,a){var d;c=Math.abs(c);b=Math.abs(b);a=Math.abs(a);d=(c+b)%a;return d},isOdd:function(a){return !!(a&1)},isEven:function(a){return !(a&1)},min:function(){if(arguments.length===1&&typeof arguments[0]==="object"){var d=arguments[0]}else{var d=arguments}for(var c=1,b=0,a=d.length;c<a;c++){if(d[c]<d[b]){b=c}}return d[b]},max:function(){if(arguments.length===1&&typeof arguments[0]==="object"){var d=arguments[0]}else{var d=arguments}for(var c=1,b=0,a=d.length;c<a;c++){if(d[c]>d[b]){b=c}}return d[b]},minProperty:function(e){if(arguments.length===2&&typeof arguments[1]==="object"){var d=arguments[1]}else{var d=arguments.slice(1)}for(var c=1,b=0,a=d.length;c<a;c++){if(d[c][e]<d[b][e]){b=c}}return d[b][e]},maxProperty:function(e){if(arguments.length===2&&typeof arguments[1]==="object"){var d=arguments[1]}else{var d=arguments.slice(1)}for(var c=1,b=0,a=d.length;c<a;c++){if(d[c][e]>d[b][e]){b=c}}return d[b][e]},wrapAngle:function(b,a){return a?this.wrap(b,-Math.PI,Math.PI):this.wrap(b,-180,180)},linearInterpolation:function(c,b){var a=c.length-1;var e=a*b;var d=Math.floor(e);if(b<0){return this.linear(c[0],c[1],e)}if(b>1){return this.linear(c[a],c[a-1],a-e)}return this.linear(c[d],c[d+1>a?a:d+1],e-d)},bezierInterpolation:function(d,c){var a=0;var f=d.length-1;for(var e=0;e<=f;e++){a+=Math.pow(1-c,f-e)*Math.pow(c,e)*d[e]*this.bernstein(f,e)}return a},catmullRomInterpolation:function(c,b){var a=c.length-1;var e=a*b;var d=Math.floor(e);if(c[0]===c[a]){if(b<0){d=Math.floor(e=a*(1+b))}return this.catmullRom(c[(d-1+a)%a],c[d],c[(d+1)%a],c[(d+2)%a],e-d)}else{if(b<0){return c[0]-(this.catmullRom(c[0],c[0],c[1],c[1],-e)-c[0])}if(b>1){return c[a]-(this.catmullRom(c[a],c[a],c[a-1],c[a-1],e-a)-c[a])}return this.catmullRom(c[d?d-1:0],c[d],c[a<d+1?a:d+1],c[a<d+2?a:d+2],e-d)}},linear:function(c,b,a){return(b-c)*a+c},bernstein:function(b,a){return this.factorial(b)/this.factorial(a)/this.factorial(b-a)},factorial:function(b){if(b===0){return 1}var a=b;while(--b){a*=b}return a},catmullRom:function(h,g,e,d,i){var f=(e-h)*0.5,c=(d-g)*0.5,b=i*i,a=i*b;return(2*g-2*e+f+c)*a+(-3*g+3*e-2*f-c)*b+f*i+g},difference:function(d,c){return Math.abs(d-c)},roundAwayFromZero:function(a){return(a>0)?Math.ceil(a):Math.floor(a)},sinCosGenerator:function(a,i,b,g){if(i===undefined){i=1}if(b===undefined){b=1}if(g===undefined){g=1}var h=i;var k=b;var e=g*Math.PI/a;var d=[];var j=[];for(var f=0;f<a;f++){k-=h*e;h+=k*e;d[f]=k;j[f]=h}return{sin:j,cos:d,length:a}},distance:function(d,f,c,e){var b=d-c;var a=f-e;return Math.sqrt(b*b+a*a)},distanceSq:function(d,f,c,e){var b=d-c;var a=f-e;return b*b+a*a},distancePow:function(b,d,a,c,e){if(e===undefined){e=2}return Math.sqrt(Math.pow(a-b,e)+Math.pow(c-d,e))},clamp:function(b,c,a){if(b<c){return c}else{if(a<b){return a}else{return b}}},clampBottom:function(b,c){return b<c?c:b},within:function(d,c,e){return(Math.abs(d-c)<=e)},mapLinear:function(b,c,a,e,d){return e+(b-c)*(d-e)/(a-c)},smoothstep:function(b,c,a){b=Math.max(0,Math.min(1,(b-c)/(a-c)));return b*b*(3-2*b)},smootherstep:function(b,c,a){b=Math.max(0,Math.min(1,(b-c)/(a-c)));return b*b*b*(b*(b*6-15)+10)},sign:function(a){return(a<0)?-1:((a>0)?1:0)},percent:function(d,c,e){if(e===undefined){e=0}if(d>c||e>c){return 1}else{if(d<e||e>d){return 0}else{return(d-e)/c}}}};var degreeToRadiansFactor=Math.PI/180;var radianToDegreesFactor=180/Math.PI;Phaser.Math.degToRad=function degToRad(a){return a*degreeToRadiansFactor};Phaser.Math.radToDeg=function radToDeg(a){return a*radianToDegreesFactor};Phaser.RandomDataGenerator=function(a){if(a===undefined){a=[]}this.c=1;this.s0=0;this.s1=0;this.s2=0;if(typeof a==="string"){this.state(a)}else{this.sow(a)}};Phaser.RandomDataGenerator.prototype={rnd:function(){var a=2091639*this.s0+this.c*2.3283064365386963e-10;this.c=a|0;this.s0=this.s1;this.s1=this.s2;this.s2=a-this.c;return this.s2},sow:function(b){this.s0=this.hash(" ");this.s1=this.hash(this.s0);this.s2=this.hash(this.s1);this.c=1;if(!b){return}for(var c=0;c<b.length&&(b[c]!=null);c++){var a=b[c];this.s0-=this.hash(a);this.s0+=~~(this.s0<0);this.s1-=this.hash(a);this.s1+=~~(this.s1<0);this.s2-=this.hash(a);this.s2+=~~(this.s2<0)}},hash:function(c){var b,a,d;d=4022871197;c=c.toString();for(a=0;a<c.length;a++){d+=c.charCodeAt(a);b=0.02519603282416938*d;d=b>>>0;b-=d;b*=d;d=b>>>0;b-=d;d+=b*4294967296}return(d>>>0)*2.3283064365386963e-10
},integer:function(){return this.rnd.apply(this)*4294967296},frac:function(){return this.rnd.apply(this)+(this.rnd.apply(this)*2097152|0)*1.1102230246251565e-16},real:function(){return this.integer()+this.frac()},integerInRange:function(b,a){return Math.floor(this.realInRange(0,a-b+1)+b)},between:function(b,a){return this.integerInRange(b,a)},realInRange:function(b,a){return this.frac()*(a-b)+b},normal:function(){return 1-2*this.frac()},uuid:function(){var d="";var c="";for(c=d="";d++<36;c+=~d%5|d*3&4?(d^15?8^this.frac()*(d^20?16:4):4).toString(16):"-"){}return c},pick:function(a){return a[this.integerInRange(0,a.length-1)]},sign:function(){return this.pick([-1,1])},weightedPick:function(a){return a[~~(Math.pow(this.frac(),2)*(a.length-1)+0.5)]},timestamp:function(b,a){return this.realInRange(b||946684800000,a||1577862000000)},angle:function(){return this.integerInRange(-180,180)},state:function(a){if(typeof a==="string"&&a.match(/^!rnd/)){a=a.split(",");this.c=parseFloat(a[1]);this.s0=parseFloat(a[2]);this.s1=parseFloat(a[3]);this.s2=parseFloat(a[4])}return["!rnd",this.c,this.s0,this.s1,this.s2].join(",")}};Phaser.RandomDataGenerator.prototype.constructor=Phaser.RandomDataGenerator;Phaser.QuadTree=function(b,g,e,a,d,c,f){this.maxObjects=10;this.maxLevels=4;this.level=0;this.bounds={};this.objects=[];this.nodes=[];this._empty=[];this.reset(b,g,e,a,d,c,f)};Phaser.QuadTree.prototype={reset:function(b,g,e,a,d,c,f){this.maxObjects=d||10;this.maxLevels=c||4;this.level=f||0;this.bounds={x:Math.round(b),y:Math.round(g),width:e,height:a,subWidth:Math.floor(e/2),subHeight:Math.floor(a/2),right:Math.round(b)+Math.floor(e/2),bottom:Math.round(g)+Math.floor(a/2)};this.objects.length=0;this.nodes.length=0},populate:function(a){a.forEach(this.populateHandler,this,true)},populateHandler:function(a){if(a.body&&a.exists){this.insert(a.body)}},split:function(){this.nodes[0]=new Phaser.QuadTree(this.bounds.right,this.bounds.y,this.bounds.subWidth,this.bounds.subHeight,this.maxObjects,this.maxLevels,(this.level+1));this.nodes[1]=new Phaser.QuadTree(this.bounds.x,this.bounds.y,this.bounds.subWidth,this.bounds.subHeight,this.maxObjects,this.maxLevels,(this.level+1));this.nodes[2]=new Phaser.QuadTree(this.bounds.x,this.bounds.bottom,this.bounds.subWidth,this.bounds.subHeight,this.maxObjects,this.maxLevels,(this.level+1));this.nodes[3]=new Phaser.QuadTree(this.bounds.right,this.bounds.bottom,this.bounds.subWidth,this.bounds.subHeight,this.maxObjects,this.maxLevels,(this.level+1))},insert:function(a){var c=0;var b;if(this.nodes[0]!=null){b=this.getIndex(a);if(b!==-1){this.nodes[b].insert(a);return}}this.objects.push(a);if(this.objects.length>this.maxObjects&&this.level<this.maxLevels){if(this.nodes[0]==null){this.split()}while(c<this.objects.length){b=this.getIndex(this.objects[c]);if(b!==-1){this.nodes[b].insert(this.objects.splice(c,1)[0])}else{c++}}}},getIndex:function(b){var a=-1;if(b.x<this.bounds.right&&b.right<this.bounds.right){if(b.y<this.bounds.bottom&&b.bottom<this.bounds.bottom){a=1}else{if(b.y>this.bounds.bottom){a=2}}}else{if(b.x>this.bounds.right){if(b.y<this.bounds.bottom&&b.bottom<this.bounds.bottom){a=0}else{if(b.y>this.bounds.bottom){a=3}}}}return a},retrieve:function(b){if(b instanceof Phaser.Rectangle){var c=this.objects;var a=this.getIndex(b)}else{if(!b.body){return this._empty}var c=this.objects;var a=this.getIndex(b.body)}if(this.nodes[0]){if(a!==-1){c=c.concat(this.nodes[a].retrieve(b))}else{c=c.concat(this.nodes[0].retrieve(b));c=c.concat(this.nodes[1].retrieve(b));c=c.concat(this.nodes[2].retrieve(b));c=c.concat(this.nodes[3].retrieve(b))}}return c},clear:function(){this.objects.length=0;var a=this.nodes.length;while(a--){this.nodes[a].clear();this.nodes.splice(a,1)}this.nodes.length=0}};Phaser.QuadTree.prototype.constructor=Phaser.QuadTree;Phaser.Net=function(a){this.game=a};Phaser.Net.prototype={getHostName:function(){if(window.location&&window.location.hostname){return window.location.hostname}return null},checkDomainName:function(a){return window.location.hostname.indexOf(a)!==-1},updateQueryString:function(c,e,h,b){if(h===undefined){h=false}if(b===undefined||b===""){b=window.location.href}var a="";var d=new RegExp("([?|&])"+c+"=.*?(&|#|$)(.*)","gi");if(d.test(b)){if(typeof e!=="undefined"&&e!==null){a=b.replace(d,"$1"+c+"="+e+"$2$3")}else{a=b.replace(d,"$1$3").replace(/(&|\?)$/,"")}}else{if(typeof e!=="undefined"&&e!==null){var g=b.indexOf("?")!==-1?"&":"?";var f=b.split("#");b=f[0]+g+c+"="+e;if(f[1]){b+="#"+f[1]}a=b}else{a=b}}if(h){window.location.href=a}else{return a}},getQueryString:function(e){if(e===undefined){e=""}var b={};var a=location.search.substring(1).split("&");for(var d in a){var c=a[d].split("=");if(c.length>1){if(e&&e===this.decodeURI(c[0])){return this.decodeURI(c[1])}else{b[this.decodeURI(c[0])]=this.decodeURI(c[1])}}}return b},decodeURI:function(a){return decodeURIComponent(a.replace(/\+/g," "))}};Phaser.Net.prototype.constructor=Phaser.Net;Phaser.TweenManager=function(a){this.game=a;
	this.frameBased=false;this._tweens=[];this._add=[];this.easeMap={"Power0":Phaser.Easing.Power0,"Power1":Phaser.Easing.Power1,"Power2":Phaser.Easing.Power2,"Power3":Phaser.Easing.Power3,"Power4":Phaser.Easing.Power4,"Linear":Phaser.Easing.Linear.None,"Quad":Phaser.Easing.Quadratic.Out,"Cubic":Phaser.Easing.Cubic.Out,"Quart":Phaser.Easing.Quartic.Out,"Quint":Phaser.Easing.Quintic.Out,"Sine":Phaser.Easing.Sinusoidal.Out,"Expo":Phaser.Easing.Exponential.Out,"Circ":Phaser.Easing.Circular.Out,"Elastic":Phaser.Easing.Elastic.Out,"Back":Phaser.Easing.Back.Out,"Bounce":Phaser.Easing.Bounce.Out,"Quad.easeIn":Phaser.Easing.Quadratic.In,"Cubic.easeIn":Phaser.Easing.Cubic.In,"Quart.easeIn":Phaser.Easing.Quartic.In,"Quint.easeIn":Phaser.Easing.Quintic.In,"Sine.easeIn":Phaser.Easing.Sinusoidal.In,"Expo.easeIn":Phaser.Easing.Exponential.In,"Circ.easeIn":Phaser.Easing.Circular.In,"Elastic.easeIn":Phaser.Easing.Elastic.In,"Back.easeIn":Phaser.Easing.Back.In,"Bounce.easeIn":Phaser.Easing.Bounce.In,"Quad.easeOut":Phaser.Easing.Quadratic.Out,"Cubic.easeOut":Phaser.Easing.Cubic.Out,"Quart.easeOut":Phaser.Easing.Quartic.Out,"Quint.easeOut":Phaser.Easing.Quintic.Out,"Sine.easeOut":Phaser.Easing.Sinusoidal.Out,"Expo.easeOut":Phaser.Easing.Exponential.Out,"Circ.easeOut":Phaser.Easing.Circular.Out,"Elastic.easeOut":Phaser.Easing.Elastic.Out,"Back.easeOut":Phaser.Easing.Back.Out,"Bounce.easeOut":Phaser.Easing.Bounce.Out,"Quad.easeInOut":Phaser.Easing.Quadratic.InOut,"Cubic.easeInOut":Phaser.Easing.Cubic.InOut,"Quart.easeInOut":Phaser.Easing.Quartic.InOut,"Quint.easeInOut":Phaser.Easing.Quintic.InOut,"Sine.easeInOut":Phaser.Easing.Sinusoidal.InOut,"Expo.easeInOut":Phaser.Easing.Exponential.InOut,"Circ.easeInOut":Phaser.Easing.Circular.InOut,"Elastic.easeInOut":Phaser.Easing.Elastic.InOut,"Back.easeInOut":Phaser.Easing.Back.InOut,"Bounce.easeInOut":Phaser.Easing.Bounce.InOut};this.game.onPause.add(this._pauseAll,this);this.game.onResume.add(this._resumeAll,this)};Phaser.TweenManager.prototype={getAll:function(){return this._tweens},removeAll:function(){for(var a=0;a<this._tweens.length;a++){this._tweens[a].pendingDelete=true}this._add=[]},removeFrom:function(d,c){if(c===undefined){c=true}var b;var a;if(Array.isArray(d)){for(b=0,a=d.length;b<a;b++){this.removeFrom(d[b])}}else{if(d.type===Phaser.GROUP&&c){for(var b=0,a=d.children.length;b<a;b++){this.removeFrom(d.children[b])}}else{for(b=0,a=this._tweens.length;b<a;b++){if(d===this._tweens[b].target){this.remove(this._tweens[b])}}for(b=0,a=this._add.length;b<a;b++){if(d===this._add[b].target){this.remove(this._add[b])}}}}},add:function(a){a._manager=this;this._add.push(a)},create:function(a){return new Phaser.Tween(a,this.game,this)},remove:function(b){var a=this._tweens.indexOf(b);if(a!==-1){this._tweens[a].pendingDelete=true}else{a=this._add.indexOf(b);if(a!==-1){this._add[a].pendingDelete=true}}},update:function(){var c=this._add.length;var b=this._tweens.length;if(b===0&&c===0){return false}var a=0;while(a<b){if(this._tweens[a].update(this.game.time.time)){a++}else{this._tweens.splice(a,1);b--}}if(c>0){this._tweens=this._tweens.concat(this._add);this._add.length=0}return true},isTweening:function(a){return this._tweens.some(function(b){return b.target===a})},_pauseAll:function(){for(var a=this._tweens.length-1;a>=0;a--){this._tweens[a]._pause()}},_resumeAll:function(){for(var a=this._tweens.length-1;a>=0;a--){this._tweens[a]._resume()}},pauseAll:function(){for(var a=this._tweens.length-1;a>=0;a--){this._tweens[a].pause()}},resumeAll:function(){for(var a=this._tweens.length-1;a>=0;a--){this._tweens[a].resume(true)}}};Phaser.TweenManager.prototype.constructor=Phaser.TweenManager;Phaser.Tween=function(c,a,b){this.game=a;this.target=c;this.manager=b;this.timeline=[];this.reverse=false;this.timeScale=1;this.repeatCounter=0;this.pendingDelete=false;this.onStart=new Phaser.Signal();this.onLoop=new Phaser.Signal();this.onRepeat=new Phaser.Signal();this.onChildComplete=new Phaser.Signal();this.onComplete=new Phaser.Signal();this.isRunning=false;this.current=0;this.properties={};this.chainedTween=null;this.isPaused=false;this.frameBased=b.frameBased;this._onUpdateCallback=null;this._onUpdateCallbackContext=null;this._pausedTime=0;this._codePaused=false;this._hasStarted=false};Phaser.Tween.prototype={to:function(c,f,g,b,a,e,d){if(f===undefined||f<=0){f=1000}if(g===undefined||g===null){g=Phaser.Easing.Default}if(b===undefined){b=false}if(a===undefined){a=0}if(e===undefined){e=0}if(d===undefined){d=false}if(typeof g==="string"&&this.manager.easeMap[g]){g=this.manager.easeMap[g]}if(this.isRunning){console.warn("Phaser.Tween.to cannot be called after Tween.start");return this}this.timeline.push(new Phaser.TweenData(this).to(c,f,g,a,e,d));if(b){this.start()}return this},from:function(c,f,g,b,a,e,d){if(f===undefined){f=1000}if(g===undefined||g===null){g=Phaser.Easing.Default}if(b===undefined){b=false}if(a===undefined){a=0}if(e===undefined){e=0}if(d===undefined){d=false}if(typeof g==="string"&&this.manager.easeMap[g]){g=this.manager.easeMap[g]
}if(this.isRunning){console.warn("Phaser.Tween.from cannot be called after Tween.start");return this}this.timeline.push(new Phaser.TweenData(this).from(c,f,g,a,e,d));if(b){this.start()}return this},start:function(a){if(a===undefined){a=0}if(this.game===null||this.target===null||this.timeline.length===0||this.isRunning){return this}for(var b=0;b<this.timeline.length;b++){for(var c in this.timeline[b].vEnd){this.properties[c]=this.target[c]||0;if(!Array.isArray(this.properties[c])){this.properties[c]*=1}}}for(var b=0;b<this.timeline.length;b++){this.timeline[b].loadValues()}this.manager.add(this);this.isRunning=true;if(a<0||a>this.timeline.length-1){a=0}this.current=a;this.timeline[this.current].start();return this},stop:function(a){if(a===undefined){a=false}this.isRunning=false;this._onUpdateCallback=null;this._onUpdateCallbackContext=null;if(a){this.onComplete.dispatch(this.target,this);this._hasStarted=false;if(this.chainedTween){this.chainedTween.start()}}this.manager.remove(this);return this},updateTweenData:function(d,c,a){if(this.timeline.length===0){return this}if(a===undefined){a=0}if(a===-1){for(var b=0;b<this.timeline.length;b++){this.timeline[b][d]=c}}else{this.timeline[a][d]=c}return this},delay:function(b,a){return this.updateTweenData("delay",b,a)},repeat:function(b,c,a){if(c===undefined){c=0}this.updateTweenData("repeatCounter",b,a);return this.updateTweenData("repeatDelay",c,a)},repeatDelay:function(b,a){return this.updateTweenData("repeatDelay",b,a)},yoyo:function(b,c,a){if(c===undefined){c=0}this.updateTweenData("yoyo",b,a);return this.updateTweenData("yoyoDelay",c,a)},yoyoDelay:function(b,a){return this.updateTweenData("yoyoDelay",b,a)},easing:function(b,a){if(typeof b==="string"&&this.manager.easeMap[b]){b=this.manager.easeMap[b]}return this.updateTweenData("easingFunction",b,a)},interpolation:function(a,c,b){if(c===undefined){c=Phaser.Math}this.updateTweenData("interpolationFunction",a,b);return this.updateTweenData("interpolationContext",c,b)},repeatAll:function(a){if(a===undefined){a=0}this.repeatCounter=a;return this},chain:function(){var a=arguments.length;while(a--){if(a>0){arguments[a-1].chainedTween=arguments[a]}else{this.chainedTween=arguments[a]}}return this},loop:function(a){if(a===undefined){a=true}this.repeatCounter=(a)?-1:0;return this},onUpdateCallback:function(b,a){this._onUpdateCallback=b;this._onUpdateCallbackContext=a;return this},pause:function(){this.isPaused=true;this._codePaused=true;this._pausedTime=this.game.time.time},_pause:function(){if(!this._codePaused){this.isPaused=true;this._pausedTime=this.game.time.time}},resume:function(){if(this.isPaused){this.isPaused=false;this._codePaused=false;for(var a=0;a<this.timeline.length;a++){if(!this.timeline[a].isRunning){this.timeline[a].startTime+=(this.game.time.time-this._pausedTime)}}}},_resume:function(){if(this._codePaused){return}else{this.resume()}},update:function(c){if(this.pendingDelete||!this.target){return false}if(this.isPaused){return true}var b=this.timeline[this.current].update(c);if(b===Phaser.TweenData.PENDING){return true}else{if(b===Phaser.TweenData.RUNNING){if(!this._hasStarted){this.onStart.dispatch(this.target,this);this._hasStarted=true}if(this._onUpdateCallback!==null){this._onUpdateCallback.call(this._onUpdateCallbackContext,this,this.timeline[this.current].value,this.timeline[this.current])}return this.isRunning}else{if(b===Phaser.TweenData.LOOPED){if(this.timeline[this.current].repeatCounter===-1){this.onLoop.dispatch(this.target,this)}else{this.onRepeat.dispatch(this.target,this)}return true}else{if(b===Phaser.TweenData.COMPLETE){var a=false;if(this.reverse){this.current--;if(this.current<0){this.current=this.timeline.length-1;a=true}}else{this.current++;if(this.current===this.timeline.length){this.current=0;a=true}}if(a){if(this.repeatCounter===-1){this.timeline[this.current].start();this.onLoop.dispatch(this.target,this);return true}else{if(this.repeatCounter>0){this.repeatCounter--;this.timeline[this.current].start();this.onRepeat.dispatch(this.target,this);return true}else{this.isRunning=false;this.onComplete.dispatch(this.target,this);this._hasStarted=false;if(this.chainedTween){this.chainedTween.start()}return false}}}else{this.onChildComplete.dispatch(this.target,this);this.timeline[this.current].start();return true}}}}}},generateData:function(a,d){if(this.game===null||this.target===null){return null}if(a===undefined){a=60}if(d===undefined){d=[]}for(var b=0;b<this.timeline.length;b++){for(var c in this.timeline[b].vEnd){this.properties[c]=this.target[c]||0;if(!Array.isArray(this.properties[c])){this.properties[c]*=1}}}for(var b=0;b<this.timeline.length;b++){this.timeline[b].loadValues()}for(var b=0;b<this.timeline.length;b++){d=d.concat(this.timeline[b].generateData(a))}return d}};Object.defineProperty(Phaser.Tween.prototype,"totalDuration",{get:function(){var b=0;for(var a=0;a<this.timeline.length;a++){b+=this.timeline[a].duration}return b}});Phaser.Tween.prototype.constructor=Phaser.Tween;
Phaser.TweenData=function(a){this.parent=a;this.game=a.game;this.vStart={};this.vStartCache={};this.vEnd={};this.vEndCache={};this.duration=1000;this.percent=0;this.value=0;this.repeatCounter=0;this.repeatDelay=0;this.repeatTotal=0;this.interpolate=false;this.yoyo=false;this.yoyoDelay=0;this.inReverse=false;this.delay=0;this.dt=0;this.startTime=null;this.easingFunction=Phaser.Easing.Default;this.interpolationFunction=Phaser.Math.linearInterpolation;this.interpolationContext=Phaser.Math;this.isRunning=false;this.isFrom=false};Phaser.TweenData.PENDING=0;Phaser.TweenData.RUNNING=1;Phaser.TweenData.LOOPED=2;Phaser.TweenData.COMPLETE=3;Phaser.TweenData.prototype={to:function(b,e,f,a,d,c){this.vEnd=b;this.duration=e;this.easingFunction=f;this.delay=a;this.repeatTotal=d;this.yoyo=c;this.isFrom=false;return this},from:function(b,e,f,a,d,c){this.vEnd=b;this.duration=e;this.easingFunction=f;this.delay=a;this.repeatTotal=d;this.yoyo=c;this.isFrom=true;return this},start:function(){this.startTime=this.game.time.time+this.delay;if(this.parent.reverse){this.dt=this.duration}else{this.dt=0}if(this.delay>0){this.isRunning=false}else{this.isRunning=true}if(this.isFrom){for(var a in this.vStartCache){this.vStart[a]=this.vEndCache[a];this.vEnd[a]=this.vStartCache[a];this.parent.target[a]=this.vStart[a]}}this.value=0;this.yoyoCounter=0;this.repeatCounter=this.repeatTotal;return this},loadValues:function(){for(var a in this.parent.properties){this.vStart[a]=this.parent.properties[a];if(Array.isArray(this.vEnd[a])){if(this.vEnd[a].length===0){continue}if(this.percent===0){this.vEnd[a]=[this.vStart[a]].concat(this.vEnd[a])}}if(typeof this.vEnd[a]!=="undefined"){if(typeof this.vEnd[a]==="string"){this.vEnd[a]=this.vStart[a]+parseFloat(this.vEnd[a],10)}this.parent.properties[a]=this.vEnd[a]}else{this.vEnd[a]=this.vStart[a]}this.vStartCache[a]=this.vStart[a];this.vEndCache[a]=this.vEnd[a]}return this},update:function(d){if(!this.isRunning){if(d>=this.startTime){this.isRunning=true}else{return Phaser.TweenData.PENDING}}else{if(d<this.startTime){return Phaser.TweenData.RUNNING}}var b=(this.parent.frameBased)?this.game.time.physicsElapsedMS:this.game.time.elapsedMS;if(this.parent.reverse){this.dt-=b*this.parent.timeScale;this.dt=Math.max(this.dt,0)}else{this.dt+=b*this.parent.timeScale;this.dt=Math.min(this.dt,this.duration)}this.percent=this.dt/this.duration;this.value=this.easingFunction(this.percent);for(var c in this.vEnd){var e=this.vStart[c];var a=this.vEnd[c];if(Array.isArray(a)){this.parent.target[c]=this.interpolationFunction.call(this.interpolationContext,a,this.value)}else{this.parent.target[c]=e+((a-e)*this.value)}}if((!this.parent.reverse&&this.percent===1)||(this.parent.reverse&&this.percent===0)){return this.repeat()}return Phaser.TweenData.RUNNING},generateData:function(i){if(this.parent.reverse){this.dt=this.duration}else{this.dt=0}var g=[];var c=false;var d=(1/i)*1000;do{if(this.parent.reverse){this.dt-=d;this.dt=Math.max(this.dt,0)}else{this.dt+=d;this.dt=Math.min(this.dt,this.duration)}this.percent=this.dt/this.duration;this.value=this.easingFunction(this.percent);var a={};for(var h in this.vEnd){var b=this.vStart[h];var e=this.vEnd[h];if(Array.isArray(e)){a[h]=this.interpolationFunction(e,this.value)}else{a[h]=b+((e-b)*this.value)}}g.push(a);if((!this.parent.reverse&&this.percent===1)||(this.parent.reverse&&this.percent===0)){c=true}}while(!c);if(this.yoyo){var f=g.slice();f.reverse();g=g.concat(f)}return g},repeat:function(){if(this.yoyo){if(this.inReverse&&this.repeatCounter===0){for(var a in this.vStartCache){this.vStart[a]=this.vStartCache[a];this.vEnd[a]=this.vEndCache[a]}this.inReverse=false;return Phaser.TweenData.COMPLETE}this.inReverse=!this.inReverse}else{if(this.repeatCounter===0){return Phaser.TweenData.COMPLETE}}if(this.inReverse){for(var a in this.vStartCache){this.vStart[a]=this.vEndCache[a];this.vEnd[a]=this.vStartCache[a]}}else{for(var a in this.vStartCache){this.vStart[a]=this.vStartCache[a];this.vEnd[a]=this.vEndCache[a]}if(this.repeatCounter>0){this.repeatCounter--}}this.startTime=this.game.time.time;if(this.yoyo&&this.inReverse){this.startTime+=this.yoyoDelay}else{if(!this.inReverse){this.startTime+=this.repeatDelay}}if(this.parent.reverse){this.dt=this.duration}else{this.dt=0}return Phaser.TweenData.LOOPED}};Phaser.TweenData.prototype.constructor=Phaser.TweenData;Phaser.Easing={Linear:{None:function(a){return a}},Quadratic:{In:function(a){return a*a},Out:function(a){return a*(2-a)},InOut:function(a){if((a*=2)<1){return 0.5*a*a}return -0.5*(--a*(a-2)-1)}},Cubic:{In:function(a){return a*a*a},Out:function(a){return --a*a*a+1},InOut:function(a){if((a*=2)<1){return 0.5*a*a*a}return 0.5*((a-=2)*a*a+2)}},Quartic:{In:function(a){return a*a*a*a},Out:function(a){return 1-(--a*a*a*a)},InOut:function(a){if((a*=2)<1){return 0.5*a*a*a*a}return -0.5*((a-=2)*a*a*a-2)}},Quintic:{In:function(a){return a*a*a*a*a},Out:function(a){return --a*a*a*a*a+1},InOut:function(a){if((a*=2)<1){return 0.5*a*a*a*a*a}return 0.5*((a-=2)*a*a*a*a+2)
}},Sinusoidal:{In:function(a){if(a===0){return 0}if(a===1){return 1}return 1-Math.cos(a*Math.PI/2)},Out:function(a){if(a===0){return 0}if(a===1){return 1}return Math.sin(a*Math.PI/2)},InOut:function(a){if(a===0){return 0}if(a===1){return 1}return 0.5*(1-Math.cos(Math.PI*a))}},Exponential:{In:function(a){return a===0?0:Math.pow(1024,a-1)},Out:function(a){return a===1?1:1-Math.pow(2,-10*a)},InOut:function(a){if(a===0){return 0}if(a===1){return 1}if((a*=2)<1){return 0.5*Math.pow(1024,a-1)}return 0.5*(-Math.pow(2,-10*(a-1))+2)}},Circular:{In:function(a){return 1-Math.sqrt(1-a*a)},Out:function(a){return Math.sqrt(1-(--a*a))},InOut:function(a){if((a*=2)<1){return -0.5*(Math.sqrt(1-a*a)-1)}return 0.5*(Math.sqrt(1-(a-=2)*a)+1)}},Elastic:{In:function(c){var d,b=0.1,e=0.4;if(c===0){return 0}if(c===1){return 1}if(!b||b<1){b=1;d=e/4}else{d=e*Math.asin(1/b)/(2*Math.PI)}return -(b*Math.pow(2,10*(c-=1))*Math.sin((c-d)*(2*Math.PI)/e))},Out:function(c){var d,b=0.1,e=0.4;if(c===0){return 0}if(c===1){return 1}if(!b||b<1){b=1;d=e/4}else{d=e*Math.asin(1/b)/(2*Math.PI)}return(b*Math.pow(2,-10*c)*Math.sin((c-d)*(2*Math.PI)/e)+1)},InOut:function(c){var d,b=0.1,e=0.4;if(c===0){return 0}if(c===1){return 1}if(!b||b<1){b=1;d=e/4}else{d=e*Math.asin(1/b)/(2*Math.PI)}if((c*=2)<1){return -0.5*(b*Math.pow(2,10*(c-=1))*Math.sin((c-d)*(2*Math.PI)/e))}return b*Math.pow(2,-10*(c-=1))*Math.sin((c-d)*(2*Math.PI)/e)*0.5+1}},Back:{In:function(a){var b=1.70158;return a*a*((b+1)*a-b)},Out:function(a){var b=1.70158;return --a*a*((b+1)*a+b)+1},InOut:function(a){var b=1.70158*1.525;if((a*=2)<1){return 0.5*(a*a*((b+1)*a-b))}return 0.5*((a-=2)*a*((b+1)*a+b)+2)}},Bounce:{In:function(a){return 1-Phaser.Easing.Bounce.Out(1-a)},Out:function(a){if(a<(1/2.75)){return 7.5625*a*a}else{if(a<(2/2.75)){return 7.5625*(a-=(1.5/2.75))*a+0.75}else{if(a<(2.5/2.75)){return 7.5625*(a-=(2.25/2.75))*a+0.9375}else{return 7.5625*(a-=(2.625/2.75))*a+0.984375}}}},InOut:function(a){if(a<0.5){return Phaser.Easing.Bounce.In(a*2)*0.5}return Phaser.Easing.Bounce.Out(a*2-1)*0.5+0.5}}};Phaser.Easing.Default=Phaser.Easing.Linear.None;Phaser.Easing.Power0=Phaser.Easing.Linear.None;Phaser.Easing.Power1=Phaser.Easing.Quadratic.Out;Phaser.Easing.Power2=Phaser.Easing.Cubic.Out;Phaser.Easing.Power3=Phaser.Easing.Quartic.Out;Phaser.Easing.Power4=Phaser.Easing.Quintic.Out;Phaser.Time=function(a){this.game=a;this.time=0;this.prevTime=0;this.now=0;this.elapsed=0;this.elapsedMS=0;this.physicsElapsed=1/60;this.physicsElapsedMS=(1/60)*1000;this.desiredFpsMult=1/60;this._desiredFps=60;this.suggestedFps=this.desiredFps;this.slowMotion=1;this.advancedTiming=false;this.frames=0;this.fps=0;this.fpsMin=1000;this.fpsMax=0;this.msMin=1000;this.msMax=0;this.pauseDuration=0;this.timeToCall=0;this.timeExpected=0;this.events=new Phaser.Timer(this.game,false);this._frameCount=0;this._elapsedAccumulator=0;this._started=0;this._timeLastSecond=0;this._pauseStarted=0;this._justResumed=false;this._timers=[]};Phaser.Time.prototype={boot:function(){this._started=Date.now();this.time=Date.now();this.events.start();this.timeExpected=this.time},add:function(a){this._timers.push(a);return a},create:function(a){if(a===undefined){a=true}var b=new Phaser.Timer(this.game,a);this._timers.push(b);return b},removeAll:function(){for(var a=0;a<this._timers.length;a++){this._timers[a].destroy()}this._timers=[];this.events.removeAll()},refresh:function(){var a=this.time;this.time=Date.now();this.elapsedMS=this.time-a},update:function(b){var a=this.time;this.time=Date.now();this.elapsedMS=this.time-a;this.prevTime=this.now;this.now=b;this.elapsed=this.now-this.prevTime;if(this.game.raf._isSetTimeOut){this.timeToCall=Math.floor(Math.max(0,(1000/this._desiredFps)-(this.timeExpected-b)));this.timeExpected=b+this.timeToCall}if(this.advancedTiming){this.updateAdvancedTiming()}if(!this.game.paused){this.events.update(this.time);if(this._timers.length){this.updateTimers()}}},updateTimers:function(){var b=0;var a=this._timers.length;while(b<a){if(this._timers[b].update(this.time)){b++}else{this._timers.splice(b,1);a--}}},updateAdvancedTiming:function(){this._frameCount++;this._elapsedAccumulator+=this.elapsed;if(this._frameCount>=this._desiredFps*2){this.suggestedFps=Math.floor(200/(this._elapsedAccumulator/this._frameCount))*5;this._frameCount=0;this._elapsedAccumulator=0}this.msMin=Math.min(this.msMin,this.elapsed);this.msMax=Math.max(this.msMax,this.elapsed);this.frames++;if(this.now>this._timeLastSecond+1000){this.fps=Math.round((this.frames*1000)/(this.now-this._timeLastSecond));this.fpsMin=Math.min(this.fpsMin,this.fps);this.fpsMax=Math.max(this.fpsMax,this.fps);this._timeLastSecond=this.now;this.frames=0}},gamePaused:function(){this._pauseStarted=Date.now();this.events.pause();var a=this._timers.length;while(a--){this._timers[a]._pause()}},gameResumed:function(){this.time=Date.now();this.pauseDuration=this.time-this._pauseStarted;this.events.resume();var a=this._timers.length;while(a--){this._timers[a]._resume()}},totalElapsedSeconds:function(){return(this.time-this._started)*0.001
},elapsedSince:function(a){return this.time-a},elapsedSecondsSince:function(a){return(this.time-a)*0.001},reset:function(){this._started=this.time;this.removeAll()}};Object.defineProperty(Phaser.Time.prototype,"desiredFps",{get:function(){return this._desiredFps},set:function(a){this._desiredFps=a;this.physicsElapsed=1/a;this.physicsElapsedMS=this.physicsElapsed*1000;this.desiredFpsMult=1/a}});Phaser.Time.prototype.constructor=Phaser.Time;Phaser.Timer=function(a,b){if(b===undefined){b=true}this.game=a;this.running=false;this.autoDestroy=b;this.expired=false;this.elapsed=0;this.events=[];this.onComplete=new Phaser.Signal();this.nextTick=0;this.timeCap=1000;this.paused=false;this._codePaused=false;this._started=0;this._pauseStarted=0;this._pauseTotal=0;this._now=Date.now();this._len=0;this._marked=0;this._i=0;this._diff=0;this._newTick=0};Phaser.Timer.MINUTE=60000;Phaser.Timer.SECOND=1000;Phaser.Timer.HALF=500;Phaser.Timer.QUARTER=250;Phaser.Timer.prototype={create:function(e,a,c,h,b,d){e=Math.round(e);var f=e;if(this._now===0){f+=this.game.time.time}else{f+=this._now}var g=new Phaser.TimerEvent(this,e,f,c,a,h,b,d);this.events.push(g);this.order();this.expired=false;return g},add:function(b,c,a){return this.create(b,false,0,c,a,Array.prototype.slice.call(arguments,3))},repeat:function(c,b,d,a){return this.create(c,false,b,d,a,Array.prototype.slice.call(arguments,4))},loop:function(b,c,a){return this.create(b,true,0,c,a,Array.prototype.slice.call(arguments,3))},start:function(a){if(this.running){return}this._started=this.game.time.time+(a||0);this.running=true;for(var b=0;b<this.events.length;b++){this.events[b].tick=this.events[b].delay+this._started}},stop:function(a){this.running=false;if(a===undefined){a=true}if(a){this.events.length=0}},remove:function(b){for(var a=0;a<this.events.length;a++){if(this.events[a]===b){this.events[a].pendingDelete=true;return true}}return false},order:function(){if(this.events.length>0){this.events.sort(this.sortHandler);this.nextTick=this.events[0].tick}},sortHandler:function(d,c){if(d.tick<c.tick){return -1}else{if(d.tick>c.tick){return 1}}return 0},clearPendingEvents:function(){this._i=this.events.length;while(this._i--){if(this.events[this._i].pendingDelete){this.events.splice(this._i,1)}}this._len=this.events.length;this._i=0},update:function(a){if(this.paused){return true}this.elapsed=a-this._now;this._now=a;if(this.elapsed>this.timeCap){this.adjustEvents(a-this.elapsed)}this._marked=0;this.clearPendingEvents();if(this.running&&this._now>=this.nextTick&&this._len>0){while(this._i<this._len&&this.running){if(this._now>=this.events[this._i].tick&&!this.events[this._i].pendingDelete){this._newTick=(this._now+this.events[this._i].delay)-(this._now-this.events[this._i].tick);if(this._newTick<0){this._newTick=this._now+this.events[this._i].delay}if(this.events[this._i].loop===true){this.events[this._i].tick=this._newTick;this.events[this._i].callback.apply(this.events[this._i].callbackContext,this.events[this._i].args)}else{if(this.events[this._i].repeatCount>0){this.events[this._i].repeatCount--;this.events[this._i].tick=this._newTick;this.events[this._i].callback.apply(this.events[this._i].callbackContext,this.events[this._i].args)}else{this._marked++;this.events[this._i].pendingDelete=true;this.events[this._i].callback.apply(this.events[this._i].callbackContext,this.events[this._i].args)}}this._i++}else{break}}if(this.events.length>this._marked){this.order()}else{this.expired=true;this.onComplete.dispatch(this)}}if(this.expired&&this.autoDestroy){return false}else{return true}},pause:function(){if(!this.running){return}this._codePaused=true;if(this.paused){return}this._pauseStarted=this.game.time.time;this.paused=true},_pause:function(){if(this.paused||!this.running){return}this._pauseStarted=this.game.time.time;this.paused=true},adjustEvents:function(e){for(var b=0;b<this.events.length;b++){if(!this.events[b].pendingDelete){var a=this.events[b].tick-e;if(a<0){a=0}this.events[b].tick=this._now+a}}var c=this.nextTick-e;if(c<0){this.nextTick=this._now}else{this.nextTick=this._now+c}},resume:function(){if(!this.paused){return}var a=this.game.time.time;this._pauseTotal+=a-this._now;this._now=a;this.adjustEvents(this._pauseStarted);this.paused=false;this._codePaused=false},_resume:function(){if(this._codePaused){return}else{this.resume()}},removeAll:function(){this.onComplete.removeAll();this.events.length=0;this._len=0;this._i=0},destroy:function(){this.onComplete.removeAll();this.running=false;this.events=[];this._len=0;this._i=0}};Object.defineProperty(Phaser.Timer.prototype,"next",{get:function(){return this.nextTick}});Object.defineProperty(Phaser.Timer.prototype,"duration",{get:function(){if(this.running&&this.nextTick>this._now){return this.nextTick-this._now}else{return 0}}});Object.defineProperty(Phaser.Timer.prototype,"length",{get:function(){return this.events.length}});Object.defineProperty(Phaser.Timer.prototype,"ms",{get:function(){if(this.running){return this._now-this._started-this._pauseTotal
}else{return 0}}});Object.defineProperty(Phaser.Timer.prototype,"seconds",{get:function(){if(this.running){return this.ms*0.001}else{return 0}}});Phaser.Timer.prototype.constructor=Phaser.Timer;Phaser.TimerEvent=function(h,e,f,c,a,g,b,d){this.timer=h;this.delay=e;this.tick=f;this.repeatCount=c-1;this.loop=a;this.callback=g;this.callbackContext=b;this.args=d;this.pendingDelete=false};Phaser.TimerEvent.prototype.constructor=Phaser.TimerEvent;Phaser.AnimationManager=function(a){this.sprite=a;this.game=a.game;this.currentFrame=null;this.currentAnim=null;this.updateIfVisible=true;this.isLoaded=false;this._frameData=null;this._anims={};this._outputFrames=[]};Phaser.AnimationManager.prototype={loadFrameData:function(a,c){if(a===undefined){return false}if(this.isLoaded){for(var b in this._anims){this._anims[b].updateFrameData(a)}}this._frameData=a;if(c===undefined||c===null){this.frame=0}else{if(typeof c==="string"){this.frameName=c}else{this.frame=c}}this.isLoaded=true;return true},copyFrameData:function(a,c){this._frameData=a.clone();if(this.isLoaded){for(var b in this._anims){this._anims[b].updateFrameData(this._frameData)}}if(c===undefined||c===null){this.frame=0}else{if(typeof c==="string"){this.frameName=c}else{this.frame=c}}this.isLoaded=true;return true},add:function(d,e,c,b,a){e=e||[];c=c||60;if(b===undefined){b=false}if(a===undefined){if(e&&typeof e[0]==="number"){a=true}else{a=false}}this._outputFrames=[];this._frameData.getFrameIndexes(e,a,this._outputFrames);this._anims[d]=new Phaser.Animation(this.game,this.sprite,d,this._frameData,this._outputFrames,c,b);this.currentAnim=this._anims[d];if(this.sprite.tilingTexture){this.sprite.refreshTexture=true}return this._anims[d]},validateFrames:function(c,a){if(a===undefined){a=true}for(var b=0;b<c.length;b++){if(a===true){if(c[b]>this._frameData.total){return false}}else{if(this._frameData.checkFrameName(c[b])===false){return false}}}return true},play:function(d,c,b,a){if(this._anims[d]){if(this.currentAnim===this._anims[d]){if(this.currentAnim.isPlaying===false){this.currentAnim.paused=false;return this.currentAnim.play(c,b,a)}return this.currentAnim}else{if(this.currentAnim&&this.currentAnim.isPlaying){this.currentAnim.stop()}this.currentAnim=this._anims[d];this.currentAnim.paused=false;this.currentFrame=this.currentAnim.currentFrame;return this.currentAnim.play(c,b,a)}}},stop:function(b,a){if(a===undefined){a=false}if(this.currentAnim&&(typeof b!=="string"||b===this.currentAnim.name)){this.currentAnim.stop(a)}},update:function(){if(this.updateIfVisible&&!this.sprite.visible){return false}if(this.currentAnim&&this.currentAnim.update()){this.currentFrame=this.currentAnim.currentFrame;return true}return false},next:function(a){if(this.currentAnim){this.currentAnim.next(a);this.currentFrame=this.currentAnim.currentFrame}},previous:function(a){if(this.currentAnim){this.currentAnim.previous(a);this.currentFrame=this.currentAnim.currentFrame}},getAnimation:function(a){if(typeof a==="string"){if(this._anims[a]){return this._anims[a]}}return null},refreshFrame:function(){},destroy:function(){var a=null;for(var a in this._anims){if(this._anims.hasOwnProperty(a)){this._anims[a].destroy()}}this._anims={};this._outputFrames=[];this._frameData=null;this.currentAnim=null;this.currentFrame=null;this.sprite=null;this.game=null}};Phaser.AnimationManager.prototype.constructor=Phaser.AnimationManager;Object.defineProperty(Phaser.AnimationManager.prototype,"frameData",{get:function(){return this._frameData}});Object.defineProperty(Phaser.AnimationManager.prototype,"frameTotal",{get:function(){return this._frameData.total}});Object.defineProperty(Phaser.AnimationManager.prototype,"paused",{get:function(){return this.currentAnim.isPaused},set:function(a){this.currentAnim.paused=a}});Object.defineProperty(Phaser.AnimationManager.prototype,"name",{get:function(){if(this.currentAnim){return this.currentAnim.name}}});Object.defineProperty(Phaser.AnimationManager.prototype,"frame",{get:function(){if(this.currentFrame){return this.currentFrame.index}},set:function(a){if(typeof a==="number"&&this._frameData&&this._frameData.getFrame(a)!==null){this.currentFrame=this._frameData.getFrame(a);if(this.currentFrame){this.sprite.setFrame(this.currentFrame)}}}});Object.defineProperty(Phaser.AnimationManager.prototype,"frameName",{get:function(){if(this.currentFrame){return this.currentFrame.name}},set:function(a){if(typeof a==="string"&&this._frameData&&this._frameData.getFrameByName(a)!==null){this.currentFrame=this._frameData.getFrameByName(a);if(this.currentFrame){this._frameIndex=this.currentFrame.index;this.sprite.setFrame(this.currentFrame)}}else{console.warn("Cannot set frameName: "+a)}}});Phaser.Animation=function(b,f,d,e,g,c,a){if(a===undefined){a=false}this.game=b;this._parent=f;this._frameData=e;this.name=d;this._frames=[];this._frames=this._frames.concat(g);this.delay=1000/c;this.loop=a;this.loopCount=0;this.killOnComplete=false;this.isFinished=false;this.isPlaying=false;this.isPaused=false;
	this._pauseStartTime=0;this._frameIndex=0;this._frameDiff=0;this._frameSkip=1;this.currentFrame=this._frameData.getFrame(this._frames[this._frameIndex]);this.onStart=new Phaser.Signal();this.onUpdate=null;this.onComplete=new Phaser.Signal();this.onLoop=new Phaser.Signal();this.isReversed=false;this.game.onPause.add(this.onPause,this);this.game.onResume.add(this.onResume,this)};Phaser.Animation.prototype={play:function(c,b,a){if(typeof c==="number"){this.delay=1000/c}if(typeof b==="boolean"){this.loop=b}if(typeof a!=="undefined"){this.killOnComplete=a}this.isPlaying=true;this.isFinished=false;this.paused=false;this.loopCount=0;this._timeLastFrame=this.game.time.time;this._timeNextFrame=this.game.time.time+this.delay;this._frameIndex=this.isReversed?this._frames.length-1:0;this.updateCurrentFrame(false,true);this._parent.events.onAnimationStart$dispatch(this._parent,this);this.onStart.dispatch(this._parent,this);this._parent.animations.currentAnim=this;this._parent.animations.currentFrame=this.currentFrame;return this},restart:function(){this.isPlaying=true;this.isFinished=false;this.paused=false;this.loopCount=0;this._timeLastFrame=this.game.time.time;this._timeNextFrame=this.game.time.time+this.delay;this._frameIndex=0;this.currentFrame=this._frameData.getFrame(this._frames[this._frameIndex]);this._parent.setFrame(this.currentFrame);this._parent.animations.currentAnim=this;this._parent.animations.currentFrame=this.currentFrame;this.onStart.dispatch(this._parent,this)},reverse:function(){this.reversed=!this.reversed;return this},reverseOnce:function(){this.onComplete.addOnce(this.reverse,this);return this.reverse()},setFrame:function(c,a){var d;if(a===undefined){a=false}if(typeof c==="string"){for(var b=0;b<this._frames.length;b++){if(this._frameData.getFrame(this._frames[b]).name===c){d=b}}}else{if(typeof c==="number"){if(a){d=c}else{for(var b=0;b<this._frames.length;b++){if(this._frames[b]===c){d=b}}}}}if(d){this._frameIndex=d-1;this._timeNextFrame=this.game.time.time;this.update()}},stop:function(a,b){if(a===undefined){a=false}if(b===undefined){b=false}this.isPlaying=false;this.isFinished=true;this.paused=false;if(a){this.currentFrame=this._frameData.getFrame(this._frames[0]);this._parent.setFrame(this.currentFrame)}if(b){this._parent.events.onAnimationComplete$dispatch(this._parent,this);this.onComplete.dispatch(this._parent,this)}},onPause:function(){if(this.isPlaying){this._frameDiff=this._timeNextFrame-this.game.time.time}},onResume:function(){if(this.isPlaying){this._timeNextFrame=this.game.time.time+this._frameDiff}},update:function(){if(this.isPaused){return false}if(this.isPlaying&&this.game.time.time>=this._timeNextFrame){this._frameSkip=1;this._frameDiff=this.game.time.time-this._timeNextFrame;this._timeLastFrame=this.game.time.time;if(this._frameDiff>this.delay){this._frameSkip=Math.floor(this._frameDiff/this.delay);this._frameDiff-=(this._frameSkip*this.delay)}this._timeNextFrame=this.game.time.time+(this.delay-this._frameDiff);if(this.isReversed){this._frameIndex-=this._frameSkip}else{this._frameIndex+=this._frameSkip}if(!this.isReversed&&this._frameIndex>=this._frames.length||this.isReversed&&this._frameIndex<=-1){if(this.loop){this._frameIndex=Math.abs(this._frameIndex)%this._frames.length;if(this.isReversed){this._frameIndex=this._frames.length-1-this._frameIndex}this.currentFrame=this._frameData.getFrame(this._frames[this._frameIndex]);if(this.currentFrame){this._parent.setFrame(this.currentFrame)}this.loopCount++;this._parent.events.onAnimationLoop$dispatch(this._parent,this);this.onLoop.dispatch(this._parent,this);if(this.onUpdate){this.onUpdate.dispatch(this,this.currentFrame);return !!this._frameData}else{return true}}else{this.complete();return false}}else{return this.updateCurrentFrame(true)}}return false},updateCurrentFrame:function(c,b){if(b===undefined){b=false}if(!this._frameData){return false}var a=this.currentFrame.index;this.currentFrame=this._frameData.getFrame(this._frames[this._frameIndex]);if(this.currentFrame&&(b||(!b&&a!==this.currentFrame.index))){this._parent.setFrame(this.currentFrame)}if(this.onUpdate&&c){this.onUpdate.dispatch(this,this.currentFrame);return !!this._frameData}else{return true}},next:function(a){if(a===undefined){a=1}var b=this._frameIndex+a;if(b>=this._frames.length){if(this.loop){b%=this._frames.length}else{b=this._frames.length-1}}if(b!==this._frameIndex){this._frameIndex=b;this.updateCurrentFrame(true)}},previous:function(a){if(a===undefined){a=1}var b=this._frameIndex-a;if(b<0){if(this.loop){b=this._frames.length+b}else{b++}}if(b!==this._frameIndex){this._frameIndex=b;this.updateCurrentFrame(true)}},updateFrameData:function(a){this._frameData=a;this.currentFrame=this._frameData?this._frameData.getFrame(this._frames[this._frameIndex%this._frames.length]):null},destroy:function(){if(!this._frameData){return}this.game.onPause.remove(this.onPause,this);this.game.onResume.remove(this.onResume,this);this.game=null;this._parent=null;this._frames=null;this._frameData=null;
	this.currentFrame=null;this.isPlaying=false;this.onStart.dispose();this.onLoop.dispose();this.onComplete.dispose();if(this.onUpdate){this.onUpdate.dispose()}},complete:function(){this._frameIndex=this._frames.length-1;this.currentFrame=this._frameData.getFrame(this._frames[this._frameIndex]);this.isPlaying=false;this.isFinished=true;this.paused=false;this._parent.events.onAnimationComplete$dispatch(this._parent,this);this.onComplete.dispatch(this._parent,this);if(this.killOnComplete){this._parent.kill()}}};Phaser.Animation.prototype.constructor=Phaser.Animation;Object.defineProperty(Phaser.Animation.prototype,"paused",{get:function(){return this.isPaused},set:function(a){this.isPaused=a;if(a){this._pauseStartTime=this.game.time.time}else{if(this.isPlaying){this._timeNextFrame=this.game.time.time+this.delay}}}});Object.defineProperty(Phaser.Animation.prototype,"reversed",{get:function(){return this.isReversed},set:function(a){this.isReversed=a}});Object.defineProperty(Phaser.Animation.prototype,"frameTotal",{get:function(){return this._frames.length}});Object.defineProperty(Phaser.Animation.prototype,"frame",{get:function(){if(this.currentFrame!==null){return this.currentFrame.index}else{return this._frameIndex}},set:function(a){this.currentFrame=this._frameData.getFrame(this._frames[a]);if(this.currentFrame!==null){this._frameIndex=a;this._parent.setFrame(this.currentFrame);if(this.onUpdate){this.onUpdate.dispatch(this,this.currentFrame)}}}});Object.defineProperty(Phaser.Animation.prototype,"speed",{get:function(){return 1000/this.delay},set:function(a){if(a>0){this.delay=1000/a}}});Object.defineProperty(Phaser.Animation.prototype,"enableUpdate",{get:function(){return(this.onUpdate!==null)},set:function(a){if(a&&this.onUpdate===null){this.onUpdate=new Phaser.Signal()}else{if(!a&&this.onUpdate!==null){this.onUpdate.dispose();this.onUpdate=null}}}});Phaser.Animation.generateFrameNames=function(e,h,c,f,d){if(f===undefined){f=""}var a=[];var g="";if(h<c){for(var b=h;b<=c;b++){if(typeof d==="number"){g=Phaser.Utils.pad(b.toString(),d,"0",1)}else{g=b.toString()}g=e+g+f;a.push(g)}}else{for(var b=h;b>=c;b--){if(typeof d==="number"){g=Phaser.Utils.pad(b.toString(),d,"0",1)}else{g=b.toString()}g=e+g+f;a.push(g)}}return a};Phaser.Frame=function(d,b,f,e,a,c){this.index=d;this.x=b;this.y=f;this.width=e;this.height=a;this.name=c;this.centerX=Math.floor(e/2);this.centerY=Math.floor(a/2);this.distance=Phaser.Math.distance(0,0,e,a);this.rotated=false;this.rotationDirection="cw";this.trimmed=false;this.sourceSizeW=e;this.sourceSizeH=a;this.spriteSourceSizeX=0;this.spriteSourceSizeY=0;this.spriteSourceSizeW=0;this.spriteSourceSizeH=0;this.right=this.x+this.width;this.bottom=this.y+this.height};Phaser.Frame.prototype={resize:function(b,a){this.width=b;this.height=a;this.centerX=Math.floor(b/2);this.centerY=Math.floor(a/2);this.distance=Phaser.Math.distance(0,0,b,a);this.sourceSizeW=b;this.sourceSizeH=a;this.right=this.x+b;this.bottom=this.y+a},setTrim:function(e,d,g,b,a,c,f){this.trimmed=e;if(e){this.sourceSizeW=d;this.sourceSizeH=g;this.centerX=Math.floor(d/2);this.centerY=Math.floor(g/2);this.spriteSourceSizeX=b;this.spriteSourceSizeY=a;this.spriteSourceSizeW=c;this.spriteSourceSizeH=f}},clone:function(){var a=new Phaser.Frame(this.index,this.x,this.y,this.width,this.height,this.name);for(var b in this){if(this.hasOwnProperty(b)){a[b]=this[b]}}return a},getRect:function(a){if(a===undefined){a=new Phaser.Rectangle(this.x,this.y,this.width,this.height)}else{a.setTo(this.x,this.y,this.width,this.height)}return a}};Phaser.Frame.prototype.constructor=Phaser.Frame;Phaser.FrameData=function(){this._frames=[];this._frameNames=[]};Phaser.FrameData.prototype={addFrame:function(a){a.index=this._frames.length;this._frames.push(a);if(a.name!==""){this._frameNames[a.name]=a.index}return a},getFrame:function(a){if(a>=this._frames.length){a=0}return this._frames[a]},getFrameByName:function(a){if(typeof this._frameNames[a]==="number"){return this._frames[this._frameNames[a]]}return null},checkFrameName:function(a){if(this._frameNames[a]==null){return false}return true},clone:function(){var a=new Phaser.FrameData();for(var b=0;b<this._frames.length;b++){a._frames.push(this._frames[b].clone())}for(var c in this._frameNames){if(this._frameNames.hasOwnProperty(c)){a._frameNames.push(this._frameNames[c])}}return a},getFrameRange:function(d,a,b){if(b===undefined){b=[]}for(var c=d;c<=a;c++){b.push(this._frames[c])}return b},getFrames:function(d,a,b){if(a===undefined){a=true}if(b===undefined){b=[]}if(d===undefined||d.length===0){for(var c=0;c<this._frames.length;c++){b.push(this._frames[c])}}else{for(var c=0;c<d.length;c++){if(a){b.push(this.getFrame(d[c]))}else{b.push(this.getFrameByName(d[c]))}}}return b},getFrameIndexes:function(d,a,b){if(a===undefined){a=true}if(b===undefined){b=[]}if(d===undefined||d.length===0){for(var c=0;c<this._frames.length;c++){b.push(this._frames[c].index)}}else{for(var c=0;c<d.length;c++){if(a&&this._frames[d[c]]){b.push(this._frames[d[c]].index)
}else{if(this.getFrameByName(d[c])){b.push(this.getFrameByName(d[c]).index)}}}}return b},destroy:function(){this._frames=null;this._frameNames=null}};Phaser.FrameData.prototype.constructor=Phaser.FrameData;Object.defineProperty(Phaser.FrameData.prototype,"total",{get:function(){return this._frames.length}});Phaser.AnimationParser={spriteSheet:function(q,o,m,d,c,e,j){var h=o;if(typeof o==="string"){h=q.cache.getImage(o)}if(h===null){return null}var a=h.width;var p=h.height;if(m<=0){m=Math.floor(-a/Math.min(-1,m))}if(d<=0){d=Math.floor(-p/Math.min(-1,d))}var r=Math.floor((a-e)/(m+j));var b=Math.floor((p-e)/(d+j));var l=r*b;if(c!==-1){l=c}if(a===0||p===0||a<m||p<d||l===0){console.warn("Phaser.AnimationParser.spriteSheet: '"+o+"'s width/height zero or width/height < given frameWidth/frameHeight");return null}var g=new Phaser.FrameData();var n=e;var k=e;for(var f=0;f<l;f++){g.addFrame(new Phaser.Frame(f,n,k,m,d,""));n+=m+j;if(n+m>a){n=e;k+=d+j}}return g},JSONData:function(a,c){if(!c["frames"]){console.warn("Phaser.AnimationParser.JSONData: Invalid Texture Atlas JSON given, missing 'frames' array");console.log(c);return}var d=new Phaser.FrameData();var e=c["frames"];var f;for(var b=0;b<e.length;b++){f=d.addFrame(new Phaser.Frame(b,e[b].frame.x,e[b].frame.y,e[b].frame.w,e[b].frame.h,e[b].filename));if(e[b].trimmed){f.setTrim(e[b].trimmed,e[b].sourceSize.w,e[b].sourceSize.h,e[b].spriteSourceSize.x,e[b].spriteSourceSize.y,e[b].spriteSourceSize.w,e[b].spriteSourceSize.h)}}return d},JSONDataPyxel:function(g,h){var a=["layers","tilewidth","tileheight","tileswide","tileshigh"];a.forEach(function(i){if(!h[i]){console.warn('Phaser.AnimationParser.JSONDataPyxel: Invalid Pyxel Tilemap JSON given, missing "'+i+'" key.');console.log(h);return}});if(h["layers"].length!==1){console.warn("Phaser.AnimationParser.JSONDataPyxel: Too many layers, this parser only supports flat Tilemaps.");console.log(h);return}var d=new Phaser.FrameData();var b=h["tileheight"];var j=h["tilewidth"];var f=h["layers"][0]["tiles"];var e;for(var c=0;c<f.length;c++){e=d.addFrame(new Phaser.Frame(c,f[c].x,f[c].y,j,b,"frame_"+c));e.setTrim(false)}return d},JSONDataHash:function(a,d){if(!d["frames"]){console.warn("Phaser.AnimationParser.JSONDataHash: Invalid Texture Atlas JSON given, missing 'frames' object");console.log(d);return}var e=new Phaser.FrameData();var f=d["frames"];var g;var c=0;for(var b in f){g=e.addFrame(new Phaser.Frame(c,f[b].frame.x,f[b].frame.y,f[b].frame.w,f[b].frame.h,b));if(f[b].trimmed){g.setTrim(f[b].trimmed,f[b].sourceSize.w,f[b].sourceSize.h,f[b].spriteSourceSize.x,f[b].spriteSourceSize.y,f[b].spriteSourceSize.w,f[b].spriteSourceSize.h)}c++}return e},XMLData:function(q,h){if(!h.getElementsByTagName("TextureAtlas")){console.warn("Phaser.AnimationParser.XMLData: Invalid Texture Atlas XML given, missing <TextureAtlas> tag");return}var f=new Phaser.FrameData();var j=h.getElementsByTagName("SubTexture");var g;var a;var c;var n;var l;var b;var p;var o;var m;var k;var d;for(var e=0;e<j.length;e++){c=j[e].attributes;a=c.name.value;n=parseInt(c.x.value,10);l=parseInt(c.y.value,10);b=parseInt(c.width.value,10);p=parseInt(c.height.value,10);o=null;m=null;if(c.frameX){o=Math.abs(parseInt(c.frameX.value,10));m=Math.abs(parseInt(c.frameY.value,10));k=parseInt(c.frameWidth.value,10);d=parseInt(c.frameHeight.value,10)}g=f.addFrame(new Phaser.Frame(e,n,l,b,p,a));if(o!==null||m!==null){g.setTrim(true,b,p,o,m,k,d)}}return f}};Phaser.Cache=function(a){this.game=a;this.autoResolveURL=false;this._cache={canvas:{},image:{},texture:{},sound:{},video:{},text:{},json:{},xml:{},physics:{},tilemap:{},binary:{},bitmapData:{},bitmapFont:{},shader:{},renderTexture:{}};this._urlMap={};this._urlResolver=new Image();this._urlTemp=null;this.onSoundUnlock=new Phaser.Signal();this._cacheMap=[];this._cacheMap[Phaser.Cache.CANVAS]=this._cache.canvas;this._cacheMap[Phaser.Cache.IMAGE]=this._cache.image;this._cacheMap[Phaser.Cache.TEXTURE]=this._cache.texture;this._cacheMap[Phaser.Cache.SOUND]=this._cache.sound;this._cacheMap[Phaser.Cache.TEXT]=this._cache.text;this._cacheMap[Phaser.Cache.PHYSICS]=this._cache.physics;this._cacheMap[Phaser.Cache.TILEMAP]=this._cache.tilemap;this._cacheMap[Phaser.Cache.BINARY]=this._cache.binary;this._cacheMap[Phaser.Cache.BITMAPDATA]=this._cache.bitmapData;this._cacheMap[Phaser.Cache.BITMAPFONT]=this._cache.bitmapFont;this._cacheMap[Phaser.Cache.JSON]=this._cache.json;this._cacheMap[Phaser.Cache.XML]=this._cache.xml;this._cacheMap[Phaser.Cache.VIDEO]=this._cache.video;this._cacheMap[Phaser.Cache.SHADER]=this._cache.shader;this._cacheMap[Phaser.Cache.RENDER_TEXTURE]=this._cache.renderTexture;this.addDefaultImage();this.addMissingImage()};Phaser.Cache.CANVAS=1;Phaser.Cache.IMAGE=2;Phaser.Cache.TEXTURE=3;Phaser.Cache.SOUND=4;Phaser.Cache.TEXT=5;Phaser.Cache.PHYSICS=6;Phaser.Cache.TILEMAP=7;Phaser.Cache.BINARY=8;Phaser.Cache.BITMAPDATA=9;Phaser.Cache.BITMAPFONT=10;Phaser.Cache.JSON=11;Phaser.Cache.XML=12;Phaser.Cache.VIDEO=13;Phaser.Cache.SHADER=14;
Phaser.Cache.RENDER_TEXTURE=15;Phaser.Cache.DEFAULT=null;Phaser.Cache.MISSING=null;Phaser.Cache.prototype={addCanvas:function(c,a,b){if(b===undefined){b=a.getContext("2d")}this._cache.canvas[c]={canvas:a,context:b}},addImage:function(c,b,d){if(this.checkImageKey(c)){this.removeImage(c)}var a={key:c,url:b,data:d,base:new PIXI.BaseTexture(d),frame:new Phaser.Frame(0,0,0,d.width,d.height,c),frameData:new Phaser.FrameData()};a.frameData.addFrame(new Phaser.Frame(0,0,0,d.width,d.height,b));this._cache.image[c]=a;this._resolveURL(b,a);if(c==="__default"){Phaser.Cache.DEFAULT=new PIXI.Texture(a.base)}else{if(c==="__missing"){Phaser.Cache.MISSING=new PIXI.Texture(a.base)}}return a},addDefaultImage:function(){var a=new Image();a.src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgAQMAAABJtOi3AAAAA1BMVEX///+nxBvIAAAAAXRSTlMAQObYZgAAABVJREFUeF7NwIEAAAAAgKD9qdeocAMAoAABm3DkcAAAAABJRU5ErkJggg==";var b=this.addImage("__default",null,a);b.base.skipRender=true;Phaser.Cache.DEFAULT=new PIXI.Texture(b.base)},addMissingImage:function(){var a=new Image();a.src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAIAAAD8GO2jAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAJ9JREFUeNq01ssOwyAMRFG46v//Mt1ESmgh+DFmE2GPOBARKb2NVjo+17PXLD8a1+pl5+A+wSgFygymWYHBb0FtsKhJDdZlncG2IzJ4ayoMDv20wTmSMzClEgbWYNTAkQ0Z+OJ+A/eWnAaR9+oxCF4Os0H8htsMUp+pwcgBBiMNnAwF8GqIgL2hAzaGFFgZauDPKABmowZ4GL369/0rwACp2yA/ttmvsQAAAABJRU5ErkJggg==";var b=this.addImage("__missing",null,a);Phaser.Cache.MISSING=new PIXI.Texture(b.base)},addSound:function(d,c,f,b,e){if(b===undefined){b=true;e=false}if(e===undefined){b=false;e=true}var a=false;if(e){a=true}this._cache.sound[d]={url:c,data:f,isDecoding:false,decoded:a,webAudio:b,audioTag:e,locked:this.game.sound.touchLocked};this._resolveURL(c,this._cache.sound[d])},addText:function(b,a,c){this._cache.text[b]={url:a,data:c};this._resolveURL(a,this._cache.text[b])},addPhysicsData:function(b,a,c,d){this._cache.physics[b]={url:a,data:c,format:d};this._resolveURL(a,this._cache.physics[b])},addTilemap:function(b,a,d,c){this._cache.tilemap[b]={url:a,data:d,format:c};this._resolveURL(a,this._cache.tilemap[b])},addBinary:function(b,a){this._cache.binary[b]=a},addBitmapData:function(a,c,b){c.key=a;if(b===undefined){b=new Phaser.FrameData();b.addFrame(c.textureFrame)}this._cache.bitmapData[a]={data:c,frameData:b};return c},addBitmapFont:function(d,c,g,b,a,f,e){var h={url:c,data:g,font:null,base:new PIXI.BaseTexture(g)};if(f===undefined){f=0}if(e===undefined){e=0}if(a==="json"){h.font=Phaser.LoaderParser.jsonBitmapFont(b,h.base,f,e)}else{h.font=Phaser.LoaderParser.xmlBitmapFont(b,h.base,f,e)}this._cache.bitmapFont[d]=h;this._resolveURL(c,h)},addJSON:function(b,a,c){this._cache.json[b]={url:a,data:c};this._resolveURL(a,this._cache.json[b])},addXML:function(b,a,c){this._cache.xml[b]={url:a,data:c};this._resolveURL(a,this._cache.xml[b])},addVideo:function(c,b,d,a){this._cache.video[c]={url:b,data:d,isBlob:a,locked:true};this._resolveURL(b,this._cache.video[c])},addShader:function(b,a,c){this._cache.shader[b]={url:a,data:c};this._resolveURL(a,this._cache.shader[b])},addRenderTexture:function(a,b){this._cache.renderTexture[a]={texture:b,frame:new Phaser.Frame(0,0,0,b.width,b.height,"","")}},addSpriteSheet:function(i,a,f,h,c,b,d,g){if(b===undefined){b=-1}if(d===undefined){d=0}if(g===undefined){g=0}var e={key:i,url:a,data:f,frameWidth:h,frameHeight:c,margin:d,spacing:g,base:new PIXI.BaseTexture(f),frameData:Phaser.AnimationParser.spriteSheet(this.game,f,h,c,b,d,g)};this._cache.image[i]=e;this._resolveURL(a,e)},addTextureAtlas:function(c,b,d,a,f){var e={key:c,url:b,data:d,base:new PIXI.BaseTexture(d)};if(f===Phaser.Loader.TEXTURE_ATLAS_XML_STARLING){e.frameData=Phaser.AnimationParser.XMLData(this.game,a,c)}else{if(f===Phaser.Loader.TEXTURE_ATLAS_JSON_PYXEL){e.frameData=Phaser.AnimationParser.JSONDataPyxel(this.game,a,c)}else{if(Array.isArray(a.frames)){e.frameData=Phaser.AnimationParser.JSONData(this.game,a,c)}else{e.frameData=Phaser.AnimationParser.JSONDataHash(this.game,a,c)}}}this._cache.image[c]=e;this._resolveURL(b,e)},reloadSound:function(a){var c=this;var b=this.getSound(a);if(b){b.data.src=b.url;b.data.addEventListener("canplaythrough",function(){return c.reloadSoundComplete(a)},false);b.data.load()}},reloadSoundComplete:function(a){var b=this.getSound(a);if(b){b.locked=false;this.onSoundUnlock.dispatch(a)}},updateSound:function(a,c,b){var d=this.getSound(a);if(d){d[c]=b}},decodedSound:function(a,b){var c=this.getSound(a);c.data=b;c.decoded=true;c.isDecoding=false},isSoundDecoded:function(a){var b=this.getItem(a,Phaser.Cache.SOUND,"isSoundDecoded");if(b){return b.decoded}},isSoundReady:function(a){var b=this.getItem(a,Phaser.Cache.SOUND,"isSoundDecoded");if(b){return(b.decoded&&!this.game.sound.touchLocked)}},checkKey:function(a,b){if(this._cacheMap[a][b]){return true}return false},checkURL:function(a){if(this._urlMap[this._resolveURL(a)]){return true}return false},checkCanvasKey:function(a){return this.checkKey(Phaser.Cache.CANVAS,a)
},checkImageKey:function(a){return this.checkKey(Phaser.Cache.IMAGE,a)},checkTextureKey:function(a){return this.checkKey(Phaser.Cache.TEXTURE,a)},checkSoundKey:function(a){return this.checkKey(Phaser.Cache.SOUND,a)},checkTextKey:function(a){return this.checkKey(Phaser.Cache.TEXT,a)},checkPhysicsKey:function(a){return this.checkKey(Phaser.Cache.PHYSICS,a)},checkTilemapKey:function(a){return this.checkKey(Phaser.Cache.TILEMAP,a)},checkBinaryKey:function(a){return this.checkKey(Phaser.Cache.BINARY,a)},checkBitmapDataKey:function(a){return this.checkKey(Phaser.Cache.BITMAPDATA,a)},checkBitmapFontKey:function(a){return this.checkKey(Phaser.Cache.BITMAPFONT,a)},checkJSONKey:function(a){return this.checkKey(Phaser.Cache.JSON,a)},checkXMLKey:function(a){return this.checkKey(Phaser.Cache.XML,a)},checkVideoKey:function(a){return this.checkKey(Phaser.Cache.VIDEO,a)},checkShaderKey:function(a){return this.checkKey(Phaser.Cache.SHADER,a)},checkRenderTextureKey:function(a){return this.checkKey(Phaser.Cache.RENDER_TEXTURE,a)},getItem:function(b,a,d,c){if(!this.checkKey(a,b)){if(d){console.warn("Phaser.Cache."+d+': Key "'+b+'" not found in Cache.')}}else{if(c===undefined){return this._cacheMap[a][b]}else{return this._cacheMap[a][b][c]}}return null},getCanvas:function(a){return this.getItem(a,Phaser.Cache.CANVAS,"getCanvas","canvas")},getImage:function(c,b){if(c===undefined||c===null){c="__default"}if(b===undefined){b=false}var a=this.getItem(c,Phaser.Cache.IMAGE,"getImage");if(a===null){a=this.getItem("__missing",Phaser.Cache.IMAGE,"getImage")}if(b){return a}else{return a.data}},getTextureFrame:function(a){return this.getItem(a,Phaser.Cache.TEXTURE,"getTextureFrame","frame")},getSound:function(a){return this.getItem(a,Phaser.Cache.SOUND,"getSound")},getSoundData:function(a){return this.getItem(a,Phaser.Cache.SOUND,"getSoundData","data")},getText:function(a){return this.getItem(a,Phaser.Cache.TEXT,"getText","data")},getPhysicsData:function(c,b,a){var f=this.getItem(c,Phaser.Cache.PHYSICS,"getPhysicsData","data");if(f===null||b===undefined||b===null){return f}else{if(f[b]){var d=f[b];if(d&&a){for(var e in d){e=d[e];if(e.fixtureKey===a){return e}}console.warn('Phaser.Cache.getPhysicsData: Could not find given fixtureKey: "'+a+" in "+c+'"')}else{return d}}else{console.warn('Phaser.Cache.getPhysicsData: Invalid key/object: "'+c+" / "+b+'"')}}return null},getTilemapData:function(a){return this.getItem(a,Phaser.Cache.TILEMAP,"getTilemapData")},getBinary:function(a){return this.getItem(a,Phaser.Cache.BINARY,"getBinary")},getBitmapData:function(a){return this.getItem(a,Phaser.Cache.BITMAPDATA,"getBitmapData","data")},getBitmapFont:function(a){return this.getItem(a,Phaser.Cache.BITMAPFONT,"getBitmapFont")},getJSON:function(a,c){var b=this.getItem(a,Phaser.Cache.JSON,"getJSON","data");if(b){if(c){return Phaser.Utils.extend(true,Array.isArray(b)?[]:{},b)}else{return b}}else{return null}},getXML:function(a){return this.getItem(a,Phaser.Cache.XML,"getXML","data")},getVideo:function(a){return this.getItem(a,Phaser.Cache.VIDEO,"getVideo")},getShader:function(a){return this.getItem(a,Phaser.Cache.SHADER,"getShader","data")},getRenderTexture:function(a){return this.getItem(a,Phaser.Cache.RENDER_TEXTURE,"getRenderTexture")},getBaseTexture:function(b,a){if(a===undefined){a=Phaser.Cache.IMAGE}return this.getItem(b,a,"getBaseTexture","base")},getFrame:function(b,a){if(a===undefined){a=Phaser.Cache.IMAGE}return this.getItem(b,a,"getFrame","frame")},getFrameCount:function(b,a){var c=this.getFrameData(b,a);if(c){return c.total}else{return 0}},getFrameData:function(b,a){if(a===undefined){a=Phaser.Cache.IMAGE}return this.getItem(b,a,"getFrameData","frameData")},hasFrameData:function(b,a){if(a===undefined){a=Phaser.Cache.IMAGE}return(this.getItem(b,a,"","frameData")!==null)},updateFrameData:function(b,c,a){if(a===undefined){a=Phaser.Cache.IMAGE}if(this._cacheMap[a][b]){this._cacheMap[a][b].frameData=c}},getFrameByIndex:function(c,b,a){var d=this.getFrameData(c,a);if(d){return d.getFrame(b)}else{return null}},getFrameByName:function(c,b,a){var d=this.getFrameData(c,a);if(d){return d.getFrameByName(b)}else{return null}},getURL:function(a){var a=this._resolveURL(a);if(a){return this._urlMap[a]}else{console.warn('Phaser.Cache.getUrl: Invalid url: "'+a+'" or Cache.autoResolveURL was false');return null}},getKeys:function(a){if(a===undefined){a=Phaser.Cache.IMAGE}var b=[];if(this._cacheMap[a]){for(var c in this._cacheMap[a]){if(c!=="__default"&&c!=="__missing"){b.push(c)}}}return b},removeCanvas:function(a){delete this._cache.canvas[a]},removeImage:function(b,c){if(c===undefined){c=true}var a=this.getImage(b,true);if(c&&a.base){a.base.destroy()}delete this._cache.image[b]},removeSound:function(a){delete this._cache.sound[a]},removeText:function(a){delete this._cache.text[a]},removePhysics:function(a){delete this._cache.physics[a]},removeTilemap:function(a){delete this._cache.tilemap[a]},removeBinary:function(a){delete this._cache.binary[a]},removeBitmapData:function(a){delete this._cache.bitmapData[a]
},removeBitmapFont:function(a){delete this._cache.bitmapFont[a]},removeJSON:function(a){delete this._cache.json[a]},removeXML:function(a){delete this._cache.xml[a]},removeVideo:function(a){delete this._cache.video[a]},removeShader:function(a){delete this._cache.shader[a]},removeRenderTexture:function(a){delete this._cache.renderTexture[a]},removeSpriteSheet:function(a){delete this._cache.spriteSheet[a]},removeTextureAtlas:function(a){delete this._cache.atlas[a]},clearGLTextures:function(){for(var a in this._cache.image){this._cache.image[a].base._glTextures=[]}},_resolveURL:function(a,b){if(!this.autoResolveURL){return null}this._urlResolver.src=this.game.load.baseURL+a;this._urlTemp=this._urlResolver.src;this._urlResolver.src="";if(b){this._urlMap[this._urlTemp]=b}return this._urlTemp},destroy:function(){for(var c=0;c<this._cacheMap.length;c++){var a=this._cacheMap[c];for(var b in a){if(b!=="__default"&&b!=="__missing"){if(a[b]["destroy"]){a[b].destroy()}delete a[b]}}}this._urlMap=null;this._urlResolver=null;this._urlTemp=null}};Phaser.Cache.prototype.constructor=Phaser.Cache;Phaser.Loader=function(a){this.game=a;this.cache=a.cache;this.resetLocked=false;this.isLoading=false;this.hasLoaded=false;this.preloadSprite=null;this.crossOrigin=false;this.baseURL="";this.path="";this.headers={"requestedWith":false,"json":"application/json","xml":"application/xml"};this.onLoadStart=new Phaser.Signal();this.onLoadComplete=new Phaser.Signal();this.onPackComplete=new Phaser.Signal();this.onFileStart=new Phaser.Signal();this.onFileComplete=new Phaser.Signal();this.onFileError=new Phaser.Signal();this.useXDomainRequest=false;this._warnedAboutXDomainRequest=false;this.enableParallel=true;this.maxParallelDownloads=4;this._withSyncPointDepth=0;this._fileList=[];this._flightQueue=[];this._processingHead=0;this._fileLoadStarted=false;this._totalPackCount=0;this._totalFileCount=0;this._loadedPackCount=0;this._loadedFileCount=0};Phaser.Loader.TEXTURE_ATLAS_JSON_ARRAY=0;Phaser.Loader.TEXTURE_ATLAS_JSON_HASH=1;Phaser.Loader.TEXTURE_ATLAS_XML_STARLING=2;Phaser.Loader.PHYSICS_LIME_CORONA_JSON=3;Phaser.Loader.PHYSICS_PHASER_JSON=4;Phaser.Loader.TEXTURE_ATLAS_JSON_PYXEL=5;Phaser.Loader.prototype={setPreloadSprite:function(a,b){b=b||0;this.preloadSprite={sprite:a,direction:b,width:a.width,height:a.height,rect:null};if(b===0){this.preloadSprite.rect=new Phaser.Rectangle(0,0,1,a.height)}else{this.preloadSprite.rect=new Phaser.Rectangle(0,0,a.width,1)}a.crop(this.preloadSprite.rect);a.visible=true},resize:function(){if(this.preloadSprite&&this.preloadSprite.height!==this.preloadSprite.sprite.height){this.preloadSprite.rect.height=this.preloadSprite.sprite.height}},checkKeyExists:function(b,a){return this.getAssetIndex(b,a)>-1},getAssetIndex:function(d,c){var e=-1;for(var b=0;b<this._fileList.length;b++){var a=this._fileList[b];if(a.type===d&&a.key===c){e=b;if(!a.loaded&&!a.loading){break}}}return e},getAsset:function(b,a){var c=this.getAssetIndex(b,a);if(c>-1){return{index:c,file:this._fileList[c]}}return false},reset:function(b,a){if(a===undefined){a=false}if(this.resetLocked){return}if(b){this.preloadSprite=null}this.isLoading=false;this._processingHead=0;this._fileList.length=0;this._flightQueue.length=0;this._fileLoadStarted=false;this._totalFileCount=0;this._totalPackCount=0;this._loadedPackCount=0;this._loadedFileCount=0;if(a){this.onLoadStart.removeAll();this.onLoadComplete.removeAll();this.onPackComplete.removeAll();this.onFileStart.removeAll();this.onFileComplete.removeAll();this.onFileError.removeAll()}},addToFileList:function(h,j,b,g,f,i){if(f===undefined){f=false}if(j===undefined||j===""){console.warn("Phaser.Loader: Invalid or no key given of type "+h);return this}if(b===undefined||b===null){if(i){b=j+i}else{console.warn("Phaser.Loader: No URL given for file type: "+h+" key: "+j);return this}}var e={type:h,key:j,path:this.path,url:b,syncPoint:this._withSyncPointDepth>0,data:null,loading:false,loaded:false,error:false};if(g){for(var a in g){e[a]=g[a]}}var d=this.getAssetIndex(h,j);if(f&&d>-1){var c=this._fileList[d];if(!c.loading&&!c.loaded){this._fileList[d]=e}else{this._fileList.push(e);this._totalFileCount++}}else{if(d===-1){this._fileList.push(e);this._totalFileCount++}}return this},replaceInFileList:function(d,c,a,b){return this.addToFileList(d,c,a,b,true)},pack:function(f,b,g,a){if(b===undefined){b=null}if(g===undefined){g=null}if(a===undefined){a=null}if(!b&&!g){console.warn("Phaser.Loader.pack - Both url and data are null. One must be set.");return this}var e={type:"packfile",key:f,url:b,path:this.path,syncPoint:true,data:null,loading:false,loaded:false,error:false,callbackContext:a};if(g){if(typeof g==="string"){g=JSON.parse(g)}e.data=g||{};e.loaded=true}for(var d=0;d<this._fileList.length+1;d++){var c=this._fileList[d];if(!c||(!c.loaded&&!c.loading&&c.type!=="packfile")){this._fileList.splice(d,0,e);this._totalPackCount++;break}}return this},image:function(c,b,a){return this.addToFileList("image",c,b,undefined,a,".png")
},images:function(b,c){if(Array.isArray(c)){for(var a=0;a<b.length;a++){this.image(b[a],c[a])}}else{for(var a=0;a<b.length;a++){this.image(b[a])}}return this},text:function(c,b,a){return this.addToFileList("text",c,b,undefined,a,".txt")},json:function(c,b,a){return this.addToFileList("json",c,b,undefined,a,".json")},shader:function(c,b,a){return this.addToFileList("shader",c,b,undefined,a,".frag")},xml:function(c,b,a){return this.addToFileList("xml",c,b,undefined,a,".xml")},script:function(c,b,d,a){if(d===undefined){d=false}if(d!==false&&a===undefined){a=this}return this.addToFileList("script",c,b,{syncPoint:true,callback:d,callbackContext:a},false,".js")},binary:function(c,b,d,a){if(d===undefined){d=false}if(d!==false&&a===undefined){a=d}return this.addToFileList("binary",c,b,{callback:d,callbackContext:a},false,".bin")},spritesheet:function(d,c,a,b,f,e,g){if(f===undefined){f=-1}if(e===undefined){e=0}if(g===undefined){g=0}return this.addToFileList("spritesheet",d,c,{frameWidth:a,frameHeight:b,frameMax:f,margin:e,spacing:g},false,".png")},audio:function(b,c,a){if(this.game.sound.noAudio){return this}if(a===undefined){a=true}if(typeof c==="string"){c=[c]}return this.addToFileList("audio",b,c,{buffer:null,autoDecode:a})},audioSprite:function(b,e,d,c,a){if(this.game.sound.noAudio){return this}if(d===undefined){d=null}if(c===undefined){c=null}if(a===undefined){a=true}this.audio(b,e,a);if(d){this.json(b+"-audioatlas",d)}else{if(c){if(typeof c==="string"){c=JSON.parse(c)}this.cache.addJSON(b+"-audioatlas","",c)}else{console.warn("Phaser.Loader.audiosprite - You must specify either a jsonURL or provide a jsonData object")}}return this},audiosprite:function(b,e,d,c,a){return this.audioSprite(b,e,d,c,a)},video:function(b,d,c,a){if(c===undefined){if(this.game.device.firefox){c="loadeddata"}else{c="canplaythrough"}}if(a===undefined){a=false}if(typeof d==="string"){d=[d]}return this.addToFileList("video",b,d,{buffer:null,asBlob:a,loadEvent:c})},tilemap:function(b,a,c,d){if(a===undefined){a=null}if(c===undefined){c=null}if(d===undefined){d=Phaser.Tilemap.CSV}if(!a&&!c){if(d===Phaser.Tilemap.CSV){a=b+".csv"}else{a=b+".json"}}if(c){switch(d){case Phaser.Tilemap.CSV:break;case Phaser.Tilemap.TILED_JSON:if(typeof c==="string"){c=JSON.parse(c)}break}this.cache.addTilemap(b,null,c,d)}else{this.addToFileList("tilemap",b,a,{format:d})}return this},physics:function(b,a,c,d){if(a===undefined){a=null}if(c===undefined){c=null}if(d===undefined){d=Phaser.Physics.LIME_CORONA_JSON}if(!a&&!c){a=b+".json"}if(c){if(typeof c==="string"){c=JSON.parse(c)}this.cache.addPhysicsData(b,null,c,d)}else{this.addToFileList("physics",b,a,{format:d})}return this},bitmapFont:function(h,a,i,b,g,f){if(a===undefined||a===null){a=h+".png"}if(i===undefined){i=null}if(b===undefined){b=null}if(i===null&&b===null){i=h+".xml"}if(g===undefined){g=0}if(f===undefined){f=0}if(i){this.addToFileList("bitmapfont",h,a,{atlasURL:i,xSpacing:g,ySpacing:f})}else{if(typeof b==="string"){var j,c;try{j=JSON.parse(b)}catch(d){c=this.parseXml(b)}if(!c&&!j){throw new Error("Phaser.Loader. Invalid Bitmap Font atlas given")}this.addToFileList("bitmapfont",h,a,{atlasURL:null,atlasData:j||c,atlasType:(!!j?"json":"xml"),xSpacing:g,ySpacing:f})}}return this},atlasJSONArray:function(c,b,d,a){return this.atlas(c,b,d,a,Phaser.Loader.TEXTURE_ATLAS_JSON_ARRAY)},atlasJSONHash:function(c,b,d,a){return this.atlas(c,b,d,a,Phaser.Loader.TEXTURE_ATLAS_JSON_HASH)},atlasXML:function(c,b,d,a){if(d===undefined){d=null}if(a===undefined){a=null}if(!d&&!a){d=c+".xml"}return this.atlas(c,b,d,a,Phaser.Loader.TEXTURE_ATLAS_XML_STARLING)},atlas:function(d,c,e,a,f){if(c===undefined||c===null){c=d+".png"}if(e===undefined){e=null}if(a===undefined){a=null}if(f===undefined){f=Phaser.Loader.TEXTURE_ATLAS_JSON_ARRAY}if(!e&&!a){if(f===Phaser.Loader.TEXTURE_ATLAS_XML_STARLING){e=d+".xml"}else{e=d+".json"}}if(e){this.addToFileList("textureatlas",d,c,{atlasURL:e,format:f})}else{switch(f){case Phaser.Loader.TEXTURE_ATLAS_JSON_ARRAY:if(typeof a==="string"){a=JSON.parse(a)}break;case Phaser.Loader.TEXTURE_ATLAS_XML_STARLING:if(typeof a==="string"){var b=this.parseXml(a);if(!b){throw new Error("Phaser.Loader. Invalid Texture Atlas XML given")}a=b}break}this.addToFileList("textureatlas",d,c,{atlasURL:null,atlasData:a,format:f})}return this},withSyncPoint:function(b,a){this._withSyncPointDepth++;try{b.call(a||this,this)}finally{this._withSyncPointDepth--}return this},addSyncPoint:function(c,a){var b=this.getAsset(c,a);if(b){b.file.syncPoint=true}return this},removeFile:function(c,a){var b=this.getAsset(c,a);if(b){if(!b.loaded&&!b.loading){this._fileList.splice(b.index,1)}}},removeAll:function(){this._fileList.length=0;this._flightQueue.length=0},start:function(){if(this.isLoading){return}this.hasLoaded=false;this.isLoading=true;this.updateProgress();this.processLoadQueue()},processLoadQueue:function(){if(!this.isLoading){console.warn("Phaser.Loader - active loading canceled / reset");this.finishedLoading(true);return}for(var d=0;
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         d<this._flightQueue.length;d++){var c=this._flightQueue[d];if(c.loaded||c.error){this._flightQueue.splice(d,1);d--;c.loading=false;c.requestUrl=null;c.requestObject=null;if(c.error){this.onFileError.dispatch(c.key,c)}if(c.type!=="packfile"){this._loadedFileCount++;this.onFileComplete.dispatch(this.progress,c.key,!c.error,this._loadedFileCount,this._totalFileCount)}else{if(c.type==="packfile"&&c.error){this._loadedPackCount++;this.onPackComplete.dispatch(c.key,!c.error,this._loadedPackCount,this._totalPackCount)}}}}var a=false;var b=this.enableParallel?Phaser.Math.clamp(this.maxParallelDownloads,1,12):1;for(var d=this._processingHead;d<this._fileList.length;d++){var c=this._fileList[d];if(c.type==="packfile"&&!c.error&&c.loaded&&d===this._processingHead){this.processPack(c);this._loadedPackCount++;this.onPackComplete.dispatch(c.key,!c.error,this._loadedPackCount,this._totalPackCount)}if(c.loaded||c.error){if(d===this._processingHead){this._processingHead=d+1}}else{if(!c.loading&&this._flightQueue.length<b){if(c.type==="packfile"&&!c.data){this._flightQueue.push(c);c.loading=true;this.loadFile(c)}else{if(!a){if(!this._fileLoadStarted){this._fileLoadStarted=true;this.onLoadStart.dispatch()}this._flightQueue.push(c);c.loading=true;this.onFileStart.dispatch(this.progress,c.key,c.url);this.loadFile(c)}}}}if(!c.loaded&&c.syncPoint){a=true}if(this._flightQueue.length>=b||(a&&this._loadedPackCount===this._totalPackCount)){break}}this.updateProgress();if(this._processingHead>=this._fileList.length){this.finishedLoading()}else{if(!this._flightQueue.length){console.warn("Phaser.Loader - aborting: processing queue empty, loading may have stalled");var e=this;setTimeout(function(){e.finishedLoading(true)},2000)}}},finishedLoading:function(a){if(this.hasLoaded){return}this.hasLoaded=true;this.isLoading=false;if(!a&&!this._fileLoadStarted){this._fileLoadStarted=true;this.onLoadStart.dispatch()}this.onLoadComplete.dispatch();this.game.state.loadComplete();this.reset()},asyncComplete:function(b,a){if(a===undefined){a=""}b.loaded=true;b.error=!!a;if(a){b.errorMessage=a;console.warn("Phaser.Loader - "+b.type+"["+b.key+"]"+": "+a)}this.processLoadQueue()},processPack:function(d){var a=d.data[d.key];if(!a){console.warn("Phaser.Loader - "+d.key+": pack has data, but not for pack key");return}for(var c=0;c<a.length;c++){var b=a[c];switch(b.type){case"image":this.image(b.key,b.url,b.overwrite);break;case"text":this.text(b.key,b.url,b.overwrite);break;case"json":this.json(b.key,b.url,b.overwrite);break;case"xml":this.xml(b.key,b.url,b.overwrite);break;case"script":this.script(b.key,b.url,b.callback,d.callbackContext||this);break;case"binary":this.binary(b.key,b.url,b.callback,d.callbackContext||this);break;case"spritesheet":this.spritesheet(b.key,b.url,b.frameWidth,b.frameHeight,b.frameMax,b.margin,b.spacing);break;case"video":this.video(b.key,b.urls);break;case"audio":this.audio(b.key,b.urls,b.autoDecode);break;case"audiosprite":this.audiosprite(b.key,b.urls,b.jsonURL,b.jsonData,b.autoDecode);break;case"tilemap":this.tilemap(b.key,b.url,b.data,Phaser.Tilemap[b.format]);break;case"physics":this.physics(b.key,b.url,b.data,Phaser.Loader[b.format]);break;case"bitmapFont":this.bitmapFont(b.key,b.textureURL,b.atlasURL,b.atlasData,b.xSpacing,b.ySpacing);break;case"atlasJSONArray":this.atlasJSONArray(b.key,b.textureURL,b.atlasURL,b.atlasData);break;case"atlasJSONHash":this.atlasJSONHash(b.key,b.textureURL,b.atlasURL,b.atlasData);break;case"atlasXML":this.atlasXML(b.key,b.textureURL,b.atlasURL,b.atlasData);break;case"atlas":this.atlas(b.key,b.textureURL,b.atlasURL,b.atlasData,Phaser.Loader[b.format]);break;case"shader":this.shader(b.key,b.url,b.overwrite);break}}},transformUrl:function(a,b){if(!a){return false}if(a.match(/^(?:blob:|data:|http:\/\/|https:\/\/|\/\/)/)){return a}else{return this.baseURL+b.path+a}},loadFile:function(a){switch(a.type){case"packfile":this.xhrLoad(a,this.transformUrl(a.url,a),"text",this.fileComplete);break;case"image":case"spritesheet":case"textureatlas":case"bitmapfont":this.loadImageTag(a);break;case"audio":a.url=this.getAudioURL(a.url);if(a.url){if(this.game.sound.usingWebAudio){this.xhrLoad(a,this.transformUrl(a.url,a),"arraybuffer",this.fileComplete)}else{if(this.game.sound.usingAudioTag){this.loadAudioTag(a)}}}else{this.fileError(a,null,"No supported audio URL specified or device does not have audio playback support")}break;case"video":a.url=this.getVideoURL(a.url);if(a.url){if(a.asBlob){this.xhrLoad(a,this.transformUrl(a.url,a),"blob",this.fileComplete)}else{this.loadVideoTag(a)}}else{this.fileError(a,null,"No supported video URL specified or device does not have video playback support")}break;case"json":this.xhrLoad(a,this.transformUrl(a.url,a),"text",this.jsonLoadComplete);break;case"xml":this.xhrLoad(a,this.transformUrl(a.url,a),"text",this.xmlLoadComplete);break;case"tilemap":if(a.format===Phaser.Tilemap.TILED_JSON){this.xhrLoad(a,this.transformUrl(a.url,a),"text",this.jsonLoadComplete)}else{if(a.format===Phaser.Tilemap.CSV){this.xhrLoad(a,this.transformUrl(a.url,a),"text",this.csvLoadComplete)
}else{this.asyncComplete(a,"invalid Tilemap format: "+a.format)}}break;case"text":case"script":case"shader":case"physics":this.xhrLoad(a,this.transformUrl(a.url,a),"text",this.fileComplete);break;case"binary":this.xhrLoad(a,this.transformUrl(a.url,a),"arraybuffer",this.fileComplete);break}},loadImageTag:function(a){var b=this;a.data=new Image();a.data.name=a.key;if(this.crossOrigin){a.data.crossOrigin=this.crossOrigin}a.data.onload=function(){if(a.data.onload){a.data.onload=null;a.data.onerror=null;b.fileComplete(a)}};a.data.onerror=function(){if(a.data.onload){a.data.onload=null;a.data.onerror=null;b.fileError(a)}};a.data.src=this.transformUrl(a.url,a);if(a.data.complete&&a.data.width&&a.data.height){a.data.onload=null;a.data.onerror=null;this.fileComplete(a)}},loadVideoTag:function(a){var c=this;a.data=document.createElement("video");a.data.name=a.key;a.data.controls=false;a.data.autoplay=false;var b=function(){a.data.removeEventListener(a.loadEvent,b,false);a.data.onerror=null;a.data.canplay=true;Phaser.GAMES[c.game.id].load.fileComplete(a)};a.data.onerror=function(){a.data.removeEventListener(a.loadEvent,b,false);a.data.onerror=null;a.data.canplay=false;c.fileError(a)};a.data.addEventListener(a.loadEvent,b,false);a.data.src=this.transformUrl(a.url,a);a.data.load()},loadAudioTag:function(b){var c=this;if(this.game.sound.touchLocked){b.data=new Audio();b.data.name=b.key;b.data.preload="auto";b.data.src=this.transformUrl(b.url,b);this.fileComplete(b)}else{b.data=new Audio();b.data.name=b.key;var a=function(){b.data.removeEventListener("canplaythrough",a,false);b.data.onerror=null;c.fileComplete(b)};b.data.onerror=function(){b.data.removeEventListener("canplaythrough",a,false);b.data.onerror=null;c.fileError(b)};b.data.preload="auto";b.data.src=this.transformUrl(b.url,b);b.data.addEventListener("canplaythrough",a,false);b.data.load()}},xhrLoad:function(c,b,d,e,a){if(this.useXDomainRequest&&window.XDomainRequest){this.xhrLoadWithXDR(c,b,d,e,a);return}var f=new XMLHttpRequest();f.open("GET",b,true);f.responseType=d;if(this.headers["requestedWith"]!==false){f.setRequestHeader("X-Requested-With",this.headers["requestedWith"])}if(this.headers[c.type]){f.setRequestHeader("Accept",this.headers[c.type])}a=a||this.fileError;var g=this;f.onload=function(){try{if(f.readyState===4&&f.status>=400&&f.status<=599){return a.call(g,c,f)}else{return e.call(g,c,f)}}catch(h){if(!g.hasLoaded){g.asyncComplete(c,h.message||"Exception")}else{if(window["console"]){console.error(h)}}}};f.onerror=function(){try{return a.call(g,c,f)}catch(h){if(!g.hasLoaded){g.asyncComplete(c,h.message||"Exception")}else{if(window["console"]){console.error(h)}}}};c.requestObject=f;c.requestUrl=b;f.send()},xhrLoadWithXDR:function(c,b,d,e,a){if(!this._warnedAboutXDomainRequest&&(!this.game.device.ie||this.game.device.ieVersion>=10)){this._warnedAboutXDomainRequest=true;console.warn("Phaser.Loader - using XDomainRequest outside of IE 9")}var f=new window.XDomainRequest();f.open("GET",b,true);f.responseType=d;f.timeout=3000;a=a||this.fileError;var g=this;f.onerror=function(){try{return a.call(g,c,f)}catch(h){g.asyncComplete(c,h.message||"Exception")}};f.ontimeout=function(){try{return a.call(g,c,f)}catch(h){g.asyncComplete(c,h.message||"Exception")}};f.onprogress=function(){};f.onload=function(){try{if(f.readyState===4&&f.status>=400&&f.status<=599){return a.call(g,c,f)}else{return e.call(g,c,f)}return e.call(g,c,f)}catch(h){g.asyncComplete(c,h.message||"Exception")}};c.requestObject=f;c.requestUrl=b;setTimeout(function(){f.send()},0)},getVideoURL:function(d){for(var b=0;b<d.length;b++){var a=d[b];var c;if(a.uri){c=a.type;a=a.uri;if(this.game.device.canPlayVideo(c)){return a}}else{if(a.indexOf("blob:")===0||a.indexOf("data:")===0){return a}if(a.indexOf("?")>=0){a=a.substr(0,a.indexOf("?"))}var e=a.substr((Math.max(0,a.lastIndexOf("."))||Infinity)+1);c=e.toLowerCase();if(this.game.device.canPlayVideo(c)){return d[b]}}}return null},getAudioURL:function(d){if(this.game.sound.noAudio){return null}for(var c=0;c<d.length;c++){var b=d[c];var a;if(b.uri){a=b.type;b=b.uri;if(this.game.device.canPlayAudio(a)){return b}}else{if(b.indexOf("blob:")===0||b.indexOf("data:")===0){return b}if(b.indexOf("?")>=0){b=b.substr(0,b.indexOf("?"))}var e=b.substr((Math.max(0,b.lastIndexOf("."))||Infinity)+1);a=e.toLowerCase();if(this.game.device.canPlayAudio(a)){return d[c]}}}return null},fileError:function(b,e,d){var a=b.requestUrl||this.transformUrl(b.url,b);var c="error loading asset from URL "+a;if(!d&&e){d=e.status}if(d){c=c+" ("+d+")"}this.asyncComplete(b,c)},fileComplete:function(a,f){var d=true;switch(a.type){case"packfile":var b=JSON.parse(f.responseText);a.data=b||{};break;case"image":this.cache.addImage(a.key,a.url,a.data);break;case"spritesheet":this.cache.addSpriteSheet(a.key,a.url,a.data,a.frameWidth,a.frameHeight,a.frameMax,a.margin,a.spacing);break;case"textureatlas":if(a.atlasURL==null){this.cache.addTextureAtlas(a.key,a.url,a.data,a.atlasData,a.format)}else{d=false;
	if(a.format===Phaser.Loader.TEXTURE_ATLAS_JSON_ARRAY||a.format===Phaser.Loader.TEXTURE_ATLAS_JSON_HASH||a.format===Phaser.Loader.TEXTURE_ATLAS_JSON_PYXEL){this.xhrLoad(a,this.transformUrl(a.atlasURL,a),"text",this.jsonLoadComplete)}else{if(a.format===Phaser.Loader.TEXTURE_ATLAS_XML_STARLING){this.xhrLoad(a,this.transformUrl(a.atlasURL,a),"text",this.xmlLoadComplete)}else{throw new Error("Phaser.Loader. Invalid Texture Atlas format: "+a.format)}}}break;case"bitmapfont":if(!a.atlasURL){this.cache.addBitmapFont(a.key,a.url,a.data,a.atlasData,a.atlasType,a.xSpacing,a.ySpacing)}else{d=false;this.xhrLoad(a,this.transformUrl(a.atlasURL,a),"text",function(h,j){var g;try{g=JSON.parse(j.responseText)}catch(i){}if(!!g){h.atlasType="json";this.jsonLoadComplete(h,j)}else{h.atlasType="xml";this.xmlLoadComplete(h,j)}})}break;case"video":if(a.asBlob){try{a.data=f.response}catch(c){throw new Error("Phaser.Loader. Unable to parse video file as Blob: "+a.key)}}this.cache.addVideo(a.key,a.url,a.data,a.asBlob);break;case"audio":if(this.game.sound.usingWebAudio){a.data=f.response;this.cache.addSound(a.key,a.url,a.data,true,false);if(a.autoDecode){this.game.sound.decode(a.key)}}else{this.cache.addSound(a.key,a.url,a.data,false,true)}break;case"text":a.data=f.responseText;this.cache.addText(a.key,a.url,a.data);break;case"shader":a.data=f.responseText;this.cache.addShader(a.key,a.url,a.data);break;case"physics":var b=JSON.parse(f.responseText);this.cache.addPhysicsData(a.key,a.url,b,a.format);break;case"script":a.data=document.createElement("script");a.data.language="javascript";a.data.type="text/javascript";a.data.defer=false;a.data.text=f.responseText;document.head.appendChild(a.data);if(a.callback){a.data=a.callback.call(a.callbackContext,a.key,f.responseText)}break;case"binary":if(a.callback){a.data=a.callback.call(a.callbackContext,a.key,f.response)}else{a.data=f.response}this.cache.addBinary(a.key,a.data);break}if(d){this.asyncComplete(a)}},jsonLoadComplete:function(a,c){var b=JSON.parse(c.responseText);if(a.type==="tilemap"){this.cache.addTilemap(a.key,a.url,b,a.format)}else{if(a.type==="bitmapfont"){this.cache.addBitmapFont(a.key,a.url,a.data,b,a.atlasType,a.xSpacing,a.ySpacing)}else{if(a.type==="json"){this.cache.addJSON(a.key,a.url,b)}else{this.cache.addTextureAtlas(a.key,a.url,a.data,b,a.format)}}}this.asyncComplete(a)},csvLoadComplete:function(a,c){var b=c.responseText;this.cache.addTilemap(a.key,a.url,b,a.format);this.asyncComplete(a)},xmlLoadComplete:function(c,e){var d=e.responseText;var b=this.parseXml(d);if(!b){var a=e.responseType||e.contentType;console.warn("Phaser.Loader - "+c.key+": invalid XML ("+a+")");this.asyncComplete(c,"invalid XML");return}if(c.type==="bitmapfont"){this.cache.addBitmapFont(c.key,c.url,c.data,b,c.atlasType,c.xSpacing,c.ySpacing)}else{if(c.type==="textureatlas"){this.cache.addTextureAtlas(c.key,c.url,c.data,b,c.format)}else{if(c.type==="xml"){this.cache.addXML(c.key,c.url,b)}}}this.asyncComplete(c)},parseXml:function(b){var a;try{if(window["DOMParser"]){var d=new DOMParser();a=d.parseFromString(b,"text/xml")}else{a=new ActiveXObject("Microsoft.XMLDOM");a.async="false";a.loadXML(b)}}catch(c){a=null}if(!a||!a.documentElement||a.getElementsByTagName("parsererror").length){return null}else{return a}},updateProgress:function(){if(this.preloadSprite){if(this.preloadSprite.direction===0){this.preloadSprite.rect.width=Math.floor((this.preloadSprite.width/100)*this.progress)}else{this.preloadSprite.rect.height=Math.floor((this.preloadSprite.height/100)*this.progress)}if(this.preloadSprite.sprite){this.preloadSprite.sprite.updateCrop()}else{this.preloadSprite=null}}},totalLoadedFiles:function(){return this._loadedFileCount},totalQueuedFiles:function(){return this._totalFileCount-this._loadedFileCount},totalLoadedPacks:function(){return this._totalPackCount},totalQueuedPacks:function(){return this._totalPackCount-this._loadedPackCount}};Object.defineProperty(Phaser.Loader.prototype,"progressFloat",{get:function(){var a=(this._loadedFileCount/this._totalFileCount)*100;return Phaser.Math.clamp(a||0,0,100)}});Object.defineProperty(Phaser.Loader.prototype,"progress",{get:function(){return Math.round(this.progressFloat)}});Phaser.Loader.prototype.constructor=Phaser.Loader;Phaser.LoaderParser={bitmapFont:function(a,d,c,b){return this.xmlBitmapFont(a,d,c,b)},xmlBitmapFont:function(h,a,m,j){var e={};var c=h.getElementsByTagName("info")[0];var k=h.getElementsByTagName("common")[0];e.font=c.getAttribute("face");e.size=parseInt(c.getAttribute("size"),10);e.lineHeight=parseInt(k.getAttribute("lineHeight"),10)+j;e.chars={};var l=h.getElementsByTagName("char");for(var d=0;d<l.length;d++){var o=parseInt(l[d].getAttribute("id"),10);e.chars[o]={x:parseInt(l[d].getAttribute("x"),10),y:parseInt(l[d].getAttribute("y"),10),width:parseInt(l[d].getAttribute("width"),10),height:parseInt(l[d].getAttribute("height"),10),xOffset:parseInt(l[d].getAttribute("xoffset"),10),yOffset:parseInt(l[d].getAttribute("yoffset"),10),xAdvance:parseInt(l[d].getAttribute("xadvance"),10)+m,kerning:{}}
}var n=h.getElementsByTagName("kerning");for(d=0;d<n.length;d++){var g=parseInt(n[d].getAttribute("first"),10);var b=parseInt(n[d].getAttribute("second"),10);var f=parseInt(n[d].getAttribute("amount"),10);e.chars[b].kerning[g]=f}return this.finalizeBitmapFont(a,e)},jsonBitmapFont:function(b,e,d,c){var f={font:b.font.info._face,size:parseInt(b.font.info._size,10),lineHeight:parseInt(b.font.common._lineHeight,10)+c,chars:{}};b.font.chars["char"].forEach(function a(i){var h=parseInt(i._id,10);f.chars[h]={x:parseInt(i._x,10),y:parseInt(i._y,10),width:parseInt(i._width,10),height:parseInt(i._height,10),xOffset:parseInt(i._xoffset,10),yOffset:parseInt(i._yoffset,10),xAdvance:parseInt(i._xadvance,10)+d,kerning:{}}});if(b.font.kernings&&b.font.kernings.kerning){b.font.kernings.kerning.forEach(function g(h){f.chars[h._second].kerning[h._first]=parseInt(h._amount,10)})}return this.finalizeBitmapFont(e,f)},finalizeBitmapFont:function(a,b){Object.keys(b.chars).forEach(function c(d){var e=b.chars[d];e.texture=new PIXI.Texture(a,new Phaser.Rectangle(e.x,e.y,e.width,e.height))});return b}};Phaser.AudioSprite=function(c,d){this.game=c;this.key=d;this.config=this.game.cache.getJSON(d+"-audioatlas");this.autoplayKey=null;this.autoplay=false;this.sounds={};for(var b in this.config.spritemap){var a=this.config.spritemap[b];var e=this.game.add.sound(this.key);e.addMarker(b,a.start,(a.end-a.start),null,a.loop);this.sounds[b]=e}if(this.config.autoplay){this.autoplayKey=this.config.autoplay;this.play(this.autoplayKey);this.autoplay=this.sounds[this.autoplayKey]}};Phaser.AudioSprite.prototype={play:function(a,b){if(b===undefined){b=1}return this.sounds[a].play(a,null,b)},stop:function(a){if(!a){for(var b in this.sounds){this.sounds[b].stop()}}else{this.sounds[a].stop()}},get:function(a){return this.sounds[a]}};Phaser.AudioSprite.prototype.constructor=Phaser.AudioSprite;Phaser.Sound=function(c,d,e,a,b){if(e===undefined){e=1}if(a===undefined){a=false}if(b===undefined){b=c.sound.connectToMaster}this.game=c;this.name=d;this.key=d;this.loop=a;this.markers={};this.context=null;this.autoplay=false;this.totalDuration=0;this.startTime=0;this.currentTime=0;this.duration=0;this.durationMS=0;this.position=0;this.stopTime=0;this.paused=false;this.pausedPosition=0;this.pausedTime=0;this.isPlaying=false;this.currentMarker="";this.fadeTween=null;this.pendingPlayback=false;this.override=false;this.allowMultiple=false;this.usingWebAudio=this.game.sound.usingWebAudio;this.usingAudioTag=this.game.sound.usingAudioTag;this.externalNode=null;this.masterGainNode=null;this.gainNode=null;this._sound=null;if(this.usingWebAudio){this.context=this.game.sound.context;this.masterGainNode=this.game.sound.masterGain;if(this.context.createGain===undefined){this.gainNode=this.context.createGainNode()}else{this.gainNode=this.context.createGain()}this.gainNode.gain.value=e*this.game.sound.volume;if(b){this.gainNode.connect(this.masterGainNode)}}else{if(this.usingAudioTag){if(this.game.cache.getSound(d)&&this.game.cache.isSoundReady(d)){this._sound=this.game.cache.getSoundData(d);this.totalDuration=0;if(this._sound.duration){this.totalDuration=this._sound.duration}else{if(typeof(a)==="object"){this.totalDuration=a.totalDuration}}}else{this.game.cache.onSoundUnlock.add(this.soundHasUnlocked,this)}}}this.onDecoded=new Phaser.Signal();this.onPlay=new Phaser.Signal();this.onPause=new Phaser.Signal();this.onResume=new Phaser.Signal();this.onLoop=new Phaser.Signal();this.onStop=new Phaser.Signal();this.onMute=new Phaser.Signal();this.onMarkerComplete=new Phaser.Signal();this.onFadeComplete=new Phaser.Signal();this._volume=e;this._buffer=null;this._muted=false;this._tempMarker=0;this._tempPosition=0;this._tempVolume=0;this._tempPause=0;this._muteVolume=0;this._tempLoop=0;this._paused=false;this._onDecodedEventDispatched=false};Phaser.Sound.prototype={soundHasUnlocked:function(a){if(a===this.key){this._sound=this.game.cache.getSoundData(this.key);this.totalDuration=this._sound.duration}},addMarker:function(b,e,d,c,a){if(d===undefined||d===null){d=1}if(c===undefined||c===null){c=1}if(a===undefined){a=false}this.markers[b]={name:b,start:e,stop:e+d,volume:c,duration:d,durationMS:d*1000,loop:a}},removeMarker:function(a){delete this.markers[a]},onEndedHandler:function(){this._sound.onended=null;this.isPlaying=false;this.currentTime=this.durationMS;this.stop()},update:function(){if(!this.game.cache.checkSoundKey(this.key)){this.destroy();return}if(this.isDecoded&&!this._onDecodedEventDispatched){this.onDecoded.dispatch(this);this._onDecodedEventDispatched=true}if(this.pendingPlayback&&this.game.cache.isSoundReady(this.key)){this.pendingPlayback=false;this.play(this._tempMarker,this._tempPosition,this._tempVolume,this._tempLoop)}if(this.isPlaying){this.currentTime=this.game.time.time-this.startTime;if(this.currentTime>=this.durationMS){if(this.usingWebAudio){if(this.loop){this.onLoop.dispatch(this);this.isPlaying=false;if(this.currentMarker===""){this.currentTime=0;this.startTime=this.game.time.time;
	this.isPlaying=true}else{this.onMarkerComplete.dispatch(this.currentMarker,this);this.play(this.currentMarker,0,this.volume,true,true)}}else{if(this.currentMarker!==""){this.stop()}}}else{if(this.loop){this.onLoop.dispatch(this);if(this.currentMarker===""){this.currentTime=0;this.startTime=this.game.time.time}this.isPlaying=false;this.play(this.currentMarker,0,this.volume,true,true)}else{this.stop()}}}}},loopFull:function(a){return this.play(null,0,a,true)},play:function(c,a,f,b,d){if(c===undefined||c===false||c===null){c=""}if(d===undefined){d=true}if(this.isPlaying&&!this.allowMultiple&&!d&&!this.override){return this}if(this._sound&&this.isPlaying&&!this.allowMultiple&&(this.override||d)){if(this.usingWebAudio){if(this._sound.stop===undefined){this._sound.noteOff(0)}else{try{this._sound.stop(0)}catch(g){}}if(this.externalNode){this._sound.disconnect(this.externalNode)}else{if(this.gainNode){this._sound.disconnect(this.gainNode)}}}else{if(this.usingAudioTag){this._sound.pause();this._sound.currentTime=0}}this.isPlaying=false}if(c===""&&Object.keys(this.markers).length>0){return this}if(c!==""){if(this.markers[c]){this.currentMarker=c;this.position=this.markers[c].start;this.volume=this.markers[c].volume;this.loop=this.markers[c].loop;this.duration=this.markers[c].duration;this.durationMS=this.markers[c].durationMS;if(typeof f!=="undefined"){this.volume=f}if(typeof b!=="undefined"){this.loop=b}this._tempMarker=c;this._tempPosition=this.position;this._tempVolume=this.volume;this._tempLoop=this.loop}else{console.warn("Phaser.Sound.play: audio marker "+c+" doesn't exist");return this}}else{a=a||0;if(f===undefined){f=this._volume}if(b===undefined){b=this.loop}this.position=Math.max(0,a);this.volume=f;this.loop=b;this.duration=0;this.durationMS=0;this._tempMarker=c;this._tempPosition=a;this._tempVolume=f;this._tempLoop=b}if(this.usingWebAudio){if(this.game.cache.isSoundDecoded(this.key)){this._sound=this.context.createBufferSource();if(this.externalNode){this._sound.connect(this.externalNode)}else{this._sound.connect(this.gainNode)}this._buffer=this.game.cache.getSoundData(this.key);this._sound.buffer=this._buffer;if(this.loop&&c===""){this._sound.loop=true}if(!this.loop&&c===""){this._sound.onended=this.onEndedHandler.bind(this)}this.totalDuration=this._sound.buffer.duration;if(this.duration===0){this.duration=this.totalDuration;this.durationMS=Math.ceil(this.totalDuration*1000)}if(this._sound.start===undefined){this._sound.noteGrainOn(0,this.position,this.duration)}else{if(this.loop&&c===""){this._sound.start(0,0)}else{this._sound.start(0,this.position,this.duration)}}this.isPlaying=true;this.startTime=this.game.time.time;this.currentTime=0;this.stopTime=this.startTime+this.durationMS;this.onPlay.dispatch(this)}else{this.pendingPlayback=true;if(this.game.cache.getSound(this.key)&&this.game.cache.getSound(this.key).isDecoding===false){this.game.sound.decode(this.key,this)}}}else{if(this.game.cache.getSound(this.key)&&this.game.cache.getSound(this.key).locked){this.game.cache.getSound(this.key).locked=false;this.game.cache.onSoundUnlock.dispatch(key);this.pendingPlayback=true}if(this._sound&&!this.paused){this._sound.play();this.totalDuration=this._sound.duration||this.totalDuration||undefined;if(this.duration===0){this.duration=this.totalDuration;this.durationMS=this.totalDuration*1000}this._sound.currentTime=this.position;this._sound.muted=this._muted;if(this._muted||this.game.sound.mute){this._sound.volume=0}else{this._sound.volume=this._volume}this.isPlaying=true;this.startTime=this.game.time.time;this.currentTime=0;this.stopTime=this.startTime+this.durationMS;this.onPlay.dispatch(this)}else{this.pendingPlayback=true}}return this},restart:function(c,a,d,b){c=c||"";a=a||0;d=d||1;if(b===undefined){b=false}this.play(c,a,d,b,true)},pause:function(){if(this.isPlaying&&this._sound){this.paused=true;this.pausedPosition=this.currentTime;this.pausedTime=this.game.time.time;this._tempPause=this._sound.currentTime;this.onPause.dispatch(this);this.stop()}},resume:function(){if(this.paused&&this._sound){if(this.usingWebAudio){var b=Math.max(0,this.position+(this.pausedPosition/1000));this._sound=this.context.createBufferSource();this._sound.buffer=this._buffer;if(this.externalNode){this._sound.connect(this.externalNode)}else{this._sound.connect(this.gainNode)}if(this.loop){this._sound.loop=true}if(!this.loop&&this.currentMarker===""){this._sound.onended=this.onEndedHandler.bind(this)}var a=this.duration-(this.pausedPosition/1000);if(this._sound.start===undefined){this._sound.noteGrainOn(0,b,a)}else{if(this.loop&&this.game.device.chrome){if(this.game.device.chromeVersion===42){this._sound.start(0)}else{this._sound.start(0,b)}}else{this._sound.start(0,b,a)}}}else{this._sound.currentTime=this._tempPause;this._sound.play()}this.isPlaying=true;this.paused=false;this.startTime+=(this.game.time.time-this.pausedTime);this.onResume.dispatch(this)}},stop:function(){if(this.isPlaying&&this._sound){if(this.usingWebAudio){if(this._sound.stop===undefined){this._sound.noteOff(0)
}else{try{this._sound.stop(0)}catch(b){}}if(this.externalNode){this._sound.disconnect(this.externalNode)}else{if(this.gainNode){this._sound.disconnect(this.gainNode)}}}else{if(this.usingAudioTag){this._sound.pause();this._sound.currentTime=0}}}this.pendingPlayback=false;this.isPlaying=false;if(!this.paused){var a=this.currentMarker;if(this.currentMarker!==""){this.onMarkerComplete.dispatch(this.currentMarker,this)}this.currentMarker="";if(this.fadeTween!==null){this.fadeTween.stop()}this.onStop.dispatch(this,a)}},fadeIn:function(c,b,a){if(b===undefined){b=false}if(a===undefined){a=this.currentMarker}if(this.paused){return}this.play(a,0,0,b);this.fadeTo(c,1)},fadeOut:function(a){this.fadeTo(a,0)},fadeTo:function(b,a){if(!this.isPlaying||this.paused||a===this.volume){return}if(b===undefined){b=1000}if(a===undefined){console.warn("Phaser.Sound.fadeTo: No Volume Specified.");return}this.fadeTween=this.game.add.tween(this).to({volume:a},b,Phaser.Easing.Linear.None,true);this.fadeTween.onComplete.add(this.fadeComplete,this)},fadeComplete:function(){this.onFadeComplete.dispatch(this,this.volume);if(this.volume===0){this.stop()}},updateGlobalVolume:function(a){if(this.usingAudioTag&&this._sound){this._sound.volume=a*this._volume}},destroy:function(a){if(a===undefined){a=true}this.stop();if(a){this.game.sound.remove(this)}else{this.markers={};this.context=null;this._buffer=null;this.externalNode=null;this.onDecoded.dispose();this.onPlay.dispose();this.onPause.dispose();this.onResume.dispose();this.onLoop.dispose();this.onStop.dispose();this.onMute.dispose();this.onMarkerComplete.dispose()}}};Phaser.Sound.prototype.constructor=Phaser.Sound;Object.defineProperty(Phaser.Sound.prototype,"isDecoding",{get:function(){return this.game.cache.getSound(this.key).isDecoding}});Object.defineProperty(Phaser.Sound.prototype,"isDecoded",{get:function(){return this.game.cache.isSoundDecoded(this.key)}});Object.defineProperty(Phaser.Sound.prototype,"mute",{get:function(){return(this._muted||this.game.sound.mute)},set:function(a){a=a||false;if(a===this._muted){return}if(a){this._muted=true;this._muteVolume=this._tempVolume;if(this.usingWebAudio){this.gainNode.gain.value=0}else{if(this.usingAudioTag&&this._sound){this._sound.volume=0}}}else{this._muted=false;if(this.usingWebAudio){this.gainNode.gain.value=this._muteVolume}else{if(this.usingAudioTag&&this._sound){this._sound.volume=this._muteVolume}}}this.onMute.dispatch(this)}});Object.defineProperty(Phaser.Sound.prototype,"volume",{get:function(){return this._volume},set:function(a){if(this.game.device.firefox&&this.usingAudioTag){a=this.game.math.clamp(a,0,1)}if(this._muted){this._muteVolume=a;return}this._tempVolume=a;this._volume=a;if(this.usingWebAudio){this.gainNode.gain.value=a}else{if(this.usingAudioTag&&this._sound){this._sound.volume=a}}}});Phaser.SoundManager=function(a){this.game=a;this.onSoundDecode=new Phaser.Signal();this.onVolumeChange=new Phaser.Signal();this.onMute=new Phaser.Signal();this.onUnMute=new Phaser.Signal();this.context=null;this.usingWebAudio=false;this.usingAudioTag=false;this.noAudio=false;this.connectToMaster=true;this.touchLocked=false;this.channels=32;this.muteOnPause=true;this._codeMuted=false;this._muted=false;this._unlockSource=null;this._volume=1;this._sounds=[];this._watchList=new Phaser.ArraySet();this._watching=false;this._watchCallback=null;this._watchContext=null};Phaser.SoundManager.prototype={boot:function(){if(this.game.device.iOS&&this.game.device.webAudio===false){this.channels=1}if(window["PhaserGlobal"]){if(window["PhaserGlobal"].disableAudio===true){this.noAudio=true;this.touchLocked=false;return}if(window["PhaserGlobal"].disableWebAudio===true){this.usingAudioTag=true;this.touchLocked=false;return}}if(window["PhaserGlobal"]&&window["PhaserGlobal"].audioContext){this.context=window["PhaserGlobal"].audioContext}else{if(!!window["AudioContext"]){try{this.context=new window["AudioContext"]()}catch(a){this.context=null;this.usingWebAudio=false;this.touchLocked=false}}else{if(!!window["webkitAudioContext"]){try{this.context=new window["webkitAudioContext"]()}catch(a){this.context=null;this.usingWebAudio=false;this.touchLocked=false}}}}if(this.context===null){if(window["Audio"]===undefined){this.noAudio=true;return}else{this.usingAudioTag=true}}else{this.usingWebAudio=true;if(this.context.createGain===undefined){this.masterGain=this.context.createGainNode()}else{this.masterGain=this.context.createGain()}this.masterGain.gain.value=1;this.masterGain.connect(this.context.destination)}if(!this.noAudio){if(!this.game.device.cocoonJS&&this.game.device.iOS||(window["PhaserGlobal"]&&window["PhaserGlobal"].fakeiOSTouchLock)){this.setTouchLock()}}},setTouchLock:function(){if(this.noAudio||(window["PhaserGlobal"]&&window["PhaserGlobal"].disableAudio===true)){return}if(this.game.device.iOSVersion>8){this.game.input.touch.addTouchLockCallback(this.unlock,this,true)}else{this.game.input.touch.addTouchLockCallback(this.unlock,this)}this.touchLocked=true},unlock:function(){if(this.noAudio||!this.touchLocked||this._unlockSource!==null){return true
}if(this.usingAudioTag){this.touchLocked=false;this._unlockSource=null}else{if(this.usingWebAudio){var a=this.context.createBuffer(1,1,22050);this._unlockSource=this.context.createBufferSource();this._unlockSource.buffer=a;this._unlockSource.connect(this.context.destination);if(this._unlockSource.start===undefined){this._unlockSource.noteOn(0)}else{this._unlockSource.start(0)}}}return true},stopAll:function(){if(this.noAudio){return}for(var a=0;a<this._sounds.length;a++){if(this._sounds[a]){this._sounds[a].stop()}}},pauseAll:function(){if(this.noAudio){return}for(var a=0;a<this._sounds.length;a++){if(this._sounds[a]){this._sounds[a].pause()}}},resumeAll:function(){if(this.noAudio){return}for(var a=0;a<this._sounds.length;a++){if(this._sounds[a]){this._sounds[a].resume()}}},decode:function(b,d){d=d||null;var a=this.game.cache.getSoundData(b);if(a){if(this.game.cache.isSoundDecoded(b)===false){this.game.cache.updateSound(b,"isDecoding",true);var f=this;try{this.context.decodeAudioData(a,function(e){if(e){f.game.cache.decodedSound(b,e);f.onSoundDecode.dispatch(b,d)}})}catch(c){}}}},setDecodedCallback:function(c,d,a){if(typeof c==="string"){c=[c]}this._watchList.reset();for(var b=0;b<c.length;b++){if(c[b] instanceof Phaser.Sound){if(!this.game.cache.isSoundDecoded(c[b].key)){this._watchList.add(c[b].key)}}else{if(!this.game.cache.isSoundDecoded(c[b])){this._watchList.add(c[b])}}}if(this._watchList.total===0){this._watching=false;d.call(a)}else{this._watching=true;this._watchCallback=d;this._watchContext=a}},update:function(){if(this.noAudio){return}if(this.touchLocked&&this._unlockSource!==null&&(this._unlockSource.playbackState===this._unlockSource.PLAYING_STATE||this._unlockSource.playbackState===this._unlockSource.FINISHED_STATE)){this.touchLocked=false;this._unlockSource=null}for(var b=0;b<this._sounds.length;b++){this._sounds[b].update()}if(this._watching){var a=this._watchList.first;while(a){if(this.game.cache.isSoundDecoded(a)){this._watchList.remove(a)}a=this._watchList.next}if(this._watchList.total===0){this._watching=false;this._watchCallback.call(this._watchContext)}}},add:function(c,d,a,b){if(d===undefined){d=1}if(a===undefined){a=false}if(b===undefined){b=this.connectToMaster}var e=new Phaser.Sound(this.game,c,d,a,b);this._sounds.push(e);return e},addSprite:function(b){var a=new Phaser.AudioSprite(this.game,b);return a},remove:function(b){var a=this._sounds.length;while(a--){if(this._sounds[a]===b){this._sounds[a].destroy(false);this._sounds.splice(a,1);return true}}return false},removeByKey:function(b){var a=this._sounds.length;var c=0;while(a--){if(this._sounds[a].key===b){this._sounds[a].destroy(false);this._sounds.splice(a,1);c++}}return c},play:function(b,c,a){if(this.noAudio){return}var d=this.add(b,c,a);d.play();return d},setMute:function(){if(this._muted){return}this._muted=true;if(this.usingWebAudio){this._muteVolume=this.masterGain.gain.value;this.masterGain.gain.value=0}for(var a=0;a<this._sounds.length;a++){if(this._sounds[a].usingAudioTag){this._sounds[a].mute=true}}this.onMute.dispatch()},unsetMute:function(){if(!this._muted||this._codeMuted){return}this._muted=false;if(this.usingWebAudio){this.masterGain.gain.value=this._muteVolume}for(var a=0;a<this._sounds.length;a++){if(this._sounds[a].usingAudioTag){this._sounds[a].mute=false}}this.onUnMute.dispatch()},destroy:function(){this.stopAll();for(var a=0;a<this._sounds.length;a++){if(this._sounds[a]){this._sounds[a].destroy()}}this._sounds=[];this.onSoundDecode.dispose();if(this.context){if(window["PhaserGlobal"]){window["PhaserGlobal"].audioContext=this.context}else{if(this.context.close){this.context.close()}}}}};Phaser.SoundManager.prototype.constructor=Phaser.SoundManager;Object.defineProperty(Phaser.SoundManager.prototype,"mute",{get:function(){return this._muted},set:function(a){a=a||false;if(a){if(this._muted){return}this._codeMuted=true;this.setMute()}else{if(!this._muted){return}this._codeMuted=false;this.unsetMute()}}});Object.defineProperty(Phaser.SoundManager.prototype,"volume",{get:function(){return this._volume},set:function(b){if(b<0){b=0}else{if(b>1){b=1}}if(this._volume!==b){this._volume=b;if(this.usingWebAudio){this.masterGain.gain.value=b}else{for(var a=0;a<this._sounds.length;a++){if(this._sounds[a].usingAudioTag){this._sounds[a].updateGlobalVolume(b)}}}this.onVolumeChange.dispatch(b)}}});Phaser.ScaleManager=function(b,c,a){this.game=b;this.dom=Phaser.DOM;this.grid=null;this.width=0;this.height=0;this.minWidth=null;this.maxWidth=null;this.minHeight=null;this.maxHeight=null;this.offset=new Phaser.Point();this.forceLandscape=false;this.forcePortrait=false;this.incorrectOrientation=false;this._pageAlignHorizontally=false;this._pageAlignVertically=false;this.onOrientationChange=new Phaser.Signal();this.enterIncorrectOrientation=new Phaser.Signal();this.leaveIncorrectOrientation=new Phaser.Signal();this.hasPhaserSetFullScreen=false;this.fullScreenTarget=null;this._createdFullScreenTarget=null;this.onFullScreenInit=new Phaser.Signal();
	this.onFullScreenChange=new Phaser.Signal();this.onFullScreenError=new Phaser.Signal();this.screenOrientation=this.dom.getScreenOrientation();this.scaleFactor=new Phaser.Point(1,1);this.scaleFactorInversed=new Phaser.Point(1,1);this.margin={left:0,top:0,right:0,bottom:0,x:0,y:0};this.bounds=new Phaser.Rectangle();this.aspectRatio=0;this.sourceAspectRatio=0;this.event=null;this.windowConstraints={right:"layout",bottom:""};this.compatibility={supportsFullScreen:false,orientationFallback:null,noMargins:false,scrollTo:null,forceMinimumDocumentHeight:false,canExpandParent:true,clickTrampoline:""};this._scaleMode=Phaser.ScaleManager.NO_SCALE;this._fullScreenScaleMode=Phaser.ScaleManager.NO_SCALE;this.parentIsWindow=false;this.parentNode=null;this.parentScaleFactor=new Phaser.Point(1,1);this.trackParentInterval=2000;this.onSizeChange=new Phaser.Signal();this.onResize=null;this.onResizeContext=null;this._pendingScaleMode=null;this._fullScreenRestore=null;this._gameSize=new Phaser.Rectangle();this._userScaleFactor=new Phaser.Point(1,1);this._userScaleTrim=new Phaser.Point(0,0);this._lastUpdate=0;this._updateThrottle=0;this._updateThrottleReset=100;this._parentBounds=new Phaser.Rectangle();this._tempBounds=new Phaser.Rectangle();this._lastReportedCanvasSize=new Phaser.Rectangle();this._lastReportedGameSize=new Phaser.Rectangle();this._booted=false;if(b.config){this.parseConfig(b.config)}this.setupScale(c,a)};Phaser.ScaleManager.EXACT_FIT=0;Phaser.ScaleManager.NO_SCALE=1;Phaser.ScaleManager.SHOW_ALL=2;Phaser.ScaleManager.RESIZE=3;Phaser.ScaleManager.USER_SCALE=4;Phaser.ScaleManager.prototype={boot:function(){var a=this.compatibility;a.supportsFullScreen=this.game.device.fullscreen&&!this.game.device.cocoonJS;if(!this.game.device.iPad&&!this.game.device.webApp&&!this.game.device.desktop){if(this.game.device.android&&!this.game.device.chrome){a.scrollTo=new Phaser.Point(0,1)}else{a.scrollTo=new Phaser.Point(0,0)}}if(this.game.device.desktop){a.orientationFallback="screen";a.clickTrampoline="when-not-mouse"}else{a.orientationFallback="";a.clickTrampoline=""}var b=this;this._orientationChange=function(c){return b.orientationChange(c)};this._windowResize=function(c){return b.windowResize(c)};window.addEventListener("orientationchange",this._orientationChange,false);window.addEventListener("resize",this._windowResize,false);if(this.compatibility.supportsFullScreen){this._fullScreenChange=function(c){return b.fullScreenChange(c)};this._fullScreenError=function(c){return b.fullScreenError(c)};document.addEventListener("webkitfullscreenchange",this._fullScreenChange,false);document.addEventListener("mozfullscreenchange",this._fullScreenChange,false);document.addEventListener("MSFullscreenChange",this._fullScreenChange,false);document.addEventListener("fullscreenchange",this._fullScreenChange,false);document.addEventListener("webkitfullscreenerror",this._fullScreenError,false);document.addEventListener("mozfullscreenerror",this._fullScreenError,false);document.addEventListener("MSFullscreenError",this._fullScreenError,false);document.addEventListener("fullscreenerror",this._fullScreenError,false)}this.game.onResume.add(this._gameResumed,this);this.dom.getOffset(this.game.canvas,this.offset);this.bounds.setTo(this.offset.x,this.offset.y,this.width,this.height);this.setGameSize(this.game.width,this.game.height);this.screenOrientation=this.dom.getScreenOrientation(this.compatibility.orientationFallback);if(Phaser.FlexGrid){this.grid=new Phaser.FlexGrid(this,this.width,this.height)}this._booted=true;if(this._pendingScaleMode!==null){this.scaleMode=this._pendingScaleMode;this._pendingScaleMode=null}},parseConfig:function(a){if(a["scaleMode"]!==undefined){if(this._booted){this.scaleMode=a["scaleMode"]}else{this._pendingScaleMode=a["scaleMode"]}}if(a["fullScreenScaleMode"]!==undefined){this.fullScreenScaleMode=a["fullScreenScaleMode"]}if(a["fullScreenTarget"]){this.fullScreenTarget=a["fullScreenTarget"]}},setupScale:function(c,a){var f;var e=new Phaser.Rectangle();if(this.game.parent!==""){if(typeof this.game.parent==="string"){f=document.getElementById(this.game.parent)}else{if(this.game.parent&&this.game.parent.nodeType===1){f=this.game.parent}}}if(!f){this.parentNode=null;this.parentIsWindow=true;e.width=this.dom.visualBounds.width;e.height=this.dom.visualBounds.height;this.offset.set(0,0)}else{this.parentNode=f;this.parentIsWindow=false;this.getParentBounds(this._parentBounds);e.width=this._parentBounds.width;e.height=this._parentBounds.height;this.offset.set(this._parentBounds.x,this._parentBounds.y)}var d=0;var b=0;if(typeof c==="number"){d=c}else{this.parentScaleFactor.x=parseInt(c,10)/100;d=e.width*this.parentScaleFactor.x}if(typeof a==="number"){b=a}else{this.parentScaleFactor.y=parseInt(a,10)/100;b=e.height*this.parentScaleFactor.y}d=Math.floor(d);b=Math.floor(b);this._gameSize.setTo(0,0,d,b);this.updateDimensions(d,b,false)},_gameResumed:function(){this.queueUpdate(true)},setGameSize:function(b,a){this._gameSize.setTo(0,0,b,a);
	if(this.currentScaleMode!==Phaser.ScaleManager.RESIZE){this.updateDimensions(b,a,true)}this.queueUpdate(true)},setUserScale:function(b,d,c,a){this._userScaleFactor.setTo(b,d);this._userScaleTrim.setTo(c|0,a|0);this.queueUpdate(true)},setResizeCallback:function(b,a){this.onResize=b;this.onResizeContext=a},signalSizeChange:function(){if(!Phaser.Rectangle.sameDimensions(this,this._lastReportedCanvasSize)||!Phaser.Rectangle.sameDimensions(this.game,this._lastReportedGameSize)){var b=this.width;var a=this.height;this._lastReportedCanvasSize.setTo(0,0,b,a);this._lastReportedGameSize.setTo(0,0,this.game.width,this.game.height);if(this.grid){this.grid.onResize(b,a)}this.onSizeChange.dispatch(this,b,a);if(this.currentScaleMode===Phaser.ScaleManager.RESIZE){this.game.state.resize(b,a);this.game.load.resize(b,a)}}},setMinMax:function(a,d,c,b){this.minWidth=a;this.minHeight=d;if(typeof c!=="undefined"){this.maxWidth=c}if(typeof b!=="undefined"){this.maxHeight=b}},preUpdate:function(){if(this.game.time.time<(this._lastUpdate+this._updateThrottle)){return}var b=this._updateThrottle;this._updateThrottleReset=b>=400?0:100;this.dom.getOffset(this.game.canvas,this.offset);var e=this._parentBounds.width;var g=this._parentBounds.height;var d=this.getParentBounds(this._parentBounds);var c=d.width!==e||d.height!==g;var a=this.updateOrientationState();if(c||a){if(this.onResize){this.onResize.call(this.onResizeContext,this,d)}this.updateLayout();this.signalSizeChange()}var f=this._updateThrottle*2;if(this._updateThrottle<b){f=Math.min(b,this._updateThrottleReset)}this._updateThrottle=Phaser.Math.clamp(f,25,this.trackParentInterval);this._lastUpdate=this.game.time.time},pauseUpdate:function(){this.preUpdate();this._updateThrottle=this.trackParentInterval},updateDimensions:function(c,a,b){this.width=c*this.parentScaleFactor.x;this.height=a*this.parentScaleFactor.y;this.game.width=this.width;this.game.height=this.height;this.sourceAspectRatio=this.width/this.height;this.updateScalingAndBounds();if(b){this.game.renderer.resize(this.width,this.height);this.game.camera.setSize(this.width,this.height);this.game.world.resize(this.width,this.height)}},updateScalingAndBounds:function(){this.scaleFactor.x=this.game.width/this.width;this.scaleFactor.y=this.game.height/this.height;this.scaleFactorInversed.x=this.width/this.game.width;this.scaleFactorInversed.y=this.height/this.game.height;this.aspectRatio=this.width/this.height;if(this.game.canvas){this.dom.getOffset(this.game.canvas,this.offset)}this.bounds.setTo(this.offset.x,this.offset.y,this.width,this.height);if(this.game.input&&this.game.input.scale){this.game.input.scale.setTo(this.scaleFactor.x,this.scaleFactor.y)}},forceOrientation:function(b,a){if(a===undefined){a=false}this.forceLandscape=b;this.forcePortrait=a;this.queueUpdate(true)},classifyOrientation:function(a){if(a==="portrait-primary"||a==="portrait-secondary"){return"portrait"}else{if(a==="landscape-primary"||a==="landscape-secondary"){return"landscape"}else{return null}}},updateOrientationState:function(){var c=this.screenOrientation;var b=this.incorrectOrientation;this.screenOrientation=this.dom.getScreenOrientation(this.compatibility.orientationFallback);this.incorrectOrientation=(this.forceLandscape&&!this.isLandscape)||(this.forcePortrait&&!this.isPortrait);var d=c!==this.screenOrientation;var a=b!==this.incorrectOrientation;if(a){if(this.incorrectOrientation){this.enterIncorrectOrientation.dispatch()}else{this.leaveIncorrectOrientation.dispatch()}}if(d||a){this.onOrientationChange.dispatch(this,c,b)}return d||a},orientationChange:function(a){this.event=a;this.queueUpdate(true)},windowResize:function(a){this.event=a;this.queueUpdate(true)},scrollTop:function(){var a=this.compatibility.scrollTo;if(a){console.warn("window.scrollTo not available in wxgame")}},refresh:function(){this.scrollTop();this.queueUpdate(true)},updateLayout:function(){var a=this.currentScaleMode;if(a===Phaser.ScaleManager.RESIZE){this.reflowGame();return}this.scrollTop();if(this.compatibility.forceMinimumDocumentHeight){document.documentElement.style.minHeight=window.innerHeight+"px"}if(this.incorrectOrientation){this.setMaximum()}else{if(a===Phaser.ScaleManager.EXACT_FIT){this.setExactFit()}else{if(a===Phaser.ScaleManager.SHOW_ALL){if(!this.isFullScreen&&this.boundingParent&&this.compatibility.canExpandParent){this.setShowAll(true);this.resetCanvas();this.setShowAll()}else{this.setShowAll()}}else{if(a===Phaser.ScaleManager.NO_SCALE){this.width=this.game.width;this.height=this.game.height}else{if(a===Phaser.ScaleManager.USER_SCALE){this.width=(this.game.width*this._userScaleFactor.x)-this._userScaleTrim.x;this.height=(this.game.height*this._userScaleFactor.y)-this._userScaleTrim.y}}}}}if(!this.compatibility.canExpandParent&&(a===Phaser.ScaleManager.SHOW_ALL||a===Phaser.ScaleManager.USER_SCALE)){var b=this.getParentBounds(this._tempBounds);this.width=Math.min(this.width,b.width);this.height=Math.min(this.height,b.height)}this.width=this.width|0;this.height=this.height|0;
	this.reflowCanvas()},getParentBounds:function(g){var a=g||new Phaser.Rectangle();var f=this.boundingParent;var d=this.dom.visualBounds;var i=this.dom.layoutBounds;if(!f){a.setTo(0,0,d.width,d.height)}else{var b=f.getBoundingClientRect();var h=(f.offsetParent)?f.offsetParent.getBoundingClientRect():f.getBoundingClientRect();a.setTo(b.left-h.left,b.top-h.top,b.width,b.height);var e=this.windowConstraints;if(e.right){var c=e.right==="layout"?i:d;a.right=Math.min(a.right,c.width)}if(e.bottom){var c=e.bottom==="layout"?i:d;a.bottom=Math.min(a.bottom,c.height)}}a.setTo(Math.round(a.x),Math.round(a.y),Math.round(a.width),Math.round(a.height));return a},alignCanvas:function(b,d){var i=this.getParentBounds(this._tempBounds);var c=this.game.canvas;var e=this.margin;if(b){e.left=e.right=0;var h=c.getBoundingClientRect();if(this.width<i.width&&!this.incorrectOrientation){var a=h.left-i.x;var g=(i.width/2)-(this.width/2);g=Math.max(g,0);var f=g-a;e.left=Math.round(f)}c.style.marginLeft=e.left+"px";if(e.left!==0){e.right=-(i.width-h.width-e.left);c.style.marginRight=e.right+"px"}}if(d){e.top=e.bottom=0;var h=c.getBoundingClientRect();if(this.height<i.height&&!this.incorrectOrientation){var a=h.top-i.y;var g=(i.height/2)-(this.height/2);g=Math.max(g,0);var f=g-a;e.top=Math.round(f)}c.style.marginTop=e.top+"px";if(e.top!==0){e.bottom=-(i.height-h.height-e.top);c.style.marginBottom=e.bottom+"px"}}e.x=e.left;e.y=e.top},reflowGame:function(){this.resetCanvas("","");var a=this.getParentBounds(this._tempBounds);this.updateDimensions(a.width,a.height,true)},reflowCanvas:function(){if(!this.incorrectOrientation){this.width=Phaser.Math.clamp(this.width,this.minWidth||0,this.maxWidth||this.width);this.height=Phaser.Math.clamp(this.height,this.minHeight||0,this.maxHeight||this.height)}this.resetCanvas();if(!this.compatibility.noMargins){if(this.isFullScreen&&this._createdFullScreenTarget){this.alignCanvas(true,true)}else{this.alignCanvas(this.pageAlignHorizontally,this.pageAlignVertically)}}this.updateScalingAndBounds()},resetCanvas:function(c,b){if(c===undefined){c=this.width+"px"}if(b===undefined){b=this.height+"px"}var a=this.game.canvas;if(!this.compatibility.noMargins){a.style.marginLeft="";a.style.marginTop="";a.style.marginRight="";a.style.marginBottom=""}a.style.width=c;a.style.height=b},queueUpdate:function(a){if(a){this._parentBounds.width=0;this._parentBounds.height=0}this._updateThrottle=this._updateThrottleReset},reset:function(a){if(a&&this.grid){this.grid.reset()}},setMaximum:function(){this.width=this.dom.visualBounds.width;this.height=this.dom.visualBounds.height},setShowAll:function(e){var c=this.getParentBounds(this._tempBounds);var b=c.width;var a=c.height;var d;if(e){d=Math.max((a/this.game.height),(b/this.game.width))}else{d=Math.min((a/this.game.height),(b/this.game.width))}this.width=Math.round(this.game.width*d);this.height=Math.round(this.game.height*d)},setExactFit:function(){var a=this.getParentBounds(this._tempBounds);this.width=a.width;this.height=a.height;if(this.isFullScreen){return}if(this.maxWidth){this.width=Math.min(this.width,this.maxWidth)}if(this.maxHeight){this.height=Math.min(this.height,this.maxHeight)}},createFullScreenTarget:function(){var a=document.createElement("div");a.style.margin="0";a.style.padding="0";a.style.background="#000";return a},startFullScreen:function(b,g){if(this.isFullScreen){return false}if(!this.compatibility.supportsFullScreen){var h=this;setTimeout(function(){h.fullScreenError()},10);return}if(this.compatibility.clickTrampoline==="when-not-mouse"){var c=this.game.input;if(c.activePointer&&c.activePointer!==c.mousePointer&&(g||g!==false)){c.activePointer.addClickTrampoline("startFullScreen",this.startFullScreen,this,[b,false]);return}}if(b!==undefined&&this.game.renderType===Phaser.CANVAS){this.game.stage.smoothed=b}var f=this.fullScreenTarget;if(!f){this.cleanupCreatedTarget();this._createdFullScreenTarget=this.createFullScreenTarget();f=this._createdFullScreenTarget}var a={targetElement:f};this.hasPhaserSetFullScreen=true;this.onFullScreenInit.dispatch(this,a);if(this._createdFullScreenTarget){var d=this.game.canvas;var e=d.parentNode;e.insertBefore(f,d);f.appendChild(d)}if(this.game.device.fullscreenKeyboard){f[this.game.device.requestFullscreen](Element.ALLOW_KEYBOARD_INPUT)}else{f[this.game.device.requestFullscreen]()}return true},stopFullScreen:function(){if(!this.isFullScreen||!this.compatibility.supportsFullScreen){return false}this.hasPhaserSetFullScreen=false;document[this.game.device.cancelFullscreen]();return true},cleanupCreatedTarget:function(){var b=this._createdFullScreenTarget;if(b&&b.parentNode){var a=b.parentNode;a.insertBefore(this.game.canvas,b);a.removeChild(b)}this._createdFullScreenTarget=null},prepScreenMode:function(c){var a=!!this._createdFullScreenTarget;var b=this._createdFullScreenTarget||this.fullScreenTarget;if(c){if(a||this.fullScreenScaleMode===Phaser.ScaleManager.EXACT_FIT){if(b!==this.game.canvas){this._fullScreenRestore={targetWidth:b.style.width,targetHeight:b.style.height};
	b.style.width="100%";b.style.height="100%"}}}else{if(this._fullScreenRestore){b.style.width=this._fullScreenRestore.targetWidth;b.style.height=this._fullScreenRestore.targetHeight;this._fullScreenRestore=null}this.updateDimensions(this._gameSize.width,this._gameSize.height,true);this.resetCanvas()}},fullScreenChange:function(a){this.event=a;if(this.isFullScreen){this.prepScreenMode(true);this.updateLayout();this.queueUpdate(true)}else{this.prepScreenMode(false);this.cleanupCreatedTarget();this.updateLayout();this.queueUpdate(true)}this.onFullScreenChange.dispatch(this,this.width,this.height)},fullScreenError:function(a){this.event=a;this.cleanupCreatedTarget();console.warn("Phaser.ScaleManager: requestFullscreen failed or device does not support the Fullscreen API");this.onFullScreenError.dispatch(this)},scaleSprite:function(g,b,h,a){if(b===undefined){b=this.width}if(h===undefined){h=this.height}if(a===undefined){a=false}if(!g||!g["scale"]){return g}g.scale.x=1;g.scale.y=1;if((g.width<=0)||(g.height<=0)||(b<=0)||(h<=0)){return g}var d=b;var i=(g.height*b)/g.width;var c=(g.width*h)/g.height;var f=h;var e=(c>b);if(e){e=a}else{e=!a}if(e){g.width=Math.floor(d);g.height=Math.floor(i)}else{g.width=Math.floor(c);g.height=Math.floor(f)}return g},destroy:function(){this.game.onResume.remove(this._gameResumed,this);window.removeEventListener("orientationchange",this._orientationChange,false);window.removeEventListener("resize",this._windowResize,false);if(this.compatibility.supportsFullScreen){document.removeEventListener("webkitfullscreenchange",this._fullScreenChange,false);document.removeEventListener("mozfullscreenchange",this._fullScreenChange,false);document.removeEventListener("MSFullscreenChange",this._fullScreenChange,false);document.removeEventListener("fullscreenchange",this._fullScreenChange,false);document.removeEventListener("webkitfullscreenerror",this._fullScreenError,false);document.removeEventListener("mozfullscreenerror",this._fullScreenError,false);document.removeEventListener("MSFullscreenError",this._fullScreenError,false);document.removeEventListener("fullscreenerror",this._fullScreenError,false)}}};Phaser.ScaleManager.prototype.constructor=Phaser.ScaleManager;Object.defineProperty(Phaser.ScaleManager.prototype,"boundingParent",{get:function(){if(this.parentIsWindow||(this.isFullScreen&&this.hasPhaserSetFullScreen&&!this._createdFullScreenTarget)){return null}var a=this.game.canvas&&this.game.canvas.parentNode;return a||null}});Object.defineProperty(Phaser.ScaleManager.prototype,"scaleMode",{get:function(){return this._scaleMode},set:function(a){if(a!==this._scaleMode){if(!this.isFullScreen){this.updateDimensions(this._gameSize.width,this._gameSize.height,true);this.queueUpdate(true)}this._scaleMode=a}return this._scaleMode}});Object.defineProperty(Phaser.ScaleManager.prototype,"fullScreenScaleMode",{get:function(){return this._fullScreenScaleMode},set:function(a){if(a!==this._fullScreenScaleMode){if(this.isFullScreen){this.prepScreenMode(false);this._fullScreenScaleMode=a;this.prepScreenMode(true);this.queueUpdate(true)}else{this._fullScreenScaleMode=a}}return this._fullScreenScaleMode}});Object.defineProperty(Phaser.ScaleManager.prototype,"currentScaleMode",{get:function(){return this.isFullScreen?this._fullScreenScaleMode:this._scaleMode}});Object.defineProperty(Phaser.ScaleManager.prototype,"pageAlignHorizontally",{get:function(){return this._pageAlignHorizontally},set:function(a){if(a!==this._pageAlignHorizontally){this._pageAlignHorizontally=a;this.queueUpdate(true)}}});Object.defineProperty(Phaser.ScaleManager.prototype,"pageAlignVertically",{get:function(){return this._pageAlignVertically},set:function(a){if(a!==this._pageAlignVertically){this._pageAlignVertically=a;this.queueUpdate(true)}}});Object.defineProperty(Phaser.ScaleManager.prototype,"isFullScreen",{get:function(){return !!(document["fullscreenElement"]||document["webkitFullscreenElement"]||document["mozFullScreenElement"]||document["msFullscreenElement"])}});Object.defineProperty(Phaser.ScaleManager.prototype,"isPortrait",{get:function(){return this.classifyOrientation(this.screenOrientation)==="portrait"}});Object.defineProperty(Phaser.ScaleManager.prototype,"isLandscape",{get:function(){return this.classifyOrientation(this.screenOrientation)==="landscape"}});Object.defineProperty(Phaser.ScaleManager.prototype,"isGamePortrait",{get:function(){return(this.height>this.width)}});Object.defineProperty(Phaser.ScaleManager.prototype,"isGameLandscape",{get:function(){return(this.width>this.height)}});Phaser.Utils.Debug=function(a){this.game=a;this.sprite=null;this.bmd=null;this.canvas=null;this.context=null;this.font="14px Courier";this.columnWidth=100;this.lineHeight=16;this.renderShadow=true;this.currentX=0;this.currentY=0;this.currentAlpha=1;this.dirty=false};Phaser.Utils.Debug.prototype={boot:function(){if(this.game.renderType===Phaser.CANVAS){this.context=this.game.context}else{this.bmd=new Phaser.BitmapData(this.game,"__DEBUG",this.game.width,this.game.height,true);
	this.sprite=this.game.make.image(0,0,this.bmd);this.game.stage.addChild(this.sprite);this.game.scale.onSizeChange.add(this.resize,this);this.canvas=PIXI.CanvasPool.create(this,this.game.width,this.game.height);this.context=this.canvas.getContext("2d")}},resize:function(b,c,a){this.bmd.resize(c,a);this.canvas.width=c;this.canvas.height=a},preUpdate:function(){if(this.dirty&&this.sprite){this.bmd.clear();this.bmd.draw(this.canvas,0,0);this.context.clearRect(0,0,this.game.width,this.game.height);this.dirty=false}},reset:function(){if(this.context){this.context.clearRect(0,0,this.game.width,this.game.height)}if(this.sprite){this.bmd.clear()}},start:function(a,d,b,c){if(typeof a!=="number"){a=0}if(typeof d!=="number"){d=0}b=b||"rgb(255,255,255)";if(c===undefined){c=0}this.currentX=a;this.currentY=d;this.currentColor=b;this.columnWidth=c;this.dirty=true;this.context.save();this.context.setTransform(1,0,0,1,0,0);this.context.strokeStyle=b;this.context.fillStyle=b;this.context.font=this.font;this.context.globalAlpha=this.currentAlpha},stop:function(){this.context.restore()},line:function(){var a=this.currentX;for(var b=0;b<arguments.length;b++){if(this.renderShadow){this.context.fillStyle="rgb(0,0,0)";this.context.fillText(arguments[b],a+1,this.currentY+1);this.context.fillStyle=this.currentColor}this.context.fillText(arguments[b],a,this.currentY);a+=this.columnWidth}this.currentY+=this.lineHeight},soundInfo:function(c,a,d,b){this.start(a,d,b);this.line("Sound: "+c.key+" Locked: "+c.game.sound.touchLocked);this.line("Is Ready?: "+this.game.cache.isSoundReady(c.key)+" Pending Playback: "+c.pendingPlayback);this.line("Decoded: "+c.isDecoded+" Decoding: "+c.isDecoding);this.line("Total Duration: "+c.totalDuration+" Playing: "+c.isPlaying);this.line("Time: "+c.currentTime);this.line("Volume: "+c.volume+" Muted: "+c.mute);this.line("WebAudio: "+c.usingWebAudio+" Audio: "+c.usingAudioTag);if(c.currentMarker!==""){this.line("Marker: "+c.currentMarker+" Duration: "+c.duration+" (ms: "+c.durationMS+")");this.line("Start: "+c.markers[c.currentMarker].start+" Stop: "+c.markers[c.currentMarker].stop);this.line("Position: "+c.position)}this.stop()},cameraInfo:function(c,a,d,b){this.start(a,d,b);this.line("Camera ("+c.width+" x "+c.height+")");this.line("X: "+c.x+" Y: "+c.y);if(c.bounds){this.line("Bounds x: "+c.bounds.x+" Y: "+c.bounds.y+" w: "+c.bounds.width+" h: "+c.bounds.height)}this.line("View x: "+c.view.x+" Y: "+c.view.y+" w: "+c.view.width+" h: "+c.view.height);this.line("Total in view: "+c.totalInView);this.stop()},timer:function(d,a,c,b){this.start(a,c,b);this.line("Timer (running: "+d.running+" expired: "+d.expired+")");this.line("Next Tick: "+d.next+" Duration: "+d.duration);this.line("Paused: "+d.paused+" Length: "+d.length);this.stop()},pointer:function(e,d,b,c,a){if(e==null){return}if(d===undefined){d=false}b=b||"rgba(0,255,0,0.5)";c=c||"rgba(255,0,0,0.5)";if(d===true&&e.isUp===true){return}this.start(e.x,e.y-100,a);this.context.beginPath();this.context.arc(e.x,e.y,e.circle.radius,0,Math.PI*2);if(e.active){this.context.fillStyle=b}else{this.context.fillStyle=c}this.context.fill();this.context.closePath();this.context.beginPath();this.context.moveTo(e.positionDown.x,e.positionDown.y);this.context.lineTo(e.position.x,e.position.y);this.context.lineWidth=2;this.context.stroke();this.context.closePath();this.line("ID: "+e.id+" Active: "+e.active);this.line("World X: "+e.worldX+" World Y: "+e.worldY);this.line("Screen X: "+e.x+" Screen Y: "+e.y+" In: "+e.withinGame);this.line("Duration: "+e.duration+" ms");this.line("is Down: "+e.isDown+" is Up: "+e.isUp);this.stop()},spriteInputInfo:function(c,a,d,b){this.start(a,d,b);this.line("Sprite Input: ("+c.width+" x "+c.height+")");this.line("x: "+c.input.pointerX().toFixed(1)+" y: "+c.input.pointerY().toFixed(1));this.line("over: "+c.input.pointerOver()+" duration: "+c.input.overDuration().toFixed(0));this.line("down: "+c.input.pointerDown()+" duration: "+c.input.downDuration().toFixed(0));this.line("just over: "+c.input.justOver()+" just out: "+c.input.justOut());this.stop()},key:function(c,a,d,b){this.start(a,d,b,150);this.line("Key:",c.keyCode,"isDown:",c.isDown);this.line("justDown:",c.justDown,"justUp:",c.justUp);this.line("Time Down:",c.timeDown.toFixed(0),"duration:",c.duration.toFixed(0));this.stop()},inputInfo:function(a,c,b){this.start(a,c,b);this.line("Input");this.line("X: "+this.game.input.x+" Y: "+this.game.input.y);this.line("World X: "+this.game.input.worldX+" World Y: "+this.game.input.worldY);this.line("Scale X: "+this.game.input.scale.x.toFixed(1)+" Scale Y: "+this.game.input.scale.x.toFixed(1));this.line("Screen X: "+this.game.input.activePointer.screenX+" Screen Y: "+this.game.input.activePointer.screenY);this.stop()},spriteBounds:function(b,a,d){var c=b.getBounds();c.x+=this.game.camera.x;c.y+=this.game.camera.y;this.rectangle(c,a,d)},ropeSegments:function(e,b,d){var c=e.segments;var a=this;c.forEach(function(f){a.rectangle(f,b,d)},this)},spriteInfo:function(c,a,d,b){this.start(a,d,b);
	this.line("Sprite: "+" ("+c.width+" x "+c.height+") anchor: "+c.anchor.x+" x "+c.anchor.y);this.line("x: "+c.x.toFixed(1)+" y: "+c.y.toFixed(1));this.line("angle: "+c.angle.toFixed(1)+" rotation: "+c.rotation.toFixed(1));this.line("visible: "+c.visible+" in camera: "+c.inCamera);this.line("bounds x: "+c._bounds.x.toFixed(1)+" y: "+c._bounds.y.toFixed(1)+" w: "+c._bounds.width.toFixed(1)+" h: "+c._bounds.height.toFixed(1));this.stop()},spriteCoords:function(c,a,d,b){this.start(a,d,b,100);if(c.name){this.line(c.name)}this.line("x:",c.x.toFixed(2),"y:",c.y.toFixed(2));this.line("pos x:",c.position.x.toFixed(2),"pos y:",c.position.y.toFixed(2));this.line("world x:",c.world.x.toFixed(2),"world y:",c.world.y.toFixed(2));this.stop()},lineInfo:function(b,a,d,c){this.start(a,d,c,80);this.line("start.x:",b.start.x.toFixed(2),"start.y:",b.start.y.toFixed(2));this.line("end.x:",b.end.x.toFixed(2),"end.y:",b.end.y.toFixed(2));this.line("length:",b.length.toFixed(2),"angle:",b.angle);this.stop()},pixel:function(a,d,b,c){c=c||2;this.start();this.context.fillStyle=b;this.context.fillRect(a,d,c,c);this.stop()},geom:function(b,a,d,c){if(d===undefined){d=true}if(c===undefined){c=0}a=a||"rgba(0,255,0,0.4)";this.start();this.context.fillStyle=a;this.context.strokeStyle=a;if(b instanceof Phaser.Rectangle||c===1){if(d){this.context.fillRect(b.x-this.game.camera.x,b.y-this.game.camera.y,b.width,b.height)}else{this.context.strokeRect(b.x-this.game.camera.x,b.y-this.game.camera.y,b.width,b.height)}}else{if(b instanceof Phaser.Circle||c===2){this.context.beginPath();this.context.arc(b.x-this.game.camera.x,b.y-this.game.camera.y,b.radius,0,Math.PI*2,false);this.context.closePath();if(d){this.context.fill()}else{this.context.stroke()}}else{if(b instanceof Phaser.Point||c===3){this.context.fillRect(b.x-this.game.camera.x,b.y-this.game.camera.y,4,4)}else{if(b instanceof Phaser.Line||c===4){this.context.lineWidth=1;this.context.beginPath();this.context.moveTo((b.start.x+0.5)-this.game.camera.x,(b.start.y+0.5)-this.game.camera.y);this.context.lineTo((b.end.x+0.5)-this.game.camera.x,(b.end.y+0.5)-this.game.camera.y);this.context.closePath();this.context.stroke()}}}}this.stop()},rectangle:function(b,a,c){if(c===undefined){c=true}a=a||"rgba(0, 255, 0, 0.4)";this.start();if(c){this.context.fillStyle=a;this.context.fillRect(b.x-this.game.camera.x,b.y-this.game.camera.y,b.width,b.height)}else{this.context.strokeStyle=a;this.context.strokeRect(b.x-this.game.camera.x,b.y-this.game.camera.y,b.width,b.height)}this.stop()},text:function(d,a,e,c,b){c=c||"rgb(255,255,255)";b=b||"16px Courier";this.start();this.context.font=b;if(this.renderShadow){this.context.fillStyle="rgb(0,0,0)";this.context.fillText(d,a+1,e+1)}this.context.fillStyle=c;this.context.fillText(d,a,e);this.stop()},quadTree:function(a,b){b=b||"rgba(255,0,0,0.3)";this.start();var d=a.bounds;if(a.nodes.length===0){this.context.strokeStyle=b;this.context.strokeRect(d.x,d.y,d.width,d.height);this.text("size: "+a.objects.length,d.x+4,d.y+16,"rgb(0,200,0)","12px Courier");this.context.strokeStyle="rgb(0,255,0)";for(var c=0;c<a.objects.length;c++){this.context.strokeRect(a.objects[c].x,a.objects[c].y,a.objects[c].width,a.objects[c].height)}}else{for(var c=0;c<a.nodes.length;c++){this.quadTree(a.nodes[c])}}this.stop()},body:function(b,a,c){if(b.body){this.start();if(b.body.type===Phaser.Physics.ARCADE){Phaser.Physics.Arcade.Body.render(this.context,b.body,a,c)}else{if(b.body.type===Phaser.Physics.NINJA){Phaser.Physics.Ninja.Body.render(this.context,b.body,a,c)}else{if(b.body.type===Phaser.Physics.BOX2D){Phaser.Physics.Box2D.renderBody(this.context,b.body,a)}}}this.stop()}},bodyInfo:function(c,a,d,b){if(c.body){this.start(a,d,b,210);if(c.body.type===Phaser.Physics.ARCADE){Phaser.Physics.Arcade.Body.renderBodyInfo(this,c.body)}else{if(c.body.type===Phaser.Physics.BOX2D){this.game.physics.box2d.renderBodyInfo(this,c.body)}}this.stop()}},box2dWorld:function(){this.start();this.context.translate(-this.game.camera.view.x,-this.game.camera.view.y,0);this.game.physics.box2d.renderDebugDraw(this.context);this.stop()},box2dBody:function(a,b){this.start();Phaser.Physics.Box2D.renderBody(this.context,a,b);this.stop()},displayList:function(b){if(b===undefined){b=this.game.world}if(b.hasOwnProperty("renderOrderID")){console.log("["+b.renderOrderID+"]",b)}else{console.log("[]",b)}if(b.children&&b.children.length>0){for(var a=0;a<b.children.length;a++){this.game.debug.displayList(b.children[a])}}},destroy:function(){PIXI.CanvasPool.remove(this)}};Phaser.Utils.Debug.prototype.constructor=Phaser.Utils.Debug;Phaser.DOM={getOffset:function(b,a){a=a||new Phaser.Point();var c=b.getBoundingClientRect();var d=Phaser.DOM.scrollY||0;var e=Phaser.DOM.scrollX||0;var g=document.documentElement.clientTop||0;var f=document.documentElement.clientLeft||0;a.x=c.left+e-f;a.y=c.top+d-g;return a},getBounds:function(b,a){if(a===undefined){a=0}b=b&&!b.nodeType?b[0]:b;if(!b||b.nodeType!==1){return false}else{return this.calibrate(b.getBoundingClientRect(),a)
}},calibrate:function(c,b){b=+b||0;var a={width:0,height:0,left:0,right:0,top:0,bottom:0};a.width=(a.right=c.right+b)-(a.left=c.left-b);a.height=(a.bottom=c.bottom+b)-(a.top=c.top-b);return a},getAspectRatio:function(b){b=null==b?this.visualBounds:1===b.nodeType?this.getBounds(b):b;var a=b["width"];var c=b["height"];if(typeof a==="function"){a=a.call(b)}if(typeof c==="function"){c=c.call(b)}return a/c},inLayoutViewport:function(b,a){var c=this.getBounds(b,a);return !!c&&c.bottom>=0&&c.right>=0&&c.top<=this.layoutBounds.width&&c.left<=this.layoutBounds.height},getScreenOrientation:function(e){var b=window.screen;var a=b.orientation||b.mozOrientation||b.msOrientation;if(a&&typeof a.type==="string"){return a.type}else{if(typeof a==="string"){return a}}var d="portrait-primary";var c="landscape-primary";if(e==="screen"){return(b.height>b.width)?d:c}else{if(e==="viewport"){return(this.visualBounds.height>this.visualBounds.width)?d:c}else{if(e==="window.orientation"&&typeof window.orientation==="number"){return(window.orientation===0||window.orientation===180)?d:c}else{if(window.matchMedia){if(window.matchMedia("(orientation: portrait)").matches){return d}else{if(window.matchMedia("(orientation: landscape)").matches){return c}}}}}}return(this.visualBounds.height>this.visualBounds.width)?d:c},visualBounds:new Phaser.Rectangle(),layoutBounds:new Phaser.Rectangle(),documentBounds:new Phaser.Rectangle()};Phaser.Device.whenReady(function(c){var f=window&&("pageXOffset" in window)?function(){return window.pageXOffset}:function(){return document.documentElement.scrollLeft};var d=window&&("pageYOffset" in window)?function(){return window.pageYOffset}:function(){return document.documentElement.scrollTop};Object.defineProperty(Phaser.DOM,"scrollX",{get:f});Object.defineProperty(Phaser.DOM,"scrollY",{get:d});Object.defineProperty(Phaser.DOM.visualBounds,"x",{get:f});Object.defineProperty(Phaser.DOM.visualBounds,"y",{get:d});Object.defineProperty(Phaser.DOM.layoutBounds,"x",{value:0});Object.defineProperty(Phaser.DOM.layoutBounds,"y",{value:0});var b=c.desktop&&(document.documentElement.clientWidth<=window.innerWidth)&&(document.documentElement.clientHeight<=window.innerHeight);if(b){var e=function(){return Math.max(window.innerWidth,document.documentElement.clientWidth)};var a=function(){return Math.max(window.innerHeight,document.documentElement.clientHeight)};Object.defineProperty(Phaser.DOM.visualBounds,"width",{get:e});Object.defineProperty(Phaser.DOM.visualBounds,"height",{get:a});Object.defineProperty(Phaser.DOM.layoutBounds,"width",{get:e});Object.defineProperty(Phaser.DOM.layoutBounds,"height",{get:a})}else{Object.defineProperty(Phaser.DOM.visualBounds,"width",{get:function(){return window.innerWidth}});Object.defineProperty(Phaser.DOM.visualBounds,"height",{get:function(){return window.innerHeight}});Object.defineProperty(Phaser.DOM.layoutBounds,"width",{get:function(){var h=document.documentElement.clientWidth;var g=window.innerWidth;return h<g?g:h}});Object.defineProperty(Phaser.DOM.layoutBounds,"height",{get:function(){var h=document.documentElement.clientHeight;var g=window.innerHeight;return h<g?g:h}})}Object.defineProperty(Phaser.DOM.documentBounds,"x",{value:0});Object.defineProperty(Phaser.DOM.documentBounds,"y",{value:0});Object.defineProperty(Phaser.DOM.documentBounds,"width",{get:function(){var g=document.documentElement;return Math.max(g.clientWidth,g.offsetWidth,g.scrollWidth)}});Object.defineProperty(Phaser.DOM.documentBounds,"height",{get:function(){var g=document.documentElement;return Math.max(g.clientHeight,g.offsetHeight,g.scrollHeight)}})},null,true);Phaser.ArraySet=function(a){this.position=0;this.list=a||[]};Phaser.ArraySet.prototype={add:function(a){if(!this.exists(a)){this.list.push(a)}return a},getIndex:function(a){return this.list.indexOf(a)},getByKey:function(c,b){var a=this.list.length;while(a--){if(this.list[a][c]===b){return this.list[a]}}return null},exists:function(a){return(this.list.indexOf(a)>-1)},reset:function(){this.list.length=0},remove:function(b){var a=this.list.indexOf(b);if(a>-1){this.list.splice(a,1);return b}},setAll:function(b,c){var a=this.list.length;while(a--){if(this.list[a]){this.list[a][b]=c}}},callAll:function(c){var a=Array.prototype.slice.call(arguments,1);var b=this.list.length;while(b--){if(this.list[b]&&this.list[b][c]){this.list[b][c].apply(this.list[b],a)}}},removeAll:function(b){if(b===undefined){b=false}var a=this.list.length;while(a--){if(this.list[a]){var c=this.remove(this.list[a]);if(b){c.destroy()}}}this.position=0;this.list=[]}};Object.defineProperty(Phaser.ArraySet.prototype,"total",{get:function(){return this.list.length}});Object.defineProperty(Phaser.ArraySet.prototype,"first",{get:function(){this.position=0;if(this.list.length>0){return this.list[0]}else{return null}}});Object.defineProperty(Phaser.ArraySet.prototype,"next",{get:function(){if(this.position<this.list.length){this.position++;return this.list[this.position]}else{return null}}});Phaser.ArraySet.prototype.constructor=Phaser.ArraySet;
Phaser.ArrayUtils={getRandomItem:function(c,d,b){if(c===null){return null}if(d===undefined){d=0}if(b===undefined){b=c.length}var a=d+Math.floor(Math.random()*b);return c[a]===undefined?null:c[a]},removeRandomItem:function(c,e,b){if(c==null){return null}if(e===undefined){e=0}if(b===undefined){b=c.length}var a=e+Math.floor(Math.random()*b);if(a<c.length){var d=c.splice(a,1);return d[0]===undefined?null:d[0]}else{return null}},shuffle:function(d){for(var c=d.length-1;c>0;c--){var b=Math.floor(Math.random()*(c+1));var a=d[c];d[c]=d[b];d[b]=a}return d},transposeMatrix:function(f){var e=f.length;var b=f[0].length;var a=new Array(b);for(var d=0;d<b;d++){a[d]=new Array(e);for(var c=e-1;c>-1;c--){a[d][c]=f[c][d]}}return a},rotateMatrix:function(a,c){if(typeof c!=="string"){c=((c%360)+360)%360}if(c===90||c===-270||c==="rotateLeft"){a=Phaser.ArrayUtils.transposeMatrix(a);a=a.reverse()}else{if(c===-90||c===270||c==="rotateRight"){a=a.reverse();a=Phaser.ArrayUtils.transposeMatrix(a)}else{if(Math.abs(c)===180||c==="rotate180"){for(var b=0;b<a.length;b++){a[b].reverse()}a=a.reverse()}}}return a},findClosest:function(e,b){if(!b.length){return NaN}else{if(b.length===1||e<b[0]){return b[0]}}var c=1;while(b[c]<e){c++}var a=b[c-1];var d=(c<b.length)?b[c]:Number.POSITIVE_INFINITY;return((d-e)<=(e-a))?d:a},rotateRight:function(b){var a=b.pop();b.unshift(a);return a},rotateLeft:function(b){var a=b.shift();b.push(a);return a},rotate:function(b){var a=b.shift();b.push(a);return a},numberArray:function(d,b){var a=[];for(var c=d;c<=b;c++){a.push(c)}return a},numberArrayStep:function(f,b,e){if(f===undefined||f===null){f=0}if(b===undefined||b===null){b=f;f=0}if(e===undefined){e=1}var a=[];var d=Math.max(Phaser.Math.roundAwayFromZero((b-f)/(e||1)),0);for(var c=0;c<d;c++){a.push(f);f+=e}return a}};Phaser.LinkedList=function(){this.next=null;this.prev=null;this.first=null;this.last=null;this.total=0};Phaser.LinkedList.prototype={add:function(a){if(this.total===0&&this.first===null&&this.last===null){this.first=a;this.last=a;this.next=a;a.prev=this;this.total++;return a}this.last.next=a;a.prev=this.last;this.last=a;this.total++;return a},reset:function(){this.first=null;this.last=null;this.next=null;this.prev=null;this.total=0},remove:function(a){if(this.total===1){this.reset();a.next=a.prev=null;return}if(a===this.first){this.first=this.first.next}else{if(a===this.last){this.last=this.last.prev}}if(a.prev){a.prev.next=a.next}if(a.next){a.next.prev=a.prev}a.next=a.prev=null;if(this.first===null){this.last=null}this.total--},callAll:function(b){if(!this.first||!this.last){return}var a=this.first;do{if(a&&a[b]){a[b].call(a)}a=a.next}while(a!==this.last.next)}};Phaser.LinkedList.prototype.constructor=Phaser.LinkedList;Phaser.Create=function(a){this.game=a;this.bmd=null;this.canvas=null;this.ctx=null;this.palettes=[{0:"#000",1:"#9D9D9D",2:"#FFF",3:"#BE2633",4:"#E06F8B",5:"#493C2B",6:"#A46422",7:"#EB8931",8:"#F7E26B",9:"#2F484E",A:"#44891A",B:"#A3CE27",C:"#1B2632",D:"#005784",E:"#31A2F2",F:"#B2DCEF"},{0:"#000",1:"#191028",2:"#46af45",3:"#a1d685",4:"#453e78",5:"#7664fe",6:"#833129",7:"#9ec2e8",8:"#dc534b",9:"#e18d79",A:"#d6b97b",B:"#e9d8a1",C:"#216c4b",D:"#d365c8",E:"#afaab9",F:"#f5f4eb"},{0:"#000",1:"#2234d1",2:"#0c7e45",3:"#44aacc",4:"#8a3622",5:"#5c2e78",6:"#aa5c3d",7:"#b5b5b5",8:"#5e606e",9:"#4c81fb",A:"#6cd947",B:"#7be2f9",C:"#eb8a60",D:"#e23d69",E:"#ffd93f",F:"#fff"},{0:"#000",1:"#fff",2:"#8b4131",3:"#7bbdc5",4:"#8b41ac",5:"#6aac41",6:"#3931a4",7:"#d5de73",8:"#945a20",9:"#5a4100",A:"#bd736a",B:"#525252",C:"#838383",D:"#acee8b",E:"#7b73de",F:"#acacac"},{0:"#000",1:"#191028",2:"#46af45",3:"#a1d685",4:"#453e78",5:"#7664fe",6:"#833129",7:"#9ec2e8",8:"#dc534b",9:"#e18d79",A:"#d6b97b",B:"#e9d8a1",C:"#216c4b",D:"#d365c8",E:"#afaab9",F:"#fff"}]};Phaser.Create.PALETTE_ARNE=0;Phaser.Create.PALETTE_JMP=1;Phaser.Create.PALETTE_CGA=2;Phaser.Create.PALETTE_C64=3;Phaser.Create.PALETTE_JAPANESE_MACHINE=4;Phaser.Create.prototype={texture:function(l,c,f,b,a){if(f===undefined){f=8}if(b===undefined){b=f}if(a===undefined){a=0}var k=c[0].length*f;var e=c.length*b;if(this.bmd===null){this.bmd=this.game.make.bitmapData();this.canvas=this.bmd.canvas;this.ctx=this.bmd.context}this.bmd.resize(k,e);this.bmd.clear();for(var i=0;i<c.length;i++){var m=c[i];for(var j=0;j<m.length;j++){var g=m[j];if(g!=="."&&g!==" "){this.ctx.fillStyle=this.palettes[a][g];this.ctx.fillRect(j*f,i*b,f,b)}}}return this.bmd.generateTexture(l)},grid:function(e,g,c,f,b,d){if(this.bmd===null){this.bmd=this.game.make.bitmapData();this.canvas=this.bmd.canvas;this.ctx=this.bmd.context}this.bmd.resize(g,c);this.ctx.fillStyle=d;for(var h=0;h<c;h+=b){this.ctx.fillRect(0,h,g,1)}for(var a=0;a<g;a+=f){this.ctx.fillRect(a,0,1,c)}return this.bmd.generateTexture(e)}};Phaser.Create.prototype.constructor=Phaser.Create;Phaser.FlexGrid=function(b,c,a){this.game=b.game;this.manager=b;this.width=c;this.height=a;this.boundsCustom=new Phaser.Rectangle(0,0,c,a);this.boundsFluid=new Phaser.Rectangle(0,0,c,a);this.boundsFull=new Phaser.Rectangle(0,0,c,a);
	this.boundsNone=new Phaser.Rectangle(0,0,c,a);this.positionCustom=new Phaser.Point(0,0);this.positionFluid=new Phaser.Point(0,0);this.positionFull=new Phaser.Point(0,0);this.positionNone=new Phaser.Point(0,0);this.scaleCustom=new Phaser.Point(1,1);this.scaleFluid=new Phaser.Point(1,1);this.scaleFluidInversed=new Phaser.Point(1,1);this.scaleFull=new Phaser.Point(1,1);this.scaleNone=new Phaser.Point(1,1);this.customWidth=0;this.customHeight=0;this.customOffsetX=0;this.customOffsetY=0;this.ratioH=c/a;this.ratioV=a/c;this.multiplier=0;this.layers=[]};Phaser.FlexGrid.prototype={setSize:function(b,a){this.width=b;this.height=a;this.ratioH=b/a;this.ratioV=a/b;this.scaleNone=new Phaser.Point(1,1);this.boundsNone.width=this.width;this.boundsNone.height=this.height;this.refresh()},createCustomLayer:function(e,a,c,d){if(d===undefined){d=true}this.customWidth=e;this.customHeight=a;this.boundsCustom.width=e;this.boundsCustom.height=a;var b=new Phaser.FlexLayer(this,this.positionCustom,this.boundsCustom,this.scaleCustom);if(d){this.game.world.add(b)}this.layers.push(b);if(typeof c!=="undefined"&&typeof c!==null){b.addMultiple(c)}return b},createFluidLayer:function(b,c){if(c===undefined){c=true}var a=new Phaser.FlexLayer(this,this.positionFluid,this.boundsFluid,this.scaleFluid);if(c){this.game.world.add(a)}this.layers.push(a);if(typeof b!=="undefined"&&typeof b!==null){a.addMultiple(b)}return a},createFullLayer:function(b){var a=new Phaser.FlexLayer(this,this.positionFull,this.boundsFull,this.scaleFluid);this.game.world.add(a);this.layers.push(a);if(typeof b!=="undefined"){a.addMultiple(b)}return a},createFixedLayer:function(b){var a=new Phaser.FlexLayer(this,this.positionNone,this.boundsNone,this.scaleNone);this.game.world.add(a);this.layers.push(a);if(typeof b!=="undefined"){a.addMultiple(b)}return a},reset:function(){var a=this.layers.length;while(a--){if(!this.layers[a].persist){this.layers[a].position=null;this.layers[a].scale=null;this.layers.slice(a,1)}}},onResize:function(b,a){this.ratioH=b/a;this.ratioV=a/b;this.refresh(b,a)},refresh:function(){this.multiplier=Math.min((this.manager.height/this.height),(this.manager.width/this.width));this.boundsFluid.width=Math.round(this.width*this.multiplier);this.boundsFluid.height=Math.round(this.height*this.multiplier);this.scaleFluid.set(this.boundsFluid.width/this.width,this.boundsFluid.height/this.height);this.scaleFluidInversed.set(this.width/this.boundsFluid.width,this.height/this.boundsFluid.height);this.scaleFull.set(this.boundsFull.width/this.width,this.boundsFull.height/this.height);this.boundsFull.width=Math.round(this.manager.width*this.scaleFluidInversed.x);this.boundsFull.height=Math.round(this.manager.height*this.scaleFluidInversed.y);this.boundsFluid.centerOn(this.manager.bounds.centerX,this.manager.bounds.centerY);this.boundsNone.centerOn(this.manager.bounds.centerX,this.manager.bounds.centerY);this.positionFluid.set(this.boundsFluid.x,this.boundsFluid.y);this.positionNone.set(this.boundsNone.x,this.boundsNone.y)},fitSprite:function(a){this.manager.scaleSprite(a);a.x=this.manager.bounds.centerX;a.y=this.manager.bounds.centerY},debug:function(){this.game.debug.text(this.boundsFluid.width+" x "+this.boundsFluid.height,this.boundsFluid.x+4,this.boundsFluid.y+16);this.game.debug.geom(this.boundsFluid,"rgba(255,0,0,0.9",false)}};Phaser.FlexGrid.prototype.constructor=Phaser.FlexGrid;Phaser.FlexLayer=function(b,a,c,d){Phaser.Group.call(this,b.game,null,"__flexLayer"+b.game.rnd.uuid(),false);this.manager=b.manager;this.grid=b;this.persist=false;this.position=a;this.bounds=c;this.scale=d;this.topLeft=c.topLeft;this.topMiddle=new Phaser.Point(c.halfWidth,0);this.topRight=c.topRight;this.bottomLeft=c.bottomLeft;this.bottomMiddle=new Phaser.Point(c.halfWidth,c.bottom);this.bottomRight=c.bottomRight};Phaser.FlexLayer.prototype=Object.create(Phaser.Group.prototype);Phaser.FlexLayer.prototype.constructor=Phaser.FlexLayer;Phaser.FlexLayer.prototype.resize=function(){};Phaser.FlexLayer.prototype.debug=function(){this.game.debug.text(this.bounds.width+" x "+this.bounds.height,this.bounds.x+4,this.bounds.y+16);this.game.debug.geom(this.bounds,"rgba(0,0,255,0.9",false);this.game.debug.geom(this.topLeft,"rgba(255,255,255,0.9");this.game.debug.geom(this.topMiddle,"rgba(255,255,255,0.9");this.game.debug.geom(this.topRight,"rgba(255,255,255,0.9")};Phaser.Color={packPixel:function(f,e,c,d){if(Phaser.Device.LITTLE_ENDIAN){return((d<<24)|(c<<16)|(e<<8)|f)>>>0}else{return((f<<24)|(e<<16)|(c<<8)|d)>>>0}},unpackPixel:function(d,c,a,b){if(c===undefined||c===null){c=Phaser.Color.createColor()}if(a===undefined||a===null){a=false}if(b===undefined||b===null){b=false}if(Phaser.Device.LITTLE_ENDIAN){c.a=((d&4278190080)>>>24);c.b=((d&16711680)>>>16);c.g=((d&65280)>>>8);c.r=((d&255))}else{c.r=((d&4278190080)>>>24);c.g=((d&16711680)>>>16);c.b=((d&65280)>>>8);c.a=((d&255))}c.color=d;c.rgba="rgba("+c.r+","+c.g+","+c.b+","+(c.a/255)+")";if(a){Phaser.Color.RGBtoHSL(c.r,c.g,c.b,c)}if(b){Phaser.Color.RGBtoHSV(c.r,c.g,c.b,c)
}return c},fromRGBA:function(b,a){if(!a){a=Phaser.Color.createColor()}a.r=((b&4278190080)>>>24);a.g=((b&16711680)>>>16);a.b=((b&65280)>>>8);a.a=((b&255));a.rgba="rgba("+a.r+","+a.g+","+a.b+","+a.a+")";return a},toRGBA:function(f,e,c,d){return(f<<24)|(e<<16)|(c<<8)|d},toABGR:function(f,e,c,d){return((d<<24)|(c<<16)|(e<<8)|f)>>>0},RGBtoHSL:function(i,h,c,e){if(!e){e=Phaser.Color.createColor(i,h,c,1)}i/=255;h/=255;c/=255;var f=Math.min(i,h,c);var a=Math.max(i,h,c);e.h=0;e.s=0;e.l=(a+f)/2;if(a!==f){var j=a-f;e.s=e.l>0.5?j/(2-a-f):j/(a+f);if(a===i){e.h=(h-c)/j+(h<c?6:0)}else{if(a===h){e.h=(c-i)/j+2}else{if(a===c){e.h=(i-h)/j+4}}}e.h/=6}return e},HSLtoRGB:function(d,c,a,b){if(!b){b=Phaser.Color.createColor(a,a,a)}else{b.r=a;b.g=a;b.b=a}if(c!==0){var e=a<0.5?a*(1+c):a+c-a*c;var f=2*a-e;b.r=Phaser.Color.hueToColor(f,e,d+1/3);b.g=Phaser.Color.hueToColor(f,e,d);b.b=Phaser.Color.hueToColor(f,e,d-1/3)}b.r=Math.floor((b.r*255|0));b.g=Math.floor((b.g*255|0));b.b=Math.floor((b.b*255|0));Phaser.Color.updateColor(b);return b},RGBtoHSV:function(i,h,c,e){if(!e){e=Phaser.Color.createColor(i,h,c,255)}i/=255;h/=255;c/=255;var f=Math.min(i,h,c);var a=Math.max(i,h,c);var j=a-f;e.h=0;e.s=a===0?0:j/a;e.v=a;if(a!==f){if(a===i){e.h=(h-c)/j+(h<c?6:0)}else{if(a===h){e.h=(c-i)/j+2}else{if(a===c){e.h=(i-h)/j+4}}}e.h/=6}return e},HSVtoRGB:function(k,w,o,e){if(e===undefined){e=Phaser.Color.createColor(0,0,0,1,k,w,0,o)}var a,l,n;var j=Math.floor(k*6);var m=k*6-j;var d=o*(1-w);var c=o*(1-m*w);var u=o*(1-(1-m)*w);switch(j%6){case 0:a=o;l=u;n=d;break;case 1:a=c;l=o;n=d;break;case 2:a=d;l=o;n=u;break;case 3:a=d;l=c;n=o;break;case 4:a=u;l=d;n=o;break;case 5:a=o;l=d;n=c;break}e.r=Math.floor(a*255);e.g=Math.floor(l*255);e.b=Math.floor(n*255);Phaser.Color.updateColor(e);return e},hueToColor:function(c,b,a){if(a<0){a+=1}if(a>1){a-=1}if(a<1/6){return c+(b-c)*6*a}if(a<1/2){return b}if(a<2/3){return c+(b-c)*(2/3-a)*6}return c},createColor:function(c,i,j,k,f,n,d,m){var e={r:c||0,g:i||0,b:j||0,a:k||1,h:f||0,s:n||0,l:d||0,v:m||0,color:0,color32:0,rgba:""};return Phaser.Color.updateColor(e)},updateColor:function(a){a.rgba="rgba("+a.r.toString()+","+a.g.toString()+","+a.b.toString()+","+a.a.toString()+")";a.color=Phaser.Color.getColor(a.r,a.g,a.b);a.color32=Phaser.Color.getColor32(a.a*255,a.r,a.g,a.b);return a},getColor32:function(d,f,e,c){return d<<24|f<<16|e<<8|c},getColor:function(d,c,a){return d<<16|c<<8|a},RGBtoString:function(f,e,c,d,h){if(d===undefined){d=255}if(h===undefined){h="#"}if(h==="#"){return"#"+((1<<24)+(f<<16)+(e<<8)+c).toString(16).slice(1)}else{return"0x"+Phaser.Color.componentToHex(d)+Phaser.Color.componentToHex(f)+Phaser.Color.componentToHex(e)+Phaser.Color.componentToHex(c)}},hexToRGB:function(b){var a=Phaser.Color.hexToColor(b);if(a){return Phaser.Color.getColor32(a.a,a.r,a.g,a.b)}},hexToColor:function(h,d){h=h.replace(/^(?:#|0x)?([a-f\d])([a-f\d])([a-f\d])$/i,function(j,l,k,i){return l+l+k+k+i+i});var c=/^(?:#|0x)?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(h);if(c){var f=parseInt(c[1],16);var e=parseInt(c[2],16);var a=parseInt(c[3],16);if(!d){d=Phaser.Color.createColor(f,e,a)}else{d.r=f;d.g=e;d.b=a}}return d},webToColor:function(b,c){if(!c){c=Phaser.Color.createColor()}var a=/^rgba?\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(\d+(?:\.\d+)?))?\s*\)$/.exec(b);if(a){c.r=parseInt(a[1],10);c.g=parseInt(a[2],10);c.b=parseInt(a[3],10);c.a=a[4]!==undefined?parseFloat(a[4]):1;Phaser.Color.updateColor(c)}return c},valueToColor:function(c,b){if(!b){b=Phaser.Color.createColor()}if(typeof c==="string"){if(c.indexOf("rgb")===0){return Phaser.Color.webToColor(c,b)}else{b.a=1;return Phaser.Color.hexToColor(c,b)}}else{if(typeof c==="number"){var a=Phaser.Color.getRGB(c);b.r=a.r;b.g=a.g;b.b=a.b;b.a=a.a/255;return b}else{return b}}},componentToHex:function(a){var b=a.toString(16);return(b.length===1)?"0"+b:b},HSVColorWheel:function(d,b){if(d===undefined){d=1}if(b===undefined){b=1}var a=[];for(var e=0;e<=359;e++){a.push(Phaser.Color.HSVtoRGB(e/359,d,b))}return a},HSLColorWheel:function(d,b){if(d===undefined){d=0.5}if(b===undefined){b=0.5}var a=[];for(var e=0;e<=359;e++){a.push(Phaser.Color.HSLtoRGB(e/359,d,b))}return a},interpolateColor:function(l,k,j,c,f){if(f===undefined){f=255}var e=Phaser.Color.getRGB(l);var d=Phaser.Color.getRGB(k);var a=(((d.red-e.red)*c)/j)+e.red;var h=(((d.green-e.green)*c)/j)+e.green;var i=(((d.blue-e.blue)*c)/j)+e.blue;return Phaser.Color.getColor32(f,a,h,i)},interpolateColorWithRGB:function(f,c,i,k,j,d){var a=Phaser.Color.getRGB(f);var h=(((c-a.red)*d)/j)+a.red;var l=(((i-a.green)*d)/j)+a.green;var e=(((k-a.blue)*d)/j)+a.blue;return Phaser.Color.getColor(h,l,e)},interpolateRGB:function(f,c,l,e,m,j,k,d){var a=(((e-f)*d)/k)+f;var h=(((m-c)*d)/k)+c;var i=(((j-l)*d)/k)+l;return Phaser.Color.getColor(a,h,i)},getRandomColor:function(c,b,f){if(c===undefined){c=0}if(b===undefined){b=255}if(f===undefined){f=255}if(b>255||c>b){return Phaser.Color.getColor(255,255,255)}var e=c+Math.round(Math.random()*(b-c));var d=c+Math.round(Math.random()*(b-c));
	var a=c+Math.round(Math.random()*(b-c));return Phaser.Color.getColor32(f,e,d,a)},getRGB:function(a){if(a>16777215){return{alpha:a>>>24,red:a>>16&255,green:a>>8&255,blue:a&255,a:a>>>24,r:a>>16&255,g:a>>8&255,b:a&255}}else{return{alpha:255,red:a>>16&255,green:a>>8&255,blue:a&255,a:255,r:a>>16&255,g:a>>8&255,b:a&255}}},getWebRGB:function(a){if(typeof a==="object"){return"rgba("+a.r.toString()+","+a.g.toString()+","+a.b.toString()+","+(a.a/255).toString()+")"}else{var b=Phaser.Color.getRGB(a);return"rgba("+b.r.toString()+","+b.g.toString()+","+b.b.toString()+","+(b.a/255).toString()+")"}},getAlpha:function(a){return a>>>24},getAlphaFloat:function(a){return(a>>>24)/255},getRed:function(a){return a>>16&255},getGreen:function(a){return a>>8&255},getBlue:function(a){return a&255},blendNormal:function(b){return b},blendLighten:function(d,c){return(c>d)?c:d},blendDarken:function(d,c){return(c>d)?d:c},blendMultiply:function(d,c){return(d*c)/255},blendAverage:function(d,c){return(d+c)/2},blendAdd:function(d,c){return Math.min(255,d+c)},blendSubtract:function(d,c){return Math.max(0,d+c-255)},blendDifference:function(d,c){return Math.abs(d-c)},blendNegation:function(d,c){return 255-Math.abs(255-d-c)},blendScreen:function(d,c){return 255-(((255-d)*(255-c))>>8)},blendExclusion:function(d,c){return d+c-2*d*c/255},blendOverlay:function(d,c){return c<128?(2*d*c/255):(255-2*(255-d)*(255-c)/255)},blendSoftLight:function(d,c){return c<128?(2*((d>>1)+64))*(c/255):255-(2*(255-((d>>1)+64))*(255-c)/255)},blendHardLight:function(d,c){return Phaser.Color.blendOverlay(c,d)},blendColorDodge:function(d,c){return c===255?c:Math.min(255,((d<<8)/(255-c)))},blendColorBurn:function(d,c){return c===0?c:Math.max(0,(255-((255-d)<<8)/c))},blendLinearDodge:function(d,c){return Phaser.Color.blendAdd(d,c)},blendLinearBurn:function(d,c){return Phaser.Color.blendSubtract(d,c)},blendLinearLight:function(d,c){return c<128?Phaser.Color.blendLinearBurn(d,2*c):Phaser.Color.blendLinearDodge(d,(2*(c-128)))},blendVividLight:function(d,c){return c<128?Phaser.Color.blendColorBurn(d,2*c):Phaser.Color.blendColorDodge(d,(2*(c-128)))},blendPinLight:function(d,c){return c<128?Phaser.Color.blendDarken(d,2*c):Phaser.Color.blendLighten(d,(2*(c-128)))},blendHardMix:function(d,c){return Phaser.Color.blendVividLight(d,c)<128?0:255},blendReflect:function(d,c){return c===255?c:Math.min(255,(d*d/(255-c)))},blendGlow:function(d,c){return Phaser.Color.blendReflect(c,d)},blendPhoenix:function(d,c){return Math.min(d,c)-Math.max(d,c)+255}};Phaser.Physics=function(a,b){b=b||{};this.game=a;this.config=b;this.arcade=null;this.p2=null;this.ninja=null;this.box2d=null;this.chipmunk=null;this.matter=null;this.parseConfig()};Phaser.Physics.ARCADE=0;Phaser.Physics.P2JS=1;Phaser.Physics.NINJA=2;Phaser.Physics.BOX2D=3;Phaser.Physics.CHIPMUNK=4;Phaser.Physics.MATTERJS=5;Phaser.Physics.prototype={parseConfig:function(){if((!this.config.hasOwnProperty("arcade")||this.config["arcade"]===true)&&Phaser.Physics.hasOwnProperty("Arcade")){this.arcade=new Phaser.Physics.Arcade(this.game)}if(this.config.hasOwnProperty("ninja")&&this.config["ninja"]===true&&Phaser.Physics.hasOwnProperty("Ninja")){this.ninja=new Phaser.Physics.Ninja(this.game)}if(this.config.hasOwnProperty("p2")&&this.config["p2"]===true&&Phaser.Physics.hasOwnProperty("P2")){this.p2=new Phaser.Physics.P2(this.game,this.config)}if(this.config.hasOwnProperty("box2d")&&this.config["box2d"]===true&&Phaser.Physics.hasOwnProperty("BOX2D")){this.box2d=new Phaser.Physics.BOX2D(this.game,this.config)}if(this.config.hasOwnProperty("matter")&&this.config["matter"]===true&&Phaser.Physics.hasOwnProperty("Matter")){this.matter=new Phaser.Physics.Matter(this.game,this.config)}},startSystem:function(a){if(a===Phaser.Physics.ARCADE){this.arcade=new Phaser.Physics.Arcade(this.game)}else{if(a===Phaser.Physics.P2JS){if(this.p2===null){this.p2=new Phaser.Physics.P2(this.game,this.config)}else{this.p2.reset()}}else{if(a===Phaser.Physics.NINJA){this.ninja=new Phaser.Physics.Ninja(this.game)}else{if(a===Phaser.Physics.BOX2D){if(this.box2d===null){this.box2d=new Phaser.Physics.Box2D(this.game,this.config)}else{this.box2d.reset()}}else{if(a===Phaser.Physics.MATTERJS){if(this.matter===null){this.matter=new Phaser.Physics.Matter(this.game,this.config)}else{this.matter.reset()}}}}}}},enable:function(b,c,a){if(c===undefined){c=Phaser.Physics.ARCADE}if(a===undefined){a=false}if(c===Phaser.Physics.ARCADE){this.arcade.enable(b)}else{if(c===Phaser.Physics.P2JS&&this.p2){this.p2.enable(b,a)}else{if(c===Phaser.Physics.NINJA&&this.ninja){this.ninja.enableAABB(b)}else{if(c===Phaser.Physics.BOX2D&&this.box2d){this.box2d.enable(b)}else{if(c===Phaser.Physics.MATTERJS&&this.matter){this.matter.enable(b)}else{console.warn(b.key+" is attempting to enable a physics body using an unknown physics system.")}}}}}},preUpdate:function(){if(this.p2){this.p2.preUpdate()}if(this.box2d){this.box2d.preUpdate()}if(this.matter){this.matter.preUpdate()}},update:function(){if(this.p2){this.p2.update()
}if(this.box2d){this.box2d.update()}if(this.matter){this.matter.update()}},setBoundsToWorld:function(){if(this.arcade){this.arcade.setBoundsToWorld()}if(this.ninja){this.ninja.setBoundsToWorld()}if(this.p2){this.p2.setBoundsToWorld()}if(this.box2d){this.box2d.setBoundsToWorld()}if(this.matter){this.matter.setBoundsToWorld()}},clear:function(){if(this.p2){this.p2.clear()}if(this.box2d){this.box2d.clear()}if(this.matter){this.matter.clear()}},reset:function(){if(this.p2){this.p2.reset()}if(this.box2d){this.box2d.reset()}if(this.matter){this.matter.reset()}},destroy:function(){if(this.p2){this.p2.destroy()}if(this.box2d){this.box2d.destroy()}if(this.matter){this.matter.destroy()}this.arcade=null;this.ninja=null;this.p2=null;this.box2d=null;this.matter=null}};Phaser.Physics.prototype.constructor=Phaser.Physics;Phaser.Physics.Arcade=function(a){this.game=a;this.gravity=new Phaser.Point();this.bounds=new Phaser.Rectangle(0,0,a.world.width,a.world.height);this.checkCollision={up:true,down:true,left:true,right:true};this.maxObjects=10;this.maxLevels=4;this.OVERLAP_BIAS=4;this.forceX=false;this.sortDirection=Phaser.Physics.Arcade.LEFT_RIGHT;this.skipQuadTree=true;this.isPaused=false;this.quadTree=new Phaser.QuadTree(this.game.world.bounds.x,this.game.world.bounds.y,this.game.world.bounds.width,this.game.world.bounds.height,this.maxObjects,this.maxLevels);this._total=0;this.setBoundsToWorld()};Phaser.Physics.Arcade.prototype.constructor=Phaser.Physics.Arcade;Phaser.Physics.Arcade.SORT_NONE=0;Phaser.Physics.Arcade.LEFT_RIGHT=1;Phaser.Physics.Arcade.RIGHT_LEFT=2;Phaser.Physics.Arcade.TOP_BOTTOM=3;Phaser.Physics.Arcade.BOTTOM_TOP=4;Phaser.Physics.Arcade.prototype={setBounds:function(b,d,c,a){this.bounds.setTo(b,d,c,a)},setBoundsToWorld:function(){this.bounds.copyFrom(this.game.world.bounds)},enable:function(a,c){if(c===undefined){c=true}var b=1;if(Array.isArray(a)){b=a.length;while(b--){if(a[b] instanceof Phaser.Group){this.enable(a[b].children,c)}else{this.enableBody(a[b]);if(c&&a[b].hasOwnProperty("children")&&a[b].children.length>0){this.enable(a[b],true)}}}}else{if(a instanceof Phaser.Group){this.enable(a.children,c)}else{this.enableBody(a);if(c&&a.hasOwnProperty("children")&&a.children.length>0){this.enable(a.children,true)}}}},enableBody:function(a){if(a.hasOwnProperty("body")&&a.body===null){a.body=new Phaser.Physics.Arcade.Body(a);if(a.parent&&a.parent instanceof Phaser.Group){a.parent.addToHash(a)}}},updateMotion:function(a){var b=this.computeVelocity(0,a,a.angularVelocity,a.angularAcceleration,a.angularDrag,a.maxAngular)-a.angularVelocity;a.angularVelocity+=b;a.rotation+=(a.angularVelocity*this.game.time.physicsElapsed);a.velocity.x=this.computeVelocity(1,a,a.velocity.x,a.acceleration.x,a.drag.x,a.maxVelocity.x);a.velocity.y=this.computeVelocity(2,a,a.velocity.y,a.acceleration.y,a.drag.y,a.maxVelocity.y)},computeVelocity:function(d,b,f,e,c,a){if(a===undefined){a=10000}if(d===1&&b.allowGravity){f+=(this.gravity.x+b.gravity.x)*this.game.time.physicsElapsed}else{if(d===2&&b.allowGravity){f+=(this.gravity.y+b.gravity.y)*this.game.time.physicsElapsed}}if(e){f+=e*this.game.time.physicsElapsed}else{if(c){c*=this.game.time.physicsElapsed;if(f-c>0){f-=c}else{if(f+c<0){f+=c}else{f=0}}}}if(f>a){f=a}else{if(f<-a){f=-a}}return f},overlap:function(g,f,a,e,b){a=a||null;e=e||null;b=b||a;this._total=0;if(!Array.isArray(g)&&Array.isArray(f)){for(var d=0;d<f.length;d++){this.collideHandler(g,f[d],a,e,b,true)}}else{if(Array.isArray(g)&&!Array.isArray(f)){for(var d=0;d<g.length;d++){this.collideHandler(g[d],f,a,e,b,true)}}else{if(Array.isArray(g)&&Array.isArray(f)){for(var d=0;d<g.length;d++){for(var c=0;c<f.length;c++){this.collideHandler(g[d],f[c],a,e,b,true)}}}else{this.collideHandler(g,f,a,e,b,true)}}}return(this._total>0)},collide:function(g,f,e,d,a){e=e||null;d=d||null;a=a||e;this._total=0;if(!Array.isArray(g)&&Array.isArray(f)){for(var c=0;c<f.length;c++){this.collideHandler(g,f[c],e,d,a,false)}}else{if(Array.isArray(g)&&!Array.isArray(f)){for(var c=0;c<g.length;c++){this.collideHandler(g[c],f,e,d,a,false)}}else{if(Array.isArray(g)&&Array.isArray(f)){for(var c=0;c<g.length;c++){for(var b=0;b<f.length;b++){this.collideHandler(g[c],f[b],e,d,a,false)}}}else{this.collideHandler(g,f,e,d,a,false)}}}return(this._total>0)},sortLeftRight:function(d,c){if(!d.body||!c.body){return 0}return d.body.x-c.body.x},sortRightLeft:function(d,c){if(!d.body||!c.body){return 0}return c.body.x-d.body.x},sortTopBottom:function(d,c){if(!d.body||!c.body){return 0}return d.body.y-c.body.y},sortBottomTop:function(d,c){if(!d.body||!c.body){return 0}return c.body.y-d.body.y},sort:function(b,a){if(b.physicsSortDirection!==null){a=b.physicsSortDirection}else{if(a===undefined){a=this.sortDirection}}if(a===Phaser.Physics.Arcade.LEFT_RIGHT){b.hash.sort(this.sortLeftRight)}else{if(a===Phaser.Physics.Arcade.RIGHT_LEFT){b.hash.sort(this.sortRightLeft)}else{if(a===Phaser.Physics.Arcade.TOP_BOTTOM){b.hash.sort(this.sortTopBottom)}else{if(a===Phaser.Physics.Arcade.BOTTOM_TOP){b.hash.sort(this.sortBottomTop)
}}}}},collideHandler:function(f,e,d,c,a,b){if(e===undefined&&f.physicsType===Phaser.GROUP){this.sort(f);this.collideGroupVsSelf(f,d,c,a,b);return}if(!f||!e||!f.exists||!e.exists){return}if(this.sortDirection!==Phaser.Physics.Arcade.SORT_NONE){if(f.physicsType===Phaser.GROUP){this.sort(f)}if(e.physicsType===Phaser.GROUP){this.sort(e)}}if(f.physicsType===Phaser.SPRITE){if(e.physicsType===Phaser.SPRITE){this.collideSpriteVsSprite(f,e,d,c,a,b)}else{if(e.physicsType===Phaser.GROUP){this.collideSpriteVsGroup(f,e,d,c,a,b)}else{if(e.physicsType===Phaser.TILEMAPLAYER){this.collideSpriteVsTilemapLayer(f,e,d,c,a,b)}}}}else{if(f.physicsType===Phaser.GROUP){if(e.physicsType===Phaser.SPRITE){this.collideSpriteVsGroup(e,f,d,c,a,b)}else{if(e.physicsType===Phaser.GROUP){this.collideGroupVsGroup(f,e,d,c,a,b)}else{if(e.physicsType===Phaser.TILEMAPLAYER){this.collideGroupVsTilemapLayer(f,e,d,c,a,b)}}}}else{if(f.physicsType===Phaser.TILEMAPLAYER){if(e.physicsType===Phaser.SPRITE){this.collideSpriteVsTilemapLayer(e,f,d,c,a,b)}else{if(e.physicsType===Phaser.GROUP){this.collideGroupVsTilemapLayer(e,f,d,c,a,b)}}}}}},collideSpriteVsSprite:function(f,e,d,c,a,b){if(!f.body||!e.body){return false}if(this.separate(f.body,e.body,c,a,b)){if(d){d.call(a,f,e)}this._total++}return true},collideSpriteVsGroup:function(j,h,k,b,c,f){if(h.length===0||!j.body){return}if(this.skipQuadTree||j.body.skipQuadTree){var a={};for(var d=0;d<h.hash.length;d++){var g=h.hash[d];if(!g||!g.exists||!g.body){continue}a=g.body.getBounds(a);if(this.sortDirection===Phaser.Physics.Arcade.LEFT_RIGHT){if(j.body.right<a.x){break}else{if(a.right<j.body.x){continue}}}else{if(this.sortDirection===Phaser.Physics.Arcade.RIGHT_LEFT){if(j.body.x>a.right){break}else{if(a.x>j.body.right){continue}}}else{if(this.sortDirection===Phaser.Physics.Arcade.TOP_BOTTOM){if(j.body.bottom<a.y){break}else{if(a.bottom<j.body.y){continue}}}else{if(this.sortDirection===Phaser.Physics.Arcade.BOTTOM_TOP){if(j.body.y>a.bottom){break}else{if(a.y>j.body.bottom){continue}}}}}}this.collideSpriteVsSprite(j,g,k,b,c,f)}}else{this.quadTree.clear();this.quadTree.reset(this.game.world.bounds.x,this.game.world.bounds.y,this.game.world.bounds.width,this.game.world.bounds.height,this.maxObjects,this.maxLevels);this.quadTree.populate(h);var e=this.quadTree.retrieve(j);for(var d=0;d<e.length;d++){if(this.separate(j.body,e[d],b,c,f)){if(k){k.call(c,j,e[d].sprite)}this._total++}}}},collideGroupVsSelf:function(l,m,c,d,g){if(l.length===0){return}for(var f=0;f<l.hash.length;f++){var b={};var k=l.hash[f];if(!k||!k.exists||!k.body){continue}b=k.body.getBounds(b);for(var e=f+1;e<l.hash.length;e++){var a={};var h=l.hash[e];if(!h||!h.exists||!h.body){continue}a=h.body.getBounds(a);if(this.sortDirection===Phaser.Physics.Arcade.LEFT_RIGHT){if(b.right<a.x){break}else{if(a.right<b.x){continue}}}else{if(this.sortDirection===Phaser.Physics.Arcade.RIGHT_LEFT){if(b.x>a.right){continue}else{if(a.x>b.right){break}}}else{if(this.sortDirection===Phaser.Physics.Arcade.TOP_BOTTOM){if(b.bottom<a.y){continue}else{if(a.bottom<b.y){break}}}else{if(this.sortDirection===Phaser.Physics.Arcade.BOTTOM_TOP){if(b.y>a.bottom){continue}else{if(a.y>k.body.bottom){break}}}}}}this.collideSpriteVsSprite(k,h,m,c,d,g)}}},collideGroupVsGroup:function(a,g,f,e,b,c){if(a.length===0||g.length===0){return}for(var d=0;d<a.children.length;d++){if(a.children[d].exists){if(a.children[d].physicsType===Phaser.GROUP){this.collideGroupVsGroup(a.children[d],g,f,e,b,c)}else{this.collideSpriteVsGroup(a.children[d],g,f,e,b,c)}}}},separate:function(a,l,d,e,h){if(!a.enable||!l.enable||a.checkCollision.none||l.checkCollision.none||!this.intersects(a,l)){return false}if(d&&d.call(e,a.sprite,l.sprite)===false){return false}if(a.isCircle&&l.isCircle){return this.separateCircle(a,l,h)}if(a.isCircle!==l.isCircle){var j=(a.isCircle)?l:a;var c=(a.isCircle)?a:l;var i={x:j.x,y:j.y,right:j.right,bottom:j.bottom};var b={x:c.x+c.radius,y:c.y+c.radius};if(b.y<i.y||b.y>i.bottom){if(b.x<i.x||b.x>i.right){return this.separateCircle(a,l,h)}}}var g=false;var f=false;if(this.forceX||Math.abs(this.gravity.y+a.gravity.y)<Math.abs(this.gravity.x+a.gravity.x)){g=this.separateX(a,l,h);if(this.intersects(a,l)){f=this.separateY(a,l,h)}}else{f=this.separateY(a,l,h);if(this.intersects(a,l)){g=this.separateX(a,l,h)}}var k=(g||f);if(k){if(h){if(a.onOverlap){a.onOverlap.dispatch(a.sprite,l.sprite)}if(l.onOverlap){l.onOverlap.dispatch(l.sprite,a.sprite)}}else{if(a.onCollide){a.onCollide.dispatch(a.sprite,l.sprite)}if(l.onCollide){l.onCollide.dispatch(l.sprite,a.sprite)}}}return k},intersects:function(b,a){if(b===a){return false}if(b.isCircle){if(a.isCircle){return Phaser.Math.distance(b.center.x,b.center.y,a.center.x,a.center.y)<=(b.radius+a.radius)}else{return this.circleBodyIntersects(b,a)}}else{if(a.isCircle){return this.circleBodyIntersects(a,b)}else{if(b.right<=a.position.x){return false}if(b.bottom<=a.position.y){return false}if(b.position.x>=a.right){return false}if(b.position.y>=a.bottom){return false
}return true}}},circleBodyIntersects:function(e,b){var a=Phaser.Math.clamp(e.center.x,b.left,b.right);var f=Phaser.Math.clamp(e.center.y,b.top,b.bottom);var d=(e.center.x-a)*(e.center.x-a);var c=(e.center.y-f)*(e.center.y-f);return(d+c)<=(e.radius*e.radius)},separateCircle:function(a,l,f){this.getOverlapX(a,l);this.getOverlapY(a,l);var m=l.center.x-a.center.x;var k=l.center.y-a.center.y;var c=Math.atan2(k,m);var i=0;if(a.isCircle!==l.isCircle){var g={x:(l.isCircle)?a.position.x:l.position.x,y:(l.isCircle)?a.position.y:l.position.y,right:(l.isCircle)?a.right:l.right,bottom:(l.isCircle)?a.bottom:l.bottom};var b={x:(a.isCircle)?(a.position.x+a.radius):(l.position.x+l.radius),y:(a.isCircle)?(a.position.y+a.radius):(l.position.y+l.radius),radius:(a.isCircle)?a.radius:l.radius};if(b.y<g.y){if(b.x<g.x){i=Phaser.Math.distance(b.x,b.y,g.x,g.y)-b.radius}else{if(b.x>g.right){i=Phaser.Math.distance(b.x,b.y,g.right,g.y)-b.radius}}}else{if(b.y>g.bottom){if(b.x<g.x){i=Phaser.Math.distance(b.x,b.y,g.x,g.bottom)-b.radius}else{if(b.x>g.right){i=Phaser.Math.distance(b.x,b.y,g.right,g.bottom)-b.radius}}}}i*=-1}else{i=(a.radius+l.radius)-Phaser.Math.distance(a.center.x,a.center.y,l.center.x,l.center.y)}if(f||i===0||(a.immovable&&l.immovable)||a.customSeparateX||l.customSeparateX){if(i!==0){if(a.onOverlap){a.onOverlap.dispatch(a.sprite,l.sprite)}if(l.onOverlap){l.onOverlap.dispatch(l.sprite,a.sprite)}}return(i!==0)}var j={x:a.velocity.x*Math.cos(c)+a.velocity.y*Math.sin(c),y:a.velocity.x*Math.sin(c)-a.velocity.y*Math.cos(c)};var h={x:l.velocity.x*Math.cos(c)+l.velocity.y*Math.sin(c),y:l.velocity.x*Math.sin(c)-l.velocity.y*Math.cos(c)};var e=((a.mass-l.mass)*j.x+2*l.mass*h.x)/(a.mass+l.mass);var d=(2*a.mass*j.x+(l.mass-a.mass)*h.x)/(a.mass+l.mass);if(!a.immovable){a.velocity.x=(e*Math.cos(c)-j.y*Math.sin(c))*a.bounce.x;a.velocity.y=(j.y*Math.cos(c)+e*Math.sin(c))*a.bounce.y}if(!l.immovable){l.velocity.x=(d*Math.cos(c)-h.y*Math.sin(c))*l.bounce.x;l.velocity.y=(h.y*Math.cos(c)+d*Math.sin(c))*l.bounce.y}if(Math.abs(c)<Math.PI/2){if((a.velocity.x>0)&&!a.immovable&&(l.velocity.x>a.velocity.x)){a.velocity.x*=-1}else{if((l.velocity.x<0)&&!l.immovable&&(a.velocity.x<l.velocity.x)){l.velocity.x*=-1}else{if((a.velocity.y>0)&&!a.immovable&&(l.velocity.y>a.velocity.y)){a.velocity.y*=-1}else{if((l.velocity.y<0)&&!l.immovable&&(a.velocity.y<l.velocity.y)){l.velocity.y*=-1}}}}}else{if(Math.abs(c)>Math.PI/2){if((a.velocity.x<0)&&!a.immovable&&(l.velocity.x<a.velocity.x)){a.velocity.x*=-1}else{if((l.velocity.x>0)&&!l.immovable&&(a.velocity.x>l.velocity.x)){l.velocity.x*=-1}else{if((a.velocity.y<0)&&!a.immovable&&(l.velocity.y<a.velocity.y)){a.velocity.y*=-1}else{if((l.velocity.y>0)&&!l.immovable&&(a.velocity.x>l.velocity.y)){l.velocity.y*=-1}}}}}}if(!a.immovable){a.x+=(a.velocity.x*this.game.time.physicsElapsed)-i*Math.cos(c);a.y+=(a.velocity.y*this.game.time.physicsElapsed)-i*Math.sin(c)}if(!l.immovable){l.x+=(l.velocity.x*this.game.time.physicsElapsed)+i*Math.cos(c);l.y+=(l.velocity.y*this.game.time.physicsElapsed)+i*Math.sin(c)}if(a.onCollide){a.onCollide.dispatch(a.sprite,l.sprite)}if(l.onCollide){l.onCollide.dispatch(l.sprite,a.sprite)}return true},getOverlapX:function(d,b,c){var a=0;var e=d.deltaAbsX()+b.deltaAbsX()+this.OVERLAP_BIAS;if(d.deltaX()===0&&b.deltaX()===0){d.embedded=true;b.embedded=true}else{if(d.deltaX()>b.deltaX()){a=d.right-b.x;if((a>e&&!c)||d.checkCollision.right===false||b.checkCollision.left===false){a=0}else{d.touching.none=false;d.touching.right=true;b.touching.none=false;b.touching.left=true}}else{if(d.deltaX()<b.deltaX()){a=d.x-b.width-b.x;if((-a>e&&!c)||d.checkCollision.left===false||b.checkCollision.right===false){a=0}else{d.touching.none=false;d.touching.left=true;b.touching.none=false;b.touching.right=true}}}}d.overlapX=a;b.overlapX=a;return a},getOverlapY:function(d,b,c){var a=0;var e=d.deltaAbsY()+b.deltaAbsY()+this.OVERLAP_BIAS;if(d.deltaY()===0&&b.deltaY()===0){d.embedded=true;b.embedded=true}else{if(d.deltaY()>b.deltaY()){a=d.bottom-b.y;if((a>e&&!c)||d.checkCollision.down===false||b.checkCollision.up===false){a=0}else{d.touching.none=false;d.touching.down=true;b.touching.none=false;b.touching.up=true}}else{if(d.deltaY()<b.deltaY()){a=d.y-b.bottom;if((-a>e&&!c)||d.checkCollision.up===false||b.checkCollision.down===false){a=0}else{d.touching.none=false;d.touching.up=true;b.touching.none=false;b.touching.down=true}}}}d.overlapY=a;b.overlapY=a;return a},separateX:function(a,i,c){var g=this.getOverlapX(a,i,c);if(c||g===0||(a.immovable&&i.immovable)||a.customSeparateX||i.customSeparateX){return(g!==0)||(a.embedded&&i.embedded)}var h=a.velocity.x;var f=i.velocity.x;if(!a.immovable&&!i.immovable){g*=0.5;a.x-=g;i.x+=g;var e=Math.sqrt((f*f*i.mass)/a.mass)*((f>0)?1:-1);var d=Math.sqrt((h*h*a.mass)/i.mass)*((h>0)?1:-1);var b=(e+d)*0.5;e-=b;d-=b;a.velocity.x=b+e*a.bounce.x;i.velocity.x=b+d*i.bounce.x}else{if(!a.immovable){a.x-=g;a.velocity.x=f-h*a.bounce.x;if(i.moves){a.y+=(i.y-i.prev.y)*i.friction.y}}else{i.x+=g;i.velocity.x=h-f*i.bounce.x;
	if(a.moves){i.y+=(a.y-a.prev.y)*a.friction.y}}}return true},separateY:function(a,i,c){var g=this.getOverlapY(a,i,c);if(c||g===0||(a.immovable&&i.immovable)||a.customSeparateY||i.customSeparateY){return(g!==0)||(a.embedded&&i.embedded)}var h=a.velocity.y;var f=i.velocity.y;if(!a.immovable&&!i.immovable){g*=0.5;a.y-=g;i.y+=g;var e=Math.sqrt((f*f*i.mass)/a.mass)*((f>0)?1:-1);var d=Math.sqrt((h*h*a.mass)/i.mass)*((h>0)?1:-1);var b=(e+d)*0.5;e-=b;d-=b;a.velocity.y=b+e*a.bounce.y;i.velocity.y=b+d*i.bounce.y}else{if(!a.immovable){a.y-=g;a.velocity.y=f-h*a.bounce.y;if(i.moves){a.x+=(i.x-i.prev.x)*i.friction.x}}else{i.y+=g;i.velocity.y=h-f*i.bounce.y;if(a.moves){i.x+=(a.x-a.prev.x)*a.friction.x}}}return true},getObjectsUnderPointer:function(c,b,d,a){if(b.length===0||!c.exists){return}return this.getObjectsAtLocation(c.x,c.y,b,d,a,c)},getObjectsAtLocation:function(h,f,j,k,b,d){this.quadTree.clear();this.quadTree.reset(this.game.world.bounds.x,this.game.world.bounds.y,this.game.world.bounds.width,this.game.world.bounds.height,this.maxObjects,this.maxLevels);this.quadTree.populate(j);var g=new Phaser.Rectangle(h,f,1,1);var a=[];var e=this.quadTree.retrieve(g);for(var c=0;c<e.length;c++){if(e[c].hitTest(h,f)){if(k){k.call(b,d,e[c].sprite)}a.push(e[c].sprite)}}return a},moveToObject:function(e,a,c,b){if(c===undefined){c=60}if(b===undefined){b=0}var d=Math.atan2(a.y-e.y,a.x-e.x);if(b>0){c=this.distanceBetween(e,a)/(b/1000)}e.body.velocity.x=Math.cos(d)*c;e.body.velocity.y=Math.sin(d)*c;return d},moveToPointer:function(e,b,d,a){if(b===undefined){b=60}d=d||this.game.input.activePointer;if(a===undefined){a=0}var c=this.angleToPointer(e,d);if(a>0){b=this.distanceToPointer(e,d)/(a/1000)}e.body.velocity.x=Math.cos(c)*b;e.body.velocity.y=Math.sin(c)*b;return c},moveToXY:function(e,a,f,c,b){if(c===undefined){c=60}if(b===undefined){b=0}var d=Math.atan2(f-e.y,a-e.x);if(b>0){c=this.distanceToXY(e,a,f)/(b/1000)}e.body.velocity.x=Math.cos(d)*c;e.body.velocity.y=Math.sin(d)*c;return d},velocityFromAngle:function(c,b,a){if(b===undefined){b=60}a=a||new Phaser.Point();return a.setTo((Math.cos(this.game.math.degToRad(c))*b),(Math.sin(this.game.math.degToRad(c))*b))},velocityFromRotation:function(b,c,a){if(c===undefined){c=60}a=a||new Phaser.Point();return a.setTo((Math.cos(b)*c),(Math.sin(b)*c))},accelerationFromRotation:function(b,c,a){if(c===undefined){c=60}a=a||new Phaser.Point();return a.setTo((Math.cos(b)*c),(Math.sin(b)*c))},accelerateToObject:function(e,b,c,a,f){if(c===undefined){c=60}if(a===undefined){a=1000}if(f===undefined){f=1000}var d=this.angleBetween(e,b);e.body.acceleration.setTo(Math.cos(d)*c,Math.sin(d)*c);e.body.maxVelocity.setTo(a,f);return d},accelerateToPointer:function(e,d,b,a,f){if(b===undefined){b=60}if(d===undefined){d=this.game.input.activePointer}if(a===undefined){a=1000}if(f===undefined){f=1000}var c=this.angleToPointer(e,d);e.body.acceleration.setTo(Math.cos(c)*b,Math.sin(c)*b);e.body.maxVelocity.setTo(a,f);return c},accelerateToXY:function(e,b,g,c,a,f){if(c===undefined){c=60}if(a===undefined){a=1000}if(f===undefined){f=1000}var d=this.angleToXY(e,b,g);e.body.acceleration.setTo(Math.cos(d)*c,Math.sin(d)*c);e.body.maxVelocity.setTo(a,f);return d},distanceBetween:function(d,e,c){if(c===undefined){c=false}var b=(c)?d.world.x-e.world.x:d.x-e.x;var a=(c)?d.world.y-e.world.y:d.y-e.y;return Math.sqrt(b*b+a*a)},distanceToXY:function(e,a,f,d){if(d===undefined){d=false}var c=(d)?e.world.x-a:e.x-a;var b=(d)?e.world.y-f:e.y-f;return Math.sqrt(c*c+b*b)},distanceToPointer:function(e,d,c){if(d===undefined){d=this.game.input.activePointer}if(c===undefined){c=false}var b=(c)?e.world.x-d.worldX:e.x-d.worldX;var a=(c)?e.world.y-d.worldY:e.y-d.worldY;return Math.sqrt(b*b+a*a)},angleBetween:function(b,c,a){if(a===undefined){a=false}if(a){return Math.atan2(c.world.y-b.world.y,c.world.x-b.world.x)}else{return Math.atan2(c.y-b.y,c.x-b.x)}},angleBetweenCenters:function(c,d){var b=d.centerX-c.centerX;var a=d.centerY-c.centerY;return Math.atan2(a,b)},angleToXY:function(c,a,d,b){if(b===undefined){b=false}if(b){return Math.atan2(d-c.world.y,a-c.world.x)}else{return Math.atan2(d-c.y,a-c.x)}},angleToPointer:function(c,b,a){if(b===undefined){b=this.game.input.activePointer}if(a===undefined){a=false}if(a){return Math.atan2(b.worldY-c.world.y,b.worldX-c.world.x)}else{return Math.atan2(b.worldY-c.y,b.worldX-c.x)}},worldAngleToPointer:function(b,a){return this.angleToPointer(b,a,true)}};Phaser.Physics.Arcade.Body=function(a){this.sprite=a;this.game=a.game;this.type=Phaser.Physics.ARCADE;this.enable=true;this.isCircle=false;this.radius=0;this.offset=new Phaser.Point();this.position=new Phaser.Point(a.x,a.y);this.prev=new Phaser.Point(this.position.x,this.position.y);this.allowRotation=true;this.rotation=a.angle;this.preRotation=a.angle;this.width=a.width;this.height=a.height;this.sourceWidth=a.width;this.sourceHeight=a.height;if(a.texture){this.sourceWidth=a.texture.frame.width;this.sourceHeight=a.texture.frame.height}this.halfWidth=Math.abs(a.width/2);
	this.halfHeight=Math.abs(a.height/2);this.center=new Phaser.Point(a.x+this.halfWidth,a.y+this.halfHeight);this.velocity=new Phaser.Point();this.newVelocity=new Phaser.Point();this.deltaMax=new Phaser.Point();this.acceleration=new Phaser.Point();this.drag=new Phaser.Point();this.allowGravity=true;this.gravity=new Phaser.Point();this.bounce=new Phaser.Point();this.worldBounce=null;this.onWorldBounds=null;this.onCollide=null;this.onOverlap=null;this.maxVelocity=new Phaser.Point(10000,10000);this.friction=new Phaser.Point(1,0);this.angularVelocity=0;this.angularAcceleration=0;this.angularDrag=0;this.maxAngular=1000;this.mass=1;this.angle=0;this.speed=0;this.facing=Phaser.NONE;this.immovable=false;this.moves=true;this.customSeparateX=false;this.customSeparateY=false;this.overlapX=0;this.overlapY=0;this.overlapR=0;this.embedded=false;this.collideWorldBounds=false;this.checkCollision={none:false,any:true,up:true,down:true,left:true,right:true};this.touching={none:true,up:false,down:false,left:false,right:false};this.wasTouching={none:true,up:false,down:false,left:false,right:false};this.blocked={up:false,down:false,left:false,right:false};this.tilePadding=new Phaser.Point();this.dirty=false;this.skipQuadTree=false;this.syncBounds=false;this.isMoving=false;this.stopVelocityOnCollide=true;this.moveTimer=0;this.moveDistance=0;this.moveDuration=0;this.moveTarget=null;this.moveEnd=null;this.onMoveComplete=new Phaser.Signal();this.movementCallback=null;this.movementCallbackContext=null;this._reset=true;this._sx=a.scale.x;this._sy=a.scale.y;this._dx=0;this._dy=0};Phaser.Physics.Arcade.Body.prototype={updateBounds:function(){if(this.syncBounds){var a=this.sprite.getBounds();a.ceilAll();if(a.width!==this.width||a.height!==this.height){this.width=a.width;this.height=a.height;this._reset=true}}else{var d=Math.abs(this.sprite.scale.x);var c=Math.abs(this.sprite.scale.y);if(d!==this._sx||c!==this._sy){this.width=this.sourceWidth*d;this.height=this.sourceHeight*c;this._sx=d;this._sy=c;this._reset=true}}if(this._reset){this.halfWidth=Math.floor(this.width/2);this.halfHeight=Math.floor(this.height/2);this.center.setTo(this.position.x+this.halfWidth,this.position.y+this.halfHeight)}},preUpdate:function(){if(!this.enable||this.game.physics.arcade.isPaused){return}this.dirty=true;this.wasTouching.none=this.touching.none;this.wasTouching.up=this.touching.up;this.wasTouching.down=this.touching.down;this.wasTouching.left=this.touching.left;this.wasTouching.right=this.touching.right;this.touching.none=true;this.touching.up=false;this.touching.down=false;this.touching.left=false;this.touching.right=false;this.blocked.up=false;this.blocked.down=false;this.blocked.left=false;this.blocked.right=false;this.embedded=false;this.updateBounds();this.position.x=(this.sprite.world.x-(this.sprite.anchor.x*this.sprite.width))+this.sprite.scale.x*this.offset.x;this.position.x-=this.sprite.scale.x<0?this.width:0;this.position.y=(this.sprite.world.y-(this.sprite.anchor.y*this.sprite.height))+this.sprite.scale.y*this.offset.y;this.position.y-=this.sprite.scale.y<0?this.height:0;this.rotation=this.sprite.angle;this.preRotation=this.rotation;if(this._reset||this.sprite.fresh){this.prev.x=this.position.x;this.prev.y=this.position.y}if(this.moves){this.game.physics.arcade.updateMotion(this);this.newVelocity.set(this.velocity.x*this.game.time.physicsElapsed,this.velocity.y*this.game.time.physicsElapsed);this.position.x+=this.newVelocity.x;this.position.y+=this.newVelocity.y;if(this.position.x!==this.prev.x||this.position.y!==this.prev.y){this.angle=Math.atan2(this.velocity.y,this.velocity.x)}this.speed=Math.sqrt(this.velocity.x*this.velocity.x+this.velocity.y*this.velocity.y);if(this.collideWorldBounds){if(this.checkWorldBounds()&&this.onWorldBounds){this.onWorldBounds.dispatch(this.sprite,this.blocked.up,this.blocked.down,this.blocked.left,this.blocked.right)}}}this._dx=this.deltaX();this._dy=this.deltaY();this._reset=false},updateMovement:function(){var c=0;var b=(this.overlapX!==0||this.overlapY!==0);if(this.moveDuration>0){this.moveTimer+=this.game.time.elapsedMS;c=this.moveTimer/this.moveDuration}else{this.moveTarget.end.set(this.position.x,this.position.y);c=this.moveTarget.length/this.moveDistance}if(this.movementCallback){var a=this.movementCallback.call(this.movementCallbackContext,this,this.velocity,c)}if(b||c>=1||(a!==undefined&&a!==true)){this.stopMovement((c>=1)||(this.stopVelocityOnCollide&&b));return false}return true},stopMovement:function(a){if(this.isMoving){this.isMoving=false;if(a){this.velocity.set(0)}this.onMoveComplete.dispatch(this.sprite,(this.overlapX!==0||this.overlapY!==0))}},postUpdate:function(){if(!this.enable||!this.dirty){return}if(this.isMoving){this.updateMovement()}this.dirty=false;if(this.deltaX()<0){this.facing=Phaser.LEFT}else{if(this.deltaX()>0){this.facing=Phaser.RIGHT}}if(this.deltaY()<0){this.facing=Phaser.UP}else{if(this.deltaY()>0){this.facing=Phaser.DOWN}}if(this.moves){this._dx=this.deltaX();this._dy=this.deltaY();
	if(this.deltaMax.x!==0&&this._dx!==0){if(this._dx<0&&this._dx<-this.deltaMax.x){this._dx=-this.deltaMax.x}else{if(this._dx>0&&this._dx>this.deltaMax.x){this._dx=this.deltaMax.x}}}if(this.deltaMax.y!==0&&this._dy!==0){if(this._dy<0&&this._dy<-this.deltaMax.y){this._dy=-this.deltaMax.y}else{if(this._dy>0&&this._dy>this.deltaMax.y){this._dy=this.deltaMax.y}}}this.sprite.position.x+=this._dx;this.sprite.position.y+=this._dy;this._reset=true}this.center.setTo(this.position.x+this.halfWidth,this.position.y+this.halfHeight);if(this.allowRotation){this.sprite.angle+=this.deltaZ()}this.prev.x=this.position.x;this.prev.y=this.position.y},checkWorldBounds:function(){var f=this.position;var c=this.game.physics.arcade.bounds;var a=this.game.physics.arcade.checkCollision;var e=(this.worldBounce)?-this.worldBounce.x:-this.bounce.x;var d=(this.worldBounce)?-this.worldBounce.y:-this.bounce.y;if(this.isCircle){var b={x:this.center.x-this.radius,y:this.center.y-this.radius,right:this.center.x+this.radius,bottom:this.center.y+this.radius};if(b.x<c.x&&a.left){f.x=c.x-this.halfWidth+this.radius;this.velocity.x*=e;this.blocked.left=true}else{if(b.right>c.right&&a.right){f.x=c.right-this.halfWidth-this.radius;this.velocity.x*=e;this.blocked.right=true}}if(b.y<c.y&&a.up){f.y=c.y-this.halfHeight+this.radius;this.velocity.y*=d;this.blocked.up=true}else{if(b.bottom>c.bottom&&a.down){f.y=c.bottom-this.halfHeight-this.radius;this.velocity.y*=d;this.blocked.down=true}}}else{if(f.x<c.x&&a.left){f.x=c.x;this.velocity.x*=e;this.blocked.left=true}else{if(this.right>c.right&&a.right){f.x=c.right-this.width;this.velocity.x*=e;this.blocked.right=true}}if(f.y<c.y&&a.up){f.y=c.y;this.velocity.y*=d;this.blocked.up=true}else{if(this.bottom>c.bottom&&a.down){f.y=c.bottom-this.height;this.velocity.y*=d;this.blocked.down=true}}}return(this.blocked.up||this.blocked.down||this.blocked.left||this.blocked.right)},moveFrom:function(c,a,b){if(a===undefined){a=this.speed}if(a===0){return false}var d;if(b===undefined){d=this.angle;b=this.game.math.radToDeg(d)}else{d=this.game.math.degToRad(b)}this.moveTimer=0;this.moveDuration=c;if(b===0||b===180){this.velocity.set(Math.cos(d)*a,0)}else{if(b===90||b===270){this.velocity.set(0,Math.sin(d)*a)}else{this.velocity.set(Math.cos(d)*a,Math.sin(d)*a)}}this.isMoving=true;return true},moveTo:function(c,e,b){var a=e/(c/1000);if(a===0){return false}var d;if(b===undefined){d=this.angle;b=this.game.math.radToDeg(d)}else{d=this.game.math.degToRad(b)}e=Math.abs(e);this.moveDuration=0;this.moveDistance=e;if(this.moveTarget===null){this.moveTarget=new Phaser.Line();this.moveEnd=new Phaser.Point()}this.moveTarget.fromAngle(this.x,this.y,d,e);this.moveEnd.set(this.moveTarget.end.x,this.moveTarget.end.y);this.moveTarget.setTo(this.x,this.y,this.x,this.y);if(b===0||b===180){this.velocity.set(Math.cos(d)*a,0)}else{if(b===90||b===270){this.velocity.set(0,Math.sin(d)*a)}else{this.velocity.set(Math.cos(d)*a,Math.sin(d)*a)}}this.isMoving=true;return true},setSize:function(c,b,a,d){if(a===undefined){a=this.offset.x}if(d===undefined){d=this.offset.y}this.sourceWidth=c;this.sourceHeight=b;this.width=this.sourceWidth*this._sx;this.height=this.sourceHeight*this._sy;this.halfWidth=Math.floor(this.width/2);this.halfHeight=Math.floor(this.height/2);this.offset.setTo(a,d);this.center.setTo(this.position.x+this.halfWidth,this.position.y+this.halfHeight);this.isCircle=false;this.radius=0},setCircle:function(b,a,c){if(a===undefined){a=this.offset.x}if(c===undefined){c=this.offset.y}if(b>0){this.isCircle=true;this.radius=b;this.sourceWidth=b*2;this.sourceHeight=b*2;this.width=this.sourceWidth*this._sx;this.height=this.sourceHeight*this._sy;this.halfWidth=Math.floor(this.width/2);this.halfHeight=Math.floor(this.height/2);this.offset.setTo(a,c);this.center.setTo(this.position.x+this.halfWidth,this.position.y+this.halfHeight)}else{this.isCircle=false}},reset:function(a,b){this.velocity.set(0);this.acceleration.set(0);this.speed=0;this.angularVelocity=0;this.angularAcceleration=0;this.position.x=(a-(this.sprite.anchor.x*this.sprite.width))+this.sprite.scale.x*this.offset.x;this.position.x-=this.sprite.scale.x<0?this.width:0;this.position.y=(b-(this.sprite.anchor.y*this.sprite.height))+this.sprite.scale.y*this.offset.y;this.position.y-=this.sprite.scale.y<0?this.height:0;this.prev.x=this.position.x;this.prev.y=this.position.y;this.rotation=this.sprite.angle;this.preRotation=this.rotation;this._sx=this.sprite.scale.x;this._sy=this.sprite.scale.y;this.center.setTo(this.position.x+this.halfWidth,this.position.y+this.halfHeight)},getBounds:function(a){if(this.isCircle){a.x=this.center.x-this.radius;a.y=this.center.y-this.radius;a.right=this.center.x+this.radius;a.bottom=this.center.y+this.radius}else{a.x=this.x;a.y=this.y;a.right=this.right;a.bottom=this.bottom}return a},hitTest:function(a,b){return(this.isCircle)?Phaser.Circle.contains(this,a,b):Phaser.Rectangle.contains(this,a,b)},onFloor:function(){return this.blocked.down},onCeiling:function(){return this.blocked.up
},onWall:function(){return(this.blocked.left||this.blocked.right)},deltaAbsX:function(){return(this.deltaX()>0?this.deltaX():-this.deltaX())},deltaAbsY:function(){return(this.deltaY()>0?this.deltaY():-this.deltaY())},deltaX:function(){return this.position.x-this.prev.x},deltaY:function(){return this.position.y-this.prev.y},deltaZ:function(){return this.rotation-this.preRotation},destroy:function(){if(this.sprite.parent&&this.sprite.parent instanceof Phaser.Group){this.sprite.parent.removeFromHash(this.sprite)}this.sprite.body=null;this.sprite=null}};Object.defineProperty(Phaser.Physics.Arcade.Body.prototype,"left",{get:function(){return this.position.x}});Object.defineProperty(Phaser.Physics.Arcade.Body.prototype,"right",{get:function(){return this.position.x+this.width}});Object.defineProperty(Phaser.Physics.Arcade.Body.prototype,"top",{get:function(){return this.position.y}});Object.defineProperty(Phaser.Physics.Arcade.Body.prototype,"bottom",{get:function(){return this.position.y+this.height}});Object.defineProperty(Phaser.Physics.Arcade.Body.prototype,"x",{get:function(){return this.position.x},set:function(a){this.position.x=a}});Object.defineProperty(Phaser.Physics.Arcade.Body.prototype,"y",{get:function(){return this.position.y},set:function(a){this.position.y=a}});Phaser.Physics.Arcade.Body.render=function(c,a,b,d){if(d===undefined){d=true}b=b||"rgba(0,255,0,0.4)";c.fillStyle=b;c.strokeStyle=b;if(a.isCircle){c.beginPath();c.arc(a.center.x-a.game.camera.x,a.center.y-a.game.camera.y,a.radius,0,2*Math.PI);if(d){c.fill()}else{c.stroke()}}else{if(d){c.fillRect(a.position.x-a.game.camera.x,a.position.y-a.game.camera.y,a.width,a.height)}else{c.strokeRect(a.position.x-a.game.camera.x,a.position.y-a.game.camera.y,a.width,a.height)}}};Phaser.Physics.Arcade.Body.renderBodyInfo=function(b,a){b.line("x: "+a.x.toFixed(2),"y: "+a.y.toFixed(2),"width: "+a.width,"height: "+a.height);b.line("velocity x: "+a.velocity.x.toFixed(2),"y: "+a.velocity.y.toFixed(2),"deltaX: "+a._dx.toFixed(2),"deltaY: "+a._dy.toFixed(2));b.line("acceleration x: "+a.acceleration.x.toFixed(2),"y: "+a.acceleration.y.toFixed(2),"speed: "+a.speed.toFixed(2),"angle: "+a.angle.toFixed(2));b.line("gravity x: "+a.gravity.x,"y: "+a.gravity.y,"bounce x: "+a.bounce.x.toFixed(2),"y: "+a.bounce.y.toFixed(2));b.line("touching left: "+a.touching.left,"right: "+a.touching.right,"up: "+a.touching.up,"down: "+a.touching.down);b.line("blocked left: "+a.blocked.left,"right: "+a.blocked.right,"up: "+a.blocked.up,"down: "+a.blocked.down)};Phaser.Physics.Arcade.Body.prototype.constructor=Phaser.Physics.Arcade.Body;Phaser.Physics.Arcade.TilemapCollision=function(){};Phaser.Physics.Arcade.TilemapCollision.prototype={TILE_BIAS:16,collideSpriteVsTilemapLayer:function(e,a,g,f,b,c){if(!e.body){return}var h=a.getTiles(e.body.position.x-e.body.tilePadding.x,e.body.position.y-e.body.tilePadding.y,e.body.width+e.body.tilePadding.x,e.body.height+e.body.tilePadding.y,false,false);if(h.length===0){return}for(var d=0;d<h.length;d++){if(f){if(f.call(b,e,h[d])){if(this.separateTile(d,e.body,h[d],a,c)){this._total++;if(g){g.call(b,e,h[d])}}}}else{if(this.separateTile(d,e.body,h[d],a,c)){this._total++;if(g){g.call(b,e,h[d])}}}}},collideGroupVsTilemapLayer:function(g,a,f,e,b,c){if(g.length===0){return}for(var d=0;d<g.children.length;d++){if(g.children[d].exists){this.collideSpriteVsTilemapLayer(g.children[d],a,f,e,b,c)}}},separateTile:function(h,j,k,a,l){if(!j.enable){return false}var d=(!a.fixedToCamera)?a.position.x:0;var c=(!a.fixedToCamera)?a.position.y:0;if(!k.intersects((j.position.x-d),(j.position.y-c),(j.right-d),(j.bottom-c))){return false}else{if(l){return true}}if(k.collisionCallback&&!k.collisionCallback.call(k.collisionCallbackContext,j.sprite,k)){return false}else{if(typeof k.layer.callbacks!=="undefined"&&k.layer.callbacks[k.index]&&!k.layer.callbacks[k.index].callback.call(k.layer.callbacks[k.index].callbackContext,j.sprite,k)){return false}}if(!k.faceLeft&&!k.faceRight&&!k.faceTop&&!k.faceBottom){return false}var e=0;var b=0;var g=0;var f=1;if(j.deltaAbsX()>j.deltaAbsY()){g=-1}else{if(j.deltaAbsX()<j.deltaAbsY()){f=-1}}if(j.deltaX()!==0&&j.deltaY()!==0&&(k.faceLeft||k.faceRight)&&(k.faceTop||k.faceBottom)){g=Math.min(Math.abs((j.position.x-d)-k.right),Math.abs((j.right-d)-k.left));f=Math.min(Math.abs((j.position.y-c)-k.bottom),Math.abs((j.bottom-c)-k.top))}if(g<f){if(k.faceLeft||k.faceRight){e=this.tileCheckX(j,k,a);if(e!==0&&!k.intersects((j.position.x-d),(j.position.y-c),(j.right-d),(j.bottom-c))){return true}}if(k.faceTop||k.faceBottom){b=this.tileCheckY(j,k,a)}}else{if(k.faceTop||k.faceBottom){b=this.tileCheckY(j,k,a);if(b!==0&&!k.intersects((j.position.x-d),(j.position.y-c),(j.right-d),(j.bottom-c))){return true}}if(k.faceLeft||k.faceRight){e=this.tileCheckX(j,k,a)}}return(e!==0||b!==0)},tileCheckX:function(a,d,b){var c=0;var e=(!b.fixedToCamera)?b.position.x:0;if(a.deltaX()<0&&!a.blocked.left&&d.collideRight&&a.checkCollision.left){if(d.faceRight&&(a.x-e)<d.right){c=(a.x-e)-d.right;
	if(c<-this.TILE_BIAS){c=0}}}else{if(a.deltaX()>0&&!a.blocked.right&&d.collideLeft&&a.checkCollision.right){if(d.faceLeft&&(a.right-e)>d.left){c=(a.right-e)-d.left;if(c>this.TILE_BIAS){c=0}}}}if(c!==0){if(a.customSeparateX){a.overlapX=c}else{this.processTileSeparationX(a,c)}}return c},tileCheckY:function(a,d,c){var b=0;var e=(!c.fixedToCamera)?c.position.y:0;if(a.deltaY()<0&&!a.blocked.up&&d.collideDown&&a.checkCollision.up){if(d.faceBottom&&(a.y-e)<d.bottom){b=(a.y-e)-d.bottom;if(b<-this.TILE_BIAS){b=0}}}else{if(a.deltaY()>0&&!a.blocked.down&&d.collideUp&&a.checkCollision.down){if(d.faceTop&&(a.bottom-e)>d.top){b=(a.bottom-e)-d.top;if(b>this.TILE_BIAS){b=0}}}}if(b!==0){if(a.customSeparateY){a.overlapY=b}else{this.processTileSeparationY(a,b)}}return b},processTileSeparationX:function(b,a){if(a<0){b.blocked.left=true}else{if(a>0){b.blocked.right=true}}b.position.x-=a;if(b.bounce.x===0){b.velocity.x=0}else{b.velocity.x=-b.velocity.x*b.bounce.x}},processTileSeparationY:function(a,b){if(b<0){a.blocked.up=true}else{if(b>0){a.blocked.down=true}}a.position.y-=b;if(a.bounce.y===0){a.velocity.y=0}else{a.velocity.y=-a.velocity.y*a.bounce.y}}};Phaser.Utils.mixinPrototype(Phaser.Physics.Arcade.prototype,Phaser.Physics.Arcade.TilemapCollision.prototype);Phaser.ImageCollection=function(b,f,d,a,e,g,c){if(d===undefined||d<=0){d=32}if(a===undefined||a<=0){a=32}if(e===undefined){e=0}if(g===undefined){g=0}this.name=b;this.firstgid=f|0;this.imageWidth=d|0;this.imageHeight=a|0;this.imageMargin=e|0;this.imageSpacing=g|0;this.properties=c||{};this.images=[];this.total=0};Phaser.ImageCollection.prototype={containsImageIndex:function(a){return(a>=this.firstgid&&a<(this.firstgid+this.total))},addImage:function(a,b){this.images.push({gid:a,image:b});this.total++}};Phaser.ImageCollection.prototype.constructor=Phaser.ImageCollection;Phaser.Tile=function(d,c,b,f,e,a){this.layer=d;this.index=c;this.x=b;this.y=f;this.rotation=0;this.flipped=false;this.worldX=b*e;this.worldY=f*a;this.width=e;this.height=a;this.centerX=Math.abs(e/2);this.centerY=Math.abs(a/2);this.alpha=1;this.properties={};this.scanned=false;this.faceTop=false;this.faceBottom=false;this.faceLeft=false;this.faceRight=false;this.collideLeft=false;this.collideRight=false;this.collideUp=false;this.collideDown=false;this.collisionCallback=null;this.collisionCallbackContext=this};Phaser.Tile.prototype={containsPoint:function(a,b){return !(a<this.worldX||b<this.worldY||a>this.right||b>this.bottom)},intersects:function(a,d,c,b){if(c<=this.worldX){return false}if(b<=this.worldY){return false}if(a>=this.worldX+this.width){return false}if(d>=this.worldY+this.height){return false}return true},setCollisionCallback:function(b,a){this.collisionCallback=b;this.collisionCallbackContext=a},destroy:function(){this.collisionCallback=null;this.collisionCallbackContext=null;this.properties=null},setCollision:function(c,b,a,d){this.collideLeft=c;this.collideRight=b;this.collideUp=a;this.collideDown=d;this.faceLeft=c;this.faceRight=b;this.faceTop=a;this.faceBottom=d},resetCollision:function(){this.collideLeft=false;this.collideRight=false;this.collideUp=false;this.collideDown=false;this.faceTop=false;this.faceBottom=false;this.faceLeft=false;this.faceRight=false},isInteresting:function(b,a){if(b&&a){return(this.collideLeft||this.collideRight||this.collideUp||this.collideDown||this.faceTop||this.faceBottom||this.faceLeft||this.faceRight||this.collisionCallback)}else{if(b){return(this.collideLeft||this.collideRight||this.collideUp||this.collideDown)}else{if(a){return(this.faceTop||this.faceBottom||this.faceLeft||this.faceRight)}}}return false},copy:function(a){this.index=a.index;this.alpha=a.alpha;this.properties=a.properties;this.collideUp=a.collideUp;this.collideDown=a.collideDown;this.collideLeft=a.collideLeft;this.collideRight=a.collideRight;this.collisionCallback=a.collisionCallback;this.collisionCallbackContext=a.collisionCallbackContext}};Phaser.Tile.prototype.constructor=Phaser.Tile;Object.defineProperty(Phaser.Tile.prototype,"collides",{get:function(){return(this.collideLeft||this.collideRight||this.collideUp||this.collideDown)}});Object.defineProperty(Phaser.Tile.prototype,"canCollide",{get:function(){return(this.collideLeft||this.collideRight||this.collideUp||this.collideDown||this.collisionCallback)}});Object.defineProperty(Phaser.Tile.prototype,"left",{get:function(){return this.worldX}});Object.defineProperty(Phaser.Tile.prototype,"right",{get:function(){return this.worldX+this.width}});Object.defineProperty(Phaser.Tile.prototype,"top",{get:function(){return this.worldY}});Object.defineProperty(Phaser.Tile.prototype,"bottom",{get:function(){return this.worldY+this.height}});Phaser.Tilemap=function(c,d,g,b,e,a){this.game=c;this.key=d;var f=Phaser.TilemapParser.parse(this.game,d,g,b,e,a);if(f===null){return}this.width=f.width;this.height=f.height;this.tileWidth=f.tileWidth;this.tileHeight=f.tileHeight;this.orientation=f.orientation;this.format=f.format;this.version=f.version;this.properties=f.properties;
	this.widthInPixels=f.widthInPixels;this.heightInPixels=f.heightInPixels;this.layers=f.layers;this.tilesets=f.tilesets;this.imagecollections=f.imagecollections;this.tiles=f.tiles;this.objects=f.objects;this.collideIndexes=[];this.collision=f.collision;this.images=f.images;this.enableDebug=false;this.currentLayer=0;this.debugMap=[];this._results=[];this._tempA=0;this._tempB=0};Phaser.Tilemap.CSV=0;Phaser.Tilemap.TILED_JSON=1;Phaser.Tilemap.NORTH=0;Phaser.Tilemap.EAST=1;Phaser.Tilemap.SOUTH=2;Phaser.Tilemap.WEST=3;Phaser.Tilemap.prototype={create:function(c,d,a,f,b,e){if(e===undefined){e=this.game.world}this.width=d;this.height=a;this.setTileSize(f,b);this.layers.length=0;return this.createBlankLayer(c,d,a,f,b,e)},setTileSize:function(b,a){this.tileWidth=b;this.tileHeight=a;this.widthInPixels=this.width*b;this.heightInPixels=this.height*a},addTilesetImage:function(a,n,l,f,r,g,d){if(a===undefined){return null}if(l===undefined){l=this.tileWidth}if(f===undefined){f=this.tileHeight}if(r===undefined){r=0}if(g===undefined){g=0}if(d===undefined){d=0}if(l===0){l=32}if(f===0){f=32}var c=null;if(n===undefined||n===null){n=a}if(n instanceof Phaser.BitmapData){c=n.canvas}else{if(!this.game.cache.checkImageKey(n)){console.warn('Phaser.Tilemap.addTilesetImage: Invalid image key given: "'+n+'"');return null}c=this.game.cache.getImage(n)}var m=this.getTilesetIndex(a);if(m===null&&this.format===Phaser.Tilemap.TILED_JSON){console.warn('Phaser.Tilemap.addTilesetImage: No data found in the JSON matching the tileset name: "'+a+'"');return null}if(this.tilesets[m]){this.tilesets[m].setImage(c);return this.tilesets[m]}else{var k=new Phaser.Tileset(a,d,l,f,r,g,{});k.setImage(c);this.tilesets.push(k);var b=this.tilesets.length-1;var j=r;var h=r;var e=0;var q=0;var o=0;for(var p=d;p<d+k.total;p++){this.tiles[p]=[j,h,b];j+=l+g;e++;if(e===k.total){break}q++;if(q===k.columns){j=r;h+=f+g;q=0;o++;if(o===k.rows){break}}}return k}return null},createFromObjects:function(b,g,n,c,j,h,m,a,d){if(j===undefined){j=true}if(h===undefined){h=false}if(m===undefined){m=this.game.world}if(a===undefined){a=Phaser.Sprite}if(d===undefined){d=true}if(!this.objects[b]){console.warn("Tilemap.createFromObjects: Invalid objectgroup name given: "+b);return}for(var f=0;f<this.objects[b].length;f++){var o=false;var e=this.objects[b][f];if(e.gid!==undefined&&typeof g==="number"&&e.gid===g){o=true}else{if(e.id!==undefined&&typeof g==="number"&&e.id===g){o=true}else{if(e.name!==undefined&&typeof g==="string"&&e.name===g){o=true}}}if(o){var l=new a(this.game,parseFloat(e.x,10),parseFloat(e.y,10),n,c);l.name=e.name;l.visible=e.visible;l.autoCull=h;l.exists=j;if(e.width){l.width=e.width}if(e.height){l.height=e.height}if(e.rotation){l.angle=e.rotation}if(d){l.y-=l.height}m.add(l);for(var k in e.properties){m.set(l,k,e.properties[k],false,false,0,true)}}}},createFromTiles:function(m,b,l,d,k,f){if(typeof m==="number"){m=[m]}if(b===undefined||b===null){b=[]}else{if(typeof b==="number"){b=[b]}}d=this.getLayer(d);if(k===undefined){k=this.game.world}if(f===undefined){f={}}if(f.customClass===undefined){f.customClass=Phaser.Sprite}if(f.adjustY===undefined){f.adjustY=true}var a=this.layers[d].width;var n=this.layers[d].height;this.copy(0,0,a,n,d);if(this._results.length<2){return 0}var g=0;var j;for(var c=1,e=this._results.length;c<e;c++){if(m.indexOf(this._results[c].index)!==-1){j=new f.customClass(this.game,this._results[c].worldX,this._results[c].worldY,l);for(var h in f){j[h]=f[h]}k.add(j);g++}}if(b.length===1){for(c=0;c<m.length;c++){this.replace(m[c],b[0],0,0,a,n,d)}}else{if(b.length>1){for(c=0;c<m.length;c++){this.replace(m[c],b[c],0,0,a,n,d)}}}return g},createLayer:function(d,e,a,f){if(e===undefined){e=this.game.width}if(a===undefined){a=this.game.height}if(f===undefined){f=this.game.world}var c=d;if(typeof d==="string"){c=this.getLayerIndex(d)}if(c===null||c>this.layers.length){console.warn("Tilemap.createLayer: Invalid layer ID given: "+c);return}if(e===undefined||e<=0){e=Math.min(this.game.width,this.layers[c].widthInPixels)}else{if(e>this.game.width){e=this.game.width}}if(a===undefined||a<=0){a=Math.min(this.game.height,this.layers[c].heightInPixels)}else{if(a>this.game.height){a=this.game.height}}if(this.enableDebug){console.group("Tilemap.createLayer");console.log("Name:",this.layers[c].name);console.log("Size:",e,"x",a);console.log("Tileset:",this.tilesets[0].name,"index:",c)}var b=f.add(new Phaser.TilemapLayer(this.game,this,c,e,a));if(this.enableDebug){console.groupEnd()}return b},createBlankLayer:function(a,b,m,j,f,l){if(l===undefined){l=this.game.world}if(this.getLayerIndex(a)!==null){console.warn("Tilemap.createBlankLayer: Layer with matching name already exists: "+a);return}var e={name:a,x:0,y:0,width:b,height:m,widthInPixels:b*j,heightInPixels:m*f,alpha:1,visible:true,properties:{},indexes:[],callbacks:[],bodies:[],data:null};var n;var c=[];for(var g=0;g<m;g++){n=[];for(var i=0;i<b;i++){n.push(new Phaser.Tile(e,-1,i,g,j,f))}c.push(n)}e.data=c;this.layers.push(e);
	this.currentLayer=this.layers.length-1;var k=e.widthInPixels;var d=e.heightInPixels;if(k>this.game.width){k=this.game.width}if(d>this.game.height){d=this.game.height}var c=new Phaser.TilemapLayer(this.game,this,this.layers.length-1,k,d);c.name=a;return l.add(c)},getIndex:function(a,b){for(var c=0;c<a.length;c++){if(a[c].name===b){return c}}return null},getLayerIndex:function(a){return this.getIndex(this.layers,a)},getTilesetIndex:function(a){return this.getIndex(this.tilesets,a)},getImageIndex:function(a){return this.getIndex(this.images,a)},setTileIndexCallback:function(c,f,b,e){e=this.getLayer(e);if(typeof c==="number"){this.layers[e].callbacks[c]={callback:f,callbackContext:b}}else{for(var d=0,a=c.length;d<a;d++){this.layers[e].callbacks[c[d]]={callback:f,callbackContext:b}}}},setTileLocationCallback:function(b,h,f,a,g,c,e){e=this.getLayer(e);this.copy(b,h,f,a,e);if(this._results.length<2){return}for(var d=1;d<this._results.length;d++){this._results[d].setCollisionCallback(g,c)}},setCollision:function(c,a,e,b){if(a===undefined){a=true}if(b===undefined){b=true}e=this.getLayer(e);if(typeof c==="number"){return this.setCollisionByIndex(c,a,e,true)}else{if(Array.isArray(c)){for(var d=0;d<c.length;d++){this.setCollisionByIndex(c[d],a,e,false)}if(b){this.calculateFaces(e)}}}},setCollisionBetween:function(f,e,a,d,c){if(a===undefined){a=true}if(c===undefined){c=true}d=this.getLayer(d);if(f>e){return}for(var b=f;b<=e;b++){this.setCollisionByIndex(b,a,d,false)}if(c){this.calculateFaces(d)}},setCollisionByExclusion:function(d,b,f,c){if(b===undefined){b=true}if(c===undefined){c=true}f=this.getLayer(f);for(var e=0,a=this.tiles.length;e<a;e++){if(d.indexOf(e)===-1){this.setCollisionByIndex(e,b,f,false)}}if(c){this.calculateFaces(f)}},setCollisionByIndex:function(d,b,f,c){if(b===undefined){b=true}if(f===undefined){f=this.currentLayer}if(c===undefined){c=true}if(b){this.collideIndexes.push(d)}else{var e=this.collideIndexes.indexOf(d);if(e>-1){this.collideIndexes.splice(e,1)}}for(var h=0;h<this.layers[f].height;h++){for(var a=0;a<this.layers[f].width;a++){var g=this.layers[f].data[h][a];if(g&&g.index===d){if(b){g.setCollision(true,true,true,true)}else{g.resetCollision()}g.faceTop=b;g.faceBottom=b;g.faceLeft=b;g.faceRight=b}}}if(c){this.calculateFaces(f)}return f},getLayer:function(a){if(a===undefined){a=this.currentLayer}else{if(typeof a==="string"){a=this.getLayerIndex(a)}else{if(a instanceof Phaser.TilemapLayer){a=a.index}}}return a},setPreventRecalculate:function(b){if(b===true&&this.preventingRecalculate!==true){this.preventingRecalculate=true;this.needToRecalculate={}}if(b===false&&this.preventingRecalculate===true){this.preventingRecalculate=false;for(var a in this.needToRecalculate){this.calculateFaces(a)}this.needToRecalculate=false}},calculateFaces:function(c){if(this.preventingRecalculate){this.needToRecalculate[c]=true;return}var e=null;var j=null;var a=null;var k=null;for(var f=0,b=this.layers[c].height;f<b;f++){for(var g=0,i=this.layers[c].width;g<i;g++){var d=this.layers[c].data[f][g];if(d){e=this.getTileAbove(c,g,f);j=this.getTileBelow(c,g,f);a=this.getTileLeft(c,g,f);k=this.getTileRight(c,g,f);if(d.collides){d.faceTop=true;d.faceBottom=true;d.faceLeft=true;d.faceRight=true}if(e&&e.collides){d.faceTop=false}if(j&&j.collides){d.faceBottom=false}if(a&&a.collides){d.faceLeft=false}if(k&&k.collides){d.faceRight=false}}}}},getTileAbove:function(b,a,c){if(c>0){return this.layers[b].data[c-1][a]}return null},getTileBelow:function(b,a,c){if(c<this.layers[b].height-1){return this.layers[b].data[c+1][a]}return null},getTileLeft:function(b,a,c){if(a>0){return this.layers[b].data[c][a-1]}return null},getTileRight:function(b,a,c){if(a<this.layers[b].width-1){return this.layers[b].data[c][a+1]}return null},setLayer:function(a){a=this.getLayer(a);if(this.layers[a]){this.currentLayer=a}},hasTile:function(a,c,b){b=this.getLayer(b);if(this.layers[b].data[c]===undefined||this.layers[b].data[c][a]===undefined){return false}return(this.layers[b].data[c][a].index>-1)},removeTile:function(a,d,b){b=this.getLayer(b);if(a>=0&&a<this.layers[b].width&&d>=0&&d<this.layers[b].height){if(this.hasTile(a,d,b)){var c=this.layers[b].data[d][a];this.layers[b].data[d][a]=new Phaser.Tile(this.layers[b],-1,a,d,this.tileWidth,this.tileHeight);this.layers[b].dirty=true;this.calculateFaces(b);return c}}},removeTileWorldXY:function(a,e,d,b,c){c=this.getLayer(c);a=this.game.math.snapToFloor(a,d)/d;e=this.game.math.snapToFloor(e,b)/b;return this.removeTile(a,e,c)},putTile:function(d,a,e,c){if(d===null){return this.removeTile(a,e,c)}c=this.getLayer(c);if(a>=0&&a<this.layers[c].width&&e>=0&&e<this.layers[c].height){var b;if(d instanceof Phaser.Tile){b=d.index;if(this.hasTile(a,e,c)){this.layers[c].data[e][a].copy(d)}else{this.layers[c].data[e][a]=new Phaser.Tile(c,b,a,e,d.width,d.height)}}else{b=d;if(this.hasTile(a,e,c)){this.layers[c].data[e][a].index=b}else{this.layers[c].data[e][a]=new Phaser.Tile(this.layers[c],b,a,e,this.tileWidth,this.tileHeight)}}if(this.collideIndexes.indexOf(b)>-1){this.layers[c].data[e][a].setCollision(true,true,true,true)
}else{this.layers[c].data[e][a].resetCollision()}this.layers[c].dirty=true;this.calculateFaces(c);return this.layers[c].data[e][a]}return null},putTileWorldXY:function(d,a,f,e,b,c){c=this.getLayer(c);a=this.game.math.snapToFloor(a,e)/e;f=this.game.math.snapToFloor(f,b)/b;return this.putTile(d,a,f,c)},searchTileIndex:function(d,f,b,e){if(f===undefined){f=0}if(b===undefined){b=false}e=this.getLayer(e);var h=0;if(b){for(var g=this.layers[e].height-1;g>=0;g--){for(var a=this.layers[e].width-1;a>=0;a--){if(this.layers[e].data[g][a].index===d){if(h===f){return this.layers[e].data[g][a]}else{h++}}}}}else{for(var g=0;g<this.layers[e].height;g++){for(var a=0;a<this.layers[e].width;a++){if(this.layers[e].data[g][a].index===d){if(h===f){return this.layers[e].data[g][a]}else{h++}}}}}return null},getTile:function(a,d,c,b){if(b===undefined){b=false}c=this.getLayer(c);if(a>=0&&a<this.layers[c].width&&d>=0&&d<this.layers[c].height){if(this.layers[c].data[d][a].index===-1){if(b){return this.layers[c].data[d][a]}else{return null}}else{return this.layers[c].data[d][a]}}else{return null}},getTileWorldXY:function(a,f,e,c,d,b){if(e===undefined){e=this.tileWidth}if(c===undefined){c=this.tileHeight}d=this.getLayer(d);a=this.game.math.snapToFloor(a,e)/e;f=this.game.math.snapToFloor(f,c)/c;return this.getTile(a,f,d,b)},copy:function(c,g,f,b,e){e=this.getLayer(e);if(!this.layers[e]){this._results.length=0;return}if(c===undefined){c=0}if(g===undefined){g=0}if(f===undefined){f=this.layers[e].width}if(b===undefined){b=this.layers[e].height}if(c<0){c=0}if(g<0){g=0}if(f>this.layers[e].width){f=this.layers[e].width}if(b>this.layers[e].height){b=this.layers[e].height}this._results.length=0;this._results.push({x:c,y:g,width:f,height:b,layer:e});for(var a=g;a<g+b;a++){for(var d=c;d<c+f;d++){this._results.push(this.layers[e].data[a][d])}}return this._results},paste:function(a,g,f,e){if(a===undefined){a=0}if(g===undefined){g=0}e=this.getLayer(e);if(!f||f.length<2){return}var c=a-f[1].x;var b=g-f[1].y;for(var d=1;d<f.length;d++){this.layers[e].data[b+f[d].y][c+f[d].x].copy(f[d])}this.layers[e].dirty=true;this.calculateFaces(e)},swap:function(f,e,b,g,d,a,c){c=this.getLayer(c);this.copy(b,g,d,a,c);if(this._results.length<2){return}this._tempA=f;this._tempB=e;this._results.forEach(this.swapHandler,this);this.paste(b,g,this._results,c)},swapHandler:function(a){if(a.index===this._tempA){a.index=this._tempB}else{if(a.index===this._tempB){a.index=this._tempA}}},forEach:function(g,d,b,f,e,a,c){c=this.getLayer(c);this.copy(b,f,e,a,c);if(this._results.length<2){return}this._results.forEach(g,d);this.paste(b,f,this._results,c)},replace:function(g,c,b,h,f,a,e){e=this.getLayer(e);this.copy(b,h,f,a,e);if(this._results.length<2){return}for(var d=1;d<this._results.length;d++){if(this._results[d].index===g){this._results[d].index=c}}this.paste(b,h,this._results,e)},random:function(f,e,a,h,c){c=this.getLayer(c);this.copy(f,e,a,h,c);if(this._results.length<2){return}var d=[];for(var j=1;j<this._results.length;j++){if(this._results[j].index){var g=this._results[j].index;if(d.indexOf(g)===-1){d.push(g)}}}for(var b=1;b<this._results.length;b++){this._results[b].index=this.game.rnd.pick(d)}this.paste(f,e,this._results,c)},shuffle:function(b,h,g,a,f){f=this.getLayer(f);this.copy(b,h,g,a,f);if(this._results.length<2){return}var c=[];for(var e=1;e<this._results.length;e++){if(this._results[e].index){c.push(this._results[e].index)}}Phaser.ArrayUtils.shuffle(c);for(var d=1;d<this._results.length;d++){this._results[d].index=c[d-1]}this.paste(b,h,this._results,f)},fill:function(c,b,g,f,a,e){e=this.getLayer(e);this.copy(b,g,f,a,e);if(this._results.length<2){return}for(var d=1;d<this._results.length;d++){this._results[d].index=c}this.paste(b,g,this._results,e)},removeAllLayers:function(){this.layers.length=0;this.currentLayer=0},dump:function(){var b="";var c=[""];for(var d=0;d<this.layers[this.currentLayer].height;d++){for(var a=0;a<this.layers[this.currentLayer].width;a++){b+="%c  ";if(this.layers[this.currentLayer].data[d][a]>1){if(this.debugMap[this.layers[this.currentLayer].data[d][a]]){c.push("background: "+this.debugMap[this.layers[this.currentLayer].data[d][a]])}else{c.push("background: #ffffff")}}else{c.push("background: rgb(0, 0, 0)")}}b+="\n"}c[0]=b;console.log.apply(console,c)},destroy:function(){this.removeAllLayers();this.data=[];this.game=null}};Phaser.Tilemap.prototype.constructor=Phaser.Tilemap;Object.defineProperty(Phaser.Tilemap.prototype,"layer",{get:function(){return this.layers[this.currentLayer]},set:function(a){if(a!==this.currentLayer){this.setLayer(a)}}});Phaser.TilemapLayer=function(b,e,c,d,a){d|=0;a|=0;Phaser.Sprite.call(this,b,0,0);this.map=e;this.index=c;this.layer=e.layers[c];this.canvas=PIXI.CanvasPool.create(this,d,a);this.context=this.canvas.getContext("2d");this.setTexture(new PIXI.Texture(new PIXI.BaseTexture(this.canvas)));this.type=Phaser.TILEMAPLAYER;this.physicsType=Phaser.TILEMAPLAYER;this.renderSettings={enableScrollDelta:false,overdrawRatio:0.2,copyCanvas:null};
	this.debug=false;this.exists=true;this.debugSettings={missingImageFill:"rgb(255,255,255)",debuggedTileOverfill:"rgba(0,255,0,0.4)",forceFullRedraw:true,debugAlpha:0.5,facingEdgeStroke:"rgba(0,255,0,1)",collidingTileOverfill:"rgba(0,255,0,0.2)"};this.scrollFactorX=1;this.scrollFactorY=1;this.dirty=true;this.rayStepRate=4;this._wrap=false;this._mc={scrollX:0,scrollY:0,renderWidth:0,renderHeight:0,tileWidth:e.tileWidth,tileHeight:e.tileHeight,cw:e.tileWidth,ch:e.tileHeight,tilesets:[]};this._scrollX=0;this._scrollY=0;this._results=[];if(!b.device.canvasBitBltShift){this.renderSettings.copyCanvas=Phaser.TilemapLayer.ensureSharedCopyCanvas()}this.fixedToCamera=true};Phaser.TilemapLayer.prototype=Object.create(Phaser.Sprite.prototype);Phaser.TilemapLayer.prototype.constructor=Phaser.TilemapLayer;Phaser.TilemapLayer.prototype.preUpdateCore=Phaser.Component.Core.preUpdate;Phaser.TilemapLayer.sharedCopyCanvas=null;Phaser.TilemapLayer.ensureSharedCopyCanvas=function(){if(!this.sharedCopyCanvas){this.sharedCopyCanvas=PIXI.CanvasPool.create(this,2,2)}return this.sharedCopyCanvas};Phaser.TilemapLayer.prototype.preUpdate=function(){return this.preUpdateCore()};Phaser.TilemapLayer.prototype.postUpdate=function(){if(this.fixedToCamera){this.position.x=(this.game.camera.view.x+this.cameraOffset.x)/this.game.camera.scale.x;this.position.y=(this.game.camera.view.y+this.cameraOffset.y)/this.game.camera.scale.y}this._scrollX=this.game.camera.view.x*this.scrollFactorX/this.scale.x;this._scrollY=this.game.camera.view.y*this.scrollFactorY/this.scale.y};Phaser.TilemapLayer.prototype._renderCanvas=function(a){if(this.fixedToCamera){this.position.x=(this.game.camera.view.x+this.cameraOffset.x)/this.game.camera.scale.x;this.position.y=(this.game.camera.view.y+this.cameraOffset.y)/this.game.camera.scale.y}this._scrollX=this.game.camera.view.x*this.scrollFactorX/this.scale.x;this._scrollY=this.game.camera.view.y*this.scrollFactorY/this.scale.y;this.render();PIXI.Sprite.prototype._renderCanvas.call(this,a)};Phaser.TilemapLayer.prototype._renderWebGL=function(a){if(this.fixedToCamera){this.position.x=(this.game.camera.view.x+this.cameraOffset.x)/this.game.camera.scale.x;this.position.y=(this.game.camera.view.y+this.cameraOffset.y)/this.game.camera.scale.y}this._scrollX=this.game.camera.view.x*this.scrollFactorX/this.scale.x;this._scrollY=this.game.camera.view.y*this.scrollFactorY/this.scale.y;this.render();PIXI.Sprite.prototype._renderWebGL.call(this,a)};Phaser.TilemapLayer.prototype.destroy=function(){PIXI.CanvasPool.remove(this);Phaser.Component.Destroy.prototype.destroy.call(this)};Phaser.TilemapLayer.prototype.resize=function(b,a){this.canvas.width=b;this.canvas.height=a;this.texture.frame.resize(b,a);this.texture.width=b;this.texture.height=a;this.texture.crop.width=b;this.texture.crop.height=a;this.texture.baseTexture.width=b;this.texture.baseTexture.height=a;this.texture.baseTexture.dirty();this.texture.requiresUpdate=true;this.texture._updateUvs();this.dirty=true};Phaser.TilemapLayer.prototype.resizeWorld=function(){this.game.world.setBounds(0,0,this.layer.widthInPixels*this.scale.x,this.layer.heightInPixels*this.scale.y)};Phaser.TilemapLayer.prototype._fixX=function(a){if(this.scrollFactorX===1||(this.scrollFactorX===0&&this.position.x===0)){return a}if(this.scrollFactorX===0&&this.position.x!==0){return a-this.position.x}return this._scrollX+(a-(this._scrollX/this.scrollFactorX))};Phaser.TilemapLayer.prototype._unfixX=function(a){if(this.scrollFactorX===1){return a}return(this._scrollX/this.scrollFactorX)+(a-this._scrollX)};Phaser.TilemapLayer.prototype._fixY=function(a){if(this.scrollFactorY===1||(this.scrollFactorY===0&&this.position.y===0)){return a}if(this.scrollFactorY===0&&this.position.y!==0){return a-this.position.y}return this._scrollY+(a-(this._scrollY/this.scrollFactorY))};Phaser.TilemapLayer.prototype._unfixY=function(a){if(this.scrollFactorY===1){return a}return(this._scrollY/this.scrollFactorY)+(a-this._scrollY)};Phaser.TilemapLayer.prototype.getTileX=function(a){return Math.floor(this._fixX(a)/this._mc.tileWidth)};Phaser.TilemapLayer.prototype.getTileY=function(a){return Math.floor(this._fixY(a)/this._mc.tileHeight)};Phaser.TilemapLayer.prototype.getTileXY=function(b,c,a){a.x=this.getTileX(b);a.y=this.getTileY(c);return a};Phaser.TilemapLayer.prototype.getRayCastTiles=function(l,d,a,h){if(!d){d=this.rayStepRate}if(a===undefined){a=false}if(h===undefined){h=false}var j=this.getTiles(l.x,l.y,l.width,l.height,a,h);if(j.length===0){return[]}var g=l.coordinatesOnLine(d);var b=[];for(var c=0;c<j.length;c++){for(var k=0;k<g.length;k++){var f=j[c];var e=g[k];if(f.containsPoint(e[0],e[1])){b.push(f);break}}}return b};Phaser.TilemapLayer.prototype.getTiles=function(k,j,b,m,e,l){if(e===undefined){e=false}if(l===undefined){l=false}var c=!(e||l);k=this._fixX(k);j=this._fixY(j);var h=Math.floor(k/(this._mc.cw*this.scale.x));var g=Math.floor(j/(this._mc.ch*this.scale.y));var i=Math.ceil((k+b)/(this._mc.cw*this.scale.x))-h;var a=Math.ceil((j+m)/(this._mc.ch*this.scale.y))-g;
	while(this._results.length){this._results.pop()}for(var d=g;d<g+a;d++){for(var f=h;f<h+i;f++){var n=this.layer.data[d];if(n&&n[f]){if(c||n[f].isInteresting(e,l)){this._results.push(n[f])}}}}return this._results.slice()};Phaser.TilemapLayer.prototype.resolveTileset=function(d){var a=this._mc.tilesets;if(d<2000){while(a.length<d){a.push(undefined)}}var b=this.map.tiles[d]&&this.map.tiles[d][2];if(b!==null){var c=this.map.tilesets[b];if(c&&c.containsTileIndex(d)){return(a[d]=c)}}return(a[d]=null)};Phaser.TilemapLayer.prototype.resetTilesetCache=function(){var a=this._mc.tilesets;while(a.length){a.pop()}};Phaser.TilemapLayer.prototype.setScale=function(d,c){d=d||1;c=c||d;for(var f=0;f<this.layer.data.length;f++){var e=this.layer.data[f];for(var a=0;a<e.length;a++){var b=e[a];b.width=this.map.tileWidth*d;b.height=this.map.tileHeight*c;b.worldX=b.x*b.width;b.worldY=b.y*b.height}}this.scale.setTo(d,c)};Phaser.TilemapLayer.prototype.shiftCanvas=function(a,i,g){var b=a.canvas;var j=b.width-Math.abs(i);var e=b.height-Math.abs(g);var l=0;var k=0;var h=i;var f=g;if(i<0){l=-i;h=0}if(g<0){k=-g;f=0}var d=this.renderSettings.copyCanvas;if(d){if(d.width<j||d.height<e){d.width=j;d.height=e}var c=d.getContext("2d");c.clearRect(0,0,j,e);c.drawImage(b,l,k,j,e,0,0,j,e);a.clearRect(h,f,j,e);a.drawImage(d,0,0,j,e,h,f,j,e)}else{a.save();a.globalCompositeOperation="copy";a.drawImage(b,l,k,j,e,h,f,j,e);a.restore()}};Phaser.TilemapLayer.prototype.renderRegion=function(s,r,d,n,w,h){var c=this.context;var q=this.layer.width;var o=this.layer.height;var B=this._mc.tileWidth;var e=this._mc.tileHeight;var u=this._mc.tilesets;var t=NaN;if(!this._wrap){if(d<=w){d=Math.max(0,d);w=Math.min(q-1,w)}if(n<=h){n=Math.max(0,n);h=Math.min(o-1,h)}}var b=(d*B)-s;var a=(n*e)-r;var m=(d+((1<<20)*q))%q;var k=(n+((1<<20)*o))%o;var A,z,j,i,p,v;for(i=k,v=h-n,z=a;v>=0;i++,v--,z+=e){if(i>=o){i-=o}var g=this.layer.data[i];for(j=m,p=w-d,A=b;p>=0;j++,p--,A+=B){if(j>=q){j-=q}var C=g[j];if(!C||C.index<0){continue}var f=C.index;var l=u[f];if(l===undefined){l=this.resolveTileset(f)}if(C.alpha!==t&&!this.debug){c.globalAlpha=C.alpha;t=C.alpha}if(l){if(C.rotation||C.flipped){c.save();c.translate(A+C.centerX,z+C.centerY);c.rotate(C.rotation);if(C.flipped){c.scale(-1,1)}l.draw(c,-C.centerX,-C.centerY,f);c.restore()}else{l.draw(c,A,z,f)}}else{if(this.debugSettings.missingImageFill){c.fillStyle=this.debugSettings.missingImageFill;c.fillRect(A,z,B,e)}}if(C.debug&&this.debugSettings.debuggedTileOverfill){c.fillStyle=this.debugSettings.debuggedTileOverfill;c.fillRect(A,z,B,e)}}}};Phaser.TilemapLayer.prototype.renderDeltaScroll=function(m,l){var p=this._mc.scrollX;var n=this._mc.scrollY;var i=this.canvas.width;var f=this.canvas.height;var g=this._mc.tileWidth;var c=this._mc.tileHeight;var e=0;var o=-g;var j=0;var b=-c;if(m<0){e=i+m;o=i-1}else{if(m>0){o=m}}if(l<0){j=f+l;b=f-1}else{if(l>0){b=l}}this.shiftCanvas(this.context,m,l);e=Math.floor((e+p)/g);o=Math.floor((o+p)/g);j=Math.floor((j+n)/c);b=Math.floor((b+n)/c);if(e<=o){this.context.clearRect(((e*g)-p),0,(o-e+1)*g,f);var d=Math.floor((0+n)/c);var a=Math.floor((f-1+n)/c);this.renderRegion(p,n,e,d,o,a)}if(j<=b){this.context.clearRect(0,((j*c)-n),i,(b-j+1)*c);var h=Math.floor((0+p)/g);var k=Math.floor((i-1+p)/g);this.renderRegion(p,n,h,j,k,b)}};Phaser.TilemapLayer.prototype.renderFull=function(){var i=this._mc.scrollX;var h=this._mc.scrollY;var f=this.canvas.width;var d=this.canvas.height;var e=this._mc.tileWidth;var b=this._mc.tileHeight;var c=Math.floor(i/e);var j=Math.floor((f-1+i)/e);var g=Math.floor(h/b);var a=Math.floor((d-1+h)/b);this.context.clearRect(0,0,f,d);this.renderRegion(i,h,c,g,j,a)};Phaser.TilemapLayer.prototype.render=function(){var a=false;if(!this.visible){return}if(this.dirty||this.layer.dirty){this.layer.dirty=false;a=true}var b=this.canvas.width;var h=this.canvas.height;var g=this._scrollX|0;var f=this._scrollY|0;var e=this._mc;var d=e.scrollX-g;var c=e.scrollY-f;if(!a&&d===0&&c===0&&e.renderWidth===b&&e.renderHeight===h){return}this.context.save();e.scrollX=g;e.scrollY=f;if(e.renderWidth!==b||e.renderHeight!==h){e.renderWidth=b;e.renderHeight=h}if(this.debug){this.context.globalAlpha=this.debugSettings.debugAlpha;if(this.debugSettings.forceFullRedraw){a=true}}if(!a&&this.renderSettings.enableScrollDelta&&(Math.abs(d)+Math.abs(c))<Math.min(b,h)){this.renderDeltaScroll(d,c)}else{this.renderFull()}if(this.debug){this.context.globalAlpha=1;this.renderDebug()}this.texture.baseTexture.dirty();this.dirty=false;this.context.restore();return true};Phaser.TilemapLayer.prototype.renderDebug=function(){var s=this._mc.scrollX;var r=this._mc.scrollY;var d=this.context;var c=this.canvas.width;var i=this.canvas.height;var q=this.layer.width;var o=this.layer.height;var z=this._mc.tileWidth;var f=this._mc.tileHeight;var e=Math.floor(s/z);var u=Math.floor((c-1+s)/z);var n=Math.floor(r/f);var h=Math.floor((i-1+r)/f);var b=(e*z)-s;var a=(n*f)-r;var m=(e+((1<<20)*q))%q;var l=(n+((1<<20)*o))%o;var w,v,k,j,p,t;d.strokeStyle=this.debugSettings.facingEdgeStroke;
	for(j=l,t=h-n,v=a;t>=0;j++,t--,v+=f){if(j>=o){j-=o}var g=this.layer.data[j];for(k=m,p=u-e,w=b;p>=0;k++,p--,w+=z){if(k>=q){k-=q}var A=g[k];if(!A||A.index<0||!A.collides){continue}if(this.debugSettings.collidingTileOverfill){d.fillStyle=this.debugSettings.collidingTileOverfill;d.fillRect(w,v,this._mc.cw,this._mc.ch)}if(this.debugSettings.facingEdgeStroke){d.beginPath();if(A.faceTop){d.moveTo(w,v);d.lineTo(w+this._mc.cw,v)}if(A.faceBottom){d.moveTo(w,v+this._mc.ch);d.lineTo(w+this._mc.cw,v+this._mc.ch)}if(A.faceLeft){d.moveTo(w,v);d.lineTo(w,v+this._mc.ch)}if(A.faceRight){d.moveTo(w+this._mc.cw,v);d.lineTo(w+this._mc.cw,v+this._mc.ch)}d.closePath();d.stroke()}}}};Object.defineProperty(Phaser.TilemapLayer.prototype,"wrap",{get:function(){return this._wrap},set:function(a){this._wrap=a;this.dirty=true}});Object.defineProperty(Phaser.TilemapLayer.prototype,"scrollX",{get:function(){return this._scrollX},set:function(a){this._scrollX=a}});Object.defineProperty(Phaser.TilemapLayer.prototype,"scrollY",{get:function(){return this._scrollY},set:function(a){this._scrollY=a}});Object.defineProperty(Phaser.TilemapLayer.prototype,"collisionWidth",{get:function(){return this._mc.cw},set:function(a){this._mc.cw=a|0;this.dirty=true}});Object.defineProperty(Phaser.TilemapLayer.prototype,"collisionHeight",{get:function(){return this._mc.ch},set:function(a){this._mc.ch=a|0;this.dirty=true}});Phaser.TilemapParser={INSERT_NULL:false,parse:function(c,d,g,b,e,a){if(g===undefined){g=32}if(b===undefined){b=32}if(e===undefined){e=10}if(a===undefined){a=10}if(d===undefined){return this.getEmptyData()}if(d===null){return this.getEmptyData(g,b,e,a)}var f=c.cache.getTilemapData(d);if(f){if(f.format===Phaser.Tilemap.CSV){return this.parseCSV(d,f.data,g,b)}else{if(!f.format||f.format===Phaser.Tilemap.TILED_JSON){return this.parseTiledJSON(f.data)}}}else{console.warn("Phaser.TilemapParser.parse - No map data found for key "+d)}},parseCSV:function(j,e,i,f){var a=this.getEmptyData();e=e.trim();var c=[];var l=e.split("\n");var k=l.length;var b=0;for(var g=0;g<l.length;g++){c[g]=[];var d=l[g].split(",");for(var h=0;h<d.length;h++){c[g][h]=new Phaser.Tile(a.layers[0],parseInt(d[h],10),h,g,i,f)}if(b===0){b=d.length}}a.format=Phaser.Tilemap.CSV;a.name=j;a.width=b;a.height=k;a.tileWidth=i;a.tileHeight=f;a.widthInPixels=b*i;a.heightInPixels=k*f;a.layers[0].width=b;a.layers[0].height=k;a.layers[0].widthInPixels=a.widthInPixels;a.layers[0].heightInPixels=a.heightInPixels;a.layers[0].data=c;return a},getEmptyData:function(d,b,c,a){return{width:(c!==undefined&&c!==null)?c:0,height:(a!==undefined&&a!==null)?a:0,tileWidth:(d!==undefined&&d!==null)?d:0,tileHeight:(b!==undefined&&b!==null)?b:0,orientation:"orthogonal",version:"1",properties:{},widthInPixels:0,heightInPixels:0,layers:[{name:"layer",x:0,y:0,width:0,height:0,widthInPixels:0,heightInPixels:0,alpha:1,visible:true,properties:{},indexes:[],callbacks:[],bodies:[],data:[]}],images:[],objects:{},collision:{},tilesets:[],tiles:[]}},parseTiledJSON:function(T){if(T.orientation!=="orthogonal"){console.warn("TilemapParser.parseTiledJSON - Only orthogonal map types are supported in this version of Phaser");return null}var B={width:T.width,height:T.height,tileWidth:T.tilewidth,tileHeight:T.tileheight,orientation:T.orientation,format:Phaser.Tilemap.TILED_JSON,version:T.version,properties:T.properties,widthInPixels:T.width*T.tilewidth,heightInPixels:T.height*T.tileheight};var L=[];for(var W=0;W<T.layers.length;W++){if(T.layers[W].type!=="tilelayer"){continue}var H=T.layers[W];if(!H.compression&&H.encoding&&H.encoding==="base64"){var R=window.atob(H.data);var s=R.length;var m=new Array(s);for(var V=0;V<s;V+=4){m[V/4]=(R.charCodeAt(V)|R.charCodeAt(V+1)<<8|R.charCodeAt(V+2)<<16|R.charCodeAt(V+3)<<24)>>>0}H.data=m;delete H.encoding}else{if(H.compression){console.warn("TilemapParser.parseTiledJSON - Layer compression is unsupported, skipping layer '"+H.name+"'");continue}}var c={name:H.name,x:H.x,y:H.y,width:H.width,height:H.height,widthInPixels:H.width*T.tilewidth,heightInPixels:H.height*T.tileheight,alpha:H.opacity,visible:H.visible,properties:{},indexes:[],callbacks:[],bodies:[]};if(H.properties){c.properties=H.properties}var G=0;var o=[];var z=[];var C,n,e,J;for(var M=0,s=H.data.length;M<s;M++){C=0;n=false;J=H.data[M];e=0;if(J>536870912){if(J>2147483648){J-=2147483648;e+=4}if(J>1073741824){J-=1073741824;e+=2}if(J>536870912){J-=536870912;e+=1}switch(e){case 5:C=Math.PI/2;break;case 6:C=Math.PI;break;case 3:C=3*Math.PI/2;break;case 4:C=0;n=true;break;case 7:C=Math.PI/2;n=true;break;case 2:C=Math.PI;n=true;break;case 1:C=3*Math.PI/2;n=true;break}}if(J>0){var f=new Phaser.Tile(c,J,G,z.length,T.tilewidth,T.tileheight);f.rotation=C;f.flipped=n;if(e!==0){f.flippedVal=e}o.push(f)}else{if(Phaser.TilemapParser.INSERT_NULL){o.push(null)}else{o.push(new Phaser.Tile(c,-1,G,z.length,T.tilewidth,T.tileheight))}}G++;if(G===H.width){z.push(o);G=0;o=[]}}c.data=z;L.push(c)}B.layers=L;var b=[];for(var W=0;W<T.layers.length;W++){if(T.layers[W].type!=="imagelayer"){continue
}var N=T.layers[W];var d={name:N.name,image:N.image,x:N.x,y:N.y,alpha:N.opacity,visible:N.visible,properties:{}};if(N.properties){d.properties=N.properties}b.push(d)}B.images=b;var X=[];var u=[];var D=null;for(var W=0;W<T.tilesets.length;W++){var w=T.tilesets[W];if(w.image){var g=new Phaser.Tileset(w.name,w.firstgid,w.tilewidth,w.tileheight,w.margin,w.spacing,w.properties);if(w.tileproperties){g.tileProperties=w.tileproperties}g.updateTileData(w.imagewidth,w.imageheight);X.push(g)}else{var A=new Phaser.ImageCollection(w.name,w.firstgid,w.tilewidth,w.tileheight,w.margin,w.spacing,w.properties);for(var a in w.tiles){var d=w.tiles[a].image;var J=w.firstgid+parseInt(a,10);A.addImage(J,d)}u.push(A)}if(D){D.lastgid=w.firstgid-1}D=w}B.tilesets=X;B.imagecollections=u;var O={};var P={};function q(v,i){var p={};for(var j in i){var t=i[j];if(typeof v[t]!=="undefined"){p[t]=v[t]}}return p}for(var W=0;W<T.layers.length;W++){if(T.layers[W].type!=="objectgroup"){continue}var F=T.layers[W];O[F.name]=[];P[F.name]=[];for(var K=0,s=F.objects.length;K<s;K++){if(F.objects[K].gid){var I={gid:F.objects[K].gid,name:F.objects[K].name,type:F.objects[K].hasOwnProperty("type")?F.objects[K].type:"",x:F.objects[K].x,y:F.objects[K].y,visible:F.objects[K].visible,properties:F.objects[K].properties};if(F.objects[K].rotation){I.rotation=F.objects[K].rotation}O[F.name].push(I)}else{if(F.objects[K].polyline){var I={name:F.objects[K].name,type:F.objects[K].type,x:F.objects[K].x,y:F.objects[K].y,width:F.objects[K].width,height:F.objects[K].height,visible:F.objects[K].visible,properties:F.objects[K].properties};if(F.objects[K].rotation){I.rotation=F.objects[K].rotation}I.polyline=[];for(var S=0;S<F.objects[K].polyline.length;S++){I.polyline.push([F.objects[K].polyline[S].x,F.objects[K].polyline[S].y])}P[F.name].push(I);O[F.name].push(I)}else{if(F.objects[K].polygon){var I=q(F.objects[K],["name","type","x","y","visible","rotation","properties"]);I.polygon=[];for(var S=0;S<F.objects[K].polygon.length;S++){I.polygon.push([F.objects[K].polygon[S].x,F.objects[K].polygon[S].y])}O[F.name].push(I)}else{if(F.objects[K].ellipse){var I=q(F.objects[K],["name","type","ellipse","x","y","width","height","visible","rotation","properties"]);O[F.name].push(I)}else{var I=q(F.objects[K],["name","type","x","y","width","height","visible","rotation","properties"]);I.rectangle=true;O[F.name].push(I)}}}}}}B.objects=O;B.collision=P;B.tiles=[];for(var W=0;W<B.tilesets.length;W++){var w=B.tilesets[W];var G=w.tileMargin;var E=w.tileMargin;var Q=0;var l=0;var h=0;for(var M=w.firstgid;M<w.firstgid+w.total;M++){B.tiles[M]=[G,E,W];G+=w.tileWidth+w.tileSpacing;Q++;if(Q===w.total){break}l++;if(l===w.columns){G=w.tileMargin;E+=w.tileHeight+w.tileSpacing;l=0;h++;if(h===w.rows){break}}}}var c;var f;var r;var w;for(var W=0;W<B.layers.length;W++){c=B.layers[W];w=null;for(var V=0;V<c.data.length;V++){o=c.data[V];for(var U=0;U<o.length;U++){f=o[U];if(f===null||f.index<0){continue}r=B.tiles[f.index][2];w=B.tilesets[r];if(w.tileProperties&&w.tileProperties[f.index-w.firstgid]){f.properties=Phaser.Utils.mixin(w.tileProperties[f.index-w.firstgid],f.properties)}}}}return B}};Phaser.Tileset=function(b,f,d,a,e,g,c){if(d===undefined||d<=0){d=32}if(a===undefined||a<=0){a=32}if(e===undefined){e=0}if(g===undefined){g=0}this.name=b;this.firstgid=f|0;this.tileWidth=d|0;this.tileHeight=a|0;this.tileMargin=e|0;this.tileSpacing=g|0;this.properties=c||{};this.image=null;this.rows=0;this.columns=0;this.total=0;this.drawCoords=[]};Phaser.Tileset.prototype={draw:function(c,a,e,b){var d=(b-this.firstgid)<<1;if(d>=0&&(d+1)<this.drawCoords.length){c.drawImage(this.image,this.drawCoords[d],this.drawCoords[d+1],this.tileWidth,this.tileHeight,a,e,this.tileWidth,this.tileHeight)}},containsTileIndex:function(a){return(a>=this.firstgid&&a<(this.firstgid+this.total))},setImage:function(a){this.image=a;this.updateTileData(a.width,a.height)},setSpacing:function(a,b){this.tileMargin=a|0;this.tileSpacing=b|0;if(this.image){this.updateTileData(this.image.width,this.image.height)}},updateTileData:function(f,c){var e=(c-this.tileMargin*2+this.tileSpacing)/(this.tileHeight+this.tileSpacing);var g=(f-this.tileMargin*2+this.tileSpacing)/(this.tileWidth+this.tileSpacing);if(e%1!==0||g%1!==0){console.warn("Phaser.Tileset - "+this.name+" image tile area is not an even multiple of tile size")}e=Math.floor(e);g=Math.floor(g);if((this.rows&&this.rows!==e)||(this.columns&&this.columns!==g)){console.warn("Phaser.Tileset - actual and expected number of tile rows and columns differ")}this.rows=e;this.columns=g;this.total=e*g;this.drawCoords.length=0;var d=this.tileMargin;var b=this.tileMargin;for(var h=0;h<this.rows;h++){for(var a=0;a<this.columns;a++){this.drawCoords.push(d);this.drawCoords.push(b);d+=this.tileWidth+this.tileSpacing}d=this.tileMargin;b+=this.tileHeight+this.tileSpacing}}};Phaser.Tileset.prototype.constructor=Phaser.Tileset;Phaser.Particle=function(b,a,e,c,d){Phaser.Sprite.call(this,b,a,e,c,d);this.autoScale=false;this.scaleData=null;
	this._s=0;this.autoAlpha=false;this.alphaData=null;this._a=0};Phaser.Particle.prototype=Object.create(Phaser.Sprite.prototype);Phaser.Particle.prototype.constructor=Phaser.Particle;Phaser.Particle.prototype.update=function(){if(this.autoScale){this._s--;if(this._s){this.scale.set(this.scaleData[this._s].x,this.scaleData[this._s].y)}else{this.autoScale=false}}if(this.autoAlpha){this._a--;if(this._a){this.alpha=this.alphaData[this._a].v}else{this.autoAlpha=false}}};Phaser.Particle.prototype.onEmit=function(){};Phaser.Particle.prototype.setAlphaData=function(a){this.alphaData=a;this._a=a.length-1;this.alpha=this.alphaData[this._a].v;this.autoAlpha=true};Phaser.Particle.prototype.setScaleData=function(a){this.scaleData=a;this._s=a.length-1;this.scale.set(this.scaleData[this._s].x,this.scaleData[this._s].y);this.autoScale=true};Phaser.Particle.prototype.reset=function(a,c,b){Phaser.Component.Reset.prototype.reset.call(this,a,c,b);this.alpha=1;this.scale.set(1);this.autoScale=false;this.autoAlpha=false;return this};Phaser.Particles=function(a){this.game=a;this.emitters={};this.ID=0};Phaser.Particles.prototype={add:function(a){this.emitters[a.name]=a;return a},remove:function(a){delete this.emitters[a.name]},update:function(){for(var a in this.emitters){if(this.emitters[a].exists){this.emitters[a].update()}}}};Phaser.Particles.prototype.constructor=Phaser.Particles;Phaser.Particles.Arcade={};Phaser.Particles.Arcade.Emitter=function(b,a,d,c){this.maxParticles=c||50;Phaser.Group.call(this,b);this.name="emitter"+this.game.particles.ID++;this.type=Phaser.EMITTER;this.physicsType=Phaser.GROUP;this.area=new Phaser.Rectangle(a,d,1,1);this.minParticleSpeed=new Phaser.Point(-100,-100);this.maxParticleSpeed=new Phaser.Point(100,100);this.minParticleScale=1;this.maxParticleScale=1;this.scaleData=null;this.minRotation=-360;this.maxRotation=360;this.minParticleAlpha=1;this.maxParticleAlpha=1;this.alphaData=null;this.gravity=100;this.particleClass=Phaser.Particle;this.particleDrag=new Phaser.Point();this.angularDrag=0;this.frequency=100;this.lifespan=2000;this.bounce=new Phaser.Point();this.on=false;this.particleAnchor=new Phaser.Point(0.5,0.5);this.blendMode=Phaser.blendModes.NORMAL;this.emitX=a;this.emitY=d;this.autoScale=false;this.autoAlpha=false;this.particleBringToTop=false;this.particleSendToBack=false;this._minParticleScale=new Phaser.Point(1,1);this._maxParticleScale=new Phaser.Point(1,1);this._quantity=0;this._timer=0;this._counter=0;this._flowQuantity=0;this._flowTotal=0;this._explode=true;this._frames=null};Phaser.Particles.Arcade.Emitter.prototype=Object.create(Phaser.Group.prototype);Phaser.Particles.Arcade.Emitter.prototype.constructor=Phaser.Particles.Arcade.Emitter;Phaser.Particles.Arcade.Emitter.prototype.update=function(){if(this.on&&this.game.time.time>=this._timer){this._timer=this.game.time.time+this.frequency*this.game.time.slowMotion;if(this._flowTotal!==0){if(this._flowQuantity>0){for(var a=0;a<this._flowQuantity;a++){if(this.emitParticle()){this._counter++;if(this._flowTotal!==-1&&this._counter>=this._flowTotal){this.on=false;break}}}}else{if(this.emitParticle()){this._counter++;if(this._flowTotal!==-1&&this._counter>=this._flowTotal){this.on=false}}}}else{if(this.emitParticle()){this._counter++;if(this._quantity>0&&this._counter>=this._quantity){this.on=false}}}}var a=this.children.length;while(a--){if(this.children[a].exists){this.children[a].update()}}};Phaser.Particles.Arcade.Emitter.prototype.makeParticles=function(h,e,b,g,j){if(e===undefined){e=0}if(b===undefined){b=this.maxParticles}if(g===undefined){g=false}if(j===undefined){j=false}var d;var c=0;var a=h;var f=e;this._frames=e;if(b>this.maxParticles){this.maxParticles=b}while(c<b){if(Array.isArray(h)){a=this.game.rnd.pick(h)}if(Array.isArray(e)){f=this.game.rnd.pick(e)}d=new this.particleClass(this.game,0,0,a,f);this.game.physics.arcade.enable(d,false);if(g){d.body.checkCollision.any=true;d.body.checkCollision.none=false}else{d.body.checkCollision.none=true}d.body.collideWorldBounds=j;d.body.skipQuadTree=true;d.exists=false;d.visible=false;d.anchor.copyFrom(this.particleAnchor);this.add(d);c++}return this};Phaser.Particles.Arcade.Emitter.prototype.kill=function(){this.on=false;this.alive=false;this.exists=false;return this};Phaser.Particles.Arcade.Emitter.prototype.revive=function(){this.alive=true;this.exists=true;return this};Phaser.Particles.Arcade.Emitter.prototype.explode=function(b,a){this._flowTotal=0;this.start(true,b,0,a,false);return this};Phaser.Particles.Arcade.Emitter.prototype.flow=function(e,d,c,b,a){if(c===undefined||c===0){c=1}if(b===undefined){b=-1}if(a===undefined){a=true}if(c>this.maxParticles){c=this.maxParticles}this._counter=0;this._flowQuantity=c;this._flowTotal=b;if(a){this.start(true,e,d,c);this._counter+=c;this.on=true;this._timer=this.game.time.time+d*this.game.time.slowMotion}else{this.start(false,e,d,c)}return this};Phaser.Particles.Arcade.Emitter.prototype.start=function(c,f,e,d,a){if(c===undefined){c=true}if(f===undefined){f=0
}if(e===undefined||e===null){e=250}if(d===undefined){d=0}if(a===undefined){a=false}if(d>this.maxParticles){d=this.maxParticles}this.revive();this.visible=true;this.lifespan=f;this.frequency=e;if(c||a){for(var b=0;b<d;b++){this.emitParticle()}}else{this.on=true;this._quantity=d;this._counter=0;this._timer=this.game.time.time+e*this.game.time.slowMotion}return this};Phaser.Particles.Arcade.Emitter.prototype.emitParticle=function(h,g,i,a){if(h===undefined){h=null}if(g===undefined){g=null}var f=this.getFirstExists(false);if(f===null){return false}var b=this.game.rnd;if(i!==undefined&&a!==undefined){f.loadTexture(i,a)}else{if(i!==undefined){f.loadTexture(i)}}var d=this.emitX;var c=this.emitY;if(h!==null){d=h}else{if(this.width>1){d=b.between(this.left,this.right)}}if(g!==null){c=g}else{if(this.height>1){c=b.between(this.top,this.bottom)}}f.reset(d,c);f.angle=0;f.lifespan=this.lifespan;if(this.particleBringToTop){this.bringToTop(f)}else{if(this.particleSendToBack){this.sendToBack(f)}}if(this.autoScale){f.setScaleData(this.scaleData)}else{if(this.minParticleScale!==1||this.maxParticleScale!==1){f.scale.set(b.realInRange(this.minParticleScale,this.maxParticleScale))}else{if((this._minParticleScale.x!==this._maxParticleScale.x)||(this._minParticleScale.y!==this._maxParticleScale.y)){f.scale.set(b.realInRange(this._minParticleScale.x,this._maxParticleScale.x),b.realInRange(this._minParticleScale.y,this._maxParticleScale.y))}}}if(a===undefined){if(Array.isArray(this._frames)){f.frame=this.game.rnd.pick(this._frames)}else{f.frame=this._frames}}if(this.autoAlpha){f.setAlphaData(this.alphaData)}else{f.alpha=b.realInRange(this.minParticleAlpha,this.maxParticleAlpha)}f.blendMode=this.blendMode;var e=f.body;e.updateBounds();e.bounce.copyFrom(this.bounce);e.drag.copyFrom(this.particleDrag);e.velocity.x=b.between(this.minParticleSpeed.x,this.maxParticleSpeed.x);e.velocity.y=b.between(this.minParticleSpeed.y,this.maxParticleSpeed.y);e.angularVelocity=b.between(this.minRotation,this.maxRotation);e.gravity.y=this.gravity;e.angularDrag=this.angularDrag;f.onEmit();return true};Phaser.Particles.Arcade.Emitter.prototype.destroy=function(){this.game.particles.remove(this);Phaser.Group.prototype.destroy.call(this,true,false)};Phaser.Particles.Arcade.Emitter.prototype.setSize=function(b,a){this.area.width=b;this.area.height=a;return this};Phaser.Particles.Arcade.Emitter.prototype.setXSpeed=function(b,a){b=b||0;a=a||0;this.minParticleSpeed.x=b;this.maxParticleSpeed.x=a;return this};Phaser.Particles.Arcade.Emitter.prototype.setYSpeed=function(b,a){b=b||0;a=a||0;this.minParticleSpeed.y=b;this.maxParticleSpeed.y=a;return this};Phaser.Particles.Arcade.Emitter.prototype.setRotation=function(b,a){b=b||0;a=a||0;this.minRotation=b;this.maxRotation=a;return this};Phaser.Particles.Arcade.Emitter.prototype.setAlpha=function(d,a,f,g,e){if(d===undefined){d=1}if(a===undefined){a=1}if(f===undefined){f=0}if(g===undefined){g=Phaser.Easing.Linear.None}if(e===undefined){e=false}this.minParticleAlpha=d;this.maxParticleAlpha=a;this.autoAlpha=false;if(f>0&&d!==a){var b={v:d};var c=this.game.make.tween(b).to({v:a},f,g);c.yoyo(e);this.alphaData=c.generateData(60);this.alphaData.reverse();this.autoAlpha=true}return this};Phaser.Particles.Arcade.Emitter.prototype.setScale=function(d,b,c,a,f,e,g){if(d===undefined){d=1}if(b===undefined){b=1}if(c===undefined){c=1}if(a===undefined){a=1}if(f===undefined){f=0}if(e===undefined){e=Phaser.Easing.Linear.None}if(g===undefined){g=false}this.minParticleScale=1;this.maxParticleScale=1;this._minParticleScale.set(d,c);this._maxParticleScale.set(b,a);this.autoScale=false;if(f>0&&((d!==b)||(c!==a))){var i={x:d,y:c};var h=this.game.make.tween(i).to({x:b,y:a},f,e);h.yoyo(g);this.scaleData=h.generateData(60);this.scaleData.reverse();this.autoScale=true}return this};Phaser.Particles.Arcade.Emitter.prototype.at=function(a){if(a.center){this.emitX=a.center.x;this.emitY=a.center.y}else{this.emitX=a.world.x+(a.anchor.x*a.width);this.emitY=a.world.y+(a.anchor.y*a.height)}return this};Object.defineProperty(Phaser.Particles.Arcade.Emitter.prototype,"width",{get:function(){return this.area.width},set:function(a){this.area.width=a}});Object.defineProperty(Phaser.Particles.Arcade.Emitter.prototype,"height",{get:function(){return this.area.height},set:function(a){this.area.height=a}});Object.defineProperty(Phaser.Particles.Arcade.Emitter.prototype,"x",{get:function(){return this.emitX},set:function(a){this.emitX=a}});Object.defineProperty(Phaser.Particles.Arcade.Emitter.prototype,"y",{get:function(){return this.emitY},set:function(a){this.emitY=a}});Object.defineProperty(Phaser.Particles.Arcade.Emitter.prototype,"left",{get:function(){return Math.floor(this.x-(this.area.width/2))}});Object.defineProperty(Phaser.Particles.Arcade.Emitter.prototype,"right",{get:function(){return Math.floor(this.x+(this.area.width/2))}});Object.defineProperty(Phaser.Particles.Arcade.Emitter.prototype,"top",{get:function(){return Math.floor(this.y-(this.area.height/2))
}});Object.defineProperty(Phaser.Particles.Arcade.Emitter.prototype,"bottom",{get:function(){return Math.floor(this.y+(this.area.height/2))}});Phaser.Weapon=function(a,b){Phaser.Plugin.call(this,a,b);this.bullets=null;this.autoExpandBulletsGroup=false;this.autofire=false;this.shots=0;this.fireLimit=0;this.fireRate=100;this.fireRateVariance=0;this.fireFrom=new Phaser.Rectangle(0,0,1,1);this.fireAngle=Phaser.ANGLE_UP;this.bulletInheritSpriteSpeed=false;this.bulletAnimation="";this.bulletFrameRandom=false;this.bulletFrameCycle=false;this.bulletWorldWrap=false;this.bulletWorldWrapPadding=0;this.bulletAngleOffset=0;this.bulletAngleVariance=0;this.bulletSpeed=200;this.bulletSpeedVariance=0;this.bulletLifespan=0;this.bulletKillDistance=0;this.bulletGravity=new Phaser.Point(0,0);this.bulletRotateToVelocity=false;this.bulletKey="";this.bulletFrame="";this._bulletClass=Phaser.Bullet;this._bulletCollideWorldBounds=false;this._bulletKillType=Phaser.Weapon.KILL_WORLD_BOUNDS;this._data={customBody:false,width:0,height:0,offsetX:0,offsetY:0};this.bounds=new Phaser.Rectangle();this.bulletBounds=a.world.bounds;this.bulletFrames=[];this.bulletFrameIndex=0;this.anims={};this.onFire=new Phaser.Signal();this.onKill=new Phaser.Signal();this.onFireLimit=new Phaser.Signal();this.trackedSprite=null;this.trackedPointer=null;this.trackRotation=false;this.trackOffset=new Phaser.Point();this._nextFire=0;this._rotatedPoint=new Phaser.Point()};Phaser.Weapon.prototype=Object.create(Phaser.Plugin.prototype);Phaser.Weapon.prototype.constructor=Phaser.Weapon;Phaser.Weapon.KILL_NEVER=0;Phaser.Weapon.KILL_LIFESPAN=1;Phaser.Weapon.KILL_DISTANCE=2;Phaser.Weapon.KILL_WEAPON_BOUNDS=3;Phaser.Weapon.KILL_CAMERA_BOUNDS=4;Phaser.Weapon.KILL_WORLD_BOUNDS=5;Phaser.Weapon.KILL_STATIC_BOUNDS=6;Phaser.Weapon.prototype.createBullets=function(c,a,d,b){if(c===undefined){c=1}if(b===undefined){b=this.game.world}if(!this.bullets){this.bullets=this.game.add.physicsGroup(Phaser.Physics.ARCADE,b);this.bullets.classType=this._bulletClass}if(c!==0){if(c===-1){this.autoExpandBulletsGroup=true;c=1}this.bullets.createMultiple(c,a,d);this.bullets.setAll("data.bulletManager",this);this.bulletKey=a;this.bulletFrame=d}return this};Phaser.Weapon.prototype.forEach=function(b,a){this.bullets.forEachExists(b,a,arguments);return this};Phaser.Weapon.prototype.pauseAll=function(){this.bullets.setAll("body.enable",false);return this};Phaser.Weapon.prototype.resumeAll=function(){this.bullets.setAll("body.enable",true);return this};Phaser.Weapon.prototype.killAll=function(){this.bullets.callAllExists("kill",true);this.bullets.setAll("body.enable",true);return this};Phaser.Weapon.prototype.resetShots=function(a){this.shots=0;if(a!==undefined){this.fireLimit=a}return this};Phaser.Weapon.prototype.destroy=function(){this.parent.remove(this,false);this.bullets.destroy();this.game=null;this.parent=null;this.active=false;this.visible=false};Phaser.Weapon.prototype.update=function(){if(this._bulletKillType===Phaser.Weapon.KILL_WEAPON_BOUNDS){if(this.trackedSprite){this.trackedSprite.updateTransform();this.bounds.centerOn(this.trackedSprite.worldPosition.x,this.trackedSprite.worldPosition.y)}else{if(this.trackedPointer){this.bounds.centerOn(this.trackedPointer.worldX,this.trackedPointer.worldY)}}}if(this.autofire){this.fire()}};Phaser.Weapon.prototype.trackSprite=function(c,a,d,b){if(a===undefined){a=0}if(d===undefined){d=0}if(b===undefined){b=false}this.trackedPointer=null;this.trackedSprite=c;this.trackRotation=b;this.trackOffset.set(a,d);return this};Phaser.Weapon.prototype.trackPointer=function(b,a,c){if(b===undefined){b=this.game.input.activePointer}if(a===undefined){a=0}if(c===undefined){c=0}this.trackedPointer=b;this.trackedSprite=null;this.trackRotation=false;this.trackOffset.set(a,c);return this};Phaser.Weapon.prototype.fire=function(l,k,h){if(this.game.time.now<this._nextFire||(this.fireLimit>0&&this.shots===this.fireLimit)){return false}var c=this.bulletSpeed;if(this.bulletSpeedVariance!==0){c+=Phaser.Math.between(-this.bulletSpeedVariance,this.bulletSpeedVariance)}if(l){if(this.fireFrom.width>1){this.fireFrom.centerOn(l.x,l.y)}else{this.fireFrom.x=l.x;this.fireFrom.y=l.y}}else{if(this.trackedSprite){if(this.trackRotation){this._rotatedPoint.set(this.trackedSprite.world.x+this.trackOffset.x,this.trackedSprite.world.y+this.trackOffset.y);this._rotatedPoint.rotate(this.trackedSprite.world.x,this.trackedSprite.world.y,this.trackedSprite.rotation);if(this.fireFrom.width>1){this.fireFrom.centerOn(this._rotatedPoint.x,this._rotatedPoint.y)}else{this.fireFrom.x=this._rotatedPoint.x;this.fireFrom.y=this._rotatedPoint.y}}else{if(this.fireFrom.width>1){this.fireFrom.centerOn(this.trackedSprite.world.x+this.trackOffset.x,this.trackedSprite.world.y+this.trackOffset.y)}else{this.fireFrom.x=this.trackedSprite.world.x+this.trackOffset.x;this.fireFrom.y=this.trackedSprite.world.y+this.trackOffset.y}}if(this.bulletInheritSpriteSpeed){c+=this.trackedSprite.body.speed}}else{if(this.trackedPointer){if(this.fireFrom.width>1){this.fireFrom.centerOn(this.trackedPointer.world.x+this.trackOffset.x,this.trackedPointer.world.y+this.trackOffset.y)
}else{this.fireFrom.x=this.trackedPointer.world.x+this.trackOffset.x;this.fireFrom.y=this.trackedPointer.world.y+this.trackOffset.y}}}}var j=(this.fireFrom.width>1)?this.fireFrom.randomX:this.fireFrom.x;var i=(this.fireFrom.height>1)?this.fireFrom.randomY:this.fireFrom.y;var e=(this.trackRotation)?this.trackedSprite.angle:this.fireAngle;if(k!==undefined&&h!==undefined){e=this.game.math.radToDeg(Math.atan2(h-i,k-j))}if(this.bulletAngleVariance!==0){e+=Phaser.Math.between(-this.bulletAngleVariance,this.bulletAngleVariance)}var d=0;var b=0;if(e===0||e===180){d=Math.cos(this.game.math.degToRad(e))*c}else{if(e===90||e===270){b=Math.sin(this.game.math.degToRad(e))*c}else{d=Math.cos(this.game.math.degToRad(e))*c;b=Math.sin(this.game.math.degToRad(e))*c}}var a=null;if(this.autoExpandBulletsGroup){a=this.bullets.getFirstExists(false,true,j,i,this.bulletKey,this.bulletFrame);a.data.bulletManager=this}else{a=this.bullets.getFirstExists(false)}if(a){a.reset(j,i);a.data.fromX=j;a.data.fromY=i;a.data.killType=this.bulletKillType;a.data.killDistance=this.bulletKillDistance;a.data.rotateToVelocity=this.bulletRotateToVelocity;if(this.bulletKillType===Phaser.Weapon.KILL_LIFESPAN){a.lifespan=this.bulletLifespan}a.angle=e+this.bulletAngleOffset;if(this.bulletAnimation!==""){if(a.animations.getAnimation(this.bulletAnimation)===null){var f=this.anims[this.bulletAnimation];a.animations.add(f.name,f.frames,f.frameRate,f.loop,f.useNumericIndex)}a.animations.play(this.bulletAnimation)}else{if(this.bulletFrameCycle){a.frame=this.bulletFrames[this.bulletFrameIndex];this.bulletFrameIndex++;if(this.bulletFrameIndex>=this.bulletFrames.length){this.bulletFrameIndex=0}}else{if(this.bulletFrameRandom){a.frame=this.bulletFrames[Math.floor(Math.random()*this.bulletFrames.length)]}}}if(a.data.bodyDirty){if(this._data.customBody){a.body.setSize(this._data.width,this._data.height,this._data.offsetX,this._data.offsetY)}a.body.collideWorldBounds=this.bulletCollideWorldBounds;a.data.bodyDirty=false}a.body.velocity.set(d,b);a.body.gravity.set(this.bulletGravity.x,this.bulletGravity.y);if(this.bulletSpeedVariance!==0){var g=this.fireRate;g+=Phaser.Math.between(-this.fireRateVariance,this.fireRateVariance);if(g<0){g=0}this._nextFire=this.game.time.now+g}else{this._nextFire=this.game.time.now+this.fireRate}this.shots++;this.onFire.dispatch(a,this,c);if(this.fireLimit>0&&this.shots===this.fireLimit){this.onFireLimit.dispatch(this,this.fireLimit)}}return a};Phaser.Weapon.prototype.fireAtPointer=function(a){if(a===undefined){a=this.game.input.activePointer}return this.fire(null,a.worldX,a.worldY)};Phaser.Weapon.prototype.fireAtSprite=function(a){return this.fire(null,a.world.x,a.world.y)};Phaser.Weapon.prototype.fireAtXY=function(a,b){return this.fire(null,a,b)};Phaser.Weapon.prototype.setBulletBodyOffset=function(c,b,a,d){if(a===undefined){a=0}if(d===undefined){d=0}this._data.customBody=true;this._data.width=c;this._data.height=b;this._data.offsetX=a;this._data.offsetY=d;this.bullets.callAll("body.setSize","body",c,b,a,d);this.bullets.setAll("data.bodyDirty",false);return this};Phaser.Weapon.prototype.setBulletFrames=function(c,a,b,d){if(b===undefined){b=true}if(d===undefined){d=false}this.bulletFrames=Phaser.ArrayUtils.numberArray(c,a);this.bulletFrameIndex=0;this.bulletFrameCycle=b;this.bulletFrameRandom=d;return this};Phaser.Weapon.prototype.addBulletAnimation=function(d,e,c,b,a){this.anims[d]={name:d,frames:e,frameRate:c,loop:b,useNumericIndex:a};this.bullets.callAll("animations.add","animations",d,e,c,b,a);this.bulletAnimation=d;return this};Phaser.Weapon.prototype.debug=function(a,c,b){if(a===undefined){a=16}if(c===undefined){c=32}if(b===undefined){b=false}this.game.debug.text("Weapon Plugin",a,c);this.game.debug.text("Bullets Alive: "+this.bullets.total+" - Total: "+this.bullets.length,a,c+24);if(b){this.bullets.forEachExists(this.game.debug.body,this.game.debug,"rgba(255, 0, 255, 0.8)")}};Object.defineProperty(Phaser.Weapon.prototype,"bulletClass",{get:function(){return this._bulletClass},set:function(a){this._bulletClass=a;this.bullets.classType=this._bulletClass}});Object.defineProperty(Phaser.Weapon.prototype,"bulletKillType",{get:function(){return this._bulletKillType},set:function(a){switch(a){case Phaser.Weapon.KILL_STATIC_BOUNDS:case Phaser.Weapon.KILL_WEAPON_BOUNDS:this.bulletBounds=this.bounds;break;case Phaser.Weapon.KILL_CAMERA_BOUNDS:this.bulletBounds=this.game.camera.view;break;case Phaser.Weapon.KILL_WORLD_BOUNDS:this.bulletBounds=this.game.world.bounds;break}this._bulletKillType=a}});Object.defineProperty(Phaser.Weapon.prototype,"bulletCollideWorldBounds",{get:function(){return this._bulletCollideWorldBounds},set:function(a){this._bulletCollideWorldBounds=a;this.bullets.setAll("body.collideWorldBounds",a);this.bullets.setAll("data.bodyDirty",false)}});Object.defineProperty(Phaser.Weapon.prototype,"x",{get:function(){return this.fireFrom.x},set:function(a){this.fireFrom.x=a}});Object.defineProperty(Phaser.Weapon.prototype,"y",{get:function(){return this.fireFrom.y
},set:function(a){this.fireFrom.y=a}});Phaser.Bullet=function(b,a,e,c,d){Phaser.Sprite.call(this,b,a,e,c,d);this.anchor.set(0.5);this.data={bulletManager:null,fromX:0,fromY:0,bodyDirty:true,rotateToVelocity:false,killType:0,killDistance:0}};Phaser.Bullet.prototype=Object.create(Phaser.Sprite.prototype);Phaser.Bullet.prototype.constructor=Phaser.Bullet;Phaser.Bullet.prototype.kill=function(){this.alive=false;this.exists=false;this.visible=false;this.data.bulletManager.onKill.dispatch(this);return this};Phaser.Bullet.prototype.update=function(){if(!this.exists){return}if(this.data.killType>Phaser.Weapon.KILL_LIFESPAN){if(this.data.killType===Phaser.Weapon.KILL_DISTANCE){if(this.game.physics.arcade.distanceToXY(this,this.data.fromX,this.data.fromY,true)>this.data.killDistance){this.kill()}}else{if(!this.data.bulletManager.bulletBounds.intersects(this)){this.kill()}}}if(this.data.rotateToVelocity){this.rotation=Math.atan2(this.body.velocity.y,this.body.velocity.x)}if(this.data.bulletManager.bulletWorldWrap){this.game.world.wrap(this,this.data.bulletManager.bulletWorldWrapPadding)}};Phaser.Video=function(b,d,c){if(d===undefined){d=null}if(c===undefined){c=null}this.game=b;this.key=d;this.width=0;this.height=0;this.type=Phaser.VIDEO;this.disableTextureUpload=false;this.touchLocked=false;this.onPlay=new Phaser.Signal();this.onChangeSource=new Phaser.Signal();this.onComplete=new Phaser.Signal();this.onAccess=new Phaser.Signal();this.onError=new Phaser.Signal();this.onTimeout=new Phaser.Signal();this.timeout=15000;this._timeOutID=null;this.video=null;this.videoStream=null;this.isStreaming=false;this.retryLimit=20;this.retry=0;this.retryInterval=500;this._retryID=null;this._codeMuted=false;this._muted=false;this._codePaused=false;this._paused=false;this._pending=false;this._autoplay=false;this._endCallback=null;this._playCallback=null;if(d&&this.game.cache.checkVideoKey(d)){var a=this.game.cache.getVideo(d);if(a.isBlob){this.createVideoFromBlob(a.data)}else{this.video=a.data}this.width=this.video.videoWidth;this.height=this.video.videoHeight}else{if(c){this.createVideoFromURL(c,false)}}if(this.video&&!c){this.baseTexture=new PIXI.BaseTexture(this.video);this.baseTexture.forceLoaded(this.width,this.height)}else{this.baseTexture=new PIXI.BaseTexture(Phaser.Cache.DEFAULT.baseTexture.source);this.baseTexture.forceLoaded(this.width,this.height)}this.texture=new PIXI.Texture(this.baseTexture);this.textureFrame=new Phaser.Frame(0,0,0,this.width,this.height,"video");this.texture.setFrame(this.textureFrame);this.texture.valid=false;if(d!==null&&this.video){this.texture.valid=this.video.canplay}this.snapshot=null;if(Phaser.BitmapData){this.snapshot=new Phaser.BitmapData(this.game,"",this.width,this.height)}if(!this.game.device.cocoonJS&&(this.game.device.iOS||this.game.device.android)||(window["PhaserGlobal"]&&window["PhaserGlobal"].fakeiOSTouchLock)){this.setTouchLock()}else{if(a){a.locked=false}}};Phaser.Video.prototype={connectToMediaStream:function(a,b){if(a&&b){this.video=a;this.videoStream=b;this.isStreaming=true;this.baseTexture.source=this.video;this.updateTexture(null,this.video.videoWidth,this.video.videoHeight);this.onAccess.dispatch(this)}return this},startMediaStream:function(d,c,a){if(d===undefined){d=false}if(c===undefined){c=null}if(a===undefined){a=null}if(!this.game.device.getUserMedia){this.onError.dispatch(this,"No getUserMedia");return false}if(this.videoStream!==null){if(this.videoStream["active"]){this.videoStream.active=false}else{this.videoStream.stop()}}this.removeVideoElement();this.video=document.createElement("video");this.video.setAttribute("autoplay","autoplay");if(c!==null){this.video.width=c}if(a!==null){this.video.height=a}this._timeOutID=window.setTimeout(this.getUserMediaTimeout.bind(this),this.timeout);try{navigator.getUserMedia({"audio":d,"video":true},this.getUserMediaSuccess.bind(this),this.getUserMediaError.bind(this))}catch(b){this.getUserMediaError(b)}return this},getUserMediaTimeout:function(){clearTimeout(this._timeOutID);this.onTimeout.dispatch(this)},getUserMediaError:function(a){clearTimeout(this._timeOutID);this.onError.dispatch(this,a)},getUserMediaSuccess:function(b){clearTimeout(this._timeOutID);this.videoStream=b;if(this.video.mozSrcObject!==undefined){this.video.mozSrcObject=b}else{this.video.src=(window.URL&&window.URL.createObjectURL(b))||b}var a=this;this.video.onloadeddata=function(){var c=10;function d(){if(c>0){if(a.video.videoWidth>0){var f=a.video.videoWidth;var e=a.video.videoHeight;if(isNaN(a.video.videoHeight)){e=f/(4/3)}a.video.play();a.isStreaming=true;a.baseTexture.source=a.video;a.updateTexture(null,f,e);a.onAccess.dispatch(a)}else{window.setTimeout(d,500)}}else{console.warn("Unable to connect to video stream. Webcam error?")}c--}d()}},createVideoFromBlob:function(a){var b=this;this.video=document.createElement("video");this.video.controls=false;this.video.setAttribute("autoplay","autoplay");this.video.addEventListener("loadeddata",function(c){b.updateTexture(c)
},true);this.video.src=window.URL.createObjectURL(a);this.video.canplay=true;return this},createVideoFromURL:function(a,b){if(b===undefined){b=false}if(this.texture){this.texture.valid=false}this.video=document.createElement("video");this.video.controls=false;if(b){this.video.setAttribute("autoplay","autoplay")}this.video.src=a;this.video.canplay=true;this.video.load();this.retry=this.retryLimit;this._retryID=window.setTimeout(this.checkVideoProgress.bind(this),this.retryInterval);this.key=a;return this},updateTexture:function(c,b,a){var d=false;if(b===undefined||b===null){b=this.video.videoWidth;d=true}if(a===undefined||a===null){a=this.video.videoHeight}this.width=b;this.height=a;if(this.baseTexture.source!==this.video){this.baseTexture.source=this.video}this.baseTexture.forceLoaded(b,a);this.texture.frame.resize(b,a);this.texture.width=b;this.texture.height=a;this.texture.valid=true;if(this.snapshot){this.snapshot.resize(b,a)}if(d&&this.key!==null){this.onChangeSource.dispatch(this,b,a);if(this._autoplay){this.video.play();this.onPlay.dispatch(this,this.loop,this.playbackRate)}}},complete:function(){this.onComplete.dispatch(this)},play:function(a,b){if(a===undefined){a=false}if(b===undefined){b=1}if(this.game.sound.onMute){this.game.sound.onMute.add(this.setMute,this);this.game.sound.onUnMute.add(this.unsetMute,this);if(this.game.sound.mute){this.setMute()}}this.game.onPause.add(this.setPause,this);this.game.onResume.add(this.setResume,this);this._endCallback=this.complete.bind(this);this.video.addEventListener("ended",this._endCallback,true);this.video.addEventListener("webkitendfullscreen",this._endCallback,true);if(a){this.video.loop="loop"}else{this.video.loop=""}this.video.playbackRate=b;if(this.touchLocked){this._pending=true}else{this._pending=false;if(this.key!==null){if(this.video.readyState!==4){this.retry=this.retryLimit;this._retryID=window.setTimeout(this.checkVideoProgress.bind(this),this.retryInterval)}else{this._playCallback=this.playHandler.bind(this);this.video.addEventListener("playing",this._playCallback,true)}}this.video.play();this.onPlay.dispatch(this,a,b)}return this},playHandler:function(){this.video.removeEventListener("playing",this._playCallback,true);this.updateTexture()},stop:function(){if(this.game.sound.onMute){this.game.sound.onMute.remove(this.setMute,this);this.game.sound.onUnMute.remove(this.unsetMute,this)}this.game.onPause.remove(this.setPause,this);this.game.onResume.remove(this.setResume,this);if(this.isStreaming){if(this.video.mozSrcObject){this.video.mozSrcObject.stop();this.video.src=null}else{this.video.src="";if(this.videoStream["active"]){this.videoStream.active=false}else{if(this.videoStream.getTracks){this.videoStream.getTracks().forEach(function(a){a.stop()})}else{this.videoStream.stop()}}}this.videoStream=null;this.isStreaming=false}else{this.video.removeEventListener("ended",this._endCallback,true);this.video.removeEventListener("webkitendfullscreen",this._endCallback,true);this.video.removeEventListener("playing",this._playCallback,true);if(this.touchLocked){this._pending=false}else{this.video.pause()}}return this},add:function(a){if(Array.isArray(a)){for(var b=0;b<a.length;b++){if(a[b]["loadTexture"]){a[b].loadTexture(this)}}}else{a.loadTexture(this)}return this},addToWorld:function(b,g,a,f,d,c){d=d||1;c=c||1;var e=this.game.add.image(b,g,this);e.anchor.set(a,f);e.scale.set(d,c);return e},render:function(){if(!this.disableTextureUpload&&this.playing){this.baseTexture.dirty()}},setMute:function(){if(this._muted){return}this._muted=true;this.video.muted=true},unsetMute:function(){if(!this._muted||this._codeMuted){return}this._muted=false;this.video.muted=false},setPause:function(){if(this._paused||this.touchLocked){return}this._paused=true;this.video.pause()},setResume:function(){if(!this._paused||this._codePaused||this.touchLocked){return}this._paused=false;if(!this.video.ended){this.video.play()}},changeSource:function(b,a){if(a===undefined){a=true}this.texture.valid=false;this.video.pause();this.retry=this.retryLimit;this._retryID=window.setTimeout(this.checkVideoProgress.bind(this),this.retryInterval);this.video.src=b;this.video.load();this._autoplay=a;if(!a){this.paused=true}return this},checkVideoProgress:function(){if(this.video.readyState===4){this.updateTexture()}else{this.retry--;if(this.retry>0){this._retryID=window.setTimeout(this.checkVideoProgress.bind(this),this.retryInterval)}else{console.warn("Phaser.Video: Unable to start downloading video in time",this.isStreaming)}}},setTouchLock:function(){this.game.input.touch.addTouchLockCallback(this.unlock,this);this.touchLocked=true},unlock:function(){this.touchLocked=false;this.video.play();this.onPlay.dispatch(this,this.loop,this.playbackRate);if(this.key){var a=this.game.cache.getVideo(this.key);if(a&&!a.isBlob){a.locked=false}}return true},grab:function(a,c,b){if(a===undefined){a=false}if(c===undefined){c=1}if(b===undefined){b=null}if(this.snapshot===null){console.warn("Video.grab cannot run because Phaser.BitmapData is unavailable");
	return}if(a){this.snapshot.cls()}this.snapshot.copy(this.video,0,0,this.width,this.height,0,0,this.width,this.height,0,0,0,1,1,c,b);return this.snapshot},removeVideoElement:function(){if(!this.video){return}if(this.video.parentNode){this.video.parentNode.removeChild(this.video)}while(this.video.hasChildNodes()){this.video.removeChild(this.video.firstChild)}this.video.removeAttribute("autoplay");this.video.removeAttribute("src");this.video=null},destroy:function(){this.stop();this.removeVideoElement();if(this.touchLocked){this.game.input.touch.removeTouchLockCallback(this.unlock,this)}if(this._retryID){window.clearTimeout(this._retryID)}}};Object.defineProperty(Phaser.Video.prototype,"currentTime",{get:function(){return(this.video)?this.video.currentTime:0},set:function(a){this.video.currentTime=a}});Object.defineProperty(Phaser.Video.prototype,"duration",{get:function(){return(this.video)?this.video.duration:0}});Object.defineProperty(Phaser.Video.prototype,"progress",{get:function(){return(this.video)?(this.video.currentTime/this.video.duration):0}});Object.defineProperty(Phaser.Video.prototype,"mute",{get:function(){return this._muted},set:function(a){a=a||null;if(a){if(this._muted){return}this._codeMuted=true;this.setMute()}else{if(!this._muted){return}this._codeMuted=false;this.unsetMute()}}});Object.defineProperty(Phaser.Video.prototype,"paused",{get:function(){return this._paused},set:function(a){a=a||null;if(this.touchLocked){return}if(a){if(this._paused){return}this._codePaused=true;this.setPause()}else{if(!this._paused){return}this._codePaused=false;this.setResume()}}});Object.defineProperty(Phaser.Video.prototype,"volume",{get:function(){return(this.video)?this.video.volume:1},set:function(a){if(a<0){a=0}else{if(a>1){a=1}}if(this.video){this.video.volume=a}}});Object.defineProperty(Phaser.Video.prototype,"playbackRate",{get:function(){return(this.video)?this.video.playbackRate:1},set:function(a){if(this.video){this.video.playbackRate=a}}});Object.defineProperty(Phaser.Video.prototype,"loop",{get:function(){return(this.video)?this.video.loop:false},set:function(a){if(a&&this.video){this.video.loop="loop"}else{if(this.video){this.video.loop=""}}}});Object.defineProperty(Phaser.Video.prototype,"playing",{get:function(){return !(this.video.paused&&this.video.ended)}});Phaser.Video.prototype.constructor=Phaser.Video;if(PIXI.blendModes===undefined){PIXI.blendModes=Phaser.blendModes}if(PIXI.scaleModes===undefined){PIXI.scaleModes=Phaser.scaleModes}if(PIXI.Texture.emptyTexture===undefined){PIXI.Texture.emptyTexture=new PIXI.Texture(new PIXI.BaseTexture())}if(PIXI.DisplayObject._tempMatrix===undefined){PIXI.DisplayObject._tempMatrix=new PIXI.Matrix()}if(PIXI.RenderTexture.tempMatrix===undefined){PIXI.RenderTexture.tempMatrix=new PIXI.Matrix()}if(PIXI.Graphics&&PIXI.Graphics.POLY===undefined){PIXI.Graphics.POLY=Phaser.POLYGON;PIXI.Graphics.RECT=Phaser.RECTANGLE;PIXI.Graphics.CIRC=Phaser.CIRCLE;PIXI.Graphics.ELIP=Phaser.ELLIPSE;PIXI.Graphics.RREC=Phaser.ROUNDEDRECTANGLE}PIXI.TextureSilentFail=true;module.exports=Phaser;